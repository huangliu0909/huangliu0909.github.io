<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CS5340 Lab2 report1</title>
    <url>/2020/09/25/CS5340%20Lab2%20report1/</url>
    <content><![CDATA[<h2 id="get-jt-clique-and-edges"><a href="#get-jt-clique-and-edges" class="headerlink" title="_get_jt_clique_and_edges()"></a>_get_jt_clique_and_edges()</h2><p>Create a graph G using nx.Graph() and add nodes and edges to it using the input and edges. Using a helper function <strong>undirected_graph_eliminate()</strong> to get the reconstituted graph, and use nx.find_cliques() to get the jt_cliques in this graph. Create a clique graph G_c using the jt_cliques, set the sepsetsâ€™ size as edgesâ€™ weights. Get G_câ€™s maximum spanning tree and assign this treeâ€™s edges as jt_edges.<br><a id="more"></a></p>
<h2 id="get-clique-factors"><a href="#get-clique-factors" class="headerlink" title="_get_clique_factors()"></a>_get_clique_factors()</h2><p>Initialize a Factor() for all cliques in jt_cliques. For each clique, for each factor, if a factorâ€™s variables are subset of this clique and this factor has not been assigned to another clique, assign it to this clique.</p>
<h2 id="get-clique-potentials"><a href="#get-clique-potentials" class="headerlink" title="_get_clique_potentials()"></a>_get_clique_potentials()</h2><p>Use the helper functions <strong>N()</strong> to find one nodeâ€™s neighbors, use <strong>collect()</strong> and <strong>distribute()</strong> to do the inward and outward message transferring the message using the function <strong>send_message()</strong>. For each clique, multiply its factor with all messages from its neighbors and get its clique_potential.</p>
<h2 id="get-node-marginal-probabilities"><a href="#get-node-marginal-probabilities" class="headerlink" title="_get_node_marginal_probabilities()"></a>_get_node_marginal_probabilities()</h2><p>For each clique, normalize its potentialâ€™s values. To retrieve marginal probabilities for all query nodes in the graph. For each node in the query nodes, <strong>find the clique containing this node with the minimum size(number of variables in this clique)</strong>, marginalize out all the other nodes in this minimum clique and then get the marginal_probability of this node.</p>
<h2 id="update-mrf-w-evidence"><a href="#update-mrf-w-evidence" class="headerlink" title="_update_mrf_w_evidence()"></a>_update_mrf_w_evidence()</h2><p>Return the query node lists with all nodes except the keys in evidence. Use factor_evidence() to update factors with evidence.</p>
]]></content>
  </entry>
  <entry>
    <title>CNN</title>
    <url>/2020/07/11/CNN/</url>
    <content><![CDATA[<h2 id="å·ç§¯è¿ç®—çš„å®šä¹‰"><a href="#å·ç§¯è¿ç®—çš„å®šä¹‰" class="headerlink" title="å·ç§¯è¿ç®—çš„å®šä¹‰"></a>å·ç§¯è¿ç®—çš„å®šä¹‰</h2><p>å·ç§¯æ˜¯å¯¹ä¸¤ä¸ªå®å˜å‡½æ•°çš„ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¿ç®—ï¼Œæ»¡è¶³äº¤æ¢å¾‹å’Œç»“åˆå¾‹ã€‚è¿ç»­å½¢å¼å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">s(t)=âˆ«x(a)w(t-a)da</script><p>å…¶ä¸­x(Â·)æ˜¯è¾“å…¥ä¿¡å·å¼ºåº¦(input)ï¼Œw(Â·)æ˜¯æƒé‡ï¼Œä¹Ÿç§°ä½œæ ¸å‡½æ•°(kernel function)ã€‚<a id="more"></a><br>ç¦»æ•£å½¢å¼å¦‚ä¸‹ï¼ˆ$da=1$ï¼‰ï¼š</p>
<script type="math/tex; mode=display">s(t)=Î£x(a)w(t-a)</script><p>å·ç§¯è¿ç®—å¯ä»¥ç”¨æ˜Ÿå·è¡¨ç¤ºï¼š</p>
<script type="math/tex; mode=display">s(t)=(x*w)(t)</script><p>å·ç§¯æ“ä½œçš„å®é™…å«ä¹‰æ˜¯å¯¹è¾“å…¥ä¿¡å·çš„æ¯ä¸ªä½ç½®è¿›è¡ŒåŠ æƒå¾—åˆ°å¯¹æŸä¸ªå‚æ•°çš„ä¼°è®¡ï¼Œå…¶è¾“å‡ºè¢«ç§°ä½œç‰¹å¾æ˜ å°„(feature map)ã€‚<br>ä½¿ç”¨ä¸€å¼ äºŒç»´å›¾åƒ$I$è¿›è¡Œè¾“å…¥ï¼Œä½¿ç”¨ä¸€ä¸ªäºŒç»´çš„æ ¸$K$ï¼š</p>
<h2 id="ç¨€ç–äº¤äº’ï¼Œæ„Ÿå—é‡ï¼Œå‚æ•°å…±äº«ï¼Œç­‰å˜è¡¨ç¤º"><a href="#ç¨€ç–äº¤äº’ï¼Œæ„Ÿå—é‡ï¼Œå‚æ•°å…±äº«ï¼Œç­‰å˜è¡¨ç¤º" class="headerlink" title="ç¨€ç–äº¤äº’ï¼Œæ„Ÿå—é‡ï¼Œå‚æ•°å…±äº«ï¼Œç­‰å˜è¡¨ç¤º"></a>ç¨€ç–äº¤äº’ï¼Œæ„Ÿå—é‡ï¼Œå‚æ•°å…±äº«ï¼Œç­‰å˜è¡¨ç¤º</h2><h3 id="ç¨€ç–äº¤äº’-sparse-interactions"><a href="#ç¨€ç–äº¤äº’-sparse-interactions" class="headerlink" title="ç¨€ç–äº¤äº’ sparse interactions"></a>ç¨€ç–äº¤äº’ sparse interactions</h3><p>ä¹Ÿå«ç¨€ç–è¿æ¥(sparse connectivity)ã€ç¨€ç–æƒé‡(sparse weights)<br>æ ¸çš„å¤§å°è¿œå°äºè¾“å…¥å¤§å°ï¼Œä½¿å¾—éœ€è¦å­˜å‚¨çš„å‚æ•°æ˜¾è‘—å‡å°‘ï¼Œæé«˜äº†æ¨¡å‹çš„ç»Ÿè®¡æ•ˆç‡ï¼Œè®¡ç®—é‡å‡å°‘ã€‚å·ç§¯æ ¸æ˜¯ä¸€ä¸ªæƒå€¼çŸ©é˜µï¼Œè¡¨ç¤ºå¦‚ä½•å¤„ç†å•ä¸ªåƒç´ å’Œç›¸é‚»åƒç´ ä¹‹é—´çš„å…³ç³»ï¼Œä¼šå½±å“è¾“å‡ºçš„æ•ˆæœå’Œäº®åº¦ã€‚å·ç§¯æ ¸ä¸­å„ä¸ªå…ƒç´ çš„ç›¸å¯¹å·®å€¼å°ï¼Œå°±å…·æœ‰æ¨¡ç³Šé™å™ªçš„æ•ˆæœï¼›å·®å€¼å¤§å°±æ‹‰å¤§äº†æ¯ä¸ªåƒç´ ä¸ç›¸é‚»åƒç´ çš„è·ç¦»ï¼Œå¯ä»¥æå–è¾¹ç¼˜æˆ–è€…è¾¾åˆ°é”åŒ–çš„æ•ˆæœã€‚å·ç§¯æ ¸çš„å…ƒç´ ç›¸åŠ ä¸º1ï¼ŒåŸºæœ¬ä¸Šä¿æŒäº†åŒæ ·çš„äº®åº¦ï¼›å¦‚æœå¤§äº1åˆ™å›¾åƒå˜äº®ï¼Œå°äº1åˆ™å˜æš—ï¼›å¦‚æœç´¯åŠ ä¸º0åˆ™è¾“å‡ºäº®åº¦æä½ï¼Œä½†ä¸æ˜¯å…¨é»‘ï¼Œå¯ä»¥ç”¨äºè¾¹ç¼˜æå–ã€‚<br>æ„Ÿå—é‡ receptive fieldä¹Ÿç§°ä½œæ¥å—åŸŸã€‚è¾“å…¥xä¸­å½±å“è¾“å‡ºå•å…ƒs1çš„è¿™äº›å•å…ƒç§°ä½œs1çš„æ¥å—åŸŸï¼Œå³ï¼š<strong>æ¯ä¸€å±‚è¾“å‡ºçš„ç‰¹å¾å›¾ä¸Šåƒç´ ç‚¹åœ¨åŸå§‹å›¾åƒä¸Šçš„æ˜ å°„åŒºåŸŸå¤§å°</strong>ã€‚å¤„äºå·ç§¯ç½‘ç»œä¸­æ›´æ·±å±‚çš„å•å…ƒçš„æ¥å—åŸŸæ¯”æµ…å±‚å•å…ƒçš„æ¥å—åŸŸæ›´å¤§ã€‚è¿™è¯´æ˜å°½ç®¡ç½‘ç»œå±‚ä¹‹é—´çš„ç›´æ¥è¿æ¥å¾ˆç¨€ç–ï¼Œä½†æ›´æ·±å±‚çš„å•å…ƒå¯ä»¥ç›´æ¥æˆ–é—´æ¥è¿æ¥åˆ°å…¨éƒ¨æˆ–è€…å¤§éƒ¨åˆ†è¾“å…¥å•å…ƒã€‚<br>æ„Ÿå—é‡å¤§å°ï¼š$r_=r_{l-1}+k_{l-1}\cdot j_{l-1}$ã€‚<br>å…¶ä¸­$j_l=j_{1-1} \cdot s_l$ï¼Œå› æ­¤$r_l=r_{l-1}+((k_{l-1}-1)\cdot âˆ_{i=1}^{l-1}s_i)$ã€‚<br>kæ˜¯æ ¸å¤§å°ï¼Œsæ˜¯æ­¥é•¿ï¼Œjæ˜¯ç‰¹å¾å›¾ä¸Šç›¸é‚»å…ƒç´ é—´çš„åƒç´ è·ç¦»ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºç‰¹å¾å›¾ä¸Šç§»åŠ¨ä¸€ä¸ªå…ƒç´ åœ¨åŸå§‹å›¾åƒä¸Šç§»åŠ¨çš„åƒç´ ä¸ªæ•°ã€‚<br>å±€éƒ¨æ„ŸçŸ¥åŸŸæ˜¯æŒ‡å¯¹äºæ¯ä¸ªè®¡ç®—å•å…ƒæ¥è¯´ï¼Œåªéœ€è¦è€ƒè™‘å…¶åƒç´ ä½ç½®é™„è¿‘çš„è¾“å…¥ï¼Œå¹¶ä¸éœ€è¦ä¸ä¸Šä¸€å±‚æ‰€æœ‰èŠ‚ç‚¹ç›¸è¿ã€‚</p>
<h3 id="å‚æ•°å…±äº«-parameter-sharing"><a href="#å‚æ•°å…±äº«-parameter-sharing" class="headerlink" title="å‚æ•°å…±äº« parameter sharing"></a>å‚æ•°å…±äº« parameter sharing</h3><p>å‚æ•°å…±äº«æ˜¯æŒ‡åœ¨ä¸€ä¸ªæ¨¡å‹çš„å¤šä¸ªå‡½æ•°ä¸­ä½¿ç”¨ç›¸åŒçš„å‚æ•°ã€‚ä¼ ç»Ÿç¥ç»ç½‘ç»œä¸­æƒé‡çš„æ¯ä¸ªå…ƒç´ åªä½¿ç”¨ä¸€æ¬¡ï¼Œè€Œå‚æ•°å…±äº«æ—¶æ ¸çš„æ¯ä¸ªå…ƒç´ éƒ½ä½œç”¨åœ¨è¾“å…¥çš„æ¯ä¸ªä½ç½®ä¸Šï¼Œå³ç½‘ç»œå«æœ‰ç»‘å®šçš„æƒé‡(tied weight)ã€‚å·ç§¯è¿ç®—ä¸­çš„å‚æ•°å…±äº«ä¿è¯äº†æˆ‘ä»¬åªéœ€è¦å­¦ä¹ ä¸€ä¸ªå‚æ•°é›†åˆè€Œä¸æ˜¯å¯¹æ¯ä¸€ä¸ªä½ç½®éƒ½éœ€è¦å­¦ä¹ ä¸€ä¸ªå‚æ•°é›†åˆï¼Œå¤§å¤§å‡å°‘äº†éœ€è¦å­¦ä¹ çš„å‚æ•°æ•°é‡ã€‚</p>
<h3 id="ç­‰å˜è¡¨ç¤º-equivariant-representations"><a href="#ç­‰å˜è¡¨ç¤º-equivariant-representations" class="headerlink" title="ç­‰å˜è¡¨ç¤º equivariant representations"></a>ç­‰å˜è¡¨ç¤º equivariant representations</h3><p>å‚æ•°å…±äº«çš„ç‰¹æ®Šå½¢å¼ä½¿å¾—ç¥ç»ç½‘ç»œå…·æœ‰å¹³ç§»ç­‰å˜çš„æ€§è´¨ã€‚ç›¸åŒçš„è¾¹ç¼˜æˆ–å¤šæˆ–å°‘åœ°åˆ†å¸ƒåœ¨å›¾åƒå„å¤„ï¼Œæ‰€ä»¥åº”å½“å¯¹æ•´ä¸ªå›¾åƒè¿›è¡Œå‚æ•°å…±äº«ã€‚<br>å¦‚æœf(x)ä¸g(x)æ»¡è¶³f(g(x))=g(f(x))ï¼Œåˆ™f(x)å¯¹äºå˜æ¢gå…·æœ‰ç­‰å˜æ€§ã€‚</p>
<h2 id="æ± åŒ–"><a href="#æ± åŒ–" class="headerlink" title="æ± åŒ–"></a>æ± åŒ–</h2><p>å·ç§¯ç½‘ç»œä¸­ä¸€ä¸ªå…¸å‹å±‚åŒ…å«ä¸‰çº§ï¼šå·ç§¯çº§ã€æ¢æµ‹çº§ã€æ± åŒ–çº§<br>å·ç§¯çº§ï¼šå¹¶è¡Œè®¡ç®—å¤šä¸ªå·ç§¯äº§ç”Ÿä¸€ç»„çº¿æ€§æ¿€æ´»ç›¸åº”ï¼ˆå¤šä¸ªå·ç§¯æ ¸å­¦ä¹ åˆ°å¤šä¸ªç‰¹å¾ï¼‰<br>æ¢æµ‹çº§ï¼šéçº¿æ€§æ¿€æ´»å‡½æ•°<br>æ± åŒ–çº§ï¼šä½¿ç”¨æ± åŒ–å‡½æ•°æ¥è°ƒæ•´è¾“å‡º<br>æ¢æµ‹çº§è¾“å‡ºçš„ç‰¹å¾å›¾ä¸åŸå›¾åƒåƒç´ å¤§å°ç›¸åŒï¼Œé™ç»´çš„å…³é”®åœ¨äºæ± åŒ–ï¼Œç”¨äºæ±‡æ€»è¾“å‡ºã€‚<br>æ± åŒ–å‡½æ•°ä½¿ç”¨æŸä¸€ä½ç½®çš„ç›¸é‚»è¾“å‡ºçš„æ€»ä½“ç»Ÿè®¡ç‰¹å¾ï¼ˆmaxã€meanï¼‰æ¥ä»£æ›¿è¯¥ä½ç½®çš„è¾“å‡ºï¼Œæ± åŒ–èƒ½å¤Ÿä½¿ç‰¹å¾æå–æ‹¥æœ‰å¹³ç§»ä¸å˜æ€§(translation invariant)ï¼Œå¯ä»¥æå¤§æé«˜ç½‘ç»œçš„ç»Ÿè®¡æ•ˆç‡ã€‚å°†æ± åŒ–ä¸é™é‡‡æ ·ï¼ˆæ­¥å¹…ç§»åŠ¨ï¼‰ç»“åˆï¼Œå¯ä»¥ä½¿å¾—æ± åŒ–å•å…ƒå°‘äºæ¢æµ‹å•å…ƒï¼Œæé«˜è®¡ç®—æ•ˆç‡ï¼Œå‡å°‘è¿‡æ‹Ÿåˆã€‚<br>æ± åŒ–å¯¹äºå¤„ç†ä¸åŒå¤§å°çš„è¾“å…¥å…·æœ‰é‡è¦ä½œç”¨ã€‚<br>ä½¿ç”¨æ± åŒ–æ˜¯ä¸€ä¸ªæ— é™å¼ºçš„å…ˆéªŒï¼šæ¯ä¸€ä¸ªå•å…ƒéƒ½å…·æœ‰å¯¹å°‘é‡å¹³ç§»çš„ä¸å˜æ€§ã€‚<br>å·ç§¯å’Œæ± åŒ–å¯èƒ½å¯¼è‡´æ¬ æ‹Ÿåˆï¼šå¦‚æœä¸€é¡¹ä»»åŠ¡ä¾èµ–äºä¿å­˜ç²¾ç¡®çš„ç©ºé—´ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨æ‰€æœ‰ç‰¹å¾ä¸Šä½¿ç”¨æ± åŒ–ä¼šå¢å¤§è®­ç»ƒè¯¯å·®ã€‚</p>
<h2 id="æ­¥å¹…å·ç§¯ï¼Œæ ‡å‡†å·ç§¯ï¼Œå¹³é“ºå·ç§¯ï¼Œå±€éƒ¨è¿æ¥ï¼Œå…¨è¿æ¥"><a href="#æ­¥å¹…å·ç§¯ï¼Œæ ‡å‡†å·ç§¯ï¼Œå¹³é“ºå·ç§¯ï¼Œå±€éƒ¨è¿æ¥ï¼Œå…¨è¿æ¥" class="headerlink" title="æ­¥å¹…å·ç§¯ï¼Œæ ‡å‡†å·ç§¯ï¼Œå¹³é“ºå·ç§¯ï¼Œå±€éƒ¨è¿æ¥ï¼Œå…¨è¿æ¥"></a>æ­¥å¹…å·ç§¯ï¼Œæ ‡å‡†å·ç§¯ï¼Œå¹³é“ºå·ç§¯ï¼Œå±€éƒ¨è¿æ¥ï¼Œå…¨è¿æ¥</h2><p>æ­¥å¹…å·ç§¯ï¼šä¸‹é‡‡æ ·ï¼Œé›¶å¡«å……ï¼ˆvalidï¼Œsameï¼Œfullï¼‰<br>æ ‡å‡†å·ç§¯ç­‰æ•ˆäº1ä¸ªæ ¸çš„å¹³é“ºå·ç§¯</p>
<h2 id="ä¸é€šè¿‡ç›‘ç£è®­ç»ƒå¾—åˆ°å·ç§¯æ ¸"><a href="#ä¸é€šè¿‡ç›‘ç£è®­ç»ƒå¾—åˆ°å·ç§¯æ ¸" class="headerlink" title="ä¸é€šè¿‡ç›‘ç£è®­ç»ƒå¾—åˆ°å·ç§¯æ ¸"></a>ä¸é€šè¿‡ç›‘ç£è®­ç»ƒå¾—åˆ°å·ç§¯æ ¸</h2><pre><code>éšæœºåˆå§‹åŒ–
æ‰‹åŠ¨è®¾è®¡
ä½¿ç”¨æ— ç›‘ç£çš„æ ‡å‡†æ¥å­¦ä¹ æ ¸
</code></pre><h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><p>è®­ç»ƒCNNæ—¶å¯ä»¥å¯¹è¾“å…¥è¿›è¡Œæ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾ç­‰é¢„å¤„ç†æ¥æé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›(generalization ability)ã€‚</p>
<h3 id="Classic-cnn"><a href="#Classic-cnn" class="headerlink" title="Classic cnn"></a>Classic cnn</h3><h4 id="AlexNet"><a href="#AlexNet" class="headerlink" title="AlexNet"></a>AlexNet</h4><h4 id="ResNet"><a href="#ResNet" class="headerlink" title="ResNet"></a>ResNet</h4><h4 id="VGGNet"><a href="#VGGNet" class="headerlink" title="VGGNet"></a>VGGNet</h4><h4 id="LeNet"><a href="#LeNet" class="headerlink" title="LeNet"></a>LeNet</h4><p>PyTorch Tensorflow Keras</p>
<h3 id="A-brief-summary"><a href="#A-brief-summary" class="headerlink" title="A brief summary"></a>A brief summary</h3><p>Convolution is a special kind of linear operation which satisfies the commutative and associative laws. Itâ€™s used to accumulate the weighted input.<br>Convolution Neural Network is the network that uses convolution instead of matrix multiplication. CNN mainly uses the idea of sparse connectivity and parameter sharing to improve the computing effectivity rapidly. The receptive field is defined as the region in the input space that a particular CNNâ€™s feature is looking at.<br>CNN learns multiple features in parallel using multiple convolutional kernals.<br>The pooling function represents the output of a location using the overall statistical characteristics of adjacent output at that location. It can reduce the amount of data and prevent over-fitting.</p>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šæ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>NN</tag>
      </tags>
  </entry>
  <entry>
    <title>CS5340 Lab2 report2</title>
    <url>/2020/09/24/CS5340%20Lab2%20report2/</url>
    <content><![CDATA[<h3 id="learn-node-parameter-w"><a href="#learn-node-parameter-w" class="headerlink" title="_learn_node_parameter_w()"></a>_learn_node_parameter_w()</h3><h4 id="When-input-is-None"><a href="#When-input-is-None" class="headerlink" title="When input is None"></a>When input is None</h4><p>It means there are no observation of its parents. In this case weight size is 1, and weights[0] equals to the average of output using numpy.average().<br><a id="more"></a></p>
<h4 id="Otherwise"><a href="#Otherwise" class="headerlink" title="Otherwise"></a>Otherwise</h4><p>Referring to the ğ¶ +1 equations in page 43 from the lec_6 ppt, these equations can be vectorized into:</p>
<script type="math/tex; mode=display">\boldsymbol{b} - \mathbf{A}\cdot \boldsymbol{w} = 0</script><p>where:</p>
<script type="math/tex; mode=display">
\boldsymbol{b}_{(C+1)\times 1} = \begin{pmatrix} \sum_{n=1}^N x_{u,n}\cdot 1 \\ \sum_{n=1}^N x_{u,n}\cdot x_{u_1,n} \\ ... \\ \sum_{n=1}^N x_{u,n}\cdot x_{u_C,n} \end{pmatrix} \qquad
\mathbf{A}_{(C+1)\times (C+1)} = \begin{pmatrix} \sum_{n=1}^N \begin{pmatrix} 1,x_{u_1,n},...,x_{u_C,n}\end{pmatrix}\cdot 1 \\ \sum_{n=1}^N \begin{pmatrix} 1,x_{u_1,n},...,x_{u_C,n}\end{pmatrix}\cdot x_{u_1,n} \\ ... \\ \sum_{n=1}^N \begin{pmatrix} 1,x_{u_1,n},...,x_{u_C,n}\end{pmatrix}\cdot x_{u_C,n} \end{pmatrix}</script><p>$\boldsymbol{w}_{(C+1)\times 1}$ is the unknown weights we need: $\boldsymbol{w} = {\begin{pmatrix}w_0,w_{u_1},â€¦,w_{u_C}\end{pmatrix}}^T$<br>N is the number of observations of this node. C is the number of this nodeâ€™s parents. $x_{u,n}$ is the $n^{th}$ observation of this node(output[n]).<br>We can use numpy.linalg.solve() to solve this equation to get the weights vector $\boldsymbol{w}$.</p>
<h3 id="learn-node-parameter-var"><a href="#learn-node-parameter-var" class="headerlink" title="_learn_node_parameter_var()"></a>_learn_node_parameter_var()</h3><p>Take the derivative of ğ¿ w.r.t to $\sigma ^ 2$ and equating to zero:</p>
<script type="math/tex; mode=display">
\hat{\sigma ^ 2} = \frac{\sum_{n=1}^N (x_{u,n}-(\sum_{c=1}^C \boldsymbol{w}[c]\cdot x_{c,n} +\boldsymbol{w}[0]))^2}{N}</script><p>where:</p>
<script type="math/tex; mode=display">
x_{u,n}=output[n]\quad x_{c,n}=input[c][n]\quad \boldsymbol{w}:weights</script><h3 id="get-learned-parameters"><a href="#get-learned-parameters" class="headerlink" title="_get_learned_parameters()"></a>_get_learned_parameters()</h3><p>For each node, add the observations of its parents into the input array. Use _learn_node_parameter_w() to learn the weights $\boldsymbol{w}$, using this $\boldsymbol{w}$ and function _learn_node_parameter_var() to get the var $\hat{\sigma ^ 2}$, set $\hat{\sigma ^ 2}$ to be this nodeâ€™s var, set $\boldsymbol{w}[0]$ to be this nodeâ€™s bias, and for nodeâ€™s $i^{th}$ parent set $\boldsymbol{w}[i]$ to be its weight.</p>
]]></content>
  </entry>
  <entry>
    <title>CS5340 Lab3 report</title>
    <url>/2020/10/11/CS5340%20Lab3%20report/</url>
    <content><![CDATA[<p>Name: HUANG Liu<br>Email: e0575772@u.nus.edu<br>Student ID: A0225138J</p>
<h3 id="e-step-x-list-pi-A-phi"><a href="#e-step-x-list-pi-A-phi" class="headerlink" title="e_step(x_list, pi, A, phi)"></a>e_step(x_list, pi, A, phi)</h3><p>Initialize arrays alpha and c with zeros. For each sequence($x_list[o]$) in $x_list$: $alpha[o][0][k] = pi[k] <em> p(x_list[o][0] | phi[k])$, where $k$ is the state of the latent variable and $p$ iis defined as the value of x in the Gaussian probability density function with $phi[k]$ as the parameter: $p = scipy.stats.norm.pdf(x_list[o][0], phi[â€œmuâ€][k], phi[â€œsigmaâ€][k])$<br>$p(x_list[o][n] | phi[k]) </em> \sum_i alpha[o][n - 1][i] <em> A[i][k]$<br>xi_list[o][n - 1][k][i] = (1 / c[o][n]) </em> alpha[o][n - 1][k] <em> p </em> A[k][i] * beta[o][n][i]</p>
<h3 id="m-step-x-list-gamma-list-xi-list"><a href="#m-step-x-list-gamma-list-xi-list" class="headerlink" title="m_step(x_list, gamma_list, xi_list)"></a>m_step(x_list, gamma_list, xi_list)</h3><h3 id="fit-hmm-x-list-n-states"><a href="#fit-hmm-x-list-n-states" class="headerlink" title="fit_hmm(x_list, n_states)"></a>fit_hmm(x_list, n_states)</h3>]]></content>
  </entry>
  <entry>
    <title>Markov Random Fields (Undirected Graphical Models)</title>
    <url>/2020/08/26/CS5340%20Lec03/</url>
    <content><![CDATA[<h1 id="ä¸ºä»€ä¹ˆéœ€è¦æ— å‘å›¾æ¨¡å‹"><a href="#ä¸ºä»€ä¹ˆéœ€è¦æ— å‘å›¾æ¨¡å‹" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦æ— å‘å›¾æ¨¡å‹"></a>ä¸ºä»€ä¹ˆéœ€è¦æ— å‘å›¾æ¨¡å‹</h1><p>ä½¿ç”¨æ— å‘å›¾æ¨¡å‹(UGM: Undirected Graphical Models) $\mathcal G(\mathcal V,\mathcal E)$æ¥è¡¨ç¤º<strong>Markov Random Field(Markov network)</strong>ã€‚<br>$\mathcal V$ : é¡¶ç‚¹é›†åˆï¼Œæ¯ä¸ªé¡¶ç‚¹ä¸ä¸€ä¸ªéšæœºå˜é‡ $X_i$ ä¸€ä¸€å¯¹åº”ã€‚<br>$\mathcal E$ : æ— å‘è¾¹é›†åˆã€‚<br>è¾¹æ²¡æœ‰æ–¹å‘æ€§ï¼Œè¿™å¯¹äºä¸€äº›å›¾åƒå¤„ç†æˆ–ç©ºé—´åˆ†æé—®é¢˜æ›´åŠ è‡ªç„¶ã€‚<br>For MRF, conditional independence is determined by simple graph separation, not the defination of â€œblockedâ€.<br><a id="more"></a></p>
<h1 id="Conditional-independence-properties"><a href="#Conditional-independence-properties" class="headerlink" title="Conditional independence properties"></a>Conditional independence properties</h1><h2 id="Global-Markov-Property"><a href="#Global-Markov-Property" class="headerlink" title="Global Markov Property"></a>Global Markov Property</h2><p>å¯¹äºç‚¹é›†Aã€Bã€Cï¼š$X_A\perp X_B|X_C$ å½“ä¸”ä»…å½“ï¼šåœ¨å›¾ $\mathcal G$ ä¸­ é›†åˆCçš„ç‚¹å°†Aå’ŒBä¸­çš„ç‚¹éš”ç¦»å¼€ï¼Œå³ï¼šå½“ç§»é™¤æ‰€æœ‰Cä¸­ç‚¹åï¼Œä¸å­˜åœ¨Aä¸­ç‚¹åˆ°Bä¸­ç‚¹çš„è·¯å¾„ã€‚<br><img src="/images/CS5340/3/global-markov-eg.png" alt="global-markov"></p>
<h2 id="Local-Markov-Property"><a href="#Local-Markov-Property" class="headerlink" title="Local Markov Property"></a>Local Markov Property</h2><p><img src="/images/CS5340/3/local-markov-eg.png" alt="local-markov"></p>
<h2 id="Pairwise-Markov-Property"><a href="#Pairwise-Markov-Property" class="headerlink" title="Pairwise Markov Property"></a>Pairwise Markov Property</h2><p><img src="/images/CS5340/3/pairwise-markov-eg.png" alt="pairwise-markov"></p>
<h2 id="å½¼æ­¤ç­‰ä»·"><a href="#å½¼æ­¤ç­‰ä»·" class="headerlink" title="å½¼æ­¤ç­‰ä»·"></a>å½¼æ­¤ç­‰ä»·</h2><p>Global Markov implies local Markov which implies pairwise Markov.<br>Assuming p(x) &gt; 0 for all x, pairwise Markov implies global Markov. </p>
<h3 id="Independence-Map"><a href="#Independence-Map" class="headerlink" title="Independence-Map"></a>Independence-Map</h3><p> The I-Map of a joint distribution $p(ğ‘¥1,â€¦,ğ‘¥ğ‘)$, often written as $ğ¼(ğ‘)$ represents all independencies in $p(ğ‘¥1,â€¦,ğ‘¥ğ‘)$.<br> Similarly, the I-Map of a directed/undirected graph $ğ’¢$, i.e. $\mathcal I(\mathcal G)$ represents all independencies encoded in $ğ’¢\mathcal G$.</p>
<h3 id="Intersection-Lemma"><a href="#Intersection-Lemma" class="headerlink" title="Intersection Lemma"></a>Intersection Lemma</h3><p><img src="/images/CS5340/3/Intersection.png" alt="Intersection"><br><img src="/images/CS5340/3/p-g.png" alt="pairwise-global"></p>
<h1 id="Comparative-Semantics"><a href="#Comparative-Semantics" class="headerlink" title="Comparative Semantics"></a>Comparative Semantics</h1><p>Convert the DGM to a UGM by dropping the orientation of the edges is not always correct!</p>
<h1 id="Parameterization-of-MRFs"><a href="#Parameterization-of-MRFs" class="headerlink" title="Parameterization of MRFs"></a>Parameterization of MRFs</h1><p>For DGMs, we only need to focus on the local conditional probabilities of a node and its parents ( $p(x_i|x_{\pi_i})$ ), and the joint probability is <strong>a product of local conditional probabiities</strong> as a result of the chain rule:</p>
<script type="math/tex; mode=display">p(x_1,...,x_N)=\prod_{i=1}^Np(x_i|x_{\pi_i})</script><p>Local parameterization is difficult for UGMs as there is no topological ordering associated with UGMs.</p>
<p>So we use functions to represent the local parameterization instead of the conditional distribution.</p>
<p>Recall two nodes $X_i$ and $X_j$ that are not linked directly, they are conditionally independent given all the other nodes. So we can place $X_i$ and $X_j$ in defferent dactors when obtaining a factorization of the joint probability.<br>This implies that we cannot have a local function that depends on both $X_i$ and $X_j$ in the parameterization.</p>
<h2 id="Maximal-Clique"><a href="#Maximal-Clique" class="headerlink" title="Maximal Clique"></a>Maximal Clique</h2><p>If two nodes are linked, they must appeal in the same factor. So, all the nodes $X_C$ that belong to a maximal clique $C$ in the UGM appear together in a local function $\psi(x_C)$ . <strong>Conditional independence is impossible for any two nodes in maximal clique!</strong></p>
<p>Hammersley-Clifford theorem:</p>
<script type="math/tex; mode=display">p(y|\theta)=\frac{1}{Z(\theta)}\prod_{c\in \mathcal C}\psi_c(y_c|\theta_c)</script><p>$\mathcal C$ : the set of all the maximal cliques of $\mathcal G$<br>$\psi_c(.)$: the factor or potential function of clique c<br>$\theta$; the parameter of the factor $\psi_c(.)$ for $c\in\mathcal C$<br>$\psi_c(c|\theta_c)$ is not a conditional distribution but just an arbitrary chosen positive function:</p>
<script type="math/tex; mode=display">Z(\theta)=\sum_y\prod_{c\in\mathcal C}\psi_c(y_c|\theta_c)</script><p>$Z(\theta)$: partition funtion, to ensure the overall distribution sums to 1</p>
<p><strong>Parameterization of MRFs is not unique.</strong></p>
<ul>
<li>define over  maximal cliques</li>
<li>pairwise parameterization</li>
<li>define over all cliques, i.e., cannonical parameterization </li>
</ul>
<h2 id="Canonical-Parameterization"><a href="#Canonical-Parameterization" class="headerlink" title="Canonical Parameterization"></a>Canonical Parameterization</h2><p>Each node is viewed as a clique. In canonical parameterization we include all the possible cliques.<br>Uniform prior can be assumed on any potential function, i.e., set all potential function of edges to 1 (optional)<br><img src="/images/CS5340/3/Canonical.png" alt="Canonical"></p>
<h2 id="Gibbs-Distribution"><a href="#Gibbs-Distribution" class="headerlink" title="Gibbs Distribution"></a>Gibbs Distribution</h2><script type="math/tex; mode=display">p(y|\theta)=\frac{1}{Z(\theta)}exp(-\sum_cE(y_c|\theta_c))</script><p>$E(y_c)&gt;0$: energy associated with the variables in clique c as the potential function, using in particalsâ€™ random moving in air or liquid.<br>Convert Gibbs distibution to a UGM: (Energy based models)</p>
<script type="math/tex; mode=display">\psi_c(y_c|\theta_c)=exp(-E(y_c|\theta_c))</script><p>High probability states correspond to low energy configurations.</p>
<h2 id="Log-linear-potential-Functions"><a href="#Log-linear-potential-Functions" class="headerlink" title="Log-linear potential Functions"></a>Log-linear potential Functions</h2><p><strong>Define the log potentials as a linear function of the parameters</strong> $\theta_c\in\mathbb{R}^M$:</p>
<script type="math/tex; mode=display">log\psi_c(y_c)=\phi_c(y_c)^T\theta_c</script><p>$\phi_c$: feature vector derived from values of variables $y_c$</p>
<script type="math/tex; mode=display">logp(y|\theta)=\sum_c\phi_c(y_c)^T\theta_c-logZ(\theta)</script><p>also known as a <strong>maximum entropy</strong> or a <strong>log-linear</strong> model.<br>If $M=|C|=3$, we only need 3 parameter $\theta_c=[\theta_{c1},\theta_{c2},\theta_{c3}]$ instead of $2^3$ parameters.</p>
<h1 id="Combine-UGM-and-DGM"><a href="#Combine-UGM-and-DGM" class="headerlink" title="Combine UGM and DGM"></a>Combine UGM and DGM</h1><p>A DGM can be converted into a UGM by joining all the links among parents for a head-to-head node, i.e. <strong>moralization</strong><br>This process preserves the joint distribution but conditional independence is lost.</p>
<h1 id="Discriminative-vs-Generative-Models"><a href="#Discriminative-vs-Generative-Models" class="headerlink" title="Discriminative vs Generative Models"></a>Discriminative vs Generative Models</h1><p>Discriminative models: model the posterior directly $p(\mathcal C_k|x)$<br>eg. logistic regression model</p>
<p>Generative models: sampling from the distribution is possible to generate synthetic data points in the input space.<br>Likelihood: $p(x|\mathcal C_kx)$</p>
<h1 id="Conditional-Random-Field-CRF"><a href="#Conditional-Random-Field-CRF" class="headerlink" title="Conditional Random Field(CRF)"></a>Conditional Random Field(CRF)</h1><p>A CRF or discriminative random field is a version of an MRF where all clique potentials are conditioned on <strong>global</strong> input x:</p>
<script type="math/tex; mode=display">p(y|x,w)=\frac{1}{Z(x,w)}\prod_c\psi_c(y_c|x,w)</script><p>log-linear representation:</p>
<script type="math/tex; mode=display">\psi_c(y_c|x,w)=exp(w_c^T\phi(x,y_c))</script><p>CRF make use of input data and the predictions can be data-dependent, but require labeled training data and learning is slower.</p>
]]></content>
      <categories>
        <category>Uncertainty Modelling in AI</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI</tag>
        <tag>ML</tag>
        <tag>PGM</tag>
      </tags>
  </entry>
  <entry>
    <title>Probability Reasoning</title>
    <url>/2020/08/12/CS5340%20Lec01/</url>
    <content><![CDATA[<h1 id="æ¦‚ç‡ç©ºé—´-Probability-Space"><a href="#æ¦‚ç‡ç©ºé—´-Probability-Space" class="headerlink" title="æ¦‚ç‡ç©ºé—´ Probability Space"></a>æ¦‚ç‡ç©ºé—´ Probability Space</h1><p>æ¦‚ç‡ç©ºé—´ $(\Omega,E,P)$åŒ…å«äº†ä¸‰ä¸ªéƒ¨åˆ†ï¼Œç”¨æ¥æè¿°æ¦‚ç‡ç°è±¡ã€‚<br>æ ·æœ¬ç©ºé—´(Outcome/Sample Space) $\Omega$<br>äº‹ä»¶ç©ºé—´(Event Space) E<br>æ¦‚ç‡åˆ†å¸ƒ(Probability Distribution) $P:E\to R$<br><a id="more"></a></p>
<h2 id="æ ·æœ¬ç©ºé—´-Outcome-Sample-Space"><a href="#æ ·æœ¬ç©ºé—´-Outcome-Sample-Space" class="headerlink" title="æ ·æœ¬ç©ºé—´ Outcome/Sample Space"></a>æ ·æœ¬ç©ºé—´ Outcome/Sample Space</h2><p>å¯¹äºä¸€ä¸ªéšæœºç°è±¡ï¼Œæ‰€æœ‰å¯èƒ½çš„è¾“å‡ºçš„é›†åˆè¢«ç§°ä½œæ ·æœ¬ç©ºé—´ï¼Œè®°ä½œ $\Omega$ã€‚<br>å¯ä»¥é€šè¿‡Tree Diagramï¼ŒList(æ ·æœ¬ç©ºé—´å°æ—¶ç›´æ¥æšä¸¾)ï¼ŒTableæ¥æ‰¾åˆ°ä¸€ä¸ªæ¦‚ç‡ç°è±¡çš„æ ·æœ¬ç©ºé—´ã€‚<br>eg. å•æ¬¡æ·è‰²å­çš„æ ·æœ¬ç©ºé—´ä¸º $\Omega=\{1,2,3,4,5,6\}$</p>
<h2 id="äº‹ä»¶ç©ºé—´-Event-Space"><a href="#äº‹ä»¶ç©ºé—´-Event-Space" class="headerlink" title="äº‹ä»¶ç©ºé—´ Event Space"></a>äº‹ä»¶ç©ºé—´ Event Space</h2><p>æ ·æœ¬ç©ºé—´çš„ä»»æ„ä¸€ä¸ªå­é›†è¢«ç§°ä½œä¸€ä¸ªäº‹ä»¶ï¼Œäº‹ä»¶æœ¬èº«æ˜¯å¯ä»¥åº¦é‡æ¦‚ç‡çš„ã€‚<br>äº‹ä»¶eå‘ç”Ÿç­‰ä»·äºå®éªŒçš„è¾“å‡ºç»“æœè¢«åŒ…å«åœ¨äº‹ä»¶eä¸­ã€‚<br>äº‹ä»¶ç©ºé—´(Event Space) $E\subset 2^\Omega$ æ˜¯äº‹ä»¶çš„é›†åˆï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>å¿…é¡»åŒ…å«ç©ºäº‹ä»¶ $\emptyset$ å’Œæ•´ä¸ªæ ·æœ¬ç©ºé—´æœ¬èº«(trivial event) $\Omega$ ;</li>
<li>å¯¹å¯æ•°çš„å¹¶æ“ä½œå°é—­ $if:\alpha_i\in E,i=1,2â€¦,then:\cup_{i=1}^{\infty}\alpha_i\in E$ ;</li>
<li>å¯¹è¡¥æ“ä½œå°é—­ $if:\alpha\in E,then:\Omega -\alpha\in E$ .</li>
</ol>
<h2 id="æ¦‚ç‡åˆ†å¸ƒ-Probability-Distribution"><a href="#æ¦‚ç‡åˆ†å¸ƒ-Probability-Distribution" class="headerlink" title="æ¦‚ç‡åˆ†å¸ƒ Probability Distribution"></a>æ¦‚ç‡åˆ†å¸ƒ Probability Distribution</h2><p>æ¦‚ç‡åˆ†å¸ƒPæ˜¯äº‹ä»¶åˆ°çœŸå®å€¼çš„ä¸€ä¸ªæ˜ å°„ $(P:E\to\mathbb{R})$ ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶(axioms of probability)ï¼š</p>
<ol>
<li>éè´Ÿæ€§ï¼š$P(\alpha)&gt;=0,\forall\alpha\in E$ ;</li>
<li>æ‰€æœ‰å¯èƒ½çš„ç»“æœçš„æ¦‚ç‡æ€»å’Œä¸º1ï¼š$P(\Omega)=1$ ;</li>
<li>å¯¹äºäº’ä¸ç›¸äº¤çš„é›†åˆ $\alpha,\beta \in E$ ä¸” $\alpha\cap\beta=\emptyset$ï¼Œæ»¡è¶³ $P(\alpha\cup\beta)=P(\alpha)+P(\beta)$ .</li>
</ol>
<h3 id="éšæœºå˜é‡-Random-Variables"><a href="#éšæœºå˜é‡-Random-Variables" class="headerlink" title="éšæœºå˜é‡ Random Variables"></a>éšæœºå˜é‡ Random Variables</h3><p>éšæœºå˜é‡æ˜¯æ¦‚ç‡ç©ºé—´çš„ä¸€ä¸ªå¯æµ‹é‡å‡½æ•°(measurable function) $X:\Omega\to S$ ï¼Œå³ï¼šå°†å®éªŒç»“æœæ˜ å°„åˆ°ä¸€ä¸ªå¯æµ‹é‡ç©ºé—´(measurable space) $S$ ï¼Œ$S\in \mathbb{R}$ ï¼Œ$S$ å¯å†™ä½œ $Val(X)$ ï¼Œå«ä¹‰æ˜¯éšæœºå˜é‡ $X$ çš„å¯å–å€¼èŒƒå›´ã€‚ä½¿ç”¨ $x_i$ ä»£è¡¨ $X$ çš„ä¸€ä¸ªç‰¹å®šå–å€¼ã€‚<br>$P(x)$ æ˜¯ $P(X=x)$ çš„ç®€å†™ï¼Œå…¶ä¸­ $x$ : realization/generic value of a random variable $X$ .<br>éšæœºå˜é‡çš„å–å€¼ç©ºé—´ $Val(X)$ å¯ä»¥æ˜¯è¿ç»­çš„(continuous)ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¦»æ•£çš„(discrete)ã€‚</p>
<h3 id="ç¦»æ•£å‹æ¦‚ç‡åˆ†å¸ƒ"><a href="#ç¦»æ•£å‹æ¦‚ç‡åˆ†å¸ƒ" class="headerlink" title="ç¦»æ•£å‹æ¦‚ç‡åˆ†å¸ƒ"></a>ç¦»æ•£å‹æ¦‚ç‡åˆ†å¸ƒ</h3><p>Probability mass function(PMF)    $P(x)$ï¼š<br>ç²¾ç¡®çš„ç»™å‡ºæ¯ä¸ªç¦»æ•£éšæœºå˜é‡å¯¹åº”çš„æ¦‚ç‡å€¼</p>
<script type="math/tex; mode=display">\displaystyle \sum_{i=1}^k P(X=x_i)=1\\
0\leq P(X=x_i)\leq 1</script><h3 id="è¿ç»­å‹æ¦‚ç‡åˆ†å¸ƒ"><a href="#è¿ç»­å‹æ¦‚ç‡åˆ†å¸ƒ" class="headerlink" title="è¿ç»­å‹æ¦‚ç‡åˆ†å¸ƒ"></a>è¿ç»­å‹æ¦‚ç‡åˆ†å¸ƒ</h3><p>Probability Density Function(PDF)    $p(x)$ï¼š<br>æè¿°è¿™ä¸ªéšæœºå˜é‡çš„è¾“å‡ºå€¼ï¼Œåœ¨æŸä¸ªç¡®å®šçš„å–å€¼ç‚¹é™„è¿‘çš„å¯èƒ½æ€§</p>
<script type="math/tex; mode=display">\int _{Val(x)}p(x)\,dx=1\\
0\leq P(a\leq X\leq b)=\int _{a}^{b}p(x)\,dx\leq 1</script><p>è¿ç»­éšæœºå˜é‡é‡‡ç”¨ä»»ä½•ç‰¹å®šå€¼çš„ç»å¯¹å¯èƒ½æ€§ä¸º0ï¼š $P(X=x_i)=\int _{x_i}^{x_i}p(x)\,dx=0$</p>
<h1 id="Probabilistic-Reasoning"><a href="#Probabilistic-Reasoning" class="headerlink" title="Probabilistic Reasoning"></a>Probabilistic Reasoning</h1><h2 id="è”åˆæ¦‚ç‡-Joint-Probability"><a href="#è”åˆæ¦‚ç‡-Joint-Probability" class="headerlink" title="è”åˆæ¦‚ç‡ Joint Probability"></a>è”åˆæ¦‚ç‡ Joint Probability</h2><p>äº‹ä»¶Aã€BåŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡ã€‚è¿™ä¸¤ä¸ªäº‹ä»¶çš„æ¦‚ç‡åˆ†å¸ƒå¯ä»¥å…¨æ˜¯è¿ç»­æ€§ï¼Œå¯ä»¥å…¨æ˜¯ç¦»æ•£å‹ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ªè¿ç»­ä¸€ä¸ªç¦»æ•£ã€‚<br>eg. åŒç¦»æ•£çš„æƒ…å†µï¼š</p>
<script type="math/tex; mode=display">\sum _{x\in Val(X)}\sum _{y\in Val(Y)}p(x,y)=1</script><h2 id="è¾¹ç¼˜åˆ†å¸ƒ-Marginalization"><a href="#è¾¹ç¼˜åˆ†å¸ƒ-Marginalization" class="headerlink" title="è¾¹ç¼˜åˆ†å¸ƒ Marginalization"></a>è¾¹ç¼˜åˆ†å¸ƒ Marginalization</h2><p>è¾¹ç¼˜æ¦‚ç‡åˆ†å¸ƒæ˜¯æŒ‡ä»…è€ƒè™‘ä¸€ä¸ªå˜é‡çš„åˆ†å¸ƒè€Œä¸è€ƒè™‘æ‰€æœ‰å…¶å®ƒå˜é‡çš„åˆ†å¸ƒã€‚<br>å‡è®¾å·²ç»å¾—åˆ°äº†å…³äºéšæœºå˜é‡ $X$ å’Œ $Y$ çš„è”åˆåˆ†å¸ƒå‡½æ•° $p(x,y)$ï¼Œå¯ä»¥é€šè¿‡<strong>â€œsum ruleâ€</strong>å°† $Y$ çš„æ‰€æœ‰æ¦‚ç‡ç´¯åŠ ä»è€Œå°† $Y$ è¾¹ç¼˜åŒ–ï¼Œè¿›è€Œå¾—åˆ° $X$ çš„è¾¹ç¼˜åˆ†å¸ƒã€‚<br>åŒç¦»æ•£å‹ï¼š</p>
<script type="math/tex; mode=display">
{\displaystyle p_{X}(x_{i})=\sum _{j}p(x_{i},y_{j})}\\
{\displaystyle p_{Y}(y_{j})=\sum _{i}p(x_{i},y_{j})}</script><p>åŒè¿ç»­å‹ï¼š</p>
<script type="math/tex; mode=display">
{\displaystyle p_{X}(x)=\int p(x,y)\,dy}\\
{\displaystyle p_{Y}(y)=\int p(x,y)\,dx}</script><p>å¯¹é«˜ç»´åŒæ ·é€‚ç”¨ï¼š(éšæœºå˜é‡ $W$ æ˜¯ç¦»æ•£çš„ï¼Œ$Z$ æ˜¯è¿ç»­çš„ï¼Œå·²çŸ¥ $W,X,Y,Z$ çš„è”åˆåˆ†å¸ƒ)ï¼š</p>
<script type="math/tex; mode=display">{\displaystyle p(x,y)=\sum _m\int p(w,x,y,z)\,dz}</script><h2 id="æ¡ä»¶æ¦‚ç‡-Conditional-Probability"><a href="#æ¡ä»¶æ¦‚ç‡-Conditional-Probability" class="headerlink" title="æ¡ä»¶æ¦‚ç‡ Conditional Probability"></a>æ¡ä»¶æ¦‚ç‡ Conditional Probability</h2><p>$p(X|Y=y^*)$ ï¼šç»™å®š $Y=y^*$ æ—¶ $X$ çš„æ¦‚ç‡åˆ†å¸ƒï¼Œä¹Ÿç§°ä½œæ¦‚ç‡çš„<strong>â€œchain ruleâ€æˆ–â€product ruleâ€</strong>ï¼Œå…¶ä¸­ $X$ æ˜¯éšéšæœºå˜é‡ï¼Œ $Y$ æ˜¯è§‚å¯Ÿå€¼(observation/evidence).</p>
<script type="math/tex; mode=display">
P(x|Y=y^{*})=\frac{p(x,Y=y^*)}{\int p(x,Y=y^*)\,dx}=\frac{p(x,Y=y^*)}{p(Y=y^*)}</script><p>å¯ä»¥ç®€å†™ä¸ºï¼š</p>
<script type="math/tex; mode=display">
p(x|y)=\frac{p(x,y)}{p(y)}\\\\
p(x,y)=p(x|y)p(y)=p(y|x)p(x)</script><h2 id="è´å¶æ–¯æ³•åˆ™-Bayesâ€™-Rule"><a href="#è´å¶æ–¯æ³•åˆ™-Bayesâ€™-Rule" class="headerlink" title="è´å¶æ–¯æ³•åˆ™ Bayesâ€™ Rule"></a>è´å¶æ–¯æ³•åˆ™ Bayesâ€™ Rule</h2><script type="math/tex; mode=display">
p(y|x)=\frac{p(x|y)p(y)}{p(x)}=\frac{p(x|y)p(y)}{\int p(x,y)\,dy}=\frac{p(x|y)p(y)}{\int p(x|y)p(y)\,dy}</script><p>$p(x|y)$ æ˜¯ä¼¼ç„¶å‡½æ•°(likelihood function)ï¼Œä»£è¡¨ç»™å®š $Y$ æ—¶è§‚å¯Ÿåˆ°ç‰¹å®š $X$ å€¼çš„å€¾å‘æ€§(propensity)<br>$p(y)$ æ˜¯å…ˆéªŒ(Prior)æ¦‚ç‡ï¼Œä»£è¡¨åœ¨è§‚æµ‹åˆ° $X$ ä¹‹å‰æŒæ¡çš„ $Y$ çš„ä¿¡æ¯<br>$p(y|x)$ æ˜¯åéªŒ(posterior)æ¦‚ç‡ï¼Œä»£è¡¨åœ¨è§‚æµ‹åˆ° $X$ ä¹‹åæŒæ¡çš„ $Y$ çš„ä¿¡æ¯<br>$p(x)$ æ˜¯è§‚æµ‹åˆ°çš„ä¿¡æ¯(evidence)ï¼Œæ˜¯å¸¸æ•°ï¼Œç”¨æ¥å°†åˆ†å­æ­£åˆ™åŒ–ä»¥ä¿è¯å·¦ä¾§æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ¦‚ç‡åˆ†å¸ƒ</p>
<h2 id="ç‹¬ç«‹æ€§-independence"><a href="#ç‹¬ç«‹æ€§-independence" class="headerlink" title="ç‹¬ç«‹æ€§ independence"></a>ç‹¬ç«‹æ€§ independence</h2><p>éšæœºå˜é‡ $X$ å’Œ $Y$ ç‹¬ç«‹æ„å‘³ç€æ¯ä¸ªæ¡ä»¶åˆ†å¸ƒéƒ½ç›¸åŒï¼š</p>
<script type="math/tex; mode=display">
p(x|y)=p(x)\\\\
p(y|x)=p(y)</script><p>æ­¤æ—¶ $X$ å’Œ $Y$ çš„è”åˆæ¦‚ç‡ç­‰äºè¾¹ç¼˜æ¦‚ç‡çš„ä¹˜ç§¯ï¼š</p>
<script type="math/tex; mode=display">p(x,y)=p(x|y)p(y)=p(x)p(y)</script><h2 id="æœŸæœ›-Expectation"><a href="#æœŸæœ›-Expectation" class="headerlink" title="æœŸæœ› Expectation"></a>æœŸæœ› Expectation</h2><p>å‡½æ•° $f(x)$ æ ¹æ® $X$ çš„åˆ†å¸ƒå–å¾—çš„å¹³å‡å€¼è¢«ç§°ä½œæœŸæœ›ï¼š</p>
<script type="math/tex; mode=display">E[f(x)]=\sum_x f(x)p(x)\\E[f(x)]=\int f(x)p(x)\,dx</script><p>Rules of Expectation:</p>
<ol>
<li>å¸¸æ•°çš„æœŸæœ›è¿˜æ˜¯å¸¸æ•°ï¼š<script type="math/tex; mode=display">E[k]=k</script></li>
<li>å¸¸æ•°å€çš„å‡½æ•°çš„æœŸæœ›ç­‰äºå‡½æ•°çš„æœŸæœ›çš„å¸¸æ•°å€ï¼š<script type="math/tex; mode=display">E[kf(x)]=kE[f(x)]</script></li>
<li>å‡½æ•°å’Œçš„æœŸæœ›ç­‰äºå‡½æ•°æœŸæœ›çš„å’Œï¼š<script type="math/tex; mode=display">E[f(x)+g(x)]=E[f(x)]+E[g(x)]</script></li>
<li>ç›¸äº’ç‹¬ç«‹çš„éšæœºå˜é‡çš„å‡½æ•°ä¹˜ç§¯çš„æœŸæœ›ç­‰äºå‡½æ•°æœŸæœ›çš„ä¹˜ç§¯ï¼š<script type="math/tex; mode=display">E[f(x)g(y)]=E[f(x)]E[g(y)]</script>if $X$, $Y$ are independent.</li>
</ol>
<h1 id="å¸¸è§çš„åˆ†å¸ƒ"><a href="#å¸¸è§çš„åˆ†å¸ƒ" class="headerlink" title="å¸¸è§çš„åˆ†å¸ƒ"></a>å¸¸è§çš„åˆ†å¸ƒ</h1><h2 id="ä¼¯åŠªåˆ©åˆ†å¸ƒ-Bernoulli-Distribution"><a href="#ä¼¯åŠªåˆ©åˆ†å¸ƒ-Bernoulli-Distribution" class="headerlink" title="ä¼¯åŠªåˆ©åˆ†å¸ƒ Bernoulli Distribution"></a>ä¼¯åŠªåˆ©åˆ†å¸ƒ Bernoulli Distribution</h2><p>éšæœºå˜é‡ $X$ æ˜¯ä¸€ä¸ªäºŒå…ƒéšæœºå˜é‡ï¼Œ$x\in\{0,1\}$</p>
<script type="math/tex; mode=display">{\displaystyle p(X=0|\lambda)=1-\lambda\\p(X=1|\lambda)=\lambda}</script><p>Or</p>
<script type="math/tex; mode=display">{\displaystyle p(x)=\lambda^x(1-\lambda)^{1-x}\\p(x)=Bern_x[\lambda]}</script><h2 id="Categorical-Distribution"><a href="#Categorical-Distribution" class="headerlink" title="Categorical Distribution"></a>Categorical Distribution</h2><p>éšæœºå˜é‡ $X$ æ˜¯ä¸€ä¸ªéè¿ç»­å‹éšæœºå˜é‡ï¼Œæœ‰1-kä¸ªå½¼æ­¤äº’æ–¥çš„å–å€¼ã€‚<br>éšæœºå˜é‡ $X$ çš„å–å€¼ $x$ è¢«è¡¨ç¤ºä¸ºä¸€ä¸ª $K$ ç»´å‘é‡ $e_k$ å…¶ä¸­ $x_k=1$ ä¸” $\sum_{k=1}^Kx_k=1$<br>$K$ ç»´å‚æ•° $\lambda=[\lambda_1,â€¦,\lambda_K]^T$ï¼Œå…¶ä¸­ $\lambda&gt;= 0$ï¼Œ$\sum_k\lambda_k=1$</p>
<script type="math/tex; mode=display">p(X=e_k|\lambda)=\lambda_k</script><p>Or</p>
<script type="math/tex; mode=display">{\displaystyle p(x)=\prod_{k=1}^K\lambda_k^{x_k}=\lambda_k\\p(x)=Cat_x[\lambda]}</script><h2 id="å•å…ƒé«˜æ–¯åˆ†å¸ƒ-Univariate-Normal-Distribution"><a href="#å•å…ƒé«˜æ–¯åˆ†å¸ƒ-Univariate-Normal-Distribution" class="headerlink" title="å•å…ƒé«˜æ–¯åˆ†å¸ƒ Univariate Normal Distribution"></a>å•å…ƒé«˜æ–¯åˆ†å¸ƒ Univariate Normal Distribution</h2><p>éšæœºå˜é‡ $X\in \mathbb{R}$ , $\mu\in\mathbb{R}$ (mean) , $\sigma^2&gt;0$ (variance)</p>
<script type="math/tex; mode=display">{\displaystyle p(x)={\frac {1}{\sqrt {2\pi\sigma^2}}}exp{-{\frac {(x-\mu)^2}{2\sigma^2}}}\\p(x)=Norm_x[\mu,\sigma^2]}</script><h2 id="å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ-Multivariate-Normal-Distribution"><a href="#å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ-Multivariate-Normal-Distribution" class="headerlink" title="å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ Multivariate Normal Distribution"></a>å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ Multivariate Normal Distribution</h2><p>éšæœºå˜é‡ $X$ æ˜¯ä¸€ä¸ª $k$ ç»´å‘é‡ï¼š$\mathbf{x}\in\mathbb{R}^k$ , $\mathbf{x}=x_{1},\ldots ,x_{k}$<br>å‡å€¼mean: $\boldsymbol{\mu}\in\mathbb{R}^k$<br>åæ–¹å·®çŸ©é˜µcovariance matrix: $\boldsymbol{\Sigma}\in\mathbb{R}_{+}^{k\times k}$</p>
<script type="math/tex; mode=display">
{\displaystyle p(\mathbf{x})={\frac {\exp \{-{\frac {1}{2}}({\mathbf {x} }-{\boldsymbol {\mu }})^{\mathrm {T} }{\boldsymbol {\Sigma }}^{-1}({\mathbf {x} }-{\boldsymbol {\mu }})\}}{\sqrt {(2\pi )^{k}|{\boldsymbol {\Sigma }}|}}}\\
p(\mathbf{x})=Norm_{\mathbf{x}}[\boldsymbol {\mu },\boldsymbol {\Sigma }]}</script><h1 id="å…±è½­åˆ†å¸ƒ-Conjugate-Distribution"><a href="#å…±è½­åˆ†å¸ƒ-Conjugate-Distribution" class="headerlink" title="å…±è½­åˆ†å¸ƒ Conjugate Distribution"></a>å…±è½­åˆ†å¸ƒ Conjugate Distribution</h1><blockquote>
<p>if the posterior distributions $p(\theta|x)$ are in the same probability distribution family as the prior probability distribution $p(\theta)$, the prior and posterior are then called conjugate distributions, and the prior is called a conjugate prior for the likelihood function $p(x | \theta)$.   â€”- wikipedia</p>
</blockquote>
<p>å³ï¼šåœ¨è´å¶æ–¯å…¬å¼(åéªŒ=ä¼¼ç„¶*å…ˆéªŒ/å¸¸æ•°)ä¸­ï¼Œå¦‚æœåéªŒå’Œå…ˆéªŒæ˜¯åŒæ—å‡½æ•°ï¼Œå³ $p_{post}=k\times p_{prior}$ ï¼Œåˆ™è¿™ä¸ªå…ˆéªŒåˆ†å¸ƒæ˜¯ä¼¼ç„¶å‡½æ•°çš„å…±è½­åˆ†å¸ƒï¼Œæ¯ä¸ªä¼¼ç„¶å‡½æ•° $p(x | \theta)$ éƒ½æœ‰å”¯ä¸€å…±è½­åˆ†å¸ƒä¸ä¹‹å¯¹åº”ã€‚</p>
<p><img src="/images/conjugate_distribution.png" alt="history"></p>
<h2 id="ç”¨æ³•ä¸€ï¼šå­¦ä¹ ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„å‚æ•°-theta"><a href="#ç”¨æ³•ä¸€ï¼šå­¦ä¹ ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„å‚æ•°-theta" class="headerlink" title="ç”¨æ³•ä¸€ï¼šå­¦ä¹ ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„å‚æ•° $\theta$"></a>ç”¨æ³•ä¸€ï¼šå­¦ä¹ ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„å‚æ•° $\theta$</h2><ol>
<li>æ‰¾åˆ°ä¸ä¼¼ç„¶å‡½æ•°(likelihood)å¯¹åº”çš„å…±è½­å…ˆéªŒåˆ†å¸ƒ</li>
<li>åéªŒ $p(\theta|x)$ å¿…é¡»ä¸å…±è½­å…ˆéªŒåˆ†å¸ƒæœ‰ç›¸åŒå½¢å¼</li>
<li>è¯´æ˜ $p(x)$ (evidence)å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸æ•°</li>
</ol>
<h2 id="ç”¨æ³•äºŒï¼šè¾¹ç¼˜åŒ–å‚æ•°"><a href="#ç”¨æ³•äºŒï¼šè¾¹ç¼˜åŒ–å‚æ•°" class="headerlink" title="ç”¨æ³•äºŒï¼šè¾¹ç¼˜åŒ–å‚æ•°"></a>ç”¨æ³•äºŒï¼šè¾¹ç¼˜åŒ–å‚æ•°</h2><script type="math/tex; mode=display">p(x^*|\boldsymbol{x})=\int p(x^*|\theta)p(\theta|\boldsymbol{x})\,d\theta</script><ol>
<li>é€‰æ‹©å¦ä¸€é¡¹ $p(x^*|\theta)$ çš„å…±è½­ $p(\theta|\boldsymbol{x})$</li>
<li>ä¹˜ç§¯ç®€åŒ–æˆäº†ä¸€ä¸ªåˆ†å¸ƒä¸å¸¸æ•°çš„ä¹˜ç§¯</li>
</ol>
<ul>
<li>i.e. : that is</li>
<li>a.k.a : Also Known As</li>
</ul>
]]></content>
      <categories>
        <category>Uncertainty Modelling in AI</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>Bayesian Networks (Directed Graphical Models)</title>
    <url>/2020/08/19/CS5340%20Lec02/</url>
    <content><![CDATA[<h1 id="æ¡ä»¶ç‹¬ç«‹-conditional-independence"><a href="#æ¡ä»¶ç‹¬ç«‹-conditional-independence" class="headerlink" title="æ¡ä»¶ç‹¬ç«‹ conditional independence"></a>æ¡ä»¶ç‹¬ç«‹ conditional independence</h1><p>å®Œå…¨ç‹¬ç«‹ä¸è¶³ä»¥å¯¹ç°å®çš„éšæœºå˜é‡å»ºæ¨¡ï¼Œè€Œå®Œå…¨ç›¸å…³ä¼šå¯¼è‡´è®¡ç®—é‡è¿‡å¤§ã€‚<br>éšæœºå˜é‡ $X_A$ å’Œ $X_C$ å…³äº $X_B$ æ¡ä»¶ç‹¬ç«‹ï¼š$p(x_A,x_C|x_B)=p(x_A|x_B) p(x_C|x_B)$<br>ç­‰ä»·äºï¼š$p(x_A|x_B,x_C)=p(x_A|x_B) \qquad \forall X_B:x_B&gt;0$<br>ä¹Ÿå¯ä»¥å†™ä½œï¼š$X_A \perp X_C | X_B$<br><a id="more"></a></p>
<p>ä¾‹å¦‚ï¼šä¸€ä¸ªäººçš„åŸºå› ä¸çˆ¶æ¯ä¹‹å¤–çš„éåä»£çš„åŸºå› åœ¨ç»™å®šå…¶çˆ¶æ¯åŸºå› çš„æ¡ä»¶ä¸‹ç›¸äº’ç‹¬ç«‹ï¼š</p>
<script type="math/tex; mode=display">X_{child}\perp (X_{non-descendants}\backslash X_{parent}) | X_{parent}</script><p><strong>Markovå‡è®¾ï¼šä»»æ„èŠ‚ç‚¹åœ¨å±€éƒ¨ä»…ä»…ä¾èµ–äºå®ƒçš„ç›´æ¥çˆ¶èŠ‚ç‚¹</strong></p>
<h1 id="è´å¶æ–¯ç½‘ç»œ-Bayes-Network"><a href="#è´å¶æ–¯ç½‘ç»œ-Bayes-Network" class="headerlink" title="è´å¶æ–¯ç½‘ç»œ Bayes Network"></a>è´å¶æ–¯ç½‘ç»œ Bayes Network</h1><h2 id="å®šä¹‰-Definition"><a href="#å®šä¹‰-Definition" class="headerlink" title="å®šä¹‰ Definition"></a>å®šä¹‰ Definition</h2><p>ä½¿ç”¨æœ‰å‘æ— ç¯å›¾(DAG: directed acyclic graph)$\mathcal G(\mathcal V,\mathcal E)$æ¥è¡¨ç¤ºæ¡ä»¶ç‹¬ç«‹ï¼Œå…¶ä¸­ $\mathcal V$ æ˜¯é¡¶ç‚¹é›†åˆï¼Œ$\mathcal E$ æ˜¯æœ‰å‘è¾¹é›†åˆã€‚æ¯ä¸ªé¡¶ç‚¹ä»£è¡¨ä¸€ä¸ªéšæœºå˜é‡ï¼Œæœ‰å‘è¾¹ä»£è¡¨éšæœºå˜é‡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>
<p>Ancestorsï¼šå‰åºç»“ç‚¹<br>Descendantsï¼šåç»­ç»“ç‚¹</p>
<p>$X_{\pi_i}$æ˜¯éšæœºå˜é‡ $X_i$ çš„parent<br>å¦‚æœ$X_i$å…¥åº¦ä¸º0ï¼Œåˆ™parentä¸ºç©ºé›†</p>
<ul>
<li>å¿…é¡»æ˜¯æ— ç¯å›¾ï¼Œå³ï¼šå›¾ä¸­å¿…é¡»å­˜åœ¨æ‹“æ‰‘æ’åº(â€œThere exists an ordering of the nodes such that there are no links that go from any node to any lower numbered node. â€œ)</li>
<li>For practical applications of probabilistic models, it will typically be the highernumbered variables corresponding to terminal nodes of the graph that represent the observations, with lower-numbered nodes corresponding to latent variables. </li>
<li>The hidden variables in a probabilistic model need not, however, have any explicit physical interpretation but may be introduced simply to allow a more complex joint distribution to be constructed from simpler components. </li>
</ul>
<h2 id="Markov-Assumption"><a href="#Markov-Assumption" class="headerlink" title="Markov Assumption"></a>Markov Assumption</h2><script type="math/tex; mode=display">X_i\perp (X_{nonDesc(X_i)})\backslash X_{\pi_i})|X_{\pi_i}</script><p>è¿™ç§parent-childæ¨¡å‹ä»£è¡¨äº†æ¡ä»¶ç‹¬ç«‹ï¼š$p(x_i|X_{\pi_i})$</p>
<h2 id="è”åˆæ¦‚ç‡-Joint-Probability"><a href="#è”åˆæ¦‚ç‡-Joint-Probability" class="headerlink" title="è”åˆæ¦‚ç‡ Joint Probability"></a>è”åˆæ¦‚ç‡ Joint Probability</h2><p>â€œ The joint distribution deï¬ned by a graph is given by the product, over all of the nodes of the graph, of a conditional distribution for each node conditioned on the variables corresponding to the parents of that node in the graphâ€<br>éšæœºå˜é‡çš„è”åˆæ¦‚ç‡å¯ä»¥ä»å›¾ä¸­è¡¨ç¤ºä¸ºæ‰€æœ‰å±€éƒ¨æ¡ä»¶ç‹¬ç«‹çš„ä¹˜ç§¯ï¼šï¼ˆå‡è®¾$x_1,â€¦x_N$æ˜¯æ‹“æ‰‘æ’åºï¼‰</p>
<script type="math/tex; mode=display">p(x_1,...x_N)=\prod_{i=1}^Np(x_i|x_{\pi_i})</script><p>This key equation expresses the factorization properties of the joint distribution for a directed graphical model.<br><img src="/images/Markov_Assumption.png" alt="Markov_Assumption"><br>è¦è¯æ˜ $X_1$ å’Œ $X_3$ åœ¨ç»™å®š $X_2$ çš„æƒ…å†µä¸‹ä¸ $X_4$ ç‹¬ç«‹ï¼Œå³è¯ï¼š$p(x_4|x_1,x_2,x_3)=p(x_4|x_2)$ï¼Œå¯ä»¥åˆ†åˆ«æ±‚å‡º $p(x_1,x_2,x_3,x_4)$ å’Œ $p(x_1,x_2,x_3)$ï¼Œä¸¤è€…ç›¸é™¤å¾—åˆ° $p(x_4|x_1,x_2,x_3)$</p>
<h2 id="Parameter-Reduction"><a href="#Parameter-Reduction" class="headerlink" title="Parameter Reduction"></a>Parameter Reduction</h2><p>$m_i$ æ˜¯ç‚¹ $X_i$ çš„ç›´æ¥parentç»“ç‚¹çš„ä¸ªæ•°ï¼Œ$K$ æ˜¯æ¯ä¸ªç‚¹å¯å–å€¼çš„ä¸ªæ•°ã€‚<br>$X_i$ çš„æ¡ä»¶æ¦‚ç‡å¯ä»¥ç”¨ $K^{(m_i+1)}$ ä¸ªå‚æ•°æ¥è¡¨ç¤ºã€‚<br>å‚æ•°ä¸ªæ•°ä» $K^N$ å‡å°‘åˆ°äº† $K^{(m_i+1)}$ï¼Œå…¶ä¸­ $m_i &lt;&lt; N$ã€‚<br><img src="/images/parameter_reduction.png" alt="history"></p>
<h2 id="å…¶å®ƒæ¡ä»¶ç‹¬ç«‹"><a href="#å…¶å®ƒæ¡ä»¶ç‹¬ç«‹" class="headerlink" title="å…¶å®ƒæ¡ä»¶ç‹¬ç«‹"></a>å…¶å®ƒæ¡ä»¶ç‹¬ç«‹</h2><p>é™¤äº†parent-childäº§ç”Ÿçš„æ¡ä»¶ç‹¬ç«‹ï¼Œå›¾ä¸­ä¹Ÿæœ‰å…¶å®ƒçš„æ¡ä»¶ç‹¬ç«‹ã€‚å¦‚ï¼š$X_1\perp X_6| \{X_2,X_3\}$<br>ç›´è§‚è§£é‡Šï¼šå›¾ä¸­ $X_2,X_3$ è¿™ä¸¤ä¸ªç‚¹é˜»éš”äº†(block)æ‰€æœ‰ä» $X_1$ åˆ° $X_6$ çš„è·¯å¾„<br>è¿™æš—ç¤ºäº†å›¾çš„åˆ†éš”å¯ä»¥å¯¼å‘ç›¸å¯¹ç‹¬ç«‹çš„äº§ç”Ÿã€‚</p>
<h3 id="Three-Canonical-3-Node-Graphs"><a href="#Three-Canonical-3-Node-Graphs" class="headerlink" title="Three Canonical 3-Node Graphs"></a>Three Canonical 3-Node Graphs</h3><p>é¡¶ç‚¹ $C$ è¢«ç§°ä½œ â€œhead-to-tailâ€ w.r.t $A$ åˆ° $B$ çš„è·¯å¾„ï¼Œè¿™ä¸ªé¡¶ç‚¹éš”å¼€äº† $A$ å’Œ $B$ å¹¶ä¸”æˆä¸ºäº†ä»–ä»¬ç›¸äº’ç‹¬ç«‹çš„æ¡ä»¶ã€‚å³ï¼š<strong>ç»™å®šå½“å‰çŠ¶æ€çš„æƒ…å†µä¸‹è¿‡å»çŠ¶æ€å’Œæœªæ¥çŠ¶æ€ç›¸äº’ç‹¬ç«‹ã€‚</strong><br><img src="/images/3-Node-Graph-1.png" alt="history"></p>
<p>é¡¶ç‚¹ $C$ è¢«ç§°ä½œ â€œtail-to-tailâ€ w.r.t $A$ åˆ° $B$ çš„è·¯å¾„ï¼Œè¿™ä¸ªé¡¶ç‚¹éš”å¼€äº† $A$ å’Œ $B$ å¹¶ä¸”æˆä¸ºäº†ä»–ä»¬ç›¸äº’ç‹¬ç«‹çš„æ¡ä»¶ã€‚å³ï¼š<strong>$C$ è§£é‡Šäº† $A$ å’Œ $B$ ä¹‹é—´æ‰€æœ‰çš„å…³è”æ€§ã€‚</strong><br><img src="/images/3-Node-Graph-2.png" alt="3-Node-Graph"></p>
<p>é¡¶ç‚¹ $C$ è¢«ç§°ä½œ â€œhead-to-headâ€ w.r.t $A$ åˆ° $B$ çš„è·¯å¾„ï¼Œä¹Ÿç§°ä½œâ€V-structureâ€ã€‚å½“ $C$ ä¸å­˜åœ¨æ—¶ï¼Œ$A$ å’Œ $B$ ä¹‹é—´è·¯å¾„è¢«é˜»éš”ï¼Œ$A$ å’Œ $B$ ç›¸äº’ç‹¬ç«‹ã€‚è€Œå°† $C$ å½“ä½œæ¡ä»¶æ—¶ï¼Œè¿é€šäº†è¿™æ¡è·¯å¾„ï¼Œå¯¼è‡´å­˜åœ¨äº†å…³è”æ€§(explaining-away effect)ã€‚<br><img src="/images/3-Node-Graph-3.png" alt="3-Node-Graph"><br>$C$ çš„æ¯ä¸ªå­èŠ‚ç‚¹ä¹Ÿéƒ½æä¾›äº†è¿™ç§è¿é€šæ€§ã€‚<br><img src="/images/3-Node-Graph-4.png" alt="3-Node-Graph"><br>In summary, a tail-to-tail node or a head-to-tail node leaves a path unblocked unless it is observed in which case it blocks the path. By contrast, a head-to-head node blocks a path if it is unobserved, but once the node, and/or at least one of its descendants, is observed the path becomes unblocked. </p>
<h3 id="Graph-Separation-directional-seperated"><a href="#Graph-Separation-directional-seperated" class="headerlink" title="Graph Separation (directional-seperated)"></a>Graph Separation (directional-seperated)</h3><p>å¦‚æœæ‰€æœ‰ä»ç‚¹é›†$A$åˆ°ç‚¹é›†$B$çš„è·¯å¾„éƒ½åœ¨ç‚¹é›†$C$è¢«è§‚å¯Ÿåˆ°æ—¶è¢«é˜»éš”äº†(blocked)ï¼Œé‚£ä¹ˆ $A\perp B|C$ã€‚<br><strong>$A$ is d-separated from $B$ by $C$.</strong><br> Any such path is said to be blocked if it includes a node such that either </p>
<ul>
<li>the arrows on the path meet either head-to-tail or tail-to-tail at the node, and the node is in the set C, or </li>
<li>the arrows meet head-to-head at the node, and neither the node, nor any of its descendants, is in the set C.</li>
</ul>
<h3 id="Bayes-Ball-Algorithm"><a href="#Bayes-Ball-Algorithm" class="headerlink" title="Bayes Ball Algorithm"></a>Bayes Ball Algorithm</h3><p>æ˜¯ä¸€ä¸ªå¯è¾¾æ€§ç®—æ³•ï¼Œå¯ä»¥ç”¨BFSå®Œæˆã€‚<br>å°†ç‚¹é›†$A$ä¸­çš„æ¯ä¸ªç‚¹ä¸Šæ”¾ç½®ä¸€ä¸ªçƒï¼Œæ²¿ç€è·¯å¾„è¿›è¡Œæ»šåŠ¨ï¼Œå¦‚æœè¢«$C$é˜»éš”åˆ™åœä½ã€‚<br>å¦‚æœ$A$ä¸­æ¯ä¸ªçƒéƒ½æœ€ç»ˆæ— æ³•åˆ°è¾¾$B$ä¸­çš„ç‚¹ï¼Œåˆ™è¯´æ˜ $A\perp B|C$ ï¼Œå¦åˆ™$A$å’Œ$B$åœ¨ç»™å®š$C$æ—¶ä¸æ»¡è¶³æ¡ä»¶ç‹¬ç«‹ã€‚</p>
<h3 id="Markov-Blanket"><a href="#Markov-Blanket" class="headerlink" title="Markov Blanket"></a>Markov Blanket</h3><p>ä¸€ä¸ªé¡¶ç‚¹ $X_i$ ä»…ä¾èµ–äºè‡ªå·±çš„ç›´æ¥çˆ¶èŠ‚ç‚¹(parent) $X_{\pi_i}$ã€ç›´æ¥å­èŠ‚ç‚¹(child)å’Œå­èŠ‚ç‚¹çš„å…¶å®ƒçˆ¶èŠ‚ç‚¹(co-parent)ã€‚<br>$p(x_m|x_{\pi_m}:x_i\in x_{\pi_m})$ ï¼šä»£è¡¨äº†é¡¶ç‚¹ $X_i$ çš„ç›´æ¥å­èŠ‚ç‚¹ä¸å®ƒçš„ç›´æ¥çˆ¶èŠ‚ç‚¹( $X_i$ å’Œå®ƒçš„co-parent)ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚<br><img src="/images/Markov_Blanket.png" alt="history"></p>
]]></content>
      <categories>
        <category>Uncertainty Modelling in AI</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI</tag>
        <tag>ML</tag>
        <tag>PGM</tag>
      </tags>
  </entry>
  <entry>
    <title>Factor Graph and the Junction Tree Algorithm</title>
    <url>/2020/09/09/CS5340%20Lec05/</url>
    <content><![CDATA[<h1 id="Factor-Graph"><a href="#Factor-Graph" class="headerlink" title="Factor Graph"></a>Factor Graph</h1><h2 id="VS-DGM-amp-UGM"><a href="#VS-DGM-amp-UGM" class="headerlink" title="VS DGM &amp; UGM"></a>VS DGM &amp; UGM</h2><p>DGM and UGM: allow a global function of several variables to be expressed as <strong>a product of factors</strong> over subsets of those variables, designed for conditional independence or potentials.<br>Factor graphs: make this decomposition explicit by <strong>introducing additional nodes</strong> for the factors in addition to the nodes representing the variables, designed for more explicit details of the factorization.<br><a id="more"></a></p>
<h2 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h2><p><img src="/images/CS5340/5/FG.png" alt="FG"><br>$p(x_1,â€¦,x_n)=\prod_sf_s(x_s)\qquad x_s\in\{x_1,â€¦,x_n\}$<br>Each $f_s$ is a function of a set of $x_s$.</p>
<h2 id="Convert-a-UGM-into-a-factor-graph"><a href="#Convert-a-UGM-into-a-factor-graph" class="headerlink" title="Convert a UGM into a factor graph"></a>Convert a UGM into a factor graph</h2><p>Representing the potential functions over cliques as factors $f_s(x_s)$.<br>Different factor graphs may correspond to the same DGM/UGM.<br>Loopy DGM/UGM becomes a tree when converted to factor graph.</p>
<p><strong>Goal: compute all singleton marginal probabilities.</strong></p>
<h2 id="Messages"><a href="#Messages" class="headerlink" title="Messages"></a>Messages</h2><p>From variable to factor:</p>
<script type="math/tex; mode=display">v_{is}=\prod_{t\in N(i)-s}\mu_{ti}</script><p>and $v_{is}=1$ when $x_i$ is a leaf.<br>From factor to variable:</p>
<script type="math/tex; mode=display">\mu_{si}=\sum_{x\in N(s)-i}(f_s(x_{N(s)})\prod_{j\in N(s)-i}v_{js})</script><p>and $\mu_{si}=f_s$ when $f_s$ is a leaf.<br><strong>This message is equal to $m_{ji}$ in UGM.</strong></p>
<p>Therefore, we can get the marginalization probability:</p>
<script type="math/tex; mode=display">p(x_i)\propto\prod_{s\in N(i)}\mu_{si}(x_i)=v_{is}\mu_{si}\qquad \forall s\in N(i)</script><p>since $v_{is} = \prod_{t\in N(i)-s}\mu_{ti}$</p>
<h2 id="Sum-product-algorithm-of-factor-graph"><a href="#Sum-product-algorithm-of-factor-graph" class="headerlink" title="Sum-product algorithm of factor graph"></a>Sum-product algorithm of factor graph</h2><p><img src="/images/CS5340/5/sum-product.png" alt="sum-product"></p>
<h1 id="Max-product-Algorithm"><a href="#Max-product-Algorithm" class="headerlink" title="Max-product Algorithm"></a>Max-product Algorithm</h1><h1 id="Junction-Tree"><a href="#Junction-Tree" class="headerlink" title="Junction Tree"></a>Junction Tree</h1>]]></content>
      <categories>
        <category>Uncertainty Modelling in AI</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI</tag>
        <tag>ML</tag>
        <tag>PGM</tag>
      </tags>
  </entry>
  <entry>
    <title>Parameter Learning with Complete Data</title>
    <url>/2020/09/16/CS5340%20Lec06/</url>
    <content><![CDATA[<p>Motivation: How to get the unknown parameter $\theta$ of a DGM/UGM $p(x_1,x_2â€¦,x_M|\theta)$ from fully observed data?<br>Given: a set of ğ‘ independent and identically distributed (i.i.d) complete observation of each random variable ğ‘‹:$x_{1,1}, â€¦ x_{1,N},â€¦, x_{M,1},â€¦x_{M,N}$.</p>
<ul>
<li>Maximum Likelihood Estimate (MLE)<script type="math/tex; mode=display">\begin{aligned}\hat{\theta}&=\arg\max_{\theta} p(x_1,...,x_M|\theta)\\&=\arg\max_{\theta} \prod_{i=0}^N p(x_{1,i},...,x_{M,i}|\theta)\qquad (i.i.d)\end{aligned}</script></li>
<li>Maximum a Posteriori (MAP)<script type="math/tex; mode=display">\begin{aligned}\hat{\theta}&=\arg\max_{\theta} p(\theta|x_1,...,x_M)\\&=\arg\max_{\theta}\frac{p(x_1,...,x_M|\theta)p(\theta)}{p(x_1,...,x_M)}\qquad (Bayes'rule)\\&=\arg\max_{\theta}\frac{\prod_{i=0}^N p(x_{1,i},...,x_{M,i}|\theta)p(\theta)}{p(x_1,...,x_M)}\qquad (i.i.d)\\&=\arg\max_{\theta}\prod_{i=0}^N p(x_{1,i},...,x_{M,i}|\theta)p(\theta)
\end{aligned}</script><a id="more"></a>
</li>
</ul>
<h1 id="DGM-MLE-amp-MAP"><a href="#DGM-MLE-amp-MAP" class="headerlink" title="DGM: MLE &amp; MAP"></a>DGM: MLE &amp; MAP</h1><h2 id="Special-Cases-Single-Random-Variable-DGM"><a href="#Special-Cases-Single-Random-Variable-DGM" class="headerlink" title="Special Cases: Single Random Variable DGM"></a>Special Cases: Single Random Variable DGM</h2><p><pre class="mermaid">graph TD;
    parameters-->X
    theta-->X_observation_1;
    theta-->X_observation_2;
    theta-->...;
    theta-->X_observation_N;</pre><br>theta is the parameter we want to learn from the N disconnected observations of variable.</p>
<h3 id="Continuous-Univariate-Normal-Distribution"><a href="#Continuous-Univariate-Normal-Distribution" class="headerlink" title="Continuous: Univariate Normal Distribution"></a>Continuous: Univariate Normal Distribution</h3><p>Fit an univariate normal distribution model to a set of scalar data $X:x_1,x_2,â€¦,x_N$.<br>Goal is to find the parameter $theta = (\mu,\sigma^2)$</p>
<script type="math/tex; mode=display">p(x|\theta)={\frac {1}{\sqrt {2\pi\sigma^2}}}exp{-{\frac {(x-\mu)^2}{2\sigma^2}}}=Norm_x[\mu,\sigma^2]</script><ul>
<li>Maximum Likelihood Estimation (MLE)</li>
<li>Maximum a Posteriori (MAP)</li>
</ul>
<h3 id="Discrete-Univatiate-Categorical-Distribution"><a href="#Discrete-Univatiate-Categorical-Distribution" class="headerlink" title="Discrete: Univatiate Categorical Distribution"></a>Discrete: Univatiate Categorical Distribution</h3><ul>
<li>Maximum Likelihood Estimation (MLE)</li>
<li>Maximum a Posteriori (MAP)</li>
</ul>
<h2 id="General-Cases"><a href="#General-Cases" class="headerlink" title="General Cases:"></a>General Cases:</h2><h3 id="Discrete"><a href="#Discrete" class="headerlink" title="Discrete"></a>Discrete</h3><h4 id="Maximum-Log-Likelihood"><a href="#Maximum-Log-Likelihood" class="headerlink" title="Maximum Log-Likelihood"></a>Maximum Log-Likelihood</h4><h4 id="Maximum-A-Posteriori-MAP"><a href="#Maximum-A-Posteriori-MAP" class="headerlink" title="Maximum A Posteriori(MAP)"></a>Maximum A Posteriori(MAP)</h4><h3 id="Continuous"><a href="#Continuous" class="headerlink" title="Continuous"></a>Continuous</h3><h4 id="Maximum-Log-Likelihood-1"><a href="#Maximum-Log-Likelihood-1" class="headerlink" title="Maximum Log-Likelihood"></a>Maximum Log-Likelihood</h4><h4 id="Maximum-A-Posteriori-MAP-1"><a href="#Maximum-A-Posteriori-MAP-1" class="headerlink" title="Maximum A Posteriori(MAP)"></a>Maximum A Posteriori(MAP)</h4><h1 id="MRF-stochasitc-maximum-likelihood-amp-iterative-proportional-fitting"><a href="#MRF-stochasitc-maximum-likelihood-amp-iterative-proportional-fitting" class="headerlink" title="MRF: stochasitc maximum likelihood &amp; iterative proportional fitting"></a>MRF: stochasitc maximum likelihood &amp; iterative proportional fitting</h1><h2 id="Stochasitc-Maximum-Likelihood"><a href="#Stochasitc-Maximum-Likelihood" class="headerlink" title="Stochasitc Maximum Likelihood"></a>Stochasitc Maximum Likelihood</h2><h2 id="Iterative-Proportional-Fitting-IFP"><a href="#Iterative-Proportional-Fitting-IFP" class="headerlink" title="Iterative Proportional Fitting(IFP)"></a>Iterative Proportional Fitting(IFP)</h2><h1 id="CRF-stochastic-gradient-descent"><a href="#CRF-stochastic-gradient-descent" class="headerlink" title="CRF: stochastic gradient descent"></a>CRF: stochastic gradient descent</h1><h2 id="Stochasitc-Gradient-Descent"><a href="#Stochasitc-Gradient-Descent" class="headerlink" title="Stochasitc Gradient Descent"></a>Stochasitc Gradient Descent</h2><h2 id="Maximum-A-Posteriori-MAP-2"><a href="#Maximum-A-Posteriori-MAP-2" class="headerlink" title="Maximum A Posteriori(MAP)"></a>Maximum A Posteriori(MAP)</h2>]]></content>
      <categories>
        <category>Uncertainty Modelling in AI</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI</tag>
        <tag>ML</tag>
        <tag>PGM</tag>
      </tags>
  </entry>
  <entry>
    <title>Mixture Models and EM Algorithms</title>
    <url>/2020/09/30/CS5340%20Lec07/</url>
    <content><![CDATA[<h1 id="K-Mean-Deterministic"><a href="#K-Mean-Deterministic" class="headerlink" title="K-Mean (Deterministic)"></a>K-Mean (Deterministic)</h1><h1 id="Gaussian-Mixture-Models"><a href="#Gaussian-Mixture-Models" class="headerlink" title="Gaussian Mixture Models"></a>Gaussian Mixture Models</h1><h1 id="EM-Algorithms"><a href="#EM-Algorithms" class="headerlink" title="EM Algorithms"></a>EM Algorithms</h1>]]></content>
      <categories>
        <category>Uncertainty Modelling in AI</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI</tag>
        <tag>ML</tag>
        <tag>Cluster</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯”è¾ƒæ’åº - 1ï¼šé€‰æ‹© æ’å…¥ å†’æ³¡ é¸¡å°¾é…’ å¸Œå°”</title>
    <url>/2020/08/02/Comparison%20Sorts-1/</url>
    <content><![CDATA[<h1 id="Comparison-sort"><a href="#Comparison-sort" class="headerlink" title="Comparison sort"></a>Comparison sort</h1><blockquote>
<p>â€œA comparison sort is a type of sorting algorithm that only reads the list elements through a single abstract comparison operation (often a â€œless than or equal toâ€ operator or a three-way comparison) that determines which of two elements should occur first in the final sorted list. The only requirement is that the operator forms a total preorder over the data, with:<br>    if a â‰¤ b and b â‰¤ c then a â‰¤ c (transitivity)<br>    for all a and b, a â‰¤ b or b â‰¤ a (connexity).â€<br>    From Wikipedia</p>
</blockquote>
<p><strong>å®Œæ•´æ’åºç®—æ³•ä»£ç ï¼š<a href="https://github.com/huangliu0909/Sort-Algorithms">https://github.com/huangliu0909/Sort-Algorithms</a></strong><br><a id="more"></a><br>æ¯”è¾ƒæ’åºçš„æ ¸å¿ƒæ–¹æ³•æ˜¯è¿›è¡Œä¸¤ä¸ªæ•°å­—çš„æ¯”è¾ƒå¹¶è¿›è¡Œä½ç½®çš„äº¤æ¢(swap)ã€‚</p>
<h1 id="å†’æ³¡æ’åº-Bubble-sort"><a href="#å†’æ³¡æ’åº-Bubble-sort" class="headerlink" title="å†’æ³¡æ’åº Bubble sort"></a>å†’æ³¡æ’åº Bubble sort</h1><p>å¯¹æ¯ä¸ªå…ƒç´ é€ä¸ªä¸åé¢çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœé¡ºåºä¸æ­£ç¡®åˆ™äº¤æ¢ã€‚ç±»ä¼¼äºæ°´ä¸­å†’æ³¡ï¼Œè¾ƒå¤§çš„æ•°æ²‰ä¸‹å»ï¼Œè¾ƒå°çš„æ•°æ…¢æ…¢å†’èµ·æ¥ã€‚i = 0æ—¶ä¼šæŠŠæœ€å¤§çš„æ•°ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€åä¸€ä½ï¼Œi = kæ—¶ä¼šæŠŠç¬¬k+1å¤§çš„æ•°æ”¾åœ¨length-k-1å¤„ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubble_sort</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length - <span class="number">1</span>; i++) </span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; array.length - i - <span class="number">1</span>; j++) </span><br><span class="line">               <span class="keyword">if</span> (array[j] &gt; array[j+<span class="number">1</span>]) swap(array, j, j + <span class="number">1</span>);</span><br><span class="line">               </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="é€‰æ‹©æ’åº-Selection-sort"><a href="#é€‰æ‹©æ’åº-Selection-sort" class="headerlink" title="é€‰æ‹©æ’åº Selection sort"></a>é€‰æ‹©æ’åº Selection sort</h1><p>é‡å¤å¯»æ‰¾å‰©ä½™æ•°ç»„çš„æœ€å°å€¼ï¼Œä¸å½“å‰ä½ç½®çš„å€¼è¿›è¡Œäº¤æ¢ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">selection_sort</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i ++) &#123;</span><br><span class="line">		<span class="keyword">int</span> min = array[i];</span><br><span class="line">		<span class="keyword">int</span> index = i;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt; array.length; j ++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(array[j] &lt; min) &#123;</span><br><span class="line">				min = array[j];</span><br><span class="line">				index = j;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i != index) swap(array, i, index);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="æ’å…¥æ’åº-Insertion-sort"><a href="#æ’å…¥æ’åº-Insertion-sort" class="headerlink" title="æ’å…¥æ’åº Insertion sort"></a>æ’å…¥æ’åº Insertion sort</h1><p>éå†æ•°ç»„ï¼Œå°†ç¬¬iä¸ªæ•°æ’å…¥åˆ°å‰i-1ä¸ªæ•°çš„åˆé€‚ä½ç½®ä¸Šã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertion_sort</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; array.length; i ++) &#123;</span><br><span class="line">		<span class="keyword">int</span> index = array[i]; </span><br><span class="line">           <span class="keyword">int</span> j = i - <span class="number">1</span>; </span><br><span class="line">           <span class="keyword">while</span> (j &gt;= <span class="number">0</span> &amp;&amp; array[j] &gt; index) &#123; </span><br><span class="line">           	array[j + <span class="number">1</span>] = array[j]; </span><br><span class="line">               j = j - <span class="number">1</span>; </span><br><span class="line">           &#125; </span><br><span class="line">           array[j + <span class="number">1</span>] = index; </span><br><span class="line">	&#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="é¸¡å°¾é…’æ’åº-Cocktail-shaker-sort"><a href="#é¸¡å°¾é…’æ’åº-Cocktail-shaker-sort" class="headerlink" title="é¸¡å°¾é…’æ’åº Cocktail shaker sort"></a>é¸¡å°¾é…’æ’åº Cocktail shaker sort</h1><p>å†’æ³¡æ’åºçš„å˜ç§ã€‚å†’æ³¡æ’åºå°†æœ€å¤§çš„é€ä¸ªæ”¾åˆ°æœ€åï¼Œé¸¡å°¾é…’æ’åºæ˜¯åŒå‘çš„å†’æ³¡ã€‚<br>ç¬¬iè½®æ—¶éå†èŒƒå›´ç´¢å¼•æ˜¯iåˆ°length-i-1ï¼Œæ­£å‘éå†ä¸€æ¬¡ï¼Œåˆ¤æ–­æœ‰æ— swapï¼Œæ— åˆ™è¿”å›ï¼Œå¦åˆ™å†è¿›è¡Œä¸€æ¬¡é€†å‘éå†ï¼Œåˆ¤æ–­æœ‰æ— swapï¼Œå¾ªç¯ç›´è‡³æ²¡æœ‰swapã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">cocktail_shaker_sort</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">boolean</span> swapped = <span class="keyword">true</span>; </span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(swapped == <span class="keyword">true</span>) &#123;</span><br><span class="line">		swapped = <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; array.length - i - <span class="number">1</span>; j++) </span><br><span class="line">               <span class="keyword">if</span> (array[j] &gt; array[j+<span class="number">1</span>]) &#123;</span><br><span class="line">               	 swap(array, j, j + <span class="number">1</span>);</span><br><span class="line">               	 swapped = <span class="keyword">true</span>;</span><br><span class="line">               &#125;</span><br><span class="line">		<span class="keyword">if</span>(swapped == <span class="keyword">false</span>) <span class="keyword">return</span>;</span><br><span class="line">		swapped = <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = array.length - i - <span class="number">2</span>; j &gt;= i; j --) &#123;</span><br><span class="line">			<span class="keyword">if</span> (array[j] &gt; array[j+<span class="number">1</span>]) &#123;</span><br><span class="line">              	 swap(array, j, j + <span class="number">1</span>);</span><br><span class="line">              	 swapped = <span class="keyword">true</span>;</span><br><span class="line">              &#125;</span><br><span class="line">		&#125;</span><br><span class="line">		i ++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="å¸Œå°”æ’åº-Shellsort"><a href="#å¸Œå°”æ’åº-Shellsort" class="headerlink" title="å¸Œå°”æ’åº Shellsort"></a>å¸Œå°”æ’åº Shellsort</h1><p>æ’å…¥æ’åºçš„å˜ç§ï¼Œé¦–å…ˆå¯¹æ¯”é—´éš”(gap)è¾ƒè¿œçš„å…ƒç´ è€Œä¸æ˜¯ç›¸é‚»(gap=1)å…ƒç´ ï¼Œé€è½®reduceåˆ°gap=1ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°‘æœ€åæƒ…å†µä¸‹å…ƒç´ çš„äº¤æ¢æ“ä½œçš„æ•°é‡ã€‚å¸¸è§çš„gapé€‰æ‹©ä¸ºï¼šgap=length/2ï¼Œreduceè¿‡ç¨‹gap=gap/2ã€‚æœ€å¤–å±‚å¾ªç¯0~gap-1ï¼Œå¯¹è¿™å…¶ä¸­çš„æ¯ä¸ªæ•°ä¸æ–­+gapå¾—åˆ°çš„é—´éš”è¾ƒè¿œçš„å…ƒç´ è¿›è¡Œæ’å…¥æ’åºã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shell_sort</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> gap = array.length/<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">while</span>(gap != <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; gap; i ++) &#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> j = i + gap; j &lt; array.length; j += gap) &#123;</span><br><span class="line">					<span class="keyword">int</span> index = array[j]; </span><br><span class="line">		            <span class="keyword">int</span> k = j - gap; </span><br><span class="line">		            <span class="keyword">while</span> (k &gt;= i &amp;&amp; array[k] &gt; index) &#123; </span><br><span class="line">		            	array[k + gap] = array[k]; </span><br><span class="line">		                k = k - gap; </span><br><span class="line">		            &#125; </span><br><span class="line">		            array[k + gap] = index; </span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			gap /= <span class="number">2</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å®Œæ•´æ’åºç®—æ³•ä»£ç ï¼š<a href="https://github.com/huangliu0909/Sort-Algorithms">https://github.com/huangliu0909/Sort-Algorithms</a></p>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šç®—æ³•</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>Sort</tag>
      </tags>
  </entry>
  <entry>
    <title>Summary</title>
    <url>/2020/09/30/CS5340%20Summary/</url>
    <content><![CDATA[<h1 id="Graph-Models"><a href="#Graph-Models" class="headerlink" title="Graph Models"></a>Graph Models</h1><h2 id="DGM"><a href="#DGM" class="headerlink" title="DGM"></a>DGM</h2><h2 id="UGM-MRF-Markov-Random-Field"><a href="#UGM-MRF-Markov-Random-Field" class="headerlink" title="UGM (MRF: Markov Random Field)"></a>UGM (MRF: Markov Random Field)</h2><p>Markov Property:</p>
<ul>
<li>Global: no path between</li>
<li>Local: condition upon Markov blanket</li>
<li>Pair: given the rest, no direct edges<a id="more"></a>
</li>
</ul>
<p>Intersection Lemma:</p>
<script type="math/tex; mode=display">X\perp Y|\{W,Z\}\quad + \quad X\perp W|\{Y,Z\}\quad\to\quad X\perp\{Y,W\}|Z</script><p>$X\perp Y|\{W,Z\}$: $p(X,Y,Z,W)=f_{XWZ}(X,W,Z)f_{WYZ}(W,Y,Z)$<br>$X\perp W|\{Y,Z\}$: $p(X,Y,Z,W)=g_{XYZ}(X,Y,Z)g_{WYZ}(W,Y,Z)$<br>$X\perp\{Y,W\}|Z$: $p(X,Y,Z,W)=\mu_{XZ}(X,Z)\mu_{WYZ}(W,Y,Z)$<br><strong>Functions are valid factorizations, or a graph is a valid representation of distribution, if all independencies encoded in this graph is a subset of the distribution.</strong></p>
<p>MRF does <strong>not preserve the local probabilitic interpretations</strong>(conditional probabilities like parent-child relation in DGM), but still has all important representation of the joint distribution.</p>
<p>$X_i$, $X_j$ that are not directly linked are independent given all the rest nodes, which means they should appear in different factors of the factorization of joint distribution.<br>In contrast, all nodes in the same maximal clique should appear together in one local function $\psi(x_c)$.</p>
<p>Joint probability can be factorized as the product of potential functions for all cliques $C$:</p>
<script type="math/tex; mode=display">p(y|\theta)=\frac{1}{Z(\theta)}\prod_{c\in C}\psi_c(y_c|\theta_c)</script><p>Log-linear potetial is defined as:</p>
<script type="math/tex; mode=display">log\psi_c(y_c|\theta)=\phi(y_c)^T\theta_c</script><p><strong>The cliques can be choosen as maximal cliques, pairwise cliques(each edge forms a clique) and canonical cliques(all possible cliques).</strong></p>
<ul>
<li>Generative Models: Likelihood â€” $p(x|C_k)$</li>
<li>Discriminative Models: Likelihood â€” $p(C_k|x)$</li>
</ul>
<h2 id="CRF-Conditional-Random-Field-a-special-kind-of-UGM-discriminative-model"><a href="#CRF-Conditional-Random-Field-a-special-kind-of-UGM-discriminative-model" class="headerlink" title="CRF: Conditional Random Field (a special kind of UGM, discriminative model)"></a>CRF: Conditional Random Field (a special kind of UGM, discriminative model)</h2><p>UGMs condition upon a global input $x$, $x_1,â€¦,x_n$ are fully connected to each other:</p>
<script type="math/tex; mode=display">p(y|x,w)=\frac{1}{Z(x,w)}\prod_{c\in C}\psi_c(y_c|x,w_c)</script><script type="math/tex; mode=display">log\psi_c(y_c|x,w)=\phi(y_c,x)^Tw_c</script><p>So we have:</p>
<script type="math/tex; mode=display">\begin{aligned}
p(y|x,w)&=\frac{1}{Z(x,w)}\psi(y|x,w)
\\&=\frac{exp(\phi(y,x_1,...,x_n)^Tw)}{\sum_y exp(\phi(y,x_1,...,x_n)^Tw)}
\\&=\frac{exp(\sum_n \phi(y,x_n)w_n)}{\sum_y exp(\sum_n \phi(y,x_n)w_n)}
\end{aligned}</script><p>where:</p>
<script type="math/tex; mode=display">\phi(y=1,x_n)w_n=I(y^+)x_nw_n^+</script><script type="math/tex; mode=display">\phi(y=0,x_n)w_n=I(y^-)x_nw_n^-</script><p>$I()$ is an indicate function that is used to choose from $w_n^+$ and $w_n^-$ according to the value of input($y^+$ or $y^-$).</p>
<script type="math/tex; mode=display">\begin{aligned}
p(y^+|x)&=\frac{exp(w_+^Tx)}{exp(w_+^Tx)+exp(w_-^Tx)}\qquad w'=w_+-w_-
\\&=\frac{1}{1+exp(-w^{'T}x)}\qquad Logistic Regression!
\end{aligned}</script><p>The equations above indicate that CRF can be transformed into a DNN when $w_+^Tx$ is a non-linear function $f(x;w)$: </p>
<script type="math/tex; mode=display">p(y+|x)=\sigma(f(x;w))</script><p>The sigmoid function can be replaced by the softmax function for multi-class classification.<br><img src="/images/CS5340/3/models_conpare.png" alt="models_conpare"></p>
<ul>
<li>Benefits of CRF:<br>Make use of observations(data labels)<br>Make the model ata-dependent(make the latent labels depend on global properties )</li>
<li>Shortbacks of CRF:<br>Require labeled training data<br>Learning is slower </li>
</ul>
<h1 id="Inference-for-marginalization-conditional-probability-or-maximum-probability"><a href="#Inference-for-marginalization-conditional-probability-or-maximum-probability" class="headerlink" title="Inference for marginalization/conditional probability or maximum probability"></a>Inference for marginalization/conditional probability or maximum probability</h1><h2 id="Variable-Elimination-query-sensitive"><a href="#Variable-Elimination-query-sensitive" class="headerlink" title="Variable Elimination (query sensitive)"></a>Variable Elimination (query sensitive)</h2><h2 id="Junction-Tree-Algorithm"><a href="#Junction-Tree-Algorithm" class="headerlink" title="Junction Tree Algorithm"></a>Junction Tree Algorithm</h2><h2 id="Factor-Tree-solve-the-loopy-problem"><a href="#Factor-Tree-solve-the-loopy-problem" class="headerlink" title="Factor Tree (solve the loopy problem)"></a>Factor Tree (solve the loopy problem)</h2><h2 id="Cluster-Graph-convert-to-Junction-Tree"><a href="#Cluster-Graph-convert-to-Junction-Tree" class="headerlink" title="Cluster Graph (convert to Junction Tree)"></a>Cluster Graph (convert to Junction Tree)</h2><h1 id="Parameter-Learning"><a href="#Parameter-Learning" class="headerlink" title="Parameter Learning"></a>Parameter Learning</h1>]]></content>
      <categories>
        <category>Uncertainty Modelling in AI</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯”è¾ƒæ’åº - 2ï¼šå½’å¹¶ timsort æ¡¶æ’åº åœˆæ’åº</title>
    <url>/2020/08/03/Comparison%20Sorts-2/</url>
    <content><![CDATA[<p><strong>å®Œæ•´æ’åºç®—æ³•ä»£ç ï¼š<a href="https://github.com/huangliu0909/Sort-Algorithms">https://github.com/huangliu0909/Sort-Algorithms</a></strong></p>
<h1 id="å½’å¹¶æ’åº-Merge-sort"><a href="#å½’å¹¶æ’åº-Merge-sort" class="headerlink" title="å½’å¹¶æ’åº Merge sort"></a>å½’å¹¶æ’åº Merge sort</h1><p>åˆ†æ²»æ³•ï¼Œæ¯æ¬¡å°†ä¸€ä¸ªæ•°ç»„å‡åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå¯¹è¿™ä¸¤éƒ¨åˆ†è¿›è¡Œmergeã€‚<a id="more"></a><br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge_sort</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(start &lt; end) &#123;</span><br><span class="line">			<span class="keyword">int</span> mid = (end + start)/<span class="number">2</span>;</span><br><span class="line">			merge_sort(array, start, mid);</span><br><span class="line">			merge_sort(array, mid + <span class="number">1</span>, end);</span><br><span class="line">			merge(array, start, mid, end);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> start, <span class="keyword">int</span> mid, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span>[] left = Arrays.copyOfRange(array, start, mid + <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">int</span>[] right = Arrays.copyOfRange(array, mid + <span class="number">1</span>, end + <span class="number">1</span>);</span><br><span class="line">		<span class="comment">//Arrays.copyOfRangeå·¦é—­å³å¼€</span></span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>, count = start;</span><br><span class="line">		<span class="keyword">while</span>(i != left.length &amp;&amp; j != right.length) &#123;</span><br><span class="line">			<span class="keyword">if</span>(left[i] &lt; right[j]) &#123;</span><br><span class="line">				array[count] = left[i];</span><br><span class="line">				count ++;</span><br><span class="line">				i ++;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				array[count] = right[j];</span><br><span class="line">				count ++;</span><br><span class="line">				j ++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//æ›´æ–°countå’Œiæˆ–è€…j</span></span><br><span class="line">		<span class="keyword">while</span>(i &lt; left.length) &#123;</span><br><span class="line">			array[count] = left[i];</span><br><span class="line">			i ++;</span><br><span class="line">			count ++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span>(j &lt; right.length) &#123;</span><br><span class="line">			array[count] = right[j];</span><br><span class="line">			j ++;</span><br><span class="line">			count ++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">```	</span><br><span class="line"></span><br><span class="line"># Timsort</span><br><span class="line">**Used in Javaâ€™s Arrays.sort() as well as Pythonâ€™<span class="function">s <span class="title">sorted</span><span class="params">()</span> and <span class="title">sort</span><span class="params">()</span>.**</span></span><br><span class="line"><span class="function">æ··åˆè‡ªå½’å¹¶æ’åºå’Œæ’å…¥æ’åºã€‚å½“æ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°è¶…è¿‡64ï¼Œæ’å…¥æ’åºæ•ˆç‡è¾ƒä½ã€‚Timsortä¸­å·²ç»æ’åºå¥½çš„å­æ•°ç»„è¢«ç§°ä½œrunã€‚è§„å®šä¸€ä¸ªminRunçš„å¤§å°ï¼Œå³ï¼šå¦‚æœä¸€ä¸ªrunå¤§å°å°äºminRunï¼Œå°†å®ƒçš„åä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°åˆé€‚çš„ä½ç½®å½¢æˆminRunã€‚å¯¹äºæ¯ä¸ªæ’åºå¥½çš„minRunï¼Œè¿›è¡Œmerge sortï¼Œåˆå§‹size </span>= runï¼Œsize+= <span class="number">2</span>* sizeã€‚</span><br><span class="line">```Java</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">tim_sort</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> RUN)</span>  </span></span><br><span class="line"><span class="function">    </span>&#123; </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i += RUN)  </span><br><span class="line">        &#123; </span><br><span class="line">        	insertion_sort(array, i, Math.min((i + RUN), (array.length - <span class="number">1</span>))); </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> size = RUN; size &lt; array.length; size = <span class="number">2</span> * size)  </span><br><span class="line">        &#123; </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> left = <span class="number">0</span>; left &lt; array.length; left += <span class="number">2</span> * size)  </span><br><span class="line">            &#123; </span><br><span class="line">                <span class="keyword">int</span> mid = left + size - <span class="number">1</span>; </span><br><span class="line">                <span class="keyword">int</span> right = Math.min((left + <span class="number">2</span> * size - <span class="number">1</span>), (array.length - <span class="number">1</span>)); </span><br><span class="line">                merge(array, left, mid, right); </span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="æ¡¶æ’åº-Bucket-sort"><a href="#æ¡¶æ’åº-Bucket-sort" class="headerlink" title="æ¡¶æ’åº Bucket sort"></a>æ¡¶æ’åº Bucket sort</h1><p>åŸç†æ˜¯å°†æ•°ç»„çš„å…ƒç´ åˆ†å¸ƒ(scatter)åˆ°å¤šä¸ªæ¡¶ä¸­ï¼Œç„¶åæ¯ä¸ªæ¡¶è¢«å•ç‹¬æ’åºï¼Œæœ€åæ”¶é›†(gather)æ¡¶ä¸­å…ƒç´ å¾—åˆ°ç»“æœã€‚<br>æ—¶é—´å¤æ‚åº¦ï¼šæœ€ä¼˜ï¼š$\Omega (n+k)$ï¼Œæœ€åï¼š$O(n^2)$ï¼Œå¹³å‡ï¼š$\Theta(n+k)$<br>æœ€åç©ºé—´å¤æ‚åº¦ï¼š$O(n*k)$<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[]  heapsort(<span class="keyword">int</span>[] array) &#123;</span><br><span class="line">	<span class="keyword">int</span>[] h = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i ++) &#123;</span><br><span class="line">		h = arrAppend(h, array[i]);</span><br><span class="line">		<span class="keyword">int</span> k = i;</span><br><span class="line">		<span class="keyword">while</span>(h[k] &gt; h[(<span class="keyword">int</span>) Math.floor(k/<span class="number">2</span>)]) &#123;</span><br><span class="line">			swap(h, k, (<span class="keyword">int</span>) Math.floor(k/<span class="number">2</span>));</span><br><span class="line">			k = (<span class="keyword">int</span>) Math.floor(k/<span class="number">2</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	swap(h, <span class="number">0</span>, h.length - <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> heapify(h, h.length - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] heapify(<span class="keyword">int</span>[] array, <span class="keyword">int</span> i) &#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="number">0</span> &lt; i) &#123;</span><br><span class="line">		<span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(k + <span class="number">2</span> &lt;= i) &#123;</span><br><span class="line">			<span class="keyword">if</span>(array[k + <span class="number">1</span>] &lt; array[k + <span class="number">2</span>]) &#123;</span><br><span class="line">				swap(array, k, k + <span class="number">2</span>);</span><br><span class="line">				k = k + <span class="number">2</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				swap(array, k, k + <span class="number">1</span>);</span><br><span class="line">				k = k + <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		swap(array, <span class="number">0</span>, i);</span><br><span class="line">		<span class="keyword">return</span> heapify(array, i - <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="åœˆæ’åº-Cycle-sort"><a href="#åœˆæ’åº-Cycle-sort" class="headerlink" title="åœˆæ’åº Cycle sort"></a>åœˆæ’åº Cycle sort</h1><blockquote>
<p><a href="https://www.geeksforgeeks.org/cycle-sort/">https://www.geeksforgeeks.org/cycle-sort/</a><br><a href="https://www.raychase.net/1814">https://www.raychase.net/1814</a></p>
</blockquote>
<p>äº¤æ¢æ¬¡æ•°æœ€å°‘çš„æ’åºï¼Œä¸è®¡æ•°æ’åºç±»ä¼¼ï¼Œä½†åœˆæ’åºåªç»™é‚£äº›éœ€è¦è®¡æ•°çš„æ•°å­—è®¡æ•°ã€‚<br>åœˆæ’åºåˆå«å¾ªç¯æ’åºï¼Œæ˜¯ä¸ç¨³å®šçš„åŸåœ°æ’åºç®—æ³•ã€‚é€‰æ‹©æ’åºæœ¬æ¥å·²ç»è®©å†™å…ƒç´ çš„æ¬¡æ•°å˜å¾—å¾ˆå°‘äº†ï¼Œä½†æ˜¯åœˆæ’åºå¯ä»¥è®©å®ƒæ›´å°‘ï¼šè¯•æƒ³ä¸€ä¸‹è¿™ç§æƒ…å†µï¼Œä½ç½® 1 çš„å…ƒç´ åº”è¯¥æ”¾å½“å‰ä½ç½® 3 çš„å…ƒç´ ï¼Œé€‰æ‹©æ’åºæŠŠå½“å‰ä½ç½® 3 çš„å…ƒç´ å’Œä½ç½® 1 çš„å…ƒç´ äº’æ¢â€”â€”é‚£ä¹ˆåŸæœ¬ä½ç½® 3 çš„å…ƒç´ ï¼Œç›´æ¥å°±åˆ°è¾¾äº†æœ€åå®ƒåº”è¯¥åœ¨çš„ä½ç½®ï¼›ä½†æ˜¯åŸæœ¬ä½ç½® 1 çš„å…ƒç´ å‘¢ï¼Œå´æœ‰å¯èƒ½ä¼šè¢«å†æ¢ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé€‰æ‹©æ’åºä¾ç„¶å¯èƒ½å­˜åœ¨ç€æŸå…ƒç´ è¢«æ¢äº†ä¸æ­¢ä¸€æ¬¡åœ°æ–¹ã€‚åœˆæ’åºçœŸæ­£ä½¿å¾—ä»»ä¸€å…ƒç´ è¦ä¹ˆä¸åŠ¨ï¼Œè¦åŠ¨ä¹Ÿæœ€å¤šåŠ¨ä¸€æ¬¡ã€‚åœˆæ’åºæœ€å¥½å’Œæœ€åçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(n2)ï¼Œä½†æ˜¯å› ä¸ºæœ€å°çš„å†™å…¥æ¬¡æ•°ï¼Œå¯¹äºåœ¨å†™å…¥éå¸¸æ…¢çš„ä»‹è´¨ä¸­æ’åºæ¥è¯´ï¼Œä¼šæœ‰å®ƒçš„ä»·å€¼ï¼ˆä¾‹å¦‚åœ¨æŸäº› Flash é—ªå­˜ä¸­ï¼‰ã€‚</p>
<p>å®Œæ•´æ’åºç®—æ³•ä»£ç ï¼š<a href="https://github.com/huangliu0909/Sort-Algorithms">https://github.com/huangliu0909/Sort-Algorithms</a></p>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šç®—æ³•</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>Sort</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯”è¾ƒæ’åº - 3ï¼šå¿«æ’ å †æ’ å¹³æ»‘ å†…çœ å¥‡å¶</title>
    <url>/2020/08/04/Comparison%20Sorts-3/</url>
    <content><![CDATA[<p><strong>å®Œæ•´æ’åºç®—æ³•ä»£ç ï¼š<a href="https://github.com/huangliu0909/Sort-Algorithms">https://github.com/huangliu0909/Sort-Algorithms</a></strong></p>
<h1 id="å¿«é€Ÿæ’åº-Quicksort"><a href="#å¿«é€Ÿæ’åº-Quicksort" class="headerlink" title="å¿«é€Ÿæ’åº Quicksort"></a>å¿«é€Ÿæ’åº Quicksort</h1><p>å¿«é€Ÿæ’åºæ˜¯ä¸€ç§åˆ†æ²»ç®—æ³•ï¼Œä¸æ–­æ‰¾åˆ°pivotå…ƒç´ ï¼Œå°†æ¯”å®ƒå°çš„æ”¾åœ¨å®ƒå·¦è¾¹ï¼Œæ¯”å®ƒå¤§çš„æ”¾åœ¨å³è¾¹ã€‚åŒæŒ‡é’ˆä»å¤´ã€ä»æœ«å°¾åˆ†åˆ«å¼€å§‹ä¸pivotæ¯”è¾ƒï¼Œå¦‚æœæ»¡è¶³åˆ™ç§»åŠ¨ï¼Œå¦‚æœä¸æ»¡è¶³åˆ™äº¤æ¢ã€‚<a id="more"></a><br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Quicksort</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(end &gt; start) &#123;</span><br><span class="line">		<span class="keyword">int</span> pivot = array[end];</span><br><span class="line">		<span class="keyword">int</span> i = start, j = end;</span><br><span class="line">		<span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">			swap(array, i, j);</span><br><span class="line">			<span class="keyword">if</span>(array[i] &lt; pivot) i ++;</span><br><span class="line">			<span class="keyword">if</span>(array[j] &gt; pivot) j --;</span><br><span class="line">		&#125;</span><br><span class="line">		Quicksort(array, start, i - <span class="number">1</span>);  <span class="comment">// Before pi</span></span><br><span class="line">		Quicksort(array, i + <span class="number">1</span>, end); <span class="comment">// After pi</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="å †æ’åº-Heapsort"><a href="#å †æ’åº-Heapsort" class="headerlink" title="å †æ’åº Heapsort"></a>å †æ’åº Heapsort</h1><p>æ ¹æ®è¾“å…¥æ•°æ®æ„é€ ä¸€ä¸ªæœ€å¤§å †ï¼ˆå †ï¼šæœ‰åºäºŒå‰æ ‘ï¼‰å°†root(index = 0)ä¸æ•°ç»„çš„æœ€åä¸€ä¸ªç‚¹äº¤æ¢(index = len - 1)ï¼Œå³å°†æœ€å¤§å€¼æ”¾åœ¨äº†æ•°ç»„çš„æœ€åï¼Œæ•´ç†å‰len - 1ä¸ªä½¿ä¹‹æˆä¸ºæœ€å¤§å †ï¼Œå¯¹å‰len - 1ä¸ªæ•°é‡å¤ä»¥ä¸Šæ­¥éª¤ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] heapsort(<span class="keyword">int</span>[] array) &#123;</span><br><span class="line">	<span class="keyword">int</span>[] h = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i ++) &#123;</span><br><span class="line">		h = arrAppend(h, array[i]);</span><br><span class="line">		<span class="keyword">int</span> k = i;</span><br><span class="line">		<span class="keyword">while</span>(h[k] &gt; h[(<span class="keyword">int</span>) Math.floor(k/<span class="number">2</span>)]) &#123;</span><br><span class="line">			swap(h, k, (<span class="keyword">int</span>) Math.floor(k/<span class="number">2</span>));</span><br><span class="line">			k = (<span class="keyword">int</span>) Math.floor(k/<span class="number">2</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	swap(h, <span class="number">0</span>, h.length - <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> heapify(h, h.length - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] heapify(<span class="keyword">int</span>[] array, <span class="keyword">int</span> i) &#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="number">0</span> &lt; i) &#123;</span><br><span class="line">		<span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(k + <span class="number">2</span> &lt;= i) &#123;</span><br><span class="line">			<span class="keyword">if</span>(array[k + <span class="number">1</span>] &lt; array[k + <span class="number">2</span>]) &#123;</span><br><span class="line">				swap(array, k, k + <span class="number">2</span>);</span><br><span class="line">				k = k + <span class="number">2</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				swap(array, k, k + <span class="number">1</span>);</span><br><span class="line">				k = k + <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		swap(array, <span class="number">0</span>, i);</span><br><span class="line">		<span class="keyword">return</span> heapify(array, i - <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="å¹³æ»‘æ’åº-Smoothsort"><a href="#å¹³æ»‘æ’åº-Smoothsort" class="headerlink" title="å¹³æ»‘æ’åº Smoothsort"></a>å¹³æ»‘æ’åº Smoothsort</h1><blockquote>
<p><a href="https://en.wikipedia.org/wiki/Smoothsort">https://en.wikipedia.org/wiki/Smoothsort</a></p>
</blockquote>
<p>æ˜¯å †æ’åºçš„ä¸€ä¸ªå˜ç§</p>
<h1 id="å†…çœæ’åº-Introsort"><a href="#å†…çœæ’åº-Introsort" class="headerlink" title="å†…çœæ’åº Introsort"></a>å†…çœæ’åº Introsort</h1><blockquote>
<p><a href="https://en.wikipedia.org/wiki/Introsort">https://en.wikipedia.org/wiki/Introsort</a></p>
</blockquote>
<p>procedure sort(A : array):<br>    let maxdepth = âŒŠlog(length(A))âŒ‹ Ã— 2<br>    introsort(A, maxdepth)</p>
<p>procedure introsort(A, maxdepth):<br>    n â† length(A)<br>    if n â‰¤ 1:<br>        return  // base case<br>    else if maxdepth = 0:<br>        heapsort(A)<br>    else:<br>        p â† partition(A)<br>        // assume this function does pivot selection, p is the final position of the pivot<br>        introsort(A[0:p-1], maxdepth - 1)<br>        introsort(A[p+1:n], maxdepth - 1)</p>
<h1 id="å¥‡å¶æ’åº-Oddâ€“even-sort"><a href="#å¥‡å¶æ’åº-Oddâ€“even-sort" class="headerlink" title="å¥‡å¶æ’åº Oddâ€“even sort"></a>å¥‡å¶æ’åº Oddâ€“even sort</h1><p>é€šè¿‡æ¯”è¾ƒæ•°ç»„ä¸­ç›¸é‚»çš„ï¼ˆå¥‡-å¶ï¼‰ä½ç½®æ•°å­—å¯¹ï¼Œå¦‚æœè¯¥å¥‡å¶å¯¹æ˜¯é”™è¯¯çš„é¡ºåºï¼ˆç¬¬ä¸€ä¸ªå¤§äºç¬¬äºŒä¸ªï¼‰ï¼Œåˆ™äº¤æ¢ã€‚å¯ä»¥ä½¿ç”¨å¹¶è¡Œè®¡ç®—ï¼Œæ¯ä¸ªå¤„ç†å™¨å¤„ç†ä¸€ä¸ªå€¼</p>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šç®—æ³•</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>Sort</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡æ•°æ’åº &amp; åŸºæ•°æ’åº</title>
    <url>/2020/08/01/Counting%20Sorts/</url>
    <content><![CDATA[<h1 id="è®¡æ•°æ’åº-Counting-sort"><a href="#è®¡æ•°æ’åº-Counting-sort" class="headerlink" title="è®¡æ•°æ’åº Counting sort"></a>è®¡æ•°æ’åº Counting sort</h1><blockquote>
<p>â€œIn computer science, counting sort is an algorithm for sorting a collection of objects according to keys that are small integers; that is, it is an integer sorting algorithm. It operates by counting the number of objects that have each distinct key value, and using arithmetic on those counts to determine the positions of each key value in the output sequence. â€œ   From Wikipedia</p>
</blockquote>
<p><strong>å®Œæ•´æ’åºç®—æ³•ä»£ç ï¼š<a href="https://github.com/huangliu0909/Sort-Algorithms">https://github.com/huangliu0909/Sort-Algorithms</a></strong><br><a id="more"></a></p>
<p>è®¡æ•°æ’åºï¼Œæœ‰åˆ«äºæ¯”è¾ƒæ’åºï¼Œä¸éœ€è¦è¿›è¡Œæ•°æ®ä¹‹é—´çš„æ¯”è¾ƒã€äº¤æ¢ã€‚é€‚ç”¨äºä¸åŒæ•°å€¼æ€»æ•°è¾ƒå°çš„åºåˆ—ã€‚<br>é¦–å…ˆï¼Œæ‰¾åˆ°æ•°ç»„çš„æœ€å¤§å€¼maxå’Œæœ€å°å€¼minï¼Œæ„é€ ä¸€ä¸ªcountæ•°ç»„ï¼Œå¤§å°ä¸ºmax-min+1ï¼Œåˆå§‹åŒ–ä¸º0.<br>å¯¹äºåŸå§‹arrayä¸­çš„æ¯ä¸ªæ•°a-minä½œä¸ºcountæ•°ç»„çš„indexè¿›è¡Œè®¡æ•°ã€‚<br>è°ƒæ•´countæ•°ç»„ä½¿å¾—æ¯ä¸ªæ•°å€¼ä¸ºè¿™ä¸ªindexåœ¨resultä¸­å‡ºç°çš„æœ€åä¸€ä¸ªä½ç½®ã€‚<br><strong>å¯¹åŸå§‹arrayä»å³å‘å·¦è¿›è¡Œéå†</strong>ï¼Œå¯¹æ¯ä¸ªå…ƒç´ aæ‰¾åˆ°countæ•°ç»„ä¸­å¯¹åº”çš„ä½ç½®å¡«å…¥resultæ•°ç»„ï¼Œå¹¶ä¸”å°†countæ•°ç»„ä¸­çš„è¯¥æ•°å€¼å‡ä¸€ï¼Œå› ä¸ºä¸Šä¸€ä¸ªä½ç½®å·²ç»è¢«å¡«å…¥äº†ï¼Œä¸‹æ¬¡è¢«å¡«å…¥éœ€è¦å‘å‰æŒªä¸€ä½ã€‚<br>è®¡æ•°æ’åºæ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ã€‚è®¡æ•°æ’åºé€šå¸¸è¢«ä½¿ç”¨ä¸ºåŸºæ•°æ’åº(Radix Sort)çš„ä¸€ä¸ªæ­¥éª¤ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Counting_Sort</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		 <span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">		 <span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line">		 <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> a : array)  <span class="keyword">if</span>(a &gt; max) max = a; <span class="comment">//find max value</span></span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> a : array)  <span class="keyword">if</span>(a &lt; min) min = a; <span class="comment">//find min value</span></span><br><span class="line">		 <span class="keyword">int</span> size = max - min + <span class="number">1</span>; <span class="comment">//the num of distinct values</span></span><br><span class="line">		 <span class="keyword">int</span>[] count = <span class="keyword">new</span> <span class="keyword">int</span>[size]; </span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i ++) count[i] = <span class="number">0</span>; <span class="comment">//initialize</span></span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> a : array) count[a - min] ++; <span class="comment">//counting</span></span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; size; i ++) count[i] += count[i - <span class="number">1</span>]; <span class="comment">//find last index </span></span><br><span class="line">		 <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[array.length];</span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i = array.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i --) &#123;</span><br><span class="line">			 <span class="keyword">int</span> a = array[i];</span><br><span class="line">			 result[count[a] - <span class="number">1</span>] = a;</span><br><span class="line">			 count[a]--;</span><br><span class="line">		 &#125;</span><br><span class="line">		 System.out.println(Arrays.toString(result));</span><br><span class="line">		 <span class="comment">//[0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 5, 6, 7, 8, 9]</span></span><br><span class="line">	  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="åŸºæ•°æ’åº-Radix-Sort"><a href="#åŸºæ•°æ’åº-Radix-Sort" class="headerlink" title="åŸºæ•°æ’åº Radix Sort"></a>åŸºæ•°æ’åº Radix Sort</h1><p>é€šè¿‡æ•°ç»„çš„æœ€å¤§å€¼ç¡®å®šä½æ•°posçš„èŒƒå›´(max/pos != 0)ï¼Œä»ä¸ªä½(pos=1)å¼€å§‹æ ¹æ®æ¯ä¸€ä½(<strong>(a/pos)%10</strong>)è¿›è¡Œè®¡æ•°æ’åºï¼Œæ¯ä¸€è½®è®¡æ•°æ’åºç»“æŸï¼Œpos*=10ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Radix_Sort</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		 <span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">123</span>, <span class="number">2</span>, <span class="number">34</span>, <span class="number">678</span>, <span class="number">345</span>, <span class="number">890</span>, <span class="number">234</span>, <span class="number">789</span>, <span class="number">23</span>, <span class="number">49</span>, <span class="number">843</span>, <span class="number">56</span>, <span class="number">234</span>&#125;;</span><br><span class="line">		 <span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> a : array)  <span class="keyword">if</span>(a &gt; max) max = a; <span class="comment">//find max value</span></span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> pos = <span class="number">1</span>; max/pos != <span class="number">0</span>; pos*=<span class="number">10</span>) &#123;</span><br><span class="line">			 count_sort(array, pos);		 </span><br><span class="line">		&#125;</span><br><span class="line">		 System.out.println(Arrays.toString(array));</span><br><span class="line">		 <span class="comment">//[2, 23, 34, 49, 56, 123, 234, 234, 345, 678, 789, 843, 890]</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">count_sort</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> pos)</span> </span>&#123;</span><br><span class="line">		 <span class="keyword">int</span>[] count = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>]; </span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++) count[i] = <span class="number">0</span>; <span class="comment">//initialize</span></span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> a : array) count[(a/pos)%<span class="number">10</span>] ++; <span class="comment">//counting</span></span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i ++) count[i] += count[i - <span class="number">1</span>]; <span class="comment">//find last index </span></span><br><span class="line">		 <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[array.length];</span><br><span class="line">		 <span class="keyword">for</span>(<span class="keyword">int</span> i = array.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i --) &#123;</span><br><span class="line">			 <span class="keyword">int</span> a = array[i];</span><br><span class="line">			 result[count[(a/pos)%<span class="number">10</span>] - <span class="number">1</span>] = a;</span><br><span class="line">			 count[(a/pos)%<span class="number">10</span>]--;</span><br><span class="line">		 &#125;</span><br><span class="line">		 <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++) array[i] = result[i]; </span><br><span class="line">		 </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å®Œæ•´æ’åºç®—æ³•ä»£ç ï¼š<a href="https://github.com/huangliu0909/Sort-Algorithms">https://github.com/huangliu0909/Sort-Algorithms</a></p>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šç®—æ³•</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>Sort</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ†æ²» åŠ¨æ€è§„åˆ’ è´ªå¿ƒ</title>
    <url>/2020/07/18/Dynamic_Programming/</url>
    <content><![CDATA[<h2 id="åˆ†æ²»-Divide-and-Conquer"><a href="#åˆ†æ²»-Divide-and-Conquer" class="headerlink" title="åˆ†æ²» Divide and Conquer"></a>åˆ†æ²» Divide and Conquer</h2><p>å°†é—®é¢˜åˆ’åˆ†ä¸ºäº’ä¸ç›¸äº¤çš„å­é—®é¢˜ã€‚é€’å½’åœ°æ±‚è§£å­é—®é¢˜çš„è§£ï¼Œå†å°†è¿™äº›è§£ç»„åˆèµ·æ¥ï¼Œå¾—åˆ°åŸé—®é¢˜çš„æœ€ä¼˜è§£ã€‚ï¼ˆeg. å½’å¹¶æ’åºç®—æ³• $T(n)$ï¼‰</p>
<ol>
<li><strong>åˆ†è§£</strong>åŸé—®é¢˜ä¸ºè‹¥å¹²å­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜æ˜¯åŸé—®é¢˜çš„è§„æ¨¡è¾ƒå°çš„å®ä¾‹ã€‚<br>eg. åˆ†è§£å¸¦æ’åºçš„nä¸ªå…ƒç´ çš„åºåˆ—æˆå„å…·n/2ä¸ªå…ƒç´ çš„ä¸¤ä¸ªå­åºåˆ—ã€‚ - - -$D(n)=\theta (1)$</li>
<li><strong>è§£å†³</strong>è¿™äº›å­é—®é¢˜ã€‚<br>å¦‚æœå­é—®é¢˜è§„æ¨¡è¶³å¤Ÿå°ï¼ˆ<strong>åŸºæœ¬æƒ…å†µ</strong>ï¼‰ï¼Œå°±ç›´æ¥æ±‚è§£ï¼Œå¦åˆ™ï¼ˆ<strong>é€’å½’æƒ…å†µ</strong>ï¼‰ä½¿ç”¨é€’å½’è¿›è¡Œæ±‚è§£ã€‚<br>eg. ä½¿ç”¨å½’å¹¶æ’åºé€’å½’åœ°æ’åºä¸¤ä¸ªå­åºåˆ—ã€‚ - - -$2T(n/2)$</li>
<li><strong>åˆå¹¶</strong>è¿™äº›å­é—®é¢˜çš„è§£è·å¾—åŸé—®é¢˜çš„è§£ã€‚<br>eg. åˆå¹¶ä¸¤ä¸ªå·²æ’åºçš„å­åºåˆ—ä»¥äº§ç”Ÿå·²æ’åºçš„ç­”æ¡ˆã€‚ - - -$C(n)=\theta (n)$<a id="more"></a>
</li>
</ol>
<p>å°†åŸé—®é¢˜åˆ’åˆ†ä¸ºaä¸ªé—®é¢˜ï¼Œæ¯ä¸ªé—®é¢˜çš„å¤§å°æ˜¯n/bï¼š$T(n)=aT(n/b)+D(n)+C(n)$ã€‚<br>é€’å½’å¼ï¼šä¸€ä¸ªç­‰å¼æˆ–ä¸ç­‰å¼ï¼Œé€šè¿‡æ›´å°çš„è¾“å…¥ä¸Šçš„å‡½æ•°å€¼æ¥æè¿°ä¸€ä¸ªå‡½æ•°ã€‚ï¼ˆç”¨è‡ªèº«å®šä¹‰è‡ªèº«ï¼‰<br>æ±‚è§£é€’å½’å¼çš„æ–¹æ³•ï¼š</p>
<ol>
<li><strong>ä»£å…¥æ³• Substitution</strong> çŒœæµ‹è§£çš„å½¢å¼ï¼Œå‡å°‘ä¸ç¡®å®šèŒƒå›´ï¼Œç”¨æ•°å­¦å½’çº³æ³•æ±‚å‡ºè§£ä¸­å¸¸ç†Ÿå¹¶è¯æ˜è¿™ä¸ªç•Œæ˜¯æ­£ç¡®çš„ã€‚<br>$T(n)=2T(n/2)+n\to T(n)=O(nlgn)$<br>$T(n)=T(n-1)+n\to T(n)=O(n^2)$<br>$T(n)=T(n/2)+1\to T(n)=O(lgn)$</li>
<li><strong>é€’å½’æ ‘æ³• Iteration</strong> å°†é€’å½’å¼è½¬æ¢ä¸ºä¸€æ£µæ ‘ï¼Œå…¶ç»“ç‚¹è¡¨ç¤ºä¸åŒå±‚æ¬¡çš„é€’å½’è°ƒç”¨äº§ç”Ÿçš„ä»£ä»·ã€‚ç„¶åé‡‡ç”¨è¾¹ç•Œå’ŒæŠ€æœ¯æ¥æ±‚è§£é€’å½’å¼ã€‚</li>
<li><strong>ä¸»æ–¹æ³• Master</strong>  å¯¹äºé€’å½’å¼ $T(n)=aT(n/b)+f(n)$ï¼š<br>a. è‹¥å¯¹äºæŸä¸ªå¸¸æ•° $\epsilon &gt;0$ æœ‰ $f(n)=O(n^{log_ba-\epsilon })$ï¼Œåˆ™ $T(n)=\theta (n^{log_ba})$ã€‚<br>b. è‹¥ $f(n)=\theta (n^{log_ba})$ï¼Œåˆ™ $T(n)=\theta (n^{log_ba}lgn)$ã€‚ï¼ˆé€‚ç”¨äºåˆ†æ²»çš„é€’å½’å¼ï¼‰<br>c. è‹¥å¯¹æŸä¸ªå¸¸æ•°$\epsilon &gt;0$ æœ‰$f(n)=\Omega (n^{log_ba+\epsilon })$ï¼Œä¸”å¯¹æŸä¸ªå¸¸æ•°$c&lt;1$å’Œæ‰€æœ‰è¶³å¤Ÿå¤§çš„næœ‰$af(n/b)\le cf(n)$ï¼Œåˆ™ $T(n)=\theta (f(n))$ã€‚</li>
</ol>
<h2 id="åŠ¨æ€è§„åˆ’-Dynamic-Programming"><a href="#åŠ¨æ€è§„åˆ’-Dynamic-Programming" class="headerlink" title="åŠ¨æ€è§„åˆ’ Dynamic Programming"></a>åŠ¨æ€è§„åˆ’ Dynamic Programming</h2><p><strong>ä¼˜åŒ–å­ç»“æ„</strong>ï¼šä¸€ä¸ªé—®é¢˜åŒ…å«å…¶å­é—®é¢˜çš„æœ€ä¼˜è§£<br><strong>é‡å å­é—®é¢˜</strong>ï¼šåˆ©ç”¨é€’å½’ç®—æ³•åå¤æ±‚è§£ç›¸åŒçš„å­é—®é¢˜<br><strong>åŠ¨æ€è§„åˆ’ç®—æ³•æ— åæ•ˆæ€§ï¼Œæ€»æ˜¯èƒ½å¤Ÿå¾—åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚</strong><br>åŠ¨æ€è§„åˆ’ç®—æ³•å¯¹æ¯ä¸ªå­é—®é¢˜åªæ±‚è§£ä¸€æ¬¡å¹¶å°†å…¶è§£è®°å½•åœ¨è¡¨æ ¼ä¸­ã€‚ä»»ä½•å­é—®é¢˜éƒ½ä¼šç­‰åˆ°å®ƒä¾èµ–çš„å­é—®é¢˜å·²ç»æ±‚è§£ç»“æŸæ‰ä¼šè¿›è¡Œæ±‚è§£ã€‚åŠ¨æ€è§„åˆ’ç®—æ³•è¿è¡Œæ—¶é—´ç›¸å½“äºæ¯ä¸ªå­é—®é¢˜çš„æ±‚è§£æ—¶é—´ä¹‹å’Œã€‚</p>
<ol>
<li>å¯»æ‰¾æœ€ä¼˜è§£çš„ç‰¹å¾ç»“æ„<br>è¯æ˜é—®é¢˜å«æœ‰<strong>ä¼˜åŒ–å­ç»“æ„</strong><br>eg. æœ€çŸ­è·¯å¾„é—®é¢˜å…·æœ‰ä¼˜åŒ–å­ç»“æ„ï¼Œè€Œæœ€é•¿ç®€å•è·¯å¾„é—®é¢˜ï¼ˆä¸å…è®¸æˆç¯ï¼‰ä¸å…·æœ‰ä¼˜åŒ–å­ç»“æ„ã€‚æ ¹æœ¬åŸå› åœ¨äºæ±‚è§£æœ€é•¿è·¯å¾„å­é—®é¢˜æ—¶ç”¨åˆ°çš„æŸäº›èµ„æºï¼ˆé¡¶ç‚¹ï¼‰ï¼Œå¯¼è‡´è¿™äº›èµ„æºåœ¨æ±‚è§£å…¶å®ƒå­é—®é¢˜æ—¶ä¸å¯ç”¨ï¼ˆè‹¥ä¸¤ä¸ªæœ€é•¿è·¯å¾„å­é—®é¢˜æ—‹å¾‹å…±åŒçš„é¡¶ç‚¹åˆ™ä¼šæˆç¯ï¼‰ã€‚<br>a. è¯æ˜é—®é¢˜çš„æœ€ä¼˜è§£çš„ç¬¬ä¸€ä¸ªç»„æˆéƒ¨åˆ†æ˜¯åšå‡ºä¸€ä¸ªé€‰æ‹©ã€‚ä¾‹å¦‚é€‰æ‹©é’¢æ¡çš„ç¬¬ä¸€æ¬¡åˆ‡å‰²ä½ç½®ã€é€‰æ‹©çŸ©é˜µé“¾çš„åˆ’åˆ†ä½ç½®ã€‚åšå‡ºè¿™æ¬¡é€‰æ‹©ä¼šäº§ç”Ÿä¸€ä¸ªæˆ–è€…å¤šä¸ªå­é—®é¢˜ã€‚<br>b. å¯¹äºä¸€ä¸ªç»™å®šé—®é¢˜ï¼Œåœ¨å…¶å¯èƒ½çš„ç¬¬ä¸€æ­¥é€‰æ‹©ä¸­ï¼Œå‡å®šå·²ç»çŸ¥é“å“ªç§é€‰æ‹©æ‰ä¼šå¾—åˆ°æœ€ä¼˜è§£ã€‚<br>c. ç»™å®šå¯è·å¾—æœ€ä¼˜è§£çš„é€‰æ‹©ä¹‹åï¼Œç¡®å®šè¿™ä¸ªé€‰æ‹©ä¼šäº§ç”Ÿå“ªäº›å­é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•æœ€å¥½åœ°åˆ»ç”»å­é—®é¢˜ç©ºé—´ã€‚<br>d. è¯æ˜ï¼š<u>ä½œä¸ºæ„æˆåŸé—®é¢˜æœ€ä¼˜è§£çš„ç»„æˆéƒ¨åˆ†ï¼Œæ¯ä¸ªå­é—®é¢˜çš„è§£å°±æ˜¯å®ƒæœ¬èº«çš„æœ€ä¼˜è§£ã€‚ï¼ˆåè¯ï¼‰</u></li>
<li>é€’å½’åœ°å®šä¹‰æœ€ä¼˜è§£çš„å€¼<br>æ‰¾åˆ°é—®é¢˜è§„æ¨¡ä¸ºnçš„æœ€ä¼˜è§£ä¸è§„æ¨¡å°äºnçš„å­é—®é¢˜çš„æœ€ä¼˜è§£ä¹‹é—´çš„æ•°é‡å…³ç³»ã€‚</li>
<li>è®¡ç®—æœ€ä¼˜è§£çš„å€¼ï¼Œé€šå¸¸é‡‡ç”¨<strong>è‡ªåº•å‘ä¸Š</strong>çš„æ–¹æ³•<br>è‡ªåº•å‘ä¸Šæ–¹æ³•ä½¿å¾—ä»»ä½•å­é—®é¢˜çš„æ±‚è§£åªä¾èµ–äºè§„æ¨¡æ›´å°çš„é—®é¢˜çš„æ±‚è§£ï¼Œä¹Ÿå¯ä»¥ç”¨è¿‡è‡ªé¡¶å‘ä¸‹åŠ å…¥å¤‡å¿˜æœºåˆ¶æ¥å®ç°ã€‚<br>è®¡ç®—æœ€ä¼˜è§£çš„è¿‡ç¨‹ä¸­å¯ä»¥é‡æ„è§£æ¥è®°å½•æœ€ä¼˜è§£çš„è·å–æ–¹å¼ã€‚</li>
<li>åˆ©ç”¨è®¡ç®—å‡ºçš„ä¿¡æ¯æ„é€ ä¸€ä¸ªæœ€ä¼˜è§£</li>
</ol>
<p>eg. æœ€é•¿å…¬å…±å­åºåˆ—ã€é’¢æ¡åˆ‡å‰²ã€æœ€ä¼˜äºŒå‰æœç´¢æ ‘</p>
<h2 id="è´ªå¿ƒ-Greedy"><a href="#è´ªå¿ƒ-Greedy" class="headerlink" title="è´ªå¿ƒ Greedy"></a>è´ªå¿ƒ Greedy</h2><p><strong>ä¼˜åŒ–å­ç»“æ„</strong>ï¼šé—®é¢˜çš„ä¼˜åŒ–è§£åŒ…å«äº†å­é—®é¢˜çš„æœ€ä¼˜è§£ã€‚<br><strong>è´ªå¿ƒé€‰æ‹©æ€§(greedy-choice property)</strong>ï¼šå…¨å±€ä¼˜åŒ–è§£å¯ä»¥é€šè¿‡å±€éƒ¨ä¼˜åŒ–é€‰æ‹©å¾—åˆ°ã€‚å³ï¼šè¿›è¡Œé€‰æ‹©æ—¶å¯ä»¥ç›´æ¥åšå‡ºåœ¨å½“å‰é—®é¢˜ä¸­çœ‹æ¥æœ€ä¼˜çš„é€‰æ‹©è€Œä¸å¿…è€ƒè™‘å­é—®é¢˜çš„è§£ã€‚å³ï¼šå­˜åœ¨ä¸€ä¸ªæœ€ä¼˜è§£æ˜¯ä»¥è´ªå¿ƒé€‰æ‹©å¼€å§‹çš„ã€‚<br>è¯æ˜è´ªå¿ƒé€‰æ‹©æ€§ï¼šå…ˆè€ƒå¯Ÿä¸€ä¸ªå…¨å±€æœ€ä¼˜è§£ï¼Œå¦‚æœå…¨å±€æœ€ä¼˜è§£å¯ä»¥è½¬æ¢æˆä»¥è´ªå¿ƒé€‰æ‹©å¼€å§‹ï¼Œåˆ™å·²å¾—è¯ï¼Œå¦‚æœä¸èƒ½ï¼Œåˆ™å°†è¿™ä¸ªå…¨å±€æœ€ä¼˜è§£çš„å¼€å§‹æ›¿æ¢æˆè´ªå¿ƒé€‰æ‹©ï¼Œä»è€Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ›´ä¼˜çš„è§£ã€‚å› æ­¤å…¨å±€æœ€ä¼˜è§£åº”è¯¥é€‰æ‹©è¿™ä¸ªè´ªå¿ƒé€‰æ‹©åšä¸ºç¬¬ä¸€æ¬¡é€‰æ‹©ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªè§„æ¨¡æ›´å°çš„å­é—®é¢˜ï¼Œ<u>é€šè¿‡æ•°å­¦å½’çº³æ³•å¯è¯æ¯æ¬¡éƒ½å¯¹å­é—®é¢˜è¿›è¡Œè´ªå¿ƒé€‰æ‹©å¯ä»¥å¾—åˆ°åŸé—®é¢˜çš„æœ€ä¼˜è§£ã€‚</u><br><strong>è´ªå¿ƒç®—æ³•å¹¶ä¸èƒ½ä¿è¯å¾—åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚</strong><br>é€šè¿‡è´ªå¿ƒé€‰æ‹©æ€§çš„è¯æ˜ï¼Œæˆ‘ä»¬è¯´æ˜äº†å­˜åœ¨ä¸€ä¸ªå…¨å±€æœ€ä¼˜è§£æ˜¯ä»¥è´ªå¿ƒé€‰æ‹©å¼€å§‹çš„ï¼Œ<u>ä½†æˆ‘ä»¬æ²¡æœ‰è¯æ˜æ‰€æœ‰è´ªå¿ƒé€‰æ‹©å¼€å§‹çš„è§£éƒ½æ˜¯å…¨å±€æœ€ä¼˜è§£ï¼Œ</u>å› æ­¤åœ¨æŸäº›é—®é¢˜ä¸Šä½¿ç”¨è´ªå¿ƒç®—æ³•å¯èƒ½æ— æ³•å¾—åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚<br>è´ªå¿ƒç®—æ³•ä¸åŠ¨æ€è§„åˆ’æœ€å¤§çš„ä¸åŒåœ¨äºï¼Œè´ªå¿ƒå¹¶ä¸æ˜¯é¦–å…ˆå¯»æ‰¾å­é—®é¢˜çš„æœ€ä¼˜è§£ç„¶ååœ¨å…¶ä¸­è¿›è¡Œé€‰æ‹©ï¼ˆè¿™ç§é€‰æ‹©é€šå¸¸ä¾èµ–äºå­é—®é¢˜çš„è§£ï¼‰ï¼Œè€Œæ˜¯ç›´æ¥åšå‡ºä¸€æ¬¡è´ªå¿ƒé€‰æ‹©ï¼ˆå±€éƒ¨æœ€ä¼˜è§£ï¼‰ç„¶åæ±‚è§£å‰©ä¸‹çš„å”¯ä¸€å­é—®é¢˜ï¼Œä¸å¿…æ±‚è§£æ‰€æœ‰å¯èƒ½ç›¸å…³çš„å­é—®é¢˜ã€‚å³ï¼šè´ªå¿ƒç®—æ³•æ€»æ˜¯åšå‡ºå±€éƒ¨æœ€ä¼˜çš„é€‰æ‹©ï¼Œå¸Œæœ›è¿™æ ·çš„é€‰æ‹©å¯ä»¥æœ€ç»ˆè¾¾åˆ°å…¨å±€æœ€ä¼˜ï¼Œè¿™ç§é€‰æ‹©å¯èƒ½ä¾èµ–äºä¹‹å‰åšå‡ºçš„é€‰æ‹©ï¼Œä½†ä¸ä¼šä¾èµ–äºä»»ä½•å°†æ¥çš„é€‰æ‹©æˆ–è€…å­é—®é¢˜çš„è§£ã€‚<br>è´ªå¿ƒç®—æ³•é€šå¸¸é‡‡ç”¨<strong>è‡ªé¡¶å‘ä¸‹</strong>çš„è®¾è®¡ï¼šåšå‡ºä¸€ä¸ªé€‰æ‹©ï¼Œç„¶åæ±‚è§£å‰©ä¸‹é‚£ä¸ªå­é—®é¢˜ã€‚è€Œä¸æ˜¯è‡ªåº•å‘ä¸Šæ±‚è§£å‡ºå¾ˆå¤šå­é—®é¢˜å†åšå‡ºé€‰æ‹©ã€‚<em>æ¯ä¸ªè´ªå¿ƒç®—æ³•ä¸‹ï¼Œå‡ ä¹æ€»æœ‰ä¸€ä¸ªæ›´ç¹ççš„åŠ¨æ€è§„åˆ’ç®—æ³•ã€‚</em></p>
<ol>
<li>å°†æœ€ä¼˜åŒ–é—®é¢˜è½¬åŒ–ä¸ºè¿™æ ·çš„å½¢å¼ï¼šå¯¹å…¶åšå‡ºä¸€æ¬¡é€‰æ‹©ä¹‹åï¼Œåªå‰©ä¸‹ä¸€ä¸ªå­é—®é¢˜éœ€è¦æ±‚è§£ã€‚</li>
<li>è¯æ˜åšå‡ºè´ªå¿ƒé€‰æ‹©åï¼ŒåŸé—®é¢˜æ€»æ˜¯å­˜åœ¨æœ€ä¼˜è§£ï¼Œ<strong>å³è´ªå¿ƒæ€»æ˜¯å®‰å…¨çš„</strong>ã€‚<br>è¿›è¡Œè´ªå¿ƒé€‰æ‹©æ—¶ï¼Œå¯ä»¥é€šè¿‡æ•°æ®é¢„å¤„ç†ï¼ˆæ’åºï¼‰æˆ–è€…ä½¿ç”¨åˆé€‚çš„æ•°æ®ç»“æ„ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰æ¥ä½¿å¾—è´ªå¿ƒé€‰æ‹©æ›´å¿«é€Ÿé«˜æ•ˆã€‚</li>
<li>è¯æ˜åšå‡ºè´ªå¿ƒé€‰æ‹©åï¼Œå‰©ä½™çš„å­é—®é¢˜çš„æœ€ä¼˜è§£ä¸è¯¥è´ªå¿ƒé€‰æ‹©ç»„åˆå³å¯å¾—åˆ°åŸé—®é¢˜çš„æœ€ä¼˜è§£ï¼Œè¿™æ ·å°±å¾—åˆ°äº†<strong>æœ€ä¼˜å­ç»“æ„</strong>ã€‚</li>
</ol>
<p>eg. æœ€å°ç”Ÿæˆæ ‘ã€Dijkstraç®—æ³•ã€èµ«å¤«æ›¼ç¼–ç ã€ä»»åŠ¡è°ƒåº¦é—®é¢˜ã€éƒ¨åˆ†èƒŒåŒ…é—®é¢˜</p>
<blockquote>
<p>å‚è€ƒï¼šã€Šç®—æ³•å¯¼è®ºã€‹æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾ ç¬¬2ã€4ã€15ã€16ç« </p>
</blockquote>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šç®—æ³•</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹¶æŸ¥é›† Disjoint Set</title>
    <url>/2020/08/08/Disjointed_Set/</url>
    <content><![CDATA[<h2 id="å¹¶æŸ¥é›†-Disjoint-Set"><a href="#å¹¶æŸ¥é›†-Disjoint-Set" class="headerlink" title="å¹¶æŸ¥é›†(Disjoint Set)"></a>å¹¶æŸ¥é›†(Disjoint Set)</h2><p>äº’ä¸ç›¸äº¤çš„æ•°æ®é›†åˆã€‚ç”¨ä¸€ä¸ªä»£è¡¨å…ƒç´ æ¥è¯†åˆ«æ¯ä¸ªé›†åˆï¼Œè¿™ä¸ªå…ƒç´ å±äºè¿™ä¸ªé›†åˆã€‚åŸºæœ¬æ“ä½œå¦‚ä¸‹ï¼š<br>Make-Setï¼šå»ºç«‹ä¸€ä¸ªæ–°çš„å•å…ƒç´ é›†åˆ<br>Findï¼šåˆ¤æ–­å…ƒç´ åœ¨å“ªä¸ªé›†åˆä¸­ã€‚å¯ç”¨äºåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯éƒ½å±äºåŒä¸€é›†åˆã€‚<br>Unionï¼šæŠŠä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ å¹¶å…¥å¦ä¸€ä¸ªé›†åˆä¸­ã€‚<br>è¯¥æ•°æ®ç»“æ„å¯ç”¨äºç¡®å®šæ— å‘å›¾çš„è¿é€šåˆ†é‡ï¼šå¯¹æ¯ä¸ªé¡¶ç‚¹make-setï¼Œéå†æ¯ä¸€æ¡è¾¹å¯¹æ¯æ¡è¾¹çš„ä¸¤é¡¶ç‚¹çš„æ‰€åœ¨setè¿›è¡Œunionï¼Œæœ€ç»ˆå¾—åˆ°çš„setçš„é›†åˆå°±æ˜¯æ— å‘å›¾çš„è¿é€šåˆ†é‡ã€‚<br><a id="more"></a></p>
<h3 id="å¹¶æŸ¥é›†çš„é“¾è¡¨è¡¨ç¤º"><a href="#å¹¶æŸ¥é›†çš„é“¾è¡¨è¡¨ç¤º" class="headerlink" title="å¹¶æŸ¥é›†çš„é“¾è¡¨è¡¨ç¤º"></a>å¹¶æŸ¥é›†çš„é“¾è¡¨è¡¨ç¤º</h3><p>æ¯ä¸ªé›†åˆçš„å¯¹è±¡åŒ…å«headå±æ€§å’Œtailå±æ€§ï¼Œheadå±æ€§æŒ‡å‘ç¬¬ä¸€ä¸ªå¯¹è±¡ï¼Œtailå±æ€§æŒ‡å‘æœ€åä¸€ä¸ªå¯¹è±¡ã€‚é“¾è¡¨ä¸­æ¯ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ªé›†åˆæˆå‘˜ã€ä¸€ä¸ªnextæŒ‡å‘ä¸‹ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªheadå›åˆ°é›†åˆå¯¹è±¡ã€‚æ­¤æ—¶make-setã€findæ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º$O(1)$ï¼Œunionçš„æ—¶é—´å¤æ‚ç¬¬ä¸º$O(n)$ï¼Œå…¶ä¸­nä¸ºè¢«åˆå¹¶çš„é›†åˆå¤§å°ï¼Œunionæ“ä½œå°†æ”¹å˜è¿™nä¸ªå…ƒç´ çš„headæŒ‡é’ˆã€‚<br><strong>ä¸€ç§åŠ æƒåˆå¹¶å¯å‘å¼ç­–ç•¥ weighted-union heuristic</strong>ï¼šæ¯æ¬¡éƒ½æ˜¯å°†è¾ƒå°çš„é“¾åˆå¹¶åˆ°è¾ƒé•¿çš„é“¾ä¸­ã€‚<br><strong>ä¸€ä¸ªå…·æœ‰mä¸ªmake-setã€unionã€findæ“ä½œçš„åºåˆ—éœ€è¦æ¶ˆè€—$O(m+nlgn)$çš„æ—¶é—´ï¼ˆnï¼šmake-setçš„ä¸ªæ•°ï¼‰ã€‚</strong>ï¼šæ€»å…±è‡³å¤šæ‰§è¡Œn-1æ¬¡unionæ“ä½œï¼Œå¯¹æŸä¸ªå…ƒç´ xï¼Œxçš„æŒ‡é’ˆæ¯æ¬¡è¢«æ›´æ–°ï¼Œè¯´æ˜xä¸€å®šåœ¨ä¸€ä¸ªè¾ƒå°çš„é›†åˆä¸­ï¼Œxè¢«æ›´æ–°$[lgk]$æ¬¡è¯´æ˜é›†åˆä¸€å®šè‡³å°‘æœ‰kä¸ªæˆå‘˜äº†ï¼Œå› æ­¤æ¯ä¸ªå…ƒç´ æ‰€åœ¨é›†åˆæœ€å¤šè¢«åˆå¹¶$[lgn]$æ¬¡ã€‚æ€»å…±èŠ±åœ¨unionæ“ä½œçš„æ—¶é—´ä¸º$O(nlgn)$ã€‚</p>
<h3 id="å¹¶æŸ¥é›†çš„æ•°ç»„è¡¨ç¤º"><a href="#å¹¶æŸ¥é›†çš„æ•°ç»„è¡¨ç¤º" class="headerlink" title="å¹¶æŸ¥é›†çš„æ•°ç»„è¡¨ç¤º"></a>å¹¶æŸ¥é›†çš„æ•°ç»„è¡¨ç¤º</h3><p>Make-Setï¼šå¯¹nä¸ªå…ƒç´ åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„Pï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ éƒ½æ˜¯-1ã€‚$O(1)$<br>Findï¼šæŸ¥æ‰¾è¿™ä¸ªå…ƒç´ xä½œä¸ºindexå­˜å‚¨çš„æ•°å€¼P(x)ï¼Œå¦‚æœæ˜¯-1åˆ™è¿”å›è‡ªå·±ï¼Œå¦‚æœä¸æ˜¯åˆ™è¿”å›Find(P(x))ã€‚$O(n)$<br>Unionï¼šå°†è¢«åˆå¹¶çš„é›†åˆçš„ä»£è¡¨å…ƒç´ çš„å¯¹åº”æ•°å€¼æ”¹ä¸ºåˆå¹¶çš„é›†åˆçš„ä»£è¡¨å…ƒç´ ã€‚$O(1)$<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">disjoint_set</span></span>&#123;</span><br><span class="line"> <span class="keyword">int</span>[] parent;</span><br><span class="line"> disjoint_set(<span class="keyword">int</span> n)&#123;</span><br><span class="line"> 	<span class="keyword">this</span>.parent = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line"> 	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++) &#123;</span><br><span class="line"> 		<span class="keyword">this</span>.parent[i] = -<span class="number">1</span>;</span><br><span class="line"> 	&#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">find_set</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"> 	<span class="keyword">if</span>(<span class="keyword">this</span>.parent[x] &lt; <span class="number">0</span>) <span class="keyword">return</span> x;</span><br><span class="line"> 	<span class="keyword">return</span> find_set(<span class="keyword">this</span>.parent[x]);</span><br><span class="line"> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> x1, <span class="keyword">int</span> x2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> s1 = find_set(x1);</span><br><span class="line">  <span class="keyword">int</span> s2 = find_set(x2);</span><br><span class="line">  <span class="keyword">if</span>(s1 == s2) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">//union by rank, using size as rank</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">this</span>.parent[s1] &lt;= <span class="keyword">this</span>.parent[s2]) &#123;</span><br><span class="line">  	<span class="comment">//the set of x1 have more elements</span></span><br><span class="line">  	<span class="keyword">this</span>.parent[s1] += <span class="keyword">this</span>.parent[s2];</span><br><span class="line">  	<span class="keyword">this</span>.parent[s2] = s1;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">  	<span class="keyword">this</span>.parent[s2] += <span class="keyword">this</span>.parent[s1];</span><br><span class="line">  	<span class="keyword">this</span>.parent[s1] = s2;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//main function</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       disjoint_set ds = <span class="keyword">new</span> disjoint_set(<span class="number">5</span>);</span><br><span class="line">       System.out.println(ds.find_set(<span class="number">3</span>)); <span class="comment">//output:3</span></span><br><span class="line">       ds.union(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">       ds.union(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">       System.out.println(ds.find_set(<span class="number">1</span>)); <span class="comment">//output:1</span></span><br><span class="line">       System.out.println(ds.find_set(<span class="number">2</span>)); <span class="comment">//output:1</span></span><br><span class="line">       System.out.println(ds.find_set(<span class="number">3</span>)); <span class="comment">//output:1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="å¹¶æŸ¥é›†æ£®æ—-disjointed-set-forest-ä¸å¯å‘å¼ç­–ç•¥"><a href="#å¹¶æŸ¥é›†æ£®æ—-disjointed-set-forest-ä¸å¯å‘å¼ç­–ç•¥" class="headerlink" title="å¹¶æŸ¥é›†æ£®æ— disjointed-set forest ä¸å¯å‘å¼ç­–ç•¥"></a>å¹¶æŸ¥é›†æ£®æ— disjointed-set forest ä¸å¯å‘å¼ç­–ç•¥</h2><p>æ¯ä¸ªæˆå‘˜ä»…æŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹ï¼Œæ¯æ£µæ ‘çš„æ ¹å°±æ˜¯é›†åˆçš„ä»£è¡¨ï¼Œæ ¹èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å°±æ˜¯æ ¹èŠ‚ç‚¹æœ¬èº«ã€‚<br>Find-Setæ“ä½œå³æ²¿ç€æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆæ‰¾åˆ°æ ‘æ ¹ã€‚è¿™ä¸€é€šå‘æ ¹èŠ‚ç‚¹çš„ç®€å•è·¯å¾„ä¸Šæ‰€è®¿é—®çš„ç»“ç‚¹æ„æˆäº†<strong>æŸ¥æ‰¾è·¯å¾„(find path)</strong>ã€‚<br>Unionæ“ä½œå³å°†ä¸€æ£µæ ‘çš„æ ¹èŠ‚ç‚¹æŒ‡å‘å¦ä¸€æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ã€‚<br>ä¸€ä¸ªåŒ…å«n-1ä¸ªunionæ“ä½œçš„åºåˆ—å¯ä»¥æ„é€ å‡ºä¸€é¢—æ°å¥½å«æœ‰nä¸ªç»“ç‚¹çš„å¹¶æŸ¥é›†æ£®æ—ã€‚</p>
<h3 id="æŒ‰ç§©åˆå¹¶-Union-by-Rank"><a href="#æŒ‰ç§©åˆå¹¶-Union-by-Rank" class="headerlink" title="æŒ‰ç§©åˆå¹¶ Union by Rank"></a>æŒ‰ç§©åˆå¹¶ Union by Rank</h3><p>ä½¿å…·æœ‰è¾ƒå°‘èŠ‚ç‚¹çš„æ ‘çš„æ ¹æŒ‡å‘å…·æœ‰è¾ƒå¤šç»“ç‚¹çš„æ ‘çš„æ ¹ã€‚å¯¹äºæ¯ä¸ªç»“ç‚¹ï¼Œç»´æŠ¤ä¸€ä¸ªç§©(rank)ç”¨æ¥è¡¨ç¤ºè¯¥èŠ‚ç‚¹é«˜åº¦çš„ä¸€ä¸ªä¸Šç•Œã€‚åœ¨unionæ“ä½œä¸­å¯ä»¥è®©å…·æœ‰è¾ƒå°ç§©çš„æ ¹æŒ‡å‘å…·æœ‰è¾ƒå¤§ç§©çš„æ ¹ã€‚</p>
<h3 id="è·¯å¾„å‹ç¼©-Path-Expression"><a href="#è·¯å¾„å‹ç¼©-Path-Expression" class="headerlink" title="è·¯å¾„å‹ç¼© Path Expression"></a>è·¯å¾„å‹ç¼© Path Expression</h3><p>æŒ‡é’ˆç­–ç•¥å¯ä»¥ä½¿æŸ¥æ‰¾è·¯å¾„ä¸­æ¯ä¸ªç»“ç‚¹ç›´æ¥æŒ‡å‘æ ¹ã€‚è·¯å¾„å‹ç¼©å¹¶ä¸æ”¹å˜ä»»ä½•ç»“ç‚¹çš„ç§©ã€‚</p>
<h2 id="æ— å‘å›¾ä¸­æ¢æµ‹ç¯"><a href="#æ— å‘å›¾ä¸­æ¢æµ‹ç¯" class="headerlink" title="æ— å‘å›¾ä¸­æ¢æµ‹ç¯"></a>æ— å‘å›¾ä¸­æ¢æµ‹ç¯</h2><p>å¯¹æ¯ä¸ªé¡¶ç‚¹make-setï¼Œéå†æ¯æ¡è¾¹ï¼Œæ‰¾åˆ°å½“å‰è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹æ‰€åœ¨çš„é›†åˆï¼Œå¦‚æœä¸åŒï¼Œåˆ™å¯¹è¿™ä¸¤ä¸ªé›†åˆè¿›è¡Œunionæ“ä½œï¼›å¦‚æœç›¸åŒï¼Œåˆ™å›¾ä¸­å‡ºç°ç¯ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">graph</span></span>&#123;</span><br><span class="line"> disjoint_set ds;</span><br><span class="line"> graph(<span class="keyword">int</span> v)&#123;</span><br><span class="line"> 	<span class="keyword">this</span>.ds = <span class="keyword">new</span> disjoint_set(v);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> x1, <span class="keyword">int</span> x2)</span> </span>&#123;</span><br><span class="line"> 	System.out.println(<span class="string">"add edge: "</span> + String.valueOf(x1) + <span class="string">" "</span> + String.valueOf(x2));</span><br><span class="line"> 	<span class="keyword">int</span> s1 = <span class="keyword">this</span>.ds.find_set(x1);</span><br><span class="line">  <span class="keyword">int</span> s2 = <span class="keyword">this</span>.ds.find_set(x2);</span><br><span class="line">  <span class="keyword">if</span>(s1 == s2) System.out.println(<span class="string">"there is a circle"</span>);</span><br><span class="line">  <span class="keyword">this</span>.ds.union(x1, x2);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//main function</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     graph g = <span class="keyword">new</span> graph(<span class="number">3</span>);</span><br><span class="line">     g.addEdge(<span class="number">0</span>, <span class="number">1</span>); <span class="comment">//add edge: 0 1</span></span><br><span class="line">     g.addEdge(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">//add edge: 1 2</span></span><br><span class="line">     g.addEdge(<span class="number">0</span>, <span class="number">2</span>); <span class="comment">//add edge: 0 2 there is a circle</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„</category>
      </categories>
      <tags>
        <tag>Disjoint Set</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ç®—æ³•</title>
    <url>/2020/08/08/Graph_Algorithms/</url>
    <content><![CDATA[<p><strong>å®Œæ•´ä»£ç è§ï¼š<a href="https://github.com/huangliu0909/Graph-Algorithms">https://github.com/huangliu0909/Graph-Algorithms</a></strong></p>
<h2 id="åŸºæœ¬å›¾ç®—æ³•"><a href="#åŸºæœ¬å›¾ç®—æ³•" class="headerlink" title="åŸºæœ¬å›¾ç®—æ³•"></a>åŸºæœ¬å›¾ç®—æ³•</h2><h3 id="æ·±åº¦ä¼˜å…ˆæœç´¢-DFS"><a href="#æ·±åº¦ä¼˜å…ˆæœç´¢-DFS" class="headerlink" title="æ·±åº¦ä¼˜å…ˆæœç´¢ DFS"></a>æ·±åº¦ä¼˜å…ˆæœç´¢ DFS</h3><p>ä½¿ç”¨æ ˆ(First-In-Last-Out)ï¼Œèµ·å§‹ç‚¹å…¥æ ˆï¼Œå½“æ ˆä¸ä¸ºç©ºæ—¶ï¼Œpopï¼Œå¦‚æœè¿™ä¸ªç‚¹æœªè¢«è®¿é—®ï¼Œåˆ™æ ‡è®°ä¸ºå·²è®¿é—®ï¼ŒåŠ å…¥ç»“æœæ•°ç»„ï¼Œå°†ä¸è¿™ä¸ªç‚¹ç›¸è¿çš„é¡¶ç‚¹é€ä¸ªå…¥æ ˆï¼Œå¾ªç¯ç›´åˆ°æ ˆä¸ºç©ºã€‚<a id="more"></a><br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	stack4DFS = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) </span><br><span class="line">		vertex[i] = -<span class="number">1</span>;</span><br><span class="line">	<span class="comment">//start from 0</span></span><br><span class="line">	stack4DFS.push(<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(!stack4DFS.isEmpty()) &#123;</span><br><span class="line">		<span class="keyword">int</span> now = stack4DFS.pop();</span><br><span class="line">		<span class="keyword">if</span>(vertex[now] == -<span class="number">1</span>) &#123;</span><br><span class="line">			vertex[now] = <span class="number">1</span>;</span><br><span class="line">			res[count] = now;</span><br><span class="line">			count ++;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(edges[now][i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">					stack4DFS.push(i);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.print(Arrays.toString(res) + <span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS"><a href="#å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆæœç´¢ BFS"></a>å¹¿åº¦ä¼˜å…ˆæœç´¢ BFS</h3><p>ä½¿ç”¨é˜Ÿåˆ—(Queue: First-In-First-Out)ï¼Œå°†æºç»“ç‚¹æ’å…¥é˜Ÿåˆ—ï¼Œå½“é˜Ÿåˆ—éç©ºï¼šé˜Ÿåˆ—å¼¹å‡ºä½œä¸ºå½“å‰éå†çš„å€¼ï¼Œå°†ä¸è¿™ä¸ªç‚¹ç›¸è¿çš„å…¶å®ƒç»“ç‚¹éƒ½åŠ å…¥é˜Ÿåˆ—ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤ç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">BFS</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	queue4BFS = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) </span><br><span class="line">		vertex[i] = -<span class="number">1</span>;</span><br><span class="line">	<span class="comment">//start from 0</span></span><br><span class="line">	queue4BFS.add(<span class="number">0</span>);</span><br><span class="line">	vertex[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(!queue4BFS.isEmpty()) &#123;</span><br><span class="line">		<span class="keyword">int</span> now = queue4BFS.poll();</span><br><span class="line">		res[count] = now;</span><br><span class="line">		<span class="comment">//System.out.print(Arrays.toString(edges[now]));</span></span><br><span class="line">		count ++;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(edges[now][i] &gt; <span class="number">0</span> &amp;&amp; vertex[i] == -<span class="number">1</span>) &#123;</span><br><span class="line">				vertex[i] = <span class="number">1</span>;</span><br><span class="line">				queue4BFS.add(i);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.print(Arrays.toString(res) + <span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="æ‹“æ‰‘æ’åº"><a href="#æ‹“æ‰‘æ’åº" class="headerlink" title="æ‹“æ‰‘æ’åº"></a>æ‹“æ‰‘æ’åº</h3><p>æœ‰å‘æ— ç¯å›¾(Directed Acyclic Graph)çš„æ‰€æœ‰é¡¶ç‚¹çš„æœ‰åºçº¿æ€§æ’åˆ—ã€‚ä¸æ–­è¾“å‡ºå¹¶åˆ é™¤å…¥åº¦ä¸º0çš„ç»“ç‚¹ï¼Œå¦‚æœæœ€ç»ˆæ— æ³•è¾“å‡ºæ‰€æœ‰ç»“ç‚¹åˆ™è¯¥å›¾ä¸­å­˜åœ¨ç¯ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">topological_sort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) </span><br><span class="line">		vertex[i] = -<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(count != edges.length) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(vertex[i] == -<span class="number">1</span>) &#123;</span><br><span class="line">				<span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; edges.length; j ++) &#123;</span><br><span class="line">					<span class="keyword">if</span>(edges[j][i] != Integer.MAX_VALUE) &#123;</span><br><span class="line">						flag = <span class="number">1</span>;</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(flag == <span class="number">0</span>) &#123; <span class="comment">//æ‰¾åˆ°å…¥åº¦ä¸º0çš„ç»“ç‚¹i</span></span><br><span class="line">					res[count] = i;</span><br><span class="line">					vertex[i] = <span class="number">1</span>; <span class="comment">//æ ‡è®°ä¸ºå·²è®¿é—®</span></span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) </span><br><span class="line">			edges[res[count]][i] = Integer.MAX_VALUE;</span><br><span class="line">		count ++;</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(Arrays.toString(res));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="æœ€å°ç”Ÿæˆæ ‘-Minimum-Spanning-Tree"><a href="#æœ€å°ç”Ÿæˆæ ‘-Minimum-Spanning-Tree" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘ Minimum Spanning Tree"></a>æœ€å°ç”Ÿæˆæ ‘ Minimum Spanning Tree</h2><p>ç”Ÿæˆæ ‘ï¼šè¿æ¥å›¾çš„æ‰€æœ‰ç»“ç‚¹çš„æ— ç¯è¿é€šå­å›¾ï¼Œé¡¶ç‚¹ä¸ªæ•°=å›¾é¡¶ç‚¹ä¸ªæ•°ï¼Œè¾¹ä¸ªæ•°=å›¾é¡¶ç‚¹ä¸ªæ•°-1ã€‚å‡å°‘ä¸€æ¡è¾¹ä¼šä½¿å¾—STä¸è¿é€šï¼Œå¢åŠ ä¸€æ¡è¾¹ä¼šä½¿å¾—STå‡ºç°ç¯ã€‚éè¿é€šå›¾ä¸å­˜åœ¨ç”Ÿæˆæ ‘STã€‚<br>æœ€å°ç”Ÿæˆæ ‘ï¼šè¾¹çš„æ€»æƒé‡å’Œæœ€å°çš„ç”Ÿæˆæ ‘ã€‚å¯ä»¥é€šè¿‡ä¸æ–­åˆ é™¤æœ€å¤§çš„e-n+1æ¡è¾¹æ¥å¾—åˆ°MSTã€‚</p>
<h3 id="Kruskalç®—æ³•"><a href="#Kruskalç®—æ³•" class="headerlink" title="Kruskalç®—æ³•"></a>Kruskalç®—æ³•</h3><p><strong>å¾€é›†åˆé‡ŒåŠ å…¥è¾¹</strong><br>å¯¹æ¯æ¡è¾¹è¿›è¡Œæ’åºã€‚ä½¿ç”¨Find-Set(u)è¿”å›uæ‰€åœ¨æ ‘çš„ä»£è¡¨ç»“ç‚¹ï¼Œä½¿Unionå¯¹ä¸¤æ£µæ ‘è¿›è¡Œåˆå¹¶ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Kruskal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	vertex = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vertex.length; i ++) vertex[i] = i; <span class="comment">//æ¯ä¸ªç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹éƒ½åˆå§‹åŒ–ä¸ºè‡ªå·±</span></span><br><span class="line">	<span class="keyword">int</span>[][] e = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>][<span class="number">3</span>]; <span class="comment">//å°†è¾¹æ•´ç†ä¸ºï¼ˆuï¼Œvï¼Œwï¼‰çš„å½¢å¼</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; edges.length; j ++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(edges[i][j] &lt; Integer.MAX_VALUE)</span><br><span class="line">				e = arrAppend(e, <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;i, j, edges[i][j]&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	 Arrays.sort(e, <span class="keyword">new</span> edgeComp()); </span><br><span class="line">	 <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; e.length; i ++) &#123;</span><br><span class="line">		 <span class="comment">//System.out.println(Arrays.toString(e[i]));</span></span><br><span class="line">		 <span class="keyword">if</span>(find_set(vertex, e[i][<span class="number">0</span>]) != find_set(vertex, e[i][<span class="number">1</span>])) &#123;</span><br><span class="line">			 union(vertex, e[i][<span class="number">0</span>], e[i][<span class="number">1</span>]);</span><br><span class="line">			 System.out.print(e[i][<span class="number">0</span>]);</span><br><span class="line">			 System.out.print(<span class="string">" -- "</span>);</span><br><span class="line">			 System.out.print(e[i][<span class="number">1</span>]);</span><br><span class="line">			 System.out.print(<span class="string">" : "</span>);</span><br><span class="line">			 System.out.print(e[i][<span class="number">2</span>]);</span><br><span class="line">			 System.out.println();</span><br><span class="line">		 &#125;</span><br><span class="line">	 &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find_set</span><span class="params">(<span class="keyword">int</span>[] p, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(p[x] == x) <span class="keyword">return</span> x;</span><br><span class="line">	<span class="keyword">return</span> find_set(p, p[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span>[] p, <span class="keyword">int</span> x1, <span class="keyword">int</span> x2)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> s1 = find_set(p, x1);</span><br><span class="line">	<span class="keyword">int</span> s2 = find_set(p, x2);</span><br><span class="line">	p[s2] = s1; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[][] arrAppend(<span class="keyword">int</span>[][] arr, <span class="keyword">int</span>[] value) &#123;</span><br><span class="line">       arr = Arrays.copyOf(arr, arr.length + <span class="number">1</span>);</span><br><span class="line">       arr[arr.length - <span class="number">1</span>] = value;</span><br><span class="line">       <span class="keyword">return</span> arr;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">class edgeComp implements Comparator&lt;int[]&gt; </span><br><span class="line">&#123; </span><br><span class="line">    <span class="comment">// Used for sorting in ascending order of </span></span><br><span class="line">    <span class="comment">// roll number </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span>[] b)</span> </span></span><br><span class="line"><span class="function">    </span>&#123; </span><br><span class="line">        <span class="keyword">return</span> a[<span class="number">2</span>] - b[<span class="number">2</span>]; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Primç®—æ³•"><a href="#Primç®—æ³•" class="headerlink" title="Primç®—æ³•"></a>Primç®—æ³•</h3><p><strong>å¾€é›†åˆé‡ŒåŠ å…¥ç‚¹</strong>   $O(E log V)$<br>é¦–å…ˆå»æ‰æ‰€æœ‰çš„ä»è‡ªå·±åˆ°è‡ªå·±çš„ç¯ï¼Œå»æ‰ä¸¤èŠ‚ç‚¹ä¹‹é—´çš„å¤šæ¡è¾¹ä¿ç•™æœ€çŸ­çš„ä¸€æ¡ã€‚<br>åœ¨è¿æ¥é›†åˆAå’ŒAä¹‹å¤–çš„ç»“ç‚¹çš„æ‰€æœ‰è¾¹ä¸­ï¼Œé€‰æ‹©ä¸€æ¡è½»é‡çº§è¾¹åŠ å…¥Aä¸­ï¼Œä»è€Œä¿è¯æ¯ä¸€æ­¥æ‰€åŠ å…¥çš„è¾¹éƒ½å¿…é¡»æ˜¯ä½¿æ ‘çš„æ€»æƒé‡å¢åŠ é‡æœ€å°çš„è¾¹ã€‚<br>ä»ä»»æ„ç»“ç‚¹å¼€å§‹éƒ½å¯ä»¥å¾—åˆ°å”¯ä¸€çš„MSTã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findMin</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span>[] visit, <span class="keyword">int</span>[] e)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//æ‰¾åˆ°eä¸­ä¸vç›¸è¿çš„æœªè®¿é—®è¿‡çš„è·ç¦»æœ€è¿‘çš„ç»“ç‚¹</span></span><br><span class="line">	<span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">	<span class="keyword">int</span> index = -<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; e.length; i ++) &#123;</span><br><span class="line">		<span class="keyword">if</span>(e[i] &lt; min &amp;&amp; visit[i] == -<span class="number">1</span>) &#123;</span><br><span class="line">			min = e[i];</span><br><span class="line">			index = i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> index;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Prim</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	minPath = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	vertex = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vertex.length; i ++) vertex[i] = -<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">	minPath[count] = <span class="number">0</span>;</span><br><span class="line">	vertex[minPath[count]] = <span class="number">1</span>;</span><br><span class="line">	count ++;</span><br><span class="line">	<span class="keyword">while</span>(count &lt; edges.length) &#123;</span><br><span class="line">		<span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">		<span class="keyword">int</span> index_s = -<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">int</span> index = -<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i ++) &#123;</span><br><span class="line">			<span class="keyword">int</span> e = minPath[i];</span><br><span class="line">			<span class="keyword">int</span> now = findMin(e, vertex, edges[e]);</span><br><span class="line">			<span class="keyword">if</span>(now &gt;= <span class="number">0</span> &amp;&amp; edges[e][now] &lt; min) &#123;</span><br><span class="line">				index_s = e;</span><br><span class="line">				min = edges[e][now];</span><br><span class="line">				index = now;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		minPath[count] = index;</span><br><span class="line">		vertex[minPath[count]] = <span class="number">1</span>;</span><br><span class="line">		count ++;</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.print(Arrays.toString(minPath) + <span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="å•æºæœ€çŸ­è·¯å¾„"><a href="#å•æºæœ€çŸ­è·¯å¾„" class="headerlink" title="å•æºæœ€çŸ­è·¯å¾„"></a>å•æºæœ€çŸ­è·¯å¾„</h2><h3 id="Dijkstraç®—æ³•-O-VlgV"><a href="#Dijkstraç®—æ³•-O-VlgV" class="headerlink" title="Dijkstraç®—æ³•  $O(VlgV)$"></a>Dijkstraç®—æ³•  $O(VlgV)$</h3><p>åˆå§‹åŒ–è·ç¦»æ•°ç»„disï¼Œå¤§å°ç­‰äºé¡¶ç‚¹æ•°ç›®ï¼Œæºç»“ç‚¹å¯¹åº”0ï¼Œå…¶å®ƒéƒ½å¯¹åº”æ­£æ— ç©·ã€‚åœ¨æœªè®¿é—®çš„ç»“ç‚¹ä¸­æ‰¾åˆ°ç¦»xçš„è·¯å¾„æœ€çŸ­çš„ç»“ç‚¹ä½œä¸ºå½“å‰ç»“ç‚¹ï¼Œç”¨å½“å‰ç»“ç‚¹çš„é‚»æ¥çŸ©é˜µå¯¹disè¿›è¡Œæ›´æ–°ï¼Œå°†è¯¥ç»“ç‚¹æ ‡è®°ä¸ºå·²è®¿é—®ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span>[] dis = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	<span class="keyword">int</span>[] path = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) dis[i] = Integer.MAX_VALUE;</span><br><span class="line">	dis[x] = <span class="number">0</span>;<span class="comment">//è‡ªå·±åˆ°è‡ªå·±çš„æœ€çŸ­è·¯å¾„ä¸º0</span></span><br><span class="line">	path[x] = -<span class="number">1</span>;</span><br><span class="line">	Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(count != edges.length) &#123;</span><br><span class="line">		<span class="keyword">int</span> now = -<span class="number">1</span>; <span class="comment">//åœ¨æœªè®¿é—®çš„ç»“ç‚¹ä¸­æ‰¾åˆ°ç¦»xçš„è·¯å¾„æœ€çŸ­çš„ç»“ç‚¹ä½œä¸ºå½“å‰ç»“ç‚¹</span></span><br><span class="line">		<span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(!set.contains(i) &amp;&amp; dis[i] &lt; min) &#123;</span><br><span class="line">				now = i;</span><br><span class="line">				min = dis[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//ç”¨å½“å‰ç»“ç‚¹nowçš„ä¸´ç•Œè¾¹ä¸disä¸­çš„è·¯å¾„é•¿åº¦ä½œæ¯”è¾ƒå¹¶è¿›è¡Œæ›´æ–°</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(edges[now][i] != Integer.MAX_VALUE &amp;&amp; edges[now][i] + dis[now] &lt; dis[i]) &#123;</span><br><span class="line">				dis[i] = edges[now][i] + dis[now];</span><br><span class="line">				path[i] = now;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//å°†nowåŠ å…¥å·²è®¿é—®çš„é›†åˆä¸­</span></span><br><span class="line">		set.add(now);</span><br><span class="line">		count ++;</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.print(<span class="string">"distance: "</span> + Arrays.toString(dis) + <span class="string">"\n"</span>);</span><br><span class="line">	System.out.print(<span class="string">"last vertex: "</span> + Arrays.toString(path) + <span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Bellmanâ€“Ford-O-VE"><a href="#Bellmanâ€“Ford-O-VE" class="headerlink" title="Bellmanâ€“Ford  $O(VE)$"></a>Bellmanâ€“Ford  $O(VE)$</h3><p>å¯¹nä¸ªç‚¹åš(n - 1)æ¬¡éå†ï¼Œæ¯ä¸€è½®éå†éœ€è¦æ£€æŸ¥æ‰€æœ‰çš„è¾¹ã€‚åŸç†æ¯”Dijkstraç®€å•ï¼Œä½†æ—¶é—´å¤æ‚åº¦æ›´é«˜ã€‚<br>Dijkstraä¸é€‚ç”¨äºè¾¹æƒé‡ä¸ºè´Ÿçš„æœ‰å‘å›¾ï¼ŒBellman-Fordå¯ç”¨äºæ­¤ç±»å›¾ï¼Œä¸”æ›´é€‚ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿã€‚<br>åˆå§‹åŒ–è·ç¦»æ•°ç»„disï¼Œå¤§å°ç­‰äºé¡¶ç‚¹æ•°ç›®ï¼Œæºç»“ç‚¹å¯¹åº”0ï¼Œå…¶å®ƒéƒ½å¯¹åº”æ­£æ— ç©·ã€‚å¯¹æ¯ä¸ªè¾¹uvè¿›è¡Œéå†ï¼Œå¦‚æœ$dis[v]&gt;dis[u]+w(u,v)$ï¼Œåˆ™æ›´æ–°$dis[v]&gt;dis[u]+w(u,v)$ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Bellman_Ford</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>[] dis = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	<span class="keyword">int</span>[] path = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length];</span><br><span class="line">	path[x] = -<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) dis[i] = Integer.MAX_VALUE;</span><br><span class="line">	dis[x] = <span class="number">0</span>;<span class="comment">//è‡ªå·±åˆ°è‡ªå·±çš„æœ€çŸ­è·¯å¾„ä¸º0</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; edges.length - <span class="number">1</span>; k ++) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; edges.length; j ++) &#123;</span><br><span class="line">				<span class="keyword">if</span>( dis[i] != Integer.MAX_VALUE &amp;&amp; edges[i][j] != Integer.MAX_VALUE) &#123;	</span><br><span class="line">					<span class="keyword">if</span>(dis[j] &gt; dis[i] + edges[i][j]) &#123;</span><br><span class="line">						dis[j] = dis[i] + edges[i][j];</span><br><span class="line">						path[j] = i;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.print(<span class="string">"distance: "</span> + Arrays.toString(dis) + <span class="string">"\n"</span>);</span><br><span class="line">	System.out.print(<span class="string">"last vertex: "</span> + Arrays.toString(path) + <span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Floyd-Warshall-O-V-3"><a href="#Floyd-Warshall-O-V-3" class="headerlink" title="Floyd Warshall  $O(V^3)$"></a>Floyd Warshall  $O(V^3)$</h3><p>è§£å†³æ‰€æœ‰ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„é—®é¢˜ï¼šç®€å•ç²—æš´çš„ä¸‰å±‚å¾ªç¯ã€‚æ ¹æ®dis[i][k]+dis[k][j]å¯¹dist[i][j]è¿›è¡Œæ›´æ–°ã€‚<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Floyd_Warshall</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span>[][] dis = <span class="keyword">new</span> <span class="keyword">int</span>[edges.length][edges.length];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; edges.length; j ++)</span><br><span class="line">			dis[i][j] = edges[i][j];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; edges.length; k ++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; edges.length; i ++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; edges.length; j ++)</span><br><span class="line">				<span class="keyword">if</span>(dis[i][k] != Integer.MAX_VALUE &amp;&amp; dis[k][j] != Integer.MAX_VALUE)</span><br><span class="line">					dis[i][j] = Math.min(dis[i][j], dis[i][k] + dis[k][j]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>[] x : dis)</span><br><span class="line">		System.out.println(Arrays.toString(x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="å›¾æœç´¢ç­–ç•¥"><a href="#å›¾æœç´¢ç­–ç•¥" class="headerlink" title="å›¾æœç´¢ç­–ç•¥"></a>å›¾æœç´¢ç­–ç•¥</h2><h3 id="çˆ¬å±±ç®—æ³•-Hill-Climbing"><a href="#çˆ¬å±±ç®—æ³•-Hill-Climbing" class="headerlink" title="çˆ¬å±±ç®—æ³• Hill Climbing"></a>çˆ¬å±±ç®—æ³• Hill Climbing</h3><p>ç”¨è´ªå¿ƒç¡®å®šæœç´¢æ–¹å‘ï¼Œæ˜¯ä¼˜åŒ–çš„æ·±åº¦ä¼˜å…ˆæœç´¢<br>ç”¨å¯å‘å¼æµ‹åº¦æ¥æ’åºèŠ‚ç‚¹<br>æ‰©å±•çš„é¡ºåºï¼šå¯¹å…„å¼Ÿè¿›è¡Œæ¯”è¾ƒ<br>å­èŠ‚ç‚¹æŒ‰ç…§æµ‹åº¦f(n)ä»å¤§åˆ°å°å…¥æ ˆ</p>
<h3 id="Best-Firstæœç´¢"><a href="#Best-Firstæœç´¢" class="headerlink" title="Best-Firstæœç´¢"></a>Best-Firstæœç´¢</h3><p>ä¼˜åŒ–çš„å¹¿åº¦&amp;æ·±åº¦ä¼˜å…ˆ<br>æ¯”è¾ƒæ‰€æœ‰å­èŠ‚ç‚¹å’Œå…„å¼Ÿç»“ç‚¹çš„æ·±åº¦<br>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥é¢„å…ˆè®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹åˆ°ç»ˆç‚¹çš„è·ç¦»ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªä¿¡æ¯æ›´å¿«çš„åˆ°è¾¾ç»ˆç‚¹ã€‚å¦‚æœèµ·ç‚¹å’Œç»ˆç‚¹ä¹‹é—´å­˜åœ¨éšœç¢ç‰©ï¼Œåˆ™æœ€ä½³ä¼˜å…ˆç®—æ³•æ‰¾åˆ°çš„å¾ˆå¯èƒ½ä¸æ˜¯æœ€çŸ­è·¯å¾„ã€‚</p>
<h3 id="è·¯å¾„è§„åˆ’A-ç®—æ³•"><a href="#è·¯å¾„è§„åˆ’A-ç®—æ³•" class="headerlink" title="è·¯å¾„è§„åˆ’A*ç®—æ³•"></a>è·¯å¾„è§„åˆ’A*ç®—æ³•</h3><p>ç”¨Best-Firstè¿›è¡Œæœç´¢ï¼ŒæŸäº›æƒ…å†µä¸‹ä¸€æ—¦æ‰¾åˆ°è§£ï¼Œåˆ™è§£ä¸ºä¼˜åŒ–è§£ï¼Œæ— éœ€æœç´¢æ•´ä¸ªè§£ç©ºé—´ã€‚<br>å¦‚æœå›¾æ»¡è¶³dis(A, G) &lt; dis(A, D) + h(D, g)ï¼Œå³aåˆ°gçš„å®é™…å€¼å¤§äºaåˆ°gçš„ä¼°è®¡å€¼ï¼Œåˆ™A*ç®—æ³•ä¸€å®šèƒ½æ‰¾åˆ°ä¼˜åŒ–è§£ã€‚</p>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/54510444">https://zhuanlan.zhihu.com/p/54510444</a></p>
<ul>
<li>åˆå§‹åŒ–open_setå’Œclose_setï¼›</li>
<li>å°†èµ·ç‚¹åŠ å…¥open_setä¸­ï¼Œå¹¶è®¾ç½®ä¼˜å…ˆçº§ä¸º0ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ï¼›</li>
<li>å¦‚æœopen_setä¸ä¸ºç©ºï¼Œåˆ™ä»open_setä¸­é€‰å–ä¼˜å…ˆçº§æœ€é«˜çš„èŠ‚ç‚¹nï¼š<ul>
<li>å¦‚æœèŠ‚ç‚¹nä¸ºç»ˆç‚¹ï¼Œåˆ™ï¼š<ul>
<li>ä»ç»ˆç‚¹å¼€å§‹é€æ­¥è¿½è¸ªparentèŠ‚ç‚¹ï¼Œä¸€ç›´è¾¾åˆ°èµ·ç‚¹ï¼›</li>
<li>è¿”å›æ‰¾åˆ°çš„ç»“æœè·¯å¾„ï¼Œç®—æ³•ç»“æŸï¼›</li>
</ul>
</li>
<li>å¦‚æœèŠ‚ç‚¹nä¸æ˜¯ç»ˆç‚¹ï¼Œåˆ™ï¼š<ul>
<li>å°†èŠ‚ç‚¹nä»open_setä¸­åˆ é™¤ï¼Œå¹¶åŠ å…¥close_setä¸­ï¼›</li>
<li>éå†èŠ‚ç‚¹næ‰€æœ‰çš„é‚»è¿‘èŠ‚ç‚¹ï¼š<ul>
<li>å¦‚æœé‚»è¿‘èŠ‚ç‚¹måœ¨close_setä¸­ï¼Œåˆ™ï¼š<ul>
<li>è·³è¿‡ï¼Œé€‰å–ä¸‹ä¸€ä¸ªé‚»è¿‘èŠ‚ç‚¹</li>
</ul>
</li>
<li>å¦‚æœé‚»è¿‘èŠ‚ç‚¹mä¹Ÿä¸åœ¨open_setä¸­ï¼Œåˆ™ï¼š<ul>
<li>è®¾ç½®èŠ‚ç‚¹mçš„parentä¸ºèŠ‚ç‚¹n</li>
<li>è®¡ç®—èŠ‚ç‚¹mçš„ä¼˜å…ˆçº§</li>
<li>å°†èŠ‚ç‚¹måŠ å…¥open_setä¸­</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="Branch-and-Boundç­–ç•¥"><a href="#Branch-and-Boundç­–ç•¥" class="headerlink" title="Branch-and-Boundç­–ç•¥"></a>Branch-and-Boundç­–ç•¥</h3><ol>
<li>ç”¨è¯„ä»·å‡½æ•°æ„é€ ä¸€ä¸ªå †Hï¼Œé¦–å…ˆæ„é€ ç”±æ ¹ç»„æˆçš„å•å…ƒç´ å †</li>
<li>if rHçš„æ ¹ræ˜¯ç›®æ ‡ç»“ç‚¹ then åœæ­¢</li>
<li>ä»Hä¸­åˆ é™¤rï¼ŒæŠŠrçš„å­èŠ‚ç‚¹æ’å…¥H</li>
<li>if Hä¸ºç©º then å¤±è´¥ï¼›else goto 2</li>
</ol>
<p><strong>å®Œæ•´ä»£ç è§ï¼š<a href="https://github.com/huangliu0909/Graph-Algorithms">https://github.com/huangliu0909/Graph-Algorithms</a></strong></p>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šç®—æ³•</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>Graph</tag>
        <tag>Tree</tag>
      </tags>
  </entry>
  <entry>
    <title>Variable Elimination and Belief Propagation</title>
    <url>/2020/09/02/CS5340%20Lec04/</url>
    <content><![CDATA[<h1 id="Variable-Elimination-Algorithm"><a href="#Variable-Elimination-Algorithm" class="headerlink" title="Variable Elimination Algorithm"></a>Variable Elimination Algorithm</h1><p>General probabilistic problem: calculate $p(X_F|X_E)$ for arbitrary disjoint subsets $E$ and $F$: ( $X_F$ are query nodes, $X_E$ are evidence nodes)</p>
<script type="math/tex; mode=display">p(X_F|X_E)=\frac{p(X_F,X_E)}{p(X_E)}=\frac{\sum_{X_R}p(X_E,X_F,X_R)}{\sum_{X_F}p(X_F,X_E)}</script><p>$X_R$ are nodes that must be marginalized out of joint probability.</p>
<p>Joint probability table size of $n$ variabels that takes $k$ states:<br>a naive summation: $O(k^n)$.<br>a factored form: $O(k^r)$ where $r\ll n$<br><a id="more"></a><br><img src="/images/CS5340/4/k^r.png" alt="k^r"></p>
<p>$p(X_6|X_2,X_5)$: 3d table<br>$p(\bar{X_6}=1|X_2,X_5)$: a 2d slice of the 3d table</p>
<p>Evidence potential:</p>
<script type="math/tex; mode=display">\delta(x_i,\bar{x_i})\begin{cases} 1,\qquad if\quad x_i = \bar{x_i} \\ 0,\qquad else\end{cases}</script><p>Turn evaluation into sum:</p>
<script type="math/tex; mode=display">g(\bar{x_i})=\sum_{x_i}\delta(x,\bar{x_i})=g(x_i=\bar{x_i})</script><p>Which means setting lines of table $p(x_i)$ where $x_i \neq \bar{x_i}$ to 0.<br>Evidence potential is a trick to simplify the description. In practice we take slices instead of doing summation.<br><img src="/images/CS5340/4/eg.png" alt="eg"></p>
<p>Eliminate(G,E,F):</p>
<ul>
<li>Initialize: choose elimination ordering, query nodes appear at the last.</li>
<li>Evidence: place evidence</li>
<li>Update: marginalization.<br>Loop: 1. $\phi_i = $ product of â€¦, which is the unnormalized conditional probability. 2. $m_i(x_{S_i})=\sum_{x_i}\phi_i$, which is the narmalization factor.</li>
<li>Normalize(F)<script type="math/tex; mode=display">p(x_F|\bar{x_E})=\frac{\phi_F(x_F)}{\sum_F\phi_F(x_F)}=\frac{\phi_F(x_F)}{m_F(x_{S_F})}</script>For conditional probability, normalization factor Z cancels.<br>For a marginal probability, Z cannot be canceled.</li>
</ul>
<p><img src="/images/CS5340/4/elimination.png" alt="elimination"></p>
<h1 id="Constituted-Graph"><a href="#Constituted-Graph" class="headerlink" title="Constituted Graph"></a>Constituted Graph</h1><p>Eliminate: removing the node from graph and connecting the remaining neighbors, thus creating â€œelimination cliquesâ€.<br><strong>Reconstitute</strong>: add additional edges during the elimination process to the original graph. (Complexity depends on the choice of elimination order)<br><strong>Treewidth</strong>: one less than the smallest achievable cardinality of the largest elimination clique over all possible elimination ordering.</p>
<p><em>Computaional Complexity of DGM can be convert to UGM by moralization.</em></p>
<p>Limitation: re-run elimination algorithm for every new query nodes, since different query nodes require different eliminate order.</p>
<h1 id="Sum-Product-Algorithm-Belief-Propagation-Algorithm"><a href="#Sum-Product-Algorithm-Belief-Propagation-Algorithm" class="headerlink" title="Sum-Product Algorithm (Belief Propagation Algorithm)"></a>Sum-Product Algorithm (Belief Propagation Algorithm)</h1><p>$ \checkmark$ All single-node marginals<br>$ \checkmark$ Tree like graphs (undirected tree without loop or can be moralized to such tree)<br>$ \checkmark$ Using one single run<br>$ \checkmark$ Cliques are single or pairs of nodes</p>
<h2 id="Convert-a-directed-tree-to-an-undirected-one"><a href="#Convert-a-directed-tree-to-an-undirected-one" class="headerlink" title="Convert a directed tree to an undirected one"></a>Convert a directed tree to an undirected one</h2><p>Define: $\psi(x_r) = p(x_r)$, $\psi(x_i.x_j)=p(x_j|x_i)$, $\psi(x_i)=1\quad\forall i\neq r$, Partition function $Z=1$.</p>
<h2 id="Define-local-potetials"><a href="#Define-local-potetials" class="headerlink" title="Define local potetials"></a>Define local potetials</h2><script type="math/tex; mode=display">
\psi_i^E(x_i)=\begin{cases}\psi_i(x_i)\delta(x_i,\bar{x_i})\quad i\in E
\\\psi_i(x_i)\qquad\qquad otherwise
\end{cases}</script><script type="math/tex; mode=display">
p(x|\bar{x_E})=\frac{1}{Z^E}(\prod_{i\in V}\psi^E(x_i)\prod_{(i,j)\in E}\psi(x_i,x_j))</script><h2 id="Construct-tree-structure"><a href="#Construct-tree-structure" class="headerlink" title="Construct tree structure"></a>Construct tree structure</h2><p>Order: Depth-Fist Traversal.<br>Take query node $X_f$ as root.<br>Directing all edges pointing away from $X_f$.<br>Elimination proceeds inward from leaves with tree width equals to one.</p>
<h2 id="Inward"><a href="#Inward" class="headerlink" title="Inward"></a>Inward</h2><p>Send message $(j,i)$: </p>
<script type="math/tex; mode=display">m_{ji}=\sum_{x_j}(\psi^E(x_j)\psi(x_i,x_j)\prod_{k\in N(j)- i}m_{kj})</script><p>This message can be re-used.<br>Compute Marginal:</p>
<script type="math/tex; mode=display">p(x_f|\bar{x_E})\propto\psi^E(x_f)\prod_{e\in N(f)}m_{ef}</script><p>which is the unnormalized conditional probability.</p>
<p>Message Passing Protocol: a node can send a message to a neihboring node if and only if it has received messages from all its other neighbors.</p>
<p><strong>Two phase approval: inward &amp; outward.</strong><br><img src="/images/CS5340/4/sum-product.png" alt="sum-product"></p>
]]></content>
      <categories>
        <category>Uncertainty Modelling in AI</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI</tag>
        <tag>ML</tag>
        <tag>PGM</tag>
      </tags>
  </entry>
  <entry>
    <title>ConvNet Architecture 2</title>
    <url>/2020/09/29/ML_ConvNet_2/</url>
    <content><![CDATA[<h1 id="InceptionNetV2"><a href="#InceptionNetV2" class="headerlink" title="InceptionNetV2"></a>InceptionNetV2</h1><p>Inception V1 + Batch Normalization(BN), converge faster<br>After convolution / linear/ fully connected layer: $z=ReLU(BN(f(x)))$<br>Inreality: $z=BN(ReLU(f(x)))$<br><a id="more"></a></p>
<p><img src="/images/CS5242/7/BN.png" alt="BN"></p>
<h1 id="InceptionNetV3"><a href="#InceptionNetV3" class="headerlink" title="InceptionNetV3"></a>InceptionNetV3</h1><h1 id="ResNet"><a href="#ResNet" class="headerlink" title="ResNet"></a>ResNet</h1><h1 id="XceptionNet"><a href="#XceptionNet" class="headerlink" title="XceptionNet"></a>XceptionNet</h1><h1 id="Architecture-search-and-compression"><a href="#Architecture-search-and-compression" class="headerlink" title="Architecture search and compression"></a>Architecture search and compression</h1><h1 id="Transfer-learning-for-image-classification"><a href="#Transfer-learning-for-image-classification" class="headerlink" title="Transfer learning for image classification"></a>Transfer learning for image classification</h1>]]></content>
      <categories>
        <category>Neural Network and Deep Learning</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>Classification</title>
    <url>/2020/08/18/ML_Classification/</url>
    <content><![CDATA[<h1 id="Regression-VS-Classification"><a href="#Regression-VS-Classification" class="headerlink" title="Regression VS Classification"></a>Regression VS Classification</h1><p>å›å½’é—®é¢˜ï¼šå®šé‡(quantity)<br>åˆ†ç±»é—®é¢˜ï¼šå®šæ€§(label)<br>åˆ†ç±»é—®é¢˜çš„æ ‡ç­¾ä¸€èˆ¬ç”±å›å½’æˆ–è€…ç›´æ¥æµ‹é‡æ¥å¾—åˆ°ã€‚eg. é¢„æµ‹æ˜å¤©çš„å¤©æ°”ï¼Œé™æ°´é‡è¶…è¿‡ä¸€å®šé˜ˆå€¼$C$ä¸ºæœ‰é›¨ï¼Œå¦åˆ™ä¸ºä¸ä¸‹é›¨ã€‚è¿™é‡Œçš„é™æ°´é‡æ˜¯ä¸ªè¿ç»­å‹éšæœºå˜é‡ï¼Œå¯ä»¥ç›´æ¥æµ‹é‡ä¹Ÿå¯ä»¥é€šè¿‡å›å½’æ¥é¢„æµ‹ã€‚</p>
<script type="math/tex; mode=display">\widetilde{y}=\begin{cases} 1,\qquad\qquad if\boldsymbol{w^Tx}>c \\ 0,\qquad\qquad else\end{cases}</script><p>ä¹Ÿå¯ä»¥å°†é˜ˆå€¼$C$ä¸å¾…å­¦ä¹ çš„å‚æ•°$w$åˆå¹¶ï¼š</p>
<script type="math/tex; mode=display">\widetilde{y}=\begin{cases} 1,\qquad\qquad if\boldsymbol{w^Tx}>0 \\ 0,\qquad\qquad else\end{cases}</script><a id="more"></a>
<h1 id="Logistic-Regression"><a href="#Logistic-Regression" class="headerlink" title="Logistic Regression"></a>Logistic Regression</h1><p>ä¸Šè¿°å‡½æ•°åœ¨ $\boldsymbol{x}=\boldsymbol{0}$ çš„æ—¶å€™ä¸å¯å¾®(differentiable)è€Œä¸”åœ¨æ¯ä¸€å¤„çš„å¯¼æ•°éƒ½æ˜¯0ï¼Œåœ¨æ±‚Lossè¿›è¡Œæ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹ä¸­æ— æ³•å­¦ä¹ åˆ°ä»»ä½•ä¿¡æ¯ã€‚å› æ­¤æˆ‘ä»¬å¼•å…¥Logistic Function(Sigmoid Function):</p>
<script type="math/tex; mode=display">p=\sigma (\boldsymbol{w^Tx})=\frac{1}{1+e^{-\boldsymbol{w^Tx}}}</script><p>è¿™ä¸ªå‡½æ•°å°† $\boldsymbol{w^Tx}$ æ˜ å°„åˆ°æ¦‚ç‡å–å€¼ $[0,1]$ï¼Œå«ä¹‰æ˜¯å°† $\boldsymbol{x}$ æ ‡è®°ä¸º $1$ çš„æ¦‚ç‡ã€‚<br>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ ${\mathcal L}2$ æŸå¤±å‡½æ•°ï¼š<script type="math/tex">{\mathcal L}(\boldsymbol{x},y)=\frac{1}{2}||\sigma(\boldsymbol{w^Tx})-y||^2</script><br>ä»¤ $z=\boldsymbol{w^Tx}$ åˆ™ï¼š<script type="math/tex">{\mathcal L}=\frac{1}{2}(\sigma(z)-y)^2</script><br>æ­¤æ—¶æœ‰ï¼š</p>
<script type="math/tex; mode=display">\begin{aligned}
\frac{\partial {\mathcal L}}{\partial \boldsymbol{w}}&=\frac{\partial {\mathcal L}}{\partial\sigma(z)}\frac{\partial\sigma(z)}{\partial z}\frac{\partial z}{\partial \boldsymbol{w}}\\
&=(\sigma(z)-y)\cdot\frac{\partial\sigma(z)}{\partial z}\cdot\boldsymbol{x}
\end{aligned}</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">\begin{aligned}
\frac{\partial\sigma(z)}{\partial z}&=\frac{\partial ((1+e^{-z})^{-1})^{-1}}{\partial z}\\
&=-1\cdot(1+e^{-z})^{-2}\cdot\frac{\partial (1+e^{-z})}{\partial z}\\
&=-(1+e^{-z})^{-2}(-e^{-z})\\
&=(1+e^{-z})^{-2}(e^{-z})\\
&=(\sigma(z))^2(\frac{1}{\sigma(z)}-1)\\
&=\sigma(z)(1-\sigma(z))
\end{aligned}</script><p>ç”±äºæ¢¯åº¦ä¸‹é™çš„å…¬å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">{\boldsymbol{w}}={\boldsymbol{w}}-\alpha\frac{\partial {\mathcal L}}{\partial {\boldsymbol{w}}}</script><p>å¯ä»¥çœ‹åˆ°å¦‚æœ $\sigma(z)\approx 0or1$ï¼š</p>
<script type="math/tex; mode=display">\frac{\partial\sigma(z)}{\partial z}\approx 0\to\frac{\partial {\mathcal L}}{\partial \boldsymbol{w}}\approx 0</script><p>è¿™ç§æƒ…å†µä¸‹ä¼šå‡ºç°<strong>æ¢¯åº¦æ¶ˆå¤±(Gradient Vanishing)</strong>ï¼Œå‚æ•° ${\boldsymbol{w}}$ æ— æ³•ç»§ç»­è¿›è¡Œæ›´æ–°ã€‚</p>
<h1 id="Binary-Cross-entropy"><a href="#Binary-Cross-entropy" class="headerlink" title="Binary Cross-entropy"></a>Binary Cross-entropy</h1><p>ä¸ºäº†é¿å… ${\mathcal L}2$ æŸå¤±å‡½æ•°åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹æŸå¤±å‡½æ•°ï¼š</p>
<script type="math/tex; mode=display">\begin{aligned}{\mathcal L}_{ce}(x,y)&=-ylogp-(1-y)log(1-p)\\
&=\begin{cases}\begin{aligned} -logp,\qquad\qquad &if\qquad y=1 \\ -log(1-p),\qquad&if\qquad y=0\end{aligned}\end{cases}\end{aligned}</script><p>å…¶ä¸­ï¼š $p=\sigma(z)\quad z=\boldsymbol{w^Tx}$<br>è¯¥å¼è§£é‡Šå¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">\begin{aligned}p(correct|\boldsymbol{x})&=\begin{cases}P(\widetilde{y}=1|\boldsymbol{x}),\qquad if\quad y=1\\P(\widetilde{y}=0|\boldsymbol{x}),\qquad if\quad y=0\\\end{cases}\\&=P(\widetilde{y}=1|\boldsymbol{x})^yP(\widetilde{y}=0|\boldsymbol{x})^{(1-y)}\end{aligned}</script><p>è¦æƒ³æœ€å¤§åŒ–ä¸Šè¿°å€¼ï¼Œå°±è¦æœ€å°åŒ–å®ƒçš„logå€¼çš„ç›¸åæ•°(negative log-likelihood)ï¼š</p>
<script type="math/tex; mode=display">\begin{aligned}min\quad-logP(correct|\boldsymbol{x})&=min\quad-P(\widetilde{y}=1|\boldsymbol{x})^yP(\widetilde{y}=0|\boldsymbol{x})^{(1-y)}\\&=min\quad-ylogp-(1-y)log(1-p)\\&=min\quad L_{ce}(\boldsymbol{x},y)\end{aligned}</script><p>Cross-entropyçš„æ¢¯åº¦ä¸ºï¼š</p>
<script type="math/tex; mode=display">\begin{aligned}\frac{\partial L_{ce}}{\partial \boldsymbol{w}}&=\frac{\partial L_{ce}}{\partial z}\frac{\partial z}{\partial \boldsymbol{w}} =\frac{\partial L_{ce}}{\partial p}\frac{\partial p}{\partial z}\frac{\partial z}{\partial \boldsymbol{w}}\\
&=(-\frac{y}{p}+\frac{1-y}{1-p})\ast p(1-p)\ast\boldsymbol{x}\\
&=(p-y)\boldsymbol{x}\end{aligned}</script><h1 id="Multi-class-classification"><a href="#Multi-class-classification" class="headerlink" title="Multi-class classification"></a>Multi-class classification</h1><ul>
<li>Multi-label ä¸€ä¸ªè¾“å…¥å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾</li>
<li>Single-label ä¸€ä¸ªè¾“å…¥åªèƒ½æœ‰ä¸€ä¸ªæ ‡ç­¾</li>
</ul>
<h2 id="Multi-label"><a href="#Multi-label" class="headerlink" title="Multi-label"></a>Multi-label</h2><p>å¯¹äºä¸€ä¸ªè¾“å…¥å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾çš„æƒ…å†µï¼Œå¯ä»¥åŒæ—¶è®­ç»ƒå¤šä¸ªåˆ†ç±»å™¨ï¼Œæ¯ä¸ªåˆ†ç±»å™¨å¯¹åº”ä¸€ä¸ªç±»åˆ«ï¼Œåˆ¤æ–­è¯¥è¾“å…¥æ˜¯å¦å±äºè¯¥ç±»åˆ«ï¼Œè¿™äº›ç±»åˆ«ä¹‹é—´å½¼æ­¤ç‹¬ç«‹ã€‚<br>å¯¹ç¬¬ $i$ ä¸ªç±»åˆ«æœ‰ï¼š<br>$z_i=\boldsymbol{W}_i\boldsymbol{x}+b_i\quad p_i=\sigma(z_i)\quad L_{ce}=-y_ilogp_i-(1-y_i)log(1-p_i)$<br>å¯¹äºæ‰€æœ‰ç±»åˆ«å‘é‡åŒ–è¡¨ç¤ºä¸º:<br>$\boldsymbol{z}=\boldsymbol{W}\boldsymbol{x}+\boldsymbol{b}\quad \boldsymbol{p}=\sigma(\boldsymbol{z})\quad L_{ce}=-\boldsymbol{y}^Tlog\boldsymbol{p}-(1-\boldsymbol{y})^Tlog(1-\boldsymbol{p})$</p>
<h2 id="Single-label"><a href="#Single-label" class="headerlink" title="Single-label"></a>Single-label</h2><p>å¿…é¡»åœ¨æ‰€æœ‰æ ‡ç­¾ä¸­é€‰æ‹©ä¸€ä¸ªæ ‡ç­¾å‡ºæ¥ï¼šç»´æŒæ‰€æœ‰æ ‡ç­¾çš„æ¦‚ç‡æ€»å’Œä¸º1ï¼Œå–æ¦‚ç‡æœ€å¤§çš„æ ‡ç­¾ä¸ºé¢„æµ‹çš„ç»“æœã€‚å¯ä»¥ä½¿ç”¨<strong>Softmax regression (multinomial logistic regression)</strong>ï¼š</p>
<script type="math/tex; mode=display">p_i=\frac{e^{z_i}}{\sum_j e^{z_j}}=softmax(z_i)</script><p>æ»¡è¶³ï¼š$\boldsymbol z=\boldsymbol{Wx}\quad \sum_ip_i=1\quad t= \mathop{\arg\max}\limits_ip_i\quad \widetilde{y_i}=i=t?1:0$<br>å•ä¸ªå®ä¾‹çš„é¢„æµ‹å€¼ä¸ºone-hotå‘é‡ $\widetilde{\boldsymbol{y}} =(\widetilde{y_1},â€¦,\widetilde{y_K})$ï¼Œå…±$K$ä¸ªç±»åˆ«ã€‚<br>Losså‡½æ•°ä¸ºï¼š$L_{ce}(\boldsymbol{x},\boldsymbol{y})=\sum_i-y_ilogp_i=-\boldsymbol{y}^Tlog\boldsymbol{p}=-logp_{k_{right}}$<br>å…¶ä¸­ $\mathbf{X}$ çš„æ¯ä¸€è¡Œæ˜¯ç‰¹å¾å‘é‡ $\boldsymbol{x}$ï¼Œ $\mathbf{Y}$ çš„æ¯ä¸€è¡Œæ˜¯ç›®æ ‡one-hotå‘é‡ $\boldsymbol{y}$ ï¼š</p>
<script type="math/tex; mode=display">
\mathbf{X} = \begin{pmatrix} {\boldsymbol{x^{(1)}}}^T \\ {\boldsymbol{x^{(2)}}}^T \\ ... \\ {\boldsymbol{x^{(m)}}}^T\end{pmatrix} \qquad
\mathbf{Y} = \begin{pmatrix} {\boldsymbol{y}^{(1)}}^T \\ {\boldsymbol{y}^{(2)}}^T \\ ... \\ {\boldsymbol{y}^{(m)}}^T\end{pmatrix}</script><script type="math/tex; mode=display">\frac{\partial J}{\partial \mathbf{W}}=\frac{1}{m}(\mathbf{P}-\mathbf{Y})\mathbf{X}^T\in R^{k\times n}, \mathbf{X}\in R^{(m\times n)} ,\mathbf{Y}\in R^{(m\times k)}</script><p><img src="/images/CS5242/2/Multi-gd.png" alt="history"></p>
<ul>
<li>Sigmoid ä»£è¡¨å°å†™çš„å¸Œè…Šå­—æ¯sigma (uppercase Î£, lowercase Ïƒ)</li>
</ul>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•£åˆ—è¡¨ Hash Table</title>
    <url>/2020/07/19/Hashing/</url>
    <content><![CDATA[<p>æ•£åˆ—è¡¨æ˜¯å®ç°å­—å…¸æ“ä½œçš„ä¸€ç§æœ‰æ•ˆæ•°æ®ç»“æ„ï¼Œæœ€åæƒ…å†µçš„æŸ¥æ‰¾æ—¶é—´æ˜¯$\theta (n)$ï¼Œå¹³å‡æŸ¥æ‰¾æ—¶é—´ä¸º$O(1)$ã€‚<br>æ•£åˆ—è¡¨æ˜¯æ™®é€šæ•°ç»„æ¦‚å¿µçš„æ¨å¹¿ï¼Œæ•°ç»„å¯ä»¥ç›´æ¥å¯»å€ã€‚<br>å½“å®é™…å­˜å‚¨çš„å…³é”®å­—æ•°ç›®æ¯”å…¨éƒ¨å¯èƒ½çš„å…³é”®å­—æ€»æ•°è¦å°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ•£åˆ—è¡¨æ¥æ›¿ä»£ç›´æ¥æ•°ç»„å¯»å€ã€‚<br><a id="more"></a></p>
<h2 id="ç›´æ¥å¯»å€è¡¨-Direct-address-table"><a href="#ç›´æ¥å¯»å€è¡¨-Direct-address-table" class="headerlink" title="ç›´æ¥å¯»å€è¡¨ Direct-address table"></a>ç›´æ¥å¯»å€è¡¨ Direct-address table</h2><p>å…³é”®å­—çš„å…¨åŸŸUè¾ƒå°ï¼Œæ²¡æœ‰ä¸¤ä¸ªå…ƒç´ å…·æœ‰ç›¸åŒçš„å…³é”®å­—ã€‚<br>ä½¿ç”¨æ•°ç»„ï¼Œå³ç›´æ¥å¯»å€è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªä½ç½®æˆä¸ºæ§½(slot)ï¼Œå®é™…å…³é”®å­—é›†åˆKå¯¹åº”çš„æ§½æŒ‡å‘å¯¹åº”çš„å…ƒç´ ï¼ˆå…³é”®å­—ä¸ºkçš„å…ƒç´ å­˜æ”¾åœ¨æ§½kä¸­ï¼‰ï¼Œå…¶å®ƒæ§½ä¸ºNILï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å…³é”®å­—è¯´æ˜è¯¥æ§½ä¸ºç©ºã€‚<br>ç¼ºç‚¹ï¼šå¦‚æœå…¨åŸŸUå¾ˆå¤§ï¼Œè®¡ç®—æœºå¯èƒ½æ— æ³•å®Œæ•´å­˜å‚¨è¿™å¼ è¡¨ï¼›å¦‚æœå®é™…å­˜å‚¨çš„å…³é”®å­—é›†åˆKç›¸å¯¹äºUæ¥è¯´å¾ˆå°ï¼Œåˆ™Tçš„å¤§éƒ¨åˆ†ç©ºé—´è¢«æµªè´¹ã€‚</p>
<h2 id="æ•£åˆ—è¡¨"><a href="#æ•£åˆ—è¡¨" class="headerlink" title="æ•£åˆ—è¡¨"></a>æ•£åˆ—è¡¨</h2><p>æ•£åˆ—è¡¨éœ€è¦çš„å­˜å‚¨ç©ºé—´æ¯”ç›´æ¥å¯»å€è¡¨å°‘å¾ˆå¤šï¼Œå…³é”®å­—ä¸ºkçš„å…ƒç´ å­˜æ”¾åœ¨æ§½$h(k)$ä¸­ã€‚å³ï¼šåˆ©ç”¨æ•£åˆ—å‡½æ•°ï¼ˆhash functionï¼‰hæ¥è®¡ç®—å‡ºå…³é”®å­—ä¸ºkçš„å…ƒç´ çš„æ§½çš„ä½ç½®ã€‚æ•£åˆ—å‡½æ•°å°†å…¨åŸŸUæ˜ å°„åˆ°å¤§å°ä¸ºmçš„æ•£åˆ—è¡¨ä¸Šï¼Œå…¶ä¸­$m&lt;&lt;|U|$ã€‚<br>ä¸¤ä¸ªå…³é”®å­—å¯èƒ½è¢«æ˜ å°„åˆ°åŒä¸€ä¸ªæ§½ä¸­ï¼Œæˆä¸ºå†²çª(collision)ã€‚<br><strong>é€šè¿‡é“¾æ¥æ³•è§£å†³å†²çª</strong>ï¼šæŠŠæ˜ å°„åˆ°åŒä¸€ä¸ªæ§½ä¸­çš„å…³é”®å­—è¿æˆé“¾è¡¨ã€‚<br>æœ€åæƒ…å†µï¼šæ‰€æœ‰nä¸ªå…³é”®å­—éƒ½æ•£åˆ—åˆ°åŒä¸€ä¸ªæ§½ä¸­ï¼Œæ€§èƒ½ç›¸å½“äºæ™®é€šé“¾è¡¨ã€‚<br>å¹³å‡æƒ…å†µï¼šä¾èµ–äºæ•£åˆ—å‡½æ•°æŠŠnä¸ªå…³é”®å­—æ˜ å°„åˆ°mä¸ªæ§½ä½çš„å¹³å‡ç¨‹åº¦ã€‚å®šä¹‰è¡¨Tçš„è£…è½½å› å­$\alpha =n/m$ã€‚<br>åœ¨ç®€å•å‡åŒ€æ•£åˆ—(simple uniform hash)çš„æƒ…å†µä¸‹ï¼Œä¸€æ¬¡æŸ¥æ‰¾çš„å¹³å‡æ—¶é—´ä¸º$\theta(1+\alpha)$ï¼Œè¯´æ˜æ€»å…ƒç´ ä¸ªæ•°åº”è¯¥ä¸è¡¨ä¸­å…ƒç´ ä¸ªæ•°æˆæ­£æ¯”ï¼Œåˆ™$\alpha=n/m=O(m)/m=O(1)$ï¼Œæ­¤æ—¶æŸ¥æ‰¾æ“ä½œå¹³å‡éœ€è¦å¸¸æ•°æ—¶é—´ã€‚<br>å½“é“¾è¡¨ä½¿ç”¨åŒå‘é“¾è¡¨æ—¶ï¼Œæ’å…¥å’Œåˆ é™¤çš„æœ€åæƒ…å†µä¹Ÿæ˜¯$O(1)$ï¼Œæ­¤æ—¶å­—å…¸çš„å…¨éƒ¨æ“ä½œéƒ½å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å®Œæˆã€‚</p>
<h2 id="æ•£åˆ—å‡½æ•°"><a href="#æ•£åˆ—å‡½æ•°" class="headerlink" title="æ•£åˆ—å‡½æ•°"></a>æ•£åˆ—å‡½æ•°</h2><p>å¥½çš„æ•£åˆ—å‡½æ•°åº”è¯¥å°½é‡æ»¡è¶³ç®€å•å‡åŒ€ï¼Œå°½é‡å°†ç›¸è¿‘çš„å­—ç¬¦æ•£åˆ—åˆ°ä¸åŒçš„æ§½ã€‚</p>
<h3 id="é™¤æ³•æ•£åˆ—æ³•"><a href="#é™¤æ³•æ•£åˆ—æ³•" class="headerlink" title="é™¤æ³•æ•£åˆ—æ³•"></a>é™¤æ³•æ•£åˆ—æ³•</h3><p>æ•£åˆ—å‡½æ•°ï¼š$k(h) = k\% m$<br>æ³¨æ„ï¼šmä¸åº”è¯¥ä¸º2çš„å¹‚ã€‚å¦‚æœ$m=2^p$ï¼Œåˆ™$h(k)$å°±æ˜¯kçš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„pä¸ªæœ€ä½ä½æ•°å­—ã€‚è®¾è®¡æ•£åˆ—å‡½æ•°æ—¶æœ€å¥½è€ƒè™‘æ‰€æœ‰ä½ï¼Œå› ä¸ºæ— æ³•ä¿è¯å„ç§æœ€ä½pä½çš„æ’åˆ—å½¢å¼ä¸ºç­‰å¯èƒ½ã€‚<em>mæœ€å¥½æ˜¯ä¸€ä¸ªä¸å¤ªæ¥è¿‘2çš„å¹‚çš„ç´ æ•°ã€‚</em></p>
<h3 id="ä¹˜æ³•æ•£åˆ—æ³•"><a href="#ä¹˜æ³•æ•£åˆ—æ³•" class="headerlink" title="ä¹˜æ³•æ•£åˆ—æ³•"></a>ä¹˜æ³•æ•£åˆ—æ³•</h3><p>æ•£åˆ—å‡½æ•°ï¼š$\lfloor m(kA\%1)\rfloor$<br>å…¶ä¸­å¸¸æ•°Aæ»¡è¶³$0 &lt; A &lt; 1$ã€‚å³ï¼šå¯¹kAçš„å°æ•°éƒ¨åˆ†ä¹˜ä»¥må†å‘ä¸‹å–æ•´ã€‚<br>ä¼˜ç‚¹ï¼šå¯¹äºmçš„å–å€¼ä¸æ˜¯å¾ˆå…³é”®ã€‚ä¸€èˆ¬é€‰æ‹©$A\approx (\sqrt5-1)/2=0.618â€¦$</p>
<h3 id="å…¨åŸŸæ•£åˆ—æ³•-universal-hashing"><a href="#å…¨åŸŸæ•£åˆ—æ³•-universal-hashing" class="headerlink" title="å…¨åŸŸæ•£åˆ—æ³• universal hashing"></a>å…¨åŸŸæ•£åˆ—æ³• universal hashing</h3><p>åœ¨ä¸€ä¸ªå‡½æ•°ç»„ä¸­éšæœºåœ°é€‰æ‹©æ•£åˆ—å‡½æ•°ï¼Œä½¿ä¹‹ç‹¬ç«‹äºè¦å­˜å‚¨çš„å…³é”®å­—ï¼Œä»è€Œé¿å…äº†å°†å…¨éƒ¨å…³é”®å­—æ•£åˆ—åˆ°åŒä¸€ä¸ªæ§½ä¸­çš„æœ€åæƒ…å†µï¼Œé€‰å®šåä¸å†æ›´æ”¹ã€‚</p>
<h2 id="å¼€æ”¾å¯»å€æ³•-open-addressing"><a href="#å¼€æ”¾å¯»å€æ³•-open-addressing" class="headerlink" title="å¼€æ”¾å¯»å€æ³• open addressing"></a>å¼€æ”¾å¯»å€æ³• open addressing</h2><p>æ‰€æœ‰çš„å…ƒç´ éƒ½å­˜æ”¾åœ¨æ•£åˆ—è¡¨é‡Œï¼Œæ¯ä¸ªè¡¨é¡¹è¦ä¹ˆæ˜¯uå…ƒç´ è¦ä¹ˆæ˜¯NILã€‚æ•£åˆ—è¡¨å¯èƒ½ä¼šå¡«æ»¡ï¼Œä»¥è‡³äºæ— æ³•å†æ’å…¥æ–°çš„å…ƒç´ ã€‚è¯¥æ–¹æ³•å¯¼è‡´çš„ä¸€ä¸ªç»“æœæ˜¯è£…è½½å› å­$\alpha$ç»å¯¹ä¸ä¼šè¶…è¿‡1ã€‚æ§½ä¸­åŒæ ·å¯ä»¥å­˜æ”¾é“¾è¡¨ã€‚<br>ä½¿ç”¨å¼€æ”¾å¯»å€æ³•æ’å…¥å…ƒç´ æ—¶ï¼Œéœ€è¦è¿ç»­åœ°æ£€æŸ¥æ•£åˆ—è¡¨ï¼Œæˆ–ç§°ä¸ºæ¢æŸ¥(probe)ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç©ºæ§½æ¥æ”¾ç½®å¾…æ’å…¥çš„å…ƒç´ ã€‚<br>çº¿æ€§æ¢æŸ¥ï¼ŒäºŒæ¬¡æ¢æŸ¥ï¼ŒåŒé‡æ¢æŸ¥</p>
<h2 id="å®Œå…¨æ•£åˆ—"><a href="#å®Œå…¨æ•£åˆ—" class="headerlink" title="å®Œå…¨æ•£åˆ—"></a>å®Œå…¨æ•£åˆ—</h2><p>ä¸»è¦é’ˆå¯¹é™æ€(static)çš„å…³é”®å­—é›†åˆï¼Œå³ï¼šä¸€æ—¦å„å…³é”®å­—å­˜å…¥è¡¨ä¸­ï¼Œå…³é”®å­—é›†åˆå°±ä¸å†å˜åŒ–äº†ã€‚<br>é‡‡ç”¨ä¸¤çº§çš„æ•£åˆ—æ–¹æ³•æ¥è®¾è®¡å®Œå…¨æ•£åˆ—æ–¹æ¡ˆï¼Œæ¯çº§ä¸Šéƒ½ä½¿ç”¨å…¨åŸŸæ•£åˆ—ã€‚<br>ä¸ºäº†ä¿è¯ä¸å†²çªï¼Œæ¯ä¸ªäºŒçº§å“ˆå¸Œè¡¨çš„æ•°é‡æ˜¯ç¬¬ä¸€çº§æ˜ å°„åˆ°è¿™ä¸ªæ§½ä¸­å…ƒç´ ä¸ªæ•°çš„å¹³æ–¹ï¼ˆåœ¨ç¬¬ 1 çº§ï¼Œå¦‚æœæœ‰$N_i$ä¸ªå…ƒç´ æ˜ å°„åˆ°ç¬¬iä¸ªæ§½ï¼Œé‚£ä¹ˆç¬¬$N_i$ä¸ªæ§½å¯¹åº”çš„2çº§å“ˆå¸Œè¡¨é‡‡ç”¨å…¨åŸŸå“ˆå¸Œã€‚è¡¨çš„é•¿åº¦å–$M_i = N_i^2$ï¼‰ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ•´ä¸ªå“ˆå¸Œè¡¨éå¸¸çš„ç¨€ç–ã€‚<br>å±æ€§ï¼šå°†nä¸ªé”®æ˜ å°„åˆ°$n^2$ä¸ªæ§½ï¼Œå¦‚æœä»å…¨åŸŸå“ˆå¸ŒHä¸­éšæœºé€‰æ‹©hï¼Œé‚£ä¹ˆæœŸæœ›çš„å†²çªæ¬¡æ•°å°äº1/2ï¼Œä¸å‘ç”Ÿå†²çªçš„æ¦‚ç‡å¤§äº1/2ã€‚</p>
<blockquote>
<p> <a href="https://blog.csdn.net/lzq20115395/article/details/80517225">https://blog.csdn.net/lzq20115395/article/details/80517225</a></p>
</blockquote>
<p><img src="/images/perfect-hash.png" alt="hash"></p>
<h2 id="javaä¸­HashTableå’ŒHashMapçš„æºä»£ç "><a href="#javaä¸­HashTableå’ŒHashMapçš„æºä»£ç " class="headerlink" title="javaä¸­HashTableå’ŒHashMapçš„æºä»£ç "></a>javaä¸­HashTableå’ŒHashMapçš„æºä»£ç </h2>]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„</category>
      </categories>
      <tags>
        <tag>hash</tag>
      </tags>
  </entry>
  <entry>
    <title>ConvNet Architecture 1</title>
    <url>/2020/09/15/ML_ConvNet_1/</url>
    <content><![CDATA[<h1 id="Historical-Notes"><a href="#Historical-Notes" class="headerlink" title="Historical Notes"></a>Historical Notes</h1><h2 id="Fukushimaâ€™s-Neocognitron"><a href="#Fukushimaâ€™s-Neocognitron" class="headerlink" title="Fukushimaâ€™s Neocognitron"></a>Fukushimaâ€™s Neocognitron</h2><ul>
<li>Hierarchical feature extraction</li>
<li>Local connectivity field</li>
<li>Hand crafted weight (before BP was developed)<a id="more"></a>
</li>
</ul>
<p><img src="/images/CS5242/6/Fukushima.png" alt="Fukushima"></p>
<h2 id="LeNet"><a href="#LeNet" class="headerlink" title="LeNet"></a>LeNet</h2><ul>
<li>Convolution</li>
<li>Subsampling = pooling</li>
</ul>
<p><img src="/images/CS5242/6/LeNet.png" alt="LeNet"></p>
<h1 id="Modern-CNNs"><a href="#Modern-CNNs" class="headerlink" title="Modern CNNs"></a>Modern CNNs</h1><h2 id="General-Architecture-and-Design-Guide"><a href="#General-Architecture-and-Design-Guide" class="headerlink" title="General Architecture and Design Guide"></a>General Architecture and Design Guide</h2><p>ConvBlock(module): convolution, activation, batch normalization, pooling<br>Classification: Linear + Activation + Softmax<br>Regression: Linear<br>Accuracy: large representation capacity $\to$ overfitting</p>
<h2 id="AlexNet-2012"><a href="#AlexNet-2012" class="headerlink" title="AlexNet 2012"></a>AlexNet 2012</h2><p>GPUs instead of CPUs<br>Emsemble modelling<br>ReLU: reduce the chance of gradient vanishing<br>Dropout: avoid overfitting<br>Image Augmentation<br><img src="/images/CS5242/6/AlexNet.png" alt="AlexNet"></p>
<h3 id="Dropout"><a href="#Dropout" class="headerlink" title="Dropout"></a>Dropout</h3><ul>
<li><p>Training<br>Randomly set some neurons to 0 with probability p<br>Different layers may have different dropout rate</p>
</li>
<li><p>Inference<br><strong>Do Nothing !</strong> Stay deterministic during prediction</p>
</li>
</ul>
<p><img src="/images/CS5242/6/Dropout.png" alt="Dropout"></p>
<h3 id="Image-Augmentation"><a href="#Image-Augmentation" class="headerlink" title="Image Augmentation"></a>Image Augmentation</h3><p>Increase the training data to cover more types of (test) data.<br><img src="/images/CS5242/6/image_augment.png" alt="image_augment"></p>
<ul>
<li><p>Training<br>Random augmentation operations</p>
</li>
<li><p>Test<br><strong>No random operations</strong>, otherwise model may generate different predictions for the same input run twice.<br>Make predictions by <strong>aggregating the results from all augmented images</strong>.</p>
</li>
</ul>
<h2 id="VGG"><a href="#VGG" class="headerlink" title="VGG"></a>VGG</h2><p><strong>Unified kernel size</strong><br>Computational cost: 2 3x3 kernels &lt; 1 5x5 Kernel<br>Deeper structure(16, 19 convolution layers)<br>More parameters(138M).<br>More non-linear tranformation; Larger capacity.<br>Consecutive convolution.<br><img src="/images/CS5242/6/VGG.png" alt="VGG"></p>
<h2 id="Inception-V1"><a href="#Inception-V1" class="headerlink" title="Inception V1"></a>Inception V1</h2><p><strong>Inception Block</strong> : $1\times 1$ convolution (reduce channel number); ensemble multiple paths with different kernel sizes.<br>Achieve fusion of feature maps in a single level using concatenation of output from kernels with various size.</p>
<ul>
<li>Average pooling: reduce model size &amp; time complexity.</li>
</ul>
<p><img src="/images/CS5242/6/InceptionNet.png" alt="InceptionNet"><br><img src="/images/CS5242/6/concat.png" alt="concat"></p>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>From Shallow to Deep Neural Network</title>
    <url>/2020/08/25/ML_Deep_Neural_Network/</url>
    <content><![CDATA[<h1 id="Multilayer-Perceptron-MLP"><a href="#Multilayer-Perceptron-MLP" class="headerlink" title="Multilayer Perceptron (MLP)"></a>Multilayer Perceptron (MLP)</h1><h2 id="The-Perception"><a href="#The-Perception" class="headerlink" title="The Perception"></a>The Perception</h2><p>input: $x_1,x_2â€¦,x_N$<br>weight: $w_1,w_2,â€¦,w_N$<br>output: $y={\mathcal g }(\boldsymbol{w^Tx})=\begin{cases} 1,\qquad if\quad\boldsymbol{w^Tx}&gt;0 \\ 0,\qquad else\end{cases}$<br>Linear functions are limited: Linear models cannot fit in data from XOR function:<br><a id="more"></a></p>
<p><table>
        <tr>
            <th>$x_1$</th>
            <th>$x_2$</th>
            <th>$y$</th>
        </tr>
        <tr>
            <th>0</th>
            <th>0</th>
            <th>0</th>
        </tr>
        <tr>
            <th>0</th>
            <th>1</th>
            <th>1</th>
        </tr>
        <tr>
            <th>1</th>
            <th>0</th>
            <th>1</th>
        </tr>
        <tr>
            <th>1</th>
            <th>1</th>
            <th>0</th>
        </tr>
    </table></p>
<ul>
<li>sign function: $y={\mathcal g }(x)=\begin{cases} 1,\qquad if\quad x&gt;0 \\ 0,\qquad else\end{cases}$</li>
</ul>
<h2 id="Non-Linear-feature-transformations"><a href="#Non-Linear-feature-transformations" class="headerlink" title="Non-Linear feature transformations"></a>Non-Linear feature transformations</h2><p>$\boldsymbol{h}=\mathbf{W}\boldsymbol{x}+\boldsymbol{c}$, $\mathbf{W}\in R^{2\times 2}$, $\boldsymbol{c}\in R^2$<br>$\\\mathbf{W}=\begin{pmatrix}1\quad 1\\1\quad 1\end{pmatrix}\qquad \boldsymbol{c}=\begin{pmatrix}0\\ -1\end{pmatrix}$</p>
<p><table>
        <tr>
            <th>$x_1$</th>
            <th>$x_2$</th>
            <th>$\boldsymbol{x}$</th>
            <th>$\mathbf{W}\boldsymbol{x}+\boldsymbol{c}$</th>
            <th>$\boldsymbol{h}$</th>
            <th>$h_1$</th>
            <th>$h_2$</th>
            <th>$y$</th>
        </tr>
        <tr>
            <th>0</th>
            <th>0</th>
            <th>$\begin{pmatrix}0\\0\end{pmatrix}$</th>
            <th>$\begin{pmatrix}0\\ -1\end{pmatrix}$</th>
            <th>$\begin{pmatrix}0\\0\end{pmatrix}$</th>
            <th>0</th>
            <th>0</th>
            <th>0</th>
        </tr>
        <tr>
            <th>0</th>
            <th>1</th>
            <th>$\begin{pmatrix}0\\1\end{pmatrix}$</th>
            <th>$\begin{pmatrix}1\\0\end{pmatrix}$</th>
            <th>$\begin{pmatrix}1\\0\end{pmatrix}$</th>
            <th>1</th>
            <th>0</th>
            <th>1</th>
        </tr>
        <tr>
            <th>1</th>
            <th>0</th>
            <th>$\begin{pmatrix}1\\0\end{pmatrix}$</th>
            <th>$\begin{pmatrix}1\\0\end{pmatrix}$</th>
            <th>$\begin{pmatrix}1\\0\end{pmatrix}$</th>
            <th>1</th>
            <th>0</th>
            <th>1</th>
        </tr>
        <tr>
            <th>1</th>
            <th>1</th>
            <th>$\begin{pmatrix}1\\1\end{pmatrix}$</th>
            <th>$\begin{pmatrix}2\\1\end{pmatrix}$</th>
            <th>$\begin{pmatrix}2\\1\end{pmatrix}$</th>
            <th>2</th>
            <th>1</th>
            <th>0</th>
        </tr>
    </table><br><img src="/images/CS5242/3/non-linear.png" alt="non-linear"></p>
<p>In this case, there exist a linear function that can fit in $h_1,h_2,y$:<br>$\widetilde{y}=\boldsymbol{h^Tw}+b,\boldsymbol{w}\in R^2,b\in R\\\boldsymbol{w}=\begin{pmatrix}1\\ -2\end{pmatrix},b=0$</p>
<ul>
<li><p>Rectified Linear Unit, ReLU: ${\displaystyle f(x)=\max(0,x)}$</p>
</li>
<li><p>$max(\begin{pmatrix}0\\0\end{pmatrix},\begin{pmatrix}1\\ -1\end{pmatrix})=\begin{pmatrix}1\\0\end{pmatrix}$</p>
</li>
</ul>
<h2 id="Multilayer-Perceptron"><a href="#Multilayer-Perceptron" class="headerlink" title="Multilayer Perceptron"></a>Multilayer Perceptron</h2><p>In perceptron, there are <strong>at least one non-linear hidden layer</strong><br>$i^{th}$ layer consists of a <strong>linear/affine</strong> transformation function:</p>
<script type="math/tex; mode=display">\boldsymbol{z}^{[i]}=a^{[i]}(\boldsymbol{h}^{[i-1]})=W^{[i]}\boldsymbol{h}^{[i-1]}+\boldsymbol{b}^{[i]}</script><script type="math/tex; mode=display">W^{[i]}\in R^{n_i\times n_{i-1}}\quad \boldsymbol{b}^{[i]}\in R^{n_i}</script><p>A linear function is always <strong>followed by a non-linear function</strong> $g()$:</p>
<script type="math/tex; mode=display">\boldsymbol{h}^{[i]}=g^{[i]}(\boldsymbol{z}^{[i]})</script><p><img src="/images/CS5242/3/MLP.png" alt="MLP"><br>If one linear function is directly connected to another linear function, the two functions can be combined to one single linear function, i.e. <strong>succesive linear transformations together form another linear transformation</strong>.</p>
<p><img src="/images/CS5242/3/fc.png" alt="fc"><br>number of neurons(perceptrons): 4 + 2 = 6<br>number of weights(edges): (3 * 4) + (4 * 2) = 20<br>number of parameters total: 20 + (4 + 2) = 26 (weight_num + bias_num)</p>
<h2 id="Activate-Function-g"><a href="#Activate-Function-g" class="headerlink" title="Activate Function $g()$"></a>Activate Function $g()$</h2><p><img src="/images/CS5242/3/activate_function.png" alt="activate_function"></p>
<h2 id="Training-MLP"><a href="#Training-MLP" class="headerlink" title="Training MLP"></a>Training MLP</h2><p>for classification: Cross-entropy loss<br>for regression: L2(Squared Euclidean distancess)<br>GD algorithm:</p>
<ul>
<li>compute average loss $J$</li>
<li>computer gradient for each parameter</li>
<li>update every parameter according to their gradients</li>
</ul>
<p><img src="/images/CS5242/3/GD_algorithm.png" alt="GD_algorithm"></p>
<h1 id="Backpropagation"><a href="#Backpropagation" class="headerlink" title="Backpropagation"></a>Backpropagation</h1><p><img src="/images/CS5242/3/BP.png" alt="BP"></p>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>Convolution and Pooling</title>
    <url>/2020/09/08/ML_Convolution_and_Pooling/</url>
    <content><![CDATA[<h1 id="Convolution"><a href="#Convolution" class="headerlink" title="Convolution"></a>Convolution</h1><p>Convolution is a linear transformation and the output is the feature of the input.</p>
<ul>
<li>1D: text processing</li>
<li>2D: image processing</li>
<li>3D: 3D data, CT, microscopy, etc</li>
</ul>
<p>mD: m dimensions where the kernel is shifted<br><a id="more"></a></p>
<h1 id="1D-convulution"><a href="#1D-convulution" class="headerlink" title="1D convulution"></a>1D convulution</h1><script type="math/tex; mode=display">\boldsymbol{y}_t=\sum_{i=0}^{k-1}\boldsymbol{w}_i\times \boldsymbol{x}_{t+i}</script><p>This operation is actually cross-correlation, but we call it convolution.<br>$\boldsymbol{w}$: kernel/filter, length: k<br>$\boldsymbol{x}$: input, length: n<br>$\boldsymbol{y_t}$: the output feature, length: o<br>The area of input data where a kernel applied is called the <strong>receptive field</strong>, each receptive field is corresponding to a single output feature $\boldsymbol{y_t}$, which means, every time the kernel is shifted, thereâ€™s a new output $\boldsymbol{y_t}$.</p>
<p>Every cell of vector $\boldsymbol{w}$ is a parameter to be learned. In the 1D convolution below, Every output is generated from 3 input data x and these 3 cells is called a receptive field. We move the kernel along the input data until we cannot move further.<br><img src="/images/CS5242/5/1D.png" alt="1D"></p>
<h2 id="Benefits-of-Convolution"><a href="#Benefits-of-Convolution" class="headerlink" title="Benefits of Convolution"></a>Benefits of Convolution</h2><ul>
<li><p>Sparse connections<br>Each output is only connected to the receptive field instead of the whole input data(fully-connected) $\to$ fewer parameter and less overfitting</p>
</li>
<li><p>Weight sharing<br>Regularization<br>Less overfitting</p>
</li>
<li><p>Location invariant<br>Make the same prediction no matter where the object is in the image. (the same values of receptive field lead to the same output regradless of the place of the receptive field)</p>
</li>
</ul>
<h2 id="Perceptron-MLP-and-Convolution"><a href="#Perceptron-MLP-and-Convolution" class="headerlink" title="Perceptron, MLP and Convolution"></a>Perceptron, MLP and Convolution</h2><p><img src="/images/CS5242/5/MLP.png" alt="MLP"></p>
<h2 id="Padding"><a href="#Padding" class="headerlink" title="Padding"></a>Padding</h2><p>When stride = 1:</p>
<script type="math/tex; mode=display">o=(n+p)-k+1</script><p>$o$ : output length $\quad n$ : input length $\quad k$ : kernel length $\quad p$ : padding length<br>$p = 0\to$ <strong>valid padding</strong>  $\qquad p=k-1\to$ <strong>same padding</strong> ( left: $p/2$, right: $p/2$ ).<br>$p$ can be set manually or automatically.<br>Pad with 0 for convenience.</p>
<h2 id="Stride"><a href="#Stride" class="headerlink" title="Stride"></a>Stride</h2><p>Stride: how many steps to move towards the next receptive field.<br>Larger stride sizes skip more elements, effective receptive field size increases quickly, one output contains larger range of information of deeper lever.<br>Meanwhile increasing the stride is computationally faster, since we compute less convolution.<br><img src="/images/CS5242/5/stride.png" alt="stride"></p>
<script type="math/tex; mode=display">o=\lfloor\frac{n+p-k}{s}\rfloor+1</script><script type="math/tex; mode=display">\to \frac{n+p-k}{s}\geq o-1</script><script type="math/tex; mode=display">\to p\geq s(o-1)+k-n</script><script type="math/tex; mode=display">\to p = max(0, s(o-1)+k-n)</script><p>When stride &gt; 1, output length cannot be equal to the input length.<br>â€œsameâ€ is defined as:</p>
<script type="math/tex; mode=display">o=\lceil \frac{n}{s}\rceil</script><p><img src="/images/CS5242/5/stride1.png" alt="stride"></p>
<h2 id="Conv1D-forward-amp-backward"><a href="#Conv1D-forward-amp-backward" class="headerlink" title="Conv1D: forward &amp; backward"></a>Conv1D: forward &amp; backward</h2><p>Convert each receptive field to a column.<br><img src="/images/CS5242/5/conv1f.png" alt="forward"><br><img src="/images/CS5242/5/conv1b.png" alt="backward"></p>
<h1 id="2D-Convolution"><a href="#2D-Convolution" class="headerlink" title="2D Convolution"></a>2D Convolution</h1><p>Kernels move from left to right, from top to the bottom. (2 directions)<br><img src="/images/CS5242/5/2D.png" alt="2D"></p>
<h2 id="Single-channel-single-kernel"><a href="#Single-channel-single-kernel" class="headerlink" title="Single channel, single kernel"></a>Single channel, single kernel</h2><p>Convert each receptive field to a column.<br>Input $\mathbf{X}$ : $(n_h, n_w)$<br>Kernel $\mathbf{W}$ : $(k_h, k_w)$<br>Output $\mathbf{Y}$ : $(o_h, o_w)= (\lfloor\frac{n_h+p_h-k_h}{s_h}\rfloor+1,\lfloor\frac{n_w+p_w-k_w}{s_w}\rfloor+1)$<br>Computation cost: $O(k_h\times k_w\times o_h\times o_w)$<br><img src="/images/CS5242/5/2d_single_kernel.png" alt="2d_single_kernel"></p>
<h2 id="Single-channel-multiple-c-o-kernels"><a href="#Single-channel-multiple-c-o-kernels" class="headerlink" title="Single channel, multiple( $c_o$ ) kernels"></a>Single channel, multiple( $c_o$ ) kernels</h2><p>Applying multiple kernels (filters) $c_o$, all of the same stride and padding.<br>Convert each receptive field and each kernel to a column.<br>Parameter size: $c_o\times k_h\times k_w$<br>Output shape: $(c_0,o_h,o_w)=(c_o,\lfloor\frac{n_h+p_h-k_h}{s_h}\rfloor+1,\lfloor\frac{n_w+p_w-k_w}{s_w}\rfloor+1)$<br>Computation cost: $O((c_o\times k_h\times k_w)\times (o_h\times o_w))$<br><img src="/images/CS5242/5/2d_s_m.png" alt="2d_s_m"></p>
<h2 id="Multiple-c-i-channels-multiple-c-o-kernels"><a href="#Multiple-c-i-channels-multiple-c-o-kernels" class="headerlink" title="Multiple( $c_i$ ) channels, multiple( $c_o$ ) kernels"></a>Multiple( $c_i$ ) channels, multiple( $c_o$ ) kernels</h2><p>Slide the window from left to right, top to bottom.<br>Receptive fields across feature maps are concatenated into to one column.<br><img src="/images/CS5242/5/2d_m_m.png" alt="2d_m_m"></p>
<ul>
<li>Forward<br>Convert $\mathbf{X}$ into $\mathbf{\hat{X}}$ of size $(c_ik_hk_w\times o_ho_w)$<br>Reshape $\mathbf{W}$ into $(c_0\times c_ik_hk_w)$<br>$\mathbf{Y}=\mathbf{W\hat{X}}+\boldsymbol{b}$<br>Output shape: $(c_0,o_h,o_w)=(c_o,\lfloor\frac{n_h+p_h-k_h}{s_h}\rfloor+1,\lfloor\frac{n_w+p_w-k_w}{s_w}\rfloor+1)$<br>Computational cost: $O(c_o\times c_ik_hk_w\times o_h o_w)$<br><img src="/images/CS5242/5/2d_m_m1.png" alt="2d_m_m1"></li>
<li>Backward<br>Given $\frac{\partial L}{\partial \mathbf{Y}}$<br>Compute $\frac{\partial L}{\partial \mathbf{W}}=\frac{\partial L}{\partial \mathbf{Y}}\mathbf{\hat{X}}^T\quad \frac{\partial L}{\partial \mathbf{\hat{X}}}=\mathbf{W}^T\frac{\partial L}{\partial \mathbf{Y}}$<br>Column to receptive field transformation to get gradient w.r.t original $\mathbf{X}$</li>
</ul>
<h1 id="Pooling"><a href="#Pooling" class="headerlink" title="Pooling"></a>Pooling</h1><p>No parameter, applied to each channel respectively.<br>Padding and stride can be applied.<br># input channels = # output channels<br>i.e., $c_i=c_o=c$</p>
<h2 id="Max-pooling"><a href="#Max-pooling" class="headerlink" title="Max pooling"></a>Max pooling</h2><p><img src="/images/CS5242/5/max_p.png" alt="max_p"></p>
<h2 id="Average-pooling"><a href="#Average-pooling" class="headerlink" title="Average pooling"></a>Average pooling</h2><p><img src="/images/CS5242/5/avg_p.png" alt="avg_p"></p>
<h2 id="Effect-of-pooling"><a href="#Effect-of-pooling" class="headerlink" title="Effect of pooling"></a>Effect of pooling</h2><p>Reduce the feature size and model size<br>Max pooling: invariant to rotation of the input image<br>Average pooling: is usually skipped, can be replaced by convolution (sum of weighted input); much cheaper(no weights)</p>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>Linear Regression</title>
    <url>/2020/08/11/ML_LR/</url>
    <content><![CDATA[<h1 id="ç¥ç»ç½‘ç»œå‘å±•å†ç¨‹"><a href="#ç¥ç»ç½‘ç»œå‘å±•å†ç¨‹" class="headerlink" title="ç¥ç»ç½‘ç»œå‘å±•å†ç¨‹"></a>ç¥ç»ç½‘ç»œå‘å±•å†ç¨‹</h1><p>ç¥ç»ç½‘ç»œä¸»è¦ä¾èµ–äºç‰¹å¾è½¬æ¢(feature transformation)ï¼Œé€šè¿‡å‡†å¤‡æ•°æ®ã€æå–ç‰¹å¾æ¥æ„é€ æ¨¡å‹ã€‚</p>
<p><img src="/images/ML_history.png" alt="history"><a id="more"></a><br>ç¥ç»ç½‘ç»œä¸­éœ€è¦éçº¿æ€§å¤„ç†å•å…ƒ(nonlinear processing unit)ç”¨æ¥äº§ç”Ÿéçº¿æ€§è¾¹ç•Œ(boundary)ï¼Œä»¥å¤„ç†çº¿æ€§ä¸å¯åˆ†çš„æ•°æ®(dataset)ã€‚<br>CVçš„ä¸»è¦ä»»åŠ¡æœ‰ï¼šå›¾åƒåˆ†ç±»ï¼Œå®ä½“è¯†åˆ«ï¼Œåœºæ™¯è¯†åˆ«ï¼Œå›¾åƒç”Ÿæˆã€‚<br>NLPçš„ä¸»è¦ä»»åŠ¡æœ‰ï¼šé—®ç­”ç³»ç»Ÿï¼Œæœºå™¨ç¿»è¯‘<br>Speechï¼šå¯¹è¯è¯†åˆ«</p>
<h1 id="å•å˜é‡çº¿æ€§å›å½’"><a href="#å•å˜é‡çº¿æ€§å›å½’" class="headerlink" title="å•å˜é‡çº¿æ€§å›å½’"></a>å•å˜é‡çº¿æ€§å›å½’</h1><p>çº¿æ€§å›å½’(linear regression)è§£å†³çš„æ˜¯ä¸€ä¸ªå›å½’ä»»åŠ¡ï¼Œå³ï¼šç»™å®šè‹¥å¹²å®ä¾‹$(x,y)$ï¼Œéœ€è¦æ±‚å¾—ä¸€ä¸ªç³»ç»Ÿï¼Œä»¥$x_i$ä¸ºè¾“å…¥ï¼Œè¾“å‡ºå¯¹$y_i$çš„é¢„æµ‹å€¼$\widetilde{y_i}$ã€‚<br>åœ¨å•å˜é‡çº¿æ€§å›å½’ä¸­ï¼Œ$x_i$ã€$y_i$ã€$\widetilde{y_i}$éƒ½æ˜¯æ ‡é‡(<strong>scalar</strong>)ï¼Œè¯¥ç³»ç»Ÿè¾“å‡ºçš„$\widetilde{y_i}$æ˜¯$x_i$çš„çº¿æ€§å‡½æ•°ï¼š$\widetilde{y_i}=w*x_i+b$ã€‚<br>ä½¿ç”¨æŸå¤±å‡½æ•°(loss function)æ¥è¡¡é‡$w$ã€$b$å¯¹æ¨¡å‹çš„æ¨¡æ‹Ÿèƒ½åŠ›ã€‚æŸå¤±å‡½æ•°å€¼è¶Šå°ï¼Œæ‹Ÿåˆæ•ˆæœè¶Šå¥½ã€‚<br>æ•°æ®é›†$S_{train}=\{x^{(i)}ï¼Œy^{(i)}\}, i = 1â€¦m,|S_{train}|=m$<br>åœ¨å‚æ•° $w, b$ çš„æ¡ä»¶ä¸‹çš„å¸¸ç”¨æŸå¤±å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<ul>
<li>${\mathcal L}1ï¼šL(x,y|w,b)=|\widetilde{y} - y|$</li>
<li>${\mathcal L}2ï¼šL(x,y|w,b)=\frac{1}{2}||\widetilde{y} - y||^2=\frac{1}{2}(\widetilde{y} - y)^2$<br>é€‰æ‹© ${\mathcal L}2$ å› ä¸ºå®ƒå¯å¾®(differentiable)ï¼Œæ›´æ˜“è¿›è¡Œä¼˜åŒ–å’Œè®­ç»ƒï¼›ç³»æ•°$\frac{1}{2}$æ˜¯ä¸ºäº†è®©å¯¼æ•°å½¢å¼æ›´ç®€å•ã€‚</li>
</ul>
<p>å®šä¹‰training objectiveï¼ˆæ­¤å¤„ä½¿ç”¨å¹³å‡è¯¯å·®ï¼‰ï¼š$J(w,b)=\frac{1}{m}\sum_{i=1}^{m}{\mathcal L}(x_i,y_i|w,b)$<br>ç´¯åŠ ï¼šè·å¾—å…¨å±€(overall)ä¿¡æ¯ä»¥è¾¾åˆ°å…¨å±€ä¼˜åŒ–<br>å¹³å‡ï¼šæ¶ˆé™¤æ•°æ®é›†å¤§å°å¯¹losså€¼çš„å½±å“</p>
<p>ä¼˜åŒ–å’Œè®­ç»ƒè¿‡ç¨‹ï¼š</p>
<script type="math/tex; mode=display">\min_{w,b}J(w,b)</script><script type="math/tex; mode=display">\to\min_{w,b}\frac{1}{m}\sum_{i=1}^{m}{\mathcal L}(x_i,y_i|w,b)</script><script type="math/tex; mode=display">\to \min_{w,b}\frac{1}{2m}\sum_{i=1}^{m}(w*x_i+b - y_i)^2</script><p>å½“$w,b$ä¸æ”¶æ•›ï¼ˆå›ºå®šæ›´æ–°è½®æ•°orè®¾å®šé˜ˆå€¼åˆ¤æ–­æ”¶æ•›ï¼‰æ—¶ï¼Œé‡å¤ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>å›ºå®šbï¼Œå­¦ä¹ w<script type="math/tex; mode=display">\min_{w}\frac{1}{2m}\sum_{i=1}^{m}(w*x_i+b - y_i)^2</script><script type="math/tex; mode=display">\to \min_wC_1w^2+C_2w+C_3</script>ç”±äºbè¢«å›ºå®šäº†ï¼Œwå‰çš„ç³»æ•°$C_1,C_2$å’Œåé¢çš„åç½®$C_3$éƒ½æ˜¯å¸¸æ•°(constant)ã€‚æ­¤æ—¶ä¼˜åŒ–å‡½æ•°æ˜¯ä¸€ä¸ªå…³äºwçš„ä¸€å…ƒäºŒæ¬¡å‡½æ•°ï¼Œå¾ˆå®¹æ˜“æ±‚è§£å½“è¯¥å‡½æ•°Jå–å¾—æœ€å°å€¼æ—¶$w = -\frac{C_2}{2C_1}$ã€‚<br>å½“ä¼˜åŒ–å‡½æ•°å¤æ‚æ—¶å¯ä»¥é€šè¿‡æ¢¯åº¦ä¸‹é™ä½œä¸ºä¼˜åŒ–å‡½æ•°è¿›è¡Œæ±‚è§£ï¼š$w=w-\alpha\frac{\partial J}{\partial w}$</li>
<li>å›ºå®šwï¼Œå­¦ä¹ b<br>bçš„å­¦ä¹ è¿‡ç¨‹ä¸wç±»ä¼¼ï¼Œå°†wçœ‹ä½œå¸¸é‡ï¼Œä¼˜åŒ–å‡½æ•°è½¬æ¢ä¸ºå…³äºbçš„ä¸€å…ƒäºŒæ¬¡å‡½æ•°ï¼Œå°†è¿™ä¸ªå‡½æ•°é€šè¿‡ä¼˜åŒ–å‡½æ•°ï¼ˆå¦‚æ¢¯åº¦ä¸‹é™ç­‰ï¼‰æ±‚è§£æœ€ä¼˜å¤„çš„bå€¼ã€‚</li>
</ul>
<h1 id="å¤šå˜é‡çº¿æ€§å›å½’"><a href="#å¤šå˜é‡çº¿æ€§å›å½’" class="headerlink" title="å¤šå˜é‡çº¿æ€§å›å½’"></a>å¤šå˜é‡çº¿æ€§å›å½’</h1><p>å°†ä¸€ä¸ªå®ä¾‹$\boldsymbol{x}$çš„nä¸ªç‰¹å¾è¡¨ç¤ºä¸ºä¸€ä¸ª$n\times 1$å¤§å°çš„åˆ—å‘é‡ï¼Œå…¶ä¸­$x_i$ä»£è¡¨å®ä¾‹xçš„ç¬¬iä¸ªç‰¹å¾ï¼Œæ¯ä¸ªå®ä¾‹xå¯¹åº”ä¸€ä¸ªç›®æ ‡å€¼yã€‚å¾…å­¦ä¹ çš„æƒé‡wæ˜¯ä¸€ä¸ªå‘é‡ï¼Œ$w_i$ä»£è¡¨äº†ç‰¹å¾$x_i$çš„é‡è¦ç¨‹åº¦ã€‚<br>å³ï¼šå•ä¸€å®ä¾‹$\boldsymbol{x}=\begin{pmatrix} x_1 \\ x_2 \\ â€¦ \\ x_n\\\end{pmatrix}$<br>å»ºç«‹çº¿æ€§å›å½’æ¨¡å‹ï¼ˆå°†è¾“å…¥æ˜ å°„åˆ°è¾“å‡ºï¼‰ï¼š</p>
<script type="math/tex; mode=display">
\begin{aligned}
   \widetilde{y}=\boldsymbol{w^Tx}+b &=\sum_{i=1}^{n}w_ix_i+b\\  &=\begin{pmatrix} w_1,w_2...w_n\end{pmatrix} \begin{pmatrix} x_1 \\ x_2 \\ ... \\ x_n\\\end{pmatrix} + b\\\\
   &= \begin{pmatrix} w_1,w_2...w_n, b\end{pmatrix} \begin{pmatrix} x_1 \\ x_2 \\ ... \\ x_n\\1\end{pmatrix}\\
   \to \widetilde{y}=\bar w^T\bar x
\end{aligned}</script><p>å¯¹äºå•ä¸€å®ä¾‹æ±‚æ¢¯åº¦ï¼š</p>
<script type="math/tex; mode=display">J(w)=\frac{1}{2}||\widetilde{y} - y||^2=\frac{1}{2}( \boldsymbol{w^Tx}-y)^2</script><script type="math/tex; mode=display">\frac{\partial J(\boldsymbol{w})}{\partial \boldsymbol{w}}=(\boldsymbol{w^Tx}-y)\boldsymbol{x}</script><p>æˆ‘ä»¬å¯ä»¥é€‰æ‹©å¯¹æ¯ä¸ªå®ä¾‹$x^{(i)}$ï¼Œ$y^{(i)}$åˆ†åˆ«æ±‚losså€¼å¹¶ç´¯åŠ æ±‚å¹³å‡ï¼Œå†å¯¹æ¯ä¸ªå®ä¾‹çš„æ¢¯åº¦æ±‚ç´¯åŠ ï¼Œä½†è¿™æ ·å¯¹å®ä¾‹é€ä¸ªæ“ä½œçš„æ•ˆç‡ä¸å¦‚å°†æ‰€æœ‰å®ä¾‹åˆå¹¶è§†ä¸ºçŸ©é˜µå†è¿›è¡ŒçŸ©é˜µæ“ä½œä»£è¡¨æ•ˆç‡é«˜ã€‚<br>å°†æ¯ä¸ªç‰¹å¾å‘é‡å®ä¾‹(åˆ—å‘é‡)é€šè¿‡è½¬ç½®æ”¾åœ¨çŸ©é˜µçš„ä¸€è¡Œï¼š</p>
<script type="math/tex; mode=display">
\mathbf{X} = \begin{pmatrix} {\boldsymbol{x^{(1)}}}^T \\ {\boldsymbol{x^{(2)}}}^T \\ ... \\ {\boldsymbol{x^{(m)}}}^T\end{pmatrix} \qquad
\boldsymbol{y} = \begin{pmatrix} {y^{(1)}}^T \\ {y^{(2)}}^T \\ ... \\ {y^{(m)}}^T\end{pmatrix} 
\qquad \boldsymbol{\widetilde{y}}=\mathbf{X}\boldsymbol{w}</script><script type="math/tex; mode=display">J(\boldsymbol{w})=\frac{1}{2m}||\widetilde{\boldsymbol{y}} - \boldsymbol{y}||^2=\frac{1}{2m}(\widetilde{\boldsymbol{y}} - \boldsymbol{y})^T(\widetilde{\boldsymbol{y}} - \boldsymbol{y})\qquad \boldsymbol{u}=\widetilde{\boldsymbol{y}} - \boldsymbol{y}</script><p>ç”±äºï¼š</p>
<script type="math/tex; mode=display">\frac{\partial(u(x)\cdot v(x))}{\partial x} = \frac{\partial u^Tv}{\partial x} = \frac{\partial u}{\partial x}\cdot v+\frac{\partial v}{\partial x}\cdot u</script><script type="math/tex; mode=display">\frac{\partial {\boldsymbol{u}}}{\partial {\boldsymbol{w}}} = {\mathbf{X}}^T</script><p>å¯ä»¥å¾—åˆ°ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial J(\boldsymbol{w})}{\partial \boldsymbol{w}}=\frac{1}{2m}(\frac{\partial {\boldsymbol{u}}}{\partial {\boldsymbol{w}}}\cdot {\boldsymbol{u}} + \frac{\partial {\boldsymbol{u}}}{\partial {\boldsymbol{w}}}\cdot {\boldsymbol{u}})=\frac{1}{m}{\mathbf{X}}^T{\boldsymbol{u}}=\frac{1}{m}{\mathbf{X}}^T(\widetilde{\boldsymbol{y}} - \boldsymbol{y})</script><p>æ˜¾ç„¶åœ¨å½“å‰æ¡ä»¶ä¸‹å¯¼æ•°å–0æ—¶æŸå¤±å‡½æ•°$J(w)$å€¼æœ€å°ï¼Œæ­¤æ—¶ä»¤$\frac{\partial J(w)}{\partial w}=0$æœ‰ï¼š</p>
<script type="math/tex; mode=display">{\mathbf{X}}^T({\mathbf{X}}{\boldsymbol{w}}-{\boldsymbol{y}})=0</script><script type="math/tex; mode=display">\to {\mathbf{X}}^T{\mathbf{X}}{\boldsymbol{w}}={\mathbf{X}}^T{\boldsymbol{y}}</script><script type="math/tex; mode=display">\to {\boldsymbol{w}}=({\mathbf{X}}^T{\mathbf{X}})^{-1}{\mathbf{X}}^T{\boldsymbol{y}}</script><p>åŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨æ¢¯åº¦ä¸‹é™è¿›è¡Œè®­ç»ƒï¼š${\boldsymbol{w}}={\boldsymbol{w}}-\alpha\frac{\partial J({\boldsymbol{w}})}{\partial {\boldsymbol{w}}}$</p>
<ul>
<li><p>w.r.t.: with respect to</p>
</li>
<li><p>åˆ†æ¯å¸ƒå±€(denominator layout)ï¼šæ±‚å¯¼ç»“æœçš„ç»´åº¦ä»¥åˆ†æ¯ä¸ºä¸»ï¼Œå³ç»“æœçš„ç¬¬ä¸€ç»´åº¦ä¸åˆ†æ¯ç›¸åŒã€‚åˆ†å­å¸ƒå±€å’Œåˆ†æ¯å¸ƒå±€çš„ç»“æœæ˜¯äº’ä¸ºè½¬ç½®çš„å…³ç³»ã€‚</p>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Matrix_calculus#cite_note-2">https://en.wikipedia.org/wiki/Matrix_calculus#cite_note-2</a><br><img src="/images/denominator_layout.png" alt="denominator layout"></p>
</blockquote>
</li>
<li><p>Pipeline of ML: Dataset, modeling, optimization, validation and inference</p>
</li>
<li><p>ä½¿ç”¨ $L$ æ¥è¡¨ç¤ºå•ä¸€å®ä¾‹ä¸Šçš„æŸå¤±å€¼<br>ä½¿ç”¨ $J$ æ¥è¡¨ç¤ºå®ä¾‹é›†åˆä¸Šçš„å¹³å‡æŸå¤±å€¼</p>
</li>
<li><p>np.multiply()å‡½æ•° ç­‰ä»·äº æ˜Ÿå·ï¼ˆ*ï¼‰ï¼šæ¯ä¸ªå…ƒç´ å¯¹åº”ç›¸ä¹˜</p>
</li>
<li>åœ¨çŸ¢é‡ä¹˜çŸ¢é‡çš„å…§ç§¯è¿ç®—ä¸­ï¼Œnp.matmul ä¸np.dotæ²¡æœ‰åŒºåˆ«ï¼Œnp.matmulä¸­ç¦æ­¢çŸ©é˜µä¸æ ‡é‡çš„ä¹˜æ³•ã€‚<blockquote>
<p><a href="https://blog.csdn.net/guaidoukx/article/details/97659074?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param">https://blog.csdn.net/guaidoukx/article/details/97659074?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param</a></p>
</blockquote>
</li>
</ul>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>Training Deep Networks</title>
    <url>/2020/09/01/ML_Training_Deep_Networks/</url>
    <content><![CDATA[<h1 id="Stochastic-Gradient-Descent"><a href="#Stochastic-Gradient-Descent" class="headerlink" title="Stochastic Gradient Descent"></a>Stochastic Gradient Descent</h1><h2 id="Various-GDâ€™s-problems-and-advantages"><a href="#Various-GDâ€™s-problems-and-advantages" class="headerlink" title="Various GDâ€™s problems and advantages"></a>Various GDâ€™s problems and advantages</h2><ol>
<li>Forward computer the average loss among:<ul>
<li>all training samples (GD)</li>
<li>randomly pick a single training sample (SGD)</li>
<li>randomly pick b training samples (mini-batch SGD)</li>
</ul>
</li>
<li>Backword compute the gradient of each parameter</li>
<li>Update every parameter according to its gradient</li>
</ol>
<p>Problems of GD: </p>
<ul>
<li>local optimum: stop updating when every parameter is at its local optimum. (This is a rare case) </li>
<li>saddle point: we may not even arrive at a local optimum.</li>
<li>Efficiency: has to load all data to compute the update, with high memory cost and high computation cost per iteration.</li>
</ul>
<p>Advantage of SGD:</p>
<ul>
<li>more efficient in terms of memory cost and speed per iteration.</li>
<li>avoid local optimum efficiently: although $\frac{\partial J^{(k)}}{\partial w}=0$ , $\frac{\partial J^{(i)}}{\partial w}$ (i != k) may not be zero.</li>
</ul>
<p>Problems of SGD: </p>
<ul>
<li>not moving in the optimal direction for every step due to the stochastic process(minimizing loss for a single example but not for the whole training dataset and may not converge at all).</li>
</ul>
<p>Advantages of mini-batch SGD:</p>
<ul>
<li>the derivation direction is more stable than SGD.</li>
<li>Averaged on b samples, leading the faster convergence in terms of #iterations.</li>
</ul>
<p>Efficiency compare:</p>
<ul>
<li>R for convergence rate: $R_{GD}&gt;R_{mini-batch SGD}&gt;R_{SGD}$</li>
<li>T for time per iteration: $T_{GD}\leq T_{mini-batch SGD}\leq T_{SGD}$</li>
<li>Tc for time to converage: $Tc=$#$\times T$ (number of iterations $\times$ time per iteration), it depends case by case. By experience, mini-batch SGD is the fastest to converge.</li>
</ul>
<h2 id="Batch-Size"><a href="#Batch-Size" class="headerlink" title="Batch Size"></a>Batch Size</h2><ul>
<li>larger batches are more accurate at estimating the gradient, better gradient does not equal to better performance due to the possibility of overfitting.</li>
<li>GPU has limited memory, if all batch samples are processed in parallel, we should reduce batch size or use more GPU.</li>
<li>Some hardware have better runtime with specific array sizes, e.g., for GPUs, powers of 2 are usually optimal.</li>
<li>Training with small batch need small learning rate to reduce the noise and maintain stability due to the high variance in the estimated gradient, this trade-off may slow down the overall learning speed.</li>
<li>Small batches act as regularizers with noisy approximated gradients.</li>
<li>Using extreme small batches may cause the underutilization of multicore architectures and there is a fixed time cost below a certain batch size.</li>
</ul>
<h2 id="Loss-Contour"><a href="#Loss-Contour" class="headerlink" title="Loss Contour"></a>Loss Contour</h2><p>Every point in the contour is a specific assignment of parameters, points on the same circle have the same loss value, points on the innermost circle have the minimum loss.<br><img src="/images/CS5242/4/loss-contour.png" alt="loss-contour"></p>
<h2 id="Evolution-of-mini-batch-SGD"><a href="#Evolution-of-mini-batch-SGD" class="headerlink" title="Evolution of mini-batch SGD"></a>Evolution of mini-batch SGD</h2><h3 id="mini-batch-SGD-with-momentum"><a href="#mini-batch-SGD-with-momentum" class="headerlink" title="mini-batch SGD with momentum"></a>mini-batch SGD with momentum</h3><p>Motivationï¼š</p>
<ul>
<li>Gradients may dramatically change on a complex loss function.</li>
<li>Hard to make progress on flat regions.</li>
<li>Momentum smooths the gradients over past time, i.e., balance thes history and new gradient.</li>
</ul>
<p>Algorithm:</p>
<script type="math/tex; mode=display">v=\beta v+\alpha g</script><script type="math/tex; mode=display">w=w-v</script><h3 id="Adagrad"><a href="#Adagrad" class="headerlink" title="Adagrad"></a>Adagrad</h3><p>Motivationï¼š</p>
<ul>
<li>Different dimensions have different gradients.</li>
<li>We want a larger lr for small gradients and small lr for large gradients.</li>
<li>Adagrad makes learning rates adapt to each dimension.</li>
</ul>
<p>Algorithm:</p>
<script type="math/tex; mode=display">s=s+g^2</script><script type="math/tex; mode=display">w=w-\frac{\alpha}{\sqrt{s+\epsilon}}g</script><h3 id="RMSprop"><a href="#RMSprop" class="headerlink" title="RMSprop"></a>RMSprop</h3><p>Motivationï¼š</p>
<ul>
<li>Adagrad decays the learning rate that may lead slow progress at end.</li>
<li>RMSprop guarantees that learning rate will not end up to 0 as time goes by.</li>
</ul>
<p>Algorithm:</p>
<script type="math/tex; mode=display">s=\beta s+(1-\beta)g^2\qquad moving\quad average</script><script type="math/tex; mode=display">w=w-\frac{\alpha}{\sqrt{s+\epsilon}}g\qquad nomalize\quad the\quad gradient</script><h3 id="Adam"><a href="#Adam" class="headerlink" title="Adam"></a>Adam</h3><p>Motivationï¼š</p>
<ul>
<li>Conbine the momentum and adapted learning rate to smooth the gradients and adapt to various dimensions.</li>
</ul>
<p>Algorithm:</p>
<script type="math/tex; mode=display">v=\beta_1 v+(1-\beta_1)g\quad \hat v = \frac{v}{1-\beta_1^t}</script><script type="math/tex; mode=display">s=\beta_2 s+(1-\beta_2)g^2\quad \hat s = \frac{s}{1-\beta_2^t}</script><script type="math/tex; mode=display">w=w-\frac{\alpha}{\sqrt{s+\epsilon}} v=w-\frac{\alpha}{\sqrt{\hat s+\epsilon}}\hat v</script><p>Adam offers fast convergence.<br>Mainly for the first few iterations, when t gets large, the denominator goes to 1.</p>
<h2 id="Convergence"><a href="#Convergence" class="headerlink" title="Convergence"></a>Convergence</h2><p>Usually, convergence is considered w.r.t the optimized variable, i.e. weights of the network.</p>
<ul>
<li>For learning, however, because weâ€™re not really interested in finding the optimum but having a good model that will generalize, we are interested in convergence of the loss.</li>
<li>Convergence then refers to the loss plateauing.</li>
</ul>
<h1 id="Training-tricks"><a href="#Training-tricks" class="headerlink" title="Training tricks"></a>Training tricks</h1><h2 id="Learning-Rate"><a href="#Learning-Rate" class="headerlink" title="Learning Rate"></a>Learning Rate</h2><p>Initialize lr with a large value and then decrease it gradually.<br>decay learning rate:</p>
<ul>
<li>step</li>
<li>1/t</li>
<li>exponential $\alpha e^{-kt}$</li>
</ul>
<p><img src="/images/CS5242/4/lr-2.png" alt="lr-2"></p>
<h2 id="Random-parameter-initialization"><a href="#Random-parameter-initialization" class="headerlink" title="Random parameter initialization"></a>Random parameter initialization</h2><p>We want each unit to compute a different function and we do not want redundant parameters.<br><strong>Random initializations can break symmetry.</strong></p>
<ul>
<li>Gaussian, N(0, 0.01) </li>
<li>Uniform, U(-0.05, 0.05) </li>
<li>Glorot/Xavier : Gaussian  N(0, sqrt(2/(fan_in+ fan_out)) </li>
<li>He/MSRA : Gaussian  N(0, sqrt(2/fan_in)) </li>
</ul>
<p>General idea: keep variance of random values within some reasonable range. We want various parameters have the same scale/range.</p>
<ul>
<li>Too small variance: Z vanishing  (Z = X W + b,)</li>
<li>Too large variance: Z exploding</li>
</ul>
<p>For bias vector:<br><img src="/images/CS5242/4/bias.png" alt="bias"></p>
<h2 id="Data-normalization"><a href="#Data-normalization" class="headerlink" title="Data normalization"></a>Data normalization</h2><p><img src="/images/CS5242/4/normalization.png" alt="normalization"></p>
<h1 id="Overfitting-and-Underfitting"><a href="#Overfitting-and-Underfitting" class="headerlink" title="Overfitting and Underfitting"></a>Overfitting and Underfitting</h1><h2 id="Underfitting"><a href="#Underfitting" class="headerlink" title="Underfitting"></a>Underfitting</h2><p>Low model capacity / complexity $\to$ model too simple to fit training data<br><strong>High bias</strong></p>
<ul>
<li>definition of bias (error): An algorithmâ€™s tendency to consistently learn wrong things by not taking into account sufficient information found in the data</li>
</ul>
<h2 id="Overfitting"><a href="#Overfitting" class="headerlink" title="Overfitting"></a>Overfitting</h2><p>High capacity/complexity $\to$ fits well to seen data, i.e. training data<br><strong>High variance</strong><br>Cannot generalize well onto new data, so performs poorly on unseen data, i.e. test</p>
<ul>
<li>definition of Variance (errors): Amount that the estimates (in our case the parameters w) will change if we had different of training data (but still drawn from the same source).</li>
</ul>
<h2 id="A-good-model"><a href="#A-good-model" class="headerlink" title="A good model"></a>A good model</h2><p>Uses the â€œrightâ€ capacity / complexity to model the data and can <strong>generalize to unseen data</strong>.<br>Strikes a balance between under-and over-fitting, as well as bias and variance.<br>Because bias and variance derived from the same factor(model capacity), we cannot have both low bias AND low variance.<br><img src="/images/CS5242/4/model.png" alt="model"></p>
<h2 id="Regularization"><a href="#Regularization" class="headerlink" title="Regularization"></a>Regularization</h2><h3 id="Add-L2-Norm"><a href="#Add-L2-Norm" class="headerlink" title="Add L2 Norm"></a>Add L2 Norm</h3><p>$\Phi$ is the flatten vector of all parameters:</p>
<script type="math/tex; mode=display">J_{reg}=J+\frac{\lambda}{2}||\Phi||^2</script><script type="math/tex; mode=display">\frac{\partial J_{reg}}{\partial w}=\frac{\partial J}{\partial w} + \lambda w</script><h3 id="Stop-early"><a href="#Stop-early" class="headerlink" title="Stop early"></a>Stop early</h3><p><img src="/images/CS5242/4/stop.png" alt="stop"></p>
<h2 id="Model-tuning-and-data-splitting"><a href="#Model-tuning-and-data-splitting" class="headerlink" title="Model tuning and data splitting"></a>Model tuning and data splitting</h2><p>Degree is a hyper-parameter or configuration knob.<br>Tuning the degree is called <strong>hyper-parameter tuning or model selection</strong>.<br>For complex models, there could be many such hyper-parameters, e.g. Learning rate of the gradient descent algorithm $\alpha$, Number of layers for a neural network, etc.<br><img src="/images/CS5242/4/Hyper-parameter.png" alt="Hyper-parameter"> </p>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£åˆ™åŒ–æ–¹æ³•</title>
    <url>/2020/07/13/Normalization%20Methods/</url>
    <content><![CDATA[<h2 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h2><p>ç‚¹ä¼°è®¡point estimatorï¼š<br>åå·®biasï¼šé¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„å·®å¼‚<br>æ–¹å·®varianceï¼šæè¿°é¢„æµ‹å€¼ä½œä¸ºéšæœºå˜é‡çš„ç¦»æ•£ç¨‹åº¦<br>æ³›åŒ–generalizationï¼šåœ¨å…ˆå‰æœªè§‚å¯Ÿçš„è¾“å…¥ä¸Šè¡¨ç°è‰¯å¥½çš„èƒ½åŠ›<a id="more"></a><br>å‡†ç¡®ç‡accuracyï¼š<br>é”™è¯¯ç‡errorrateï¼šè¯¥æ¨¡å‹è¾“å‡ºé”™è¯¯ç»“æœçš„æ ·æœ¬æ¯”ç‡ï¼Œæ˜¯0-1æŸå¤±çš„æœŸæœ›<br>æ³›åŒ–è¯¯å·®ï¼šå³æµ‹è¯•è¯¯å·®<br>æ¨¡å‹çš„å®¹é‡capacityï¼šæ‹Ÿåˆå„ç§å‡½æ•°çš„èƒ½åŠ›<br>å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™Occamâ€˜s razorï¼šåœ¨åŒæ ·èƒ½å¤Ÿè§£é‡Šå·²æœ‰è§‚æµ‹ç°è±¡çš„å‡è®¾ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥é€‰æ‹©æœ€â€œç®€å•â€çš„é‚£ä¸ªã€‚<br>è¿‡æ‹Ÿåˆoverfittingï¼šè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®ä¹‹é—´å·®è·è¾ƒå¤§<br>æ¬ æ‹Ÿåˆunderfittingï¼šæ¨¡å‹ä¸èƒ½å†è®­ç»ƒé›†ä¸Šè·å¾—è¶³å¤Ÿä½çš„è¯¯å·®<br>éªŒè¯é›†ï¼šç”¨æ¥è®­ç»ƒè¶…å‚æ•°<br>k-fold validationï¼š<br>é²æ£’æ€§Robustï¼šç®—æ³•å¯¹æ•°æ®å˜åŒ–çš„å®¹å¿åº¦<br>æ­£åˆ™åŒ–ï¼šå¯¹å­¦ä¹ ç®—æ³•çš„ä¿®æ”¹ï¼Œæ—¨åœ¨å‡å°‘æ³›åŒ–è¯¯å·®è€Œä¸æ˜¯è®­ç»ƒè¯¯å·®ã€‚</p>
<h2 id="å‚æ•°èŒƒæ•°æƒ©ç½šï¼ˆæƒé‡è¡°å‡weight-decayï¼‰"><a href="#å‚æ•°èŒƒæ•°æƒ©ç½šï¼ˆæƒé‡è¡°å‡weight-decayï¼‰" class="headerlink" title="å‚æ•°èŒƒæ•°æƒ©ç½šï¼ˆæƒé‡è¡°å‡weight decayï¼‰"></a>å‚æ•°èŒƒæ•°æƒ©ç½šï¼ˆæƒé‡è¡°å‡weight decayï¼‰</h2><p>æ­£åˆ™åŒ–æ–¹æ³•å¯¹ç›®æ ‡å‡½æ•°æ·»åŠ ä¸€ä¸ªå‚æ•°æƒ©ç½šé¡¹å¾—åˆ°æ­£åˆ™åŒ–åçš„ç›®æ ‡å‡½æ•°ï¼š<br>$J (\theta ;x,y)=J(\theta ;x,y)+\alpha \Omega(\theta)$<br>å…¶ä¸­Î±æ˜¯æƒè¡¡èŒƒæ•°æƒ©ç½šé¡¹å’Œæ ‡å‡†ç›®æ ‡å‡½æ•°ç›¸å¯¹è´¡çŒ®çš„è¶…å‚æ•°ã€‚<br>ç¥ç»ç½‘ç»œä¸­å‚æ•°åŒ…æ‹¬æƒé‡å’Œåç½®ï¼Œé€šå¸¸åªå¯¹æƒé‡è¿›è¡Œæƒ©ç½šè€Œä¸å¯¹åç½®åšæƒ©ç½šã€‚æ¯ä¸ªæƒé‡ä¼šæŒ‡å®šä¸¤ä¸ªå˜é‡å¦‚ä½•ç›¸äº’ä½œç”¨ï¼Œè€Œæ¯ä¸ªåç½®ä»…æ§åˆ¶ä¸€ä¸ªå˜é‡ï¼Œå¯¹åç½®ä¸è¿›è¡Œæ­£åˆ™åŒ–ä¹Ÿä¸ä¼šå¯¼è‡´è¾ƒå¤§æ–¹å·®ï¼Œå¯¹å…¶æ­£åˆ™åŒ–åè€Œä¼šå¯¼è‡´æ¬ æ‹Ÿåˆã€‚<br>$w$ï¼šåº”å—èŒƒæ•°æƒ©ç½šå½±å“çš„æƒé‡å‚æ•°<br>$\theta$ï¼šæ‰€æœ‰å‚æ•°</p>
<h3 id="L1æ­£åˆ™åŒ–"><a href="#L1æ­£åˆ™åŒ–" class="headerlink" title="L1æ­£åˆ™åŒ–"></a>L1æ­£åˆ™åŒ–</h3><p>å„ä¸ªå‚æ•°ç»å¯¹å€¼ä¹‹å’Œï¼š<br>$\Omega (\theta) = ||w||_1=\sum_i|w_i|$<br>L1èŒƒæ•°æŸå¤±å‡½æ•°<br>$L=\sum_{i=1}^n|y_i-f(x_i)|$<br>é²æ£’æ€§æ›´å¥½ï¼Œå› ä¸ºL2å°†è¯¯å·®å¹³æ–¹åŒ–ï¼Œè¯¯å·®ä¼šæ”¾å¤§å¾ˆå¤šã€‚<br>L1æ­£åˆ™é€šå¸¸è¢«ç”¨æ¥è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼ŒL1èŒƒæ•°ä¼šä½¿å¾—å¾ˆå¤šå‚æ•°çš„æœ€ä¼˜è§£å˜æˆ0ï¼Œäº§ç”Ÿç¨€ç–è§£ã€‚</p>
<h3 id="L2æ­£åˆ™åŒ–"><a href="#L2æ­£åˆ™åŒ–" class="headerlink" title="L2æ­£åˆ™åŒ–"></a>L2æ­£åˆ™åŒ–</h3><p>å²­å›å½’ã€Tikhonovæ­£åˆ™<br>$\Omega (\theta)=\frac{1}{2} ||w||_2^2=\sum_{i=1}^nw_i^2$<br>L2èŒƒæ•°æŸå¤±å‡½æ•°<br>$L=\sum_{i=1}^n(y_i-f(x_i))^2$<br>ä½¿ç”¨åœ¨LRä»»åŠ¡ä¸­ï¼šæœ€å°äºŒä¹˜æ³•ã€‚<br>è®¸å¤šçº¿æ€§æ¨¡å‹ï¼ŒåŒ…æ‹¬çº¿æ€§å›å½’å’ŒPCAï¼Œéƒ½ä¾èµ–äºå¯¹çŸ©é˜µ$x^T x$æ±‚é€†ã€‚ä¸€æ—¦è¯¥çŸ©é˜µå¥‡å¼‚ï¼Œè¿™ä¸ªæ–¹æ³•å°±å¤±æ•ˆäº†ã€‚è€ŒåŠ å…¥æ­£åˆ™åŒ–åå¯¹åº”æ±‚é€†$x^T x+\alpha I$ï¼Œè¿™ä¸ªæ­£åˆ™åŒ–çŸ©é˜µæ˜¯å¯ä»¥ä¿è¯å¯é€†çš„ã€‚</p>
<h2 id="æ•°æ®é›†å¢å¼º"><a href="#æ•°æ®é›†å¢å¼º" class="headerlink" title="æ•°æ®é›†å¢å¼º"></a>æ•°æ®é›†å¢å¼º</h2><p>åˆ›é€ å‡æ•°æ®ï¼Œæ³¨å…¥å™ªå£°ç­‰ã€‚å¯¹äºå¯¹è±¡è¯†åˆ«ä»»åŠ¡ä½¿ç”¨æ•°æ®é›†å¢å¼ºæ ¼å¤–æœ‰æ•ˆ</p>
<h2 id="å™ªå£°é²æ£’æ€§"><a href="#å™ªå£°é²æ£’æ€§" class="headerlink" title="å™ªå£°é²æ£’æ€§"></a>å™ªå£°é²æ£’æ€§</h2><p>å‘è¾“å…¥æ·»åŠ æ–¹å·®æå°çš„å™ªå£°ç­‰ä»·äºå¯¹æƒé‡æ–½åŠ èŒƒæ•°æƒ©ç½š<br>å°†å™ªå£°æ·»åŠ åˆ°éšè—å•å…ƒçš„æ•ˆæœæ¯”ç®€å•çš„æ”¶ç¼©å‚æ•°æ›´å¤§<br>æ–½åŠ äºæƒé‡çš„å™ªå£°å¯ä»¥è¢«è§£é‡Šä¸ºä¸ä¼ ç»Ÿæ­£åˆ™å½¢å¼ç›¸åŒ<br>æ˜¾å¼åœ°å¯¹æ ‡ç­¾ä¸Šçš„å™ªå£°è¿›è¡Œå»ºæ¨¡å¯ä»¥è·å¾—æ›´å¥½çš„æ¨¡å‹æ•ˆæœ</p>
<h2 id="å¤šä»»åŠ¡å­¦ä¹ "><a href="#å¤šä»»åŠ¡å­¦ä¹ " class="headerlink" title="å¤šä»»åŠ¡å­¦ä¹ "></a>å¤šä»»åŠ¡å­¦ä¹ </h2><p>é€šè¿‡åˆå¹¶ä¸åŒä»»åŠ¡çš„æ ·ä¾‹æ¥æé«˜æ³›åŒ–èƒ½åŠ›ã€‚è¿™äº›ä¸åŒä»»åŠ¡ä¸­åŒ…å«å…±äº«çš„å› ç´ ã€‚</p>
<h2 id="æå‰ç»ˆæ­¢"><a href="#æå‰ç»ˆæ­¢" class="headerlink" title="æå‰ç»ˆæ­¢"></a>æå‰ç»ˆæ­¢</h2><p>ä½¿ç”¨ç®—æ³•ç¡®å®šæœ€ä½³è®­ç»ƒæ—¶é—´orä½¿ç”¨æå‰ç»ˆæ­¢ç¡®å®šè®­ç»ƒæ­¥æ•°orä½¿ç”¨æå‰ç»ˆæ­¢ç¡®å®šå°†ä¼šè¿‡æ‹Ÿåˆçš„ç›®æ ‡å€¼ã€‚</p>
<h2 id="å‚æ•°å…±äº«ä¸å‚æ•°ç»‘å®š"><a href="#å‚æ•°å…±äº«ä¸å‚æ•°ç»‘å®š" class="headerlink" title="å‚æ•°å…±äº«ä¸å‚æ•°ç»‘å®š"></a>å‚æ•°å…±äº«ä¸å‚æ•°ç»‘å®š</h2><p>å¼ºè¿«æŸäº›å‚æ•°ç›¸ç­‰ã€‚<br>ä¸èŒƒæ•°æƒ©ç½šç›¸æ¯”æ˜æ˜¾ä¼˜ç‚¹åœ¨äºæ˜¾è‘—å‡å°‘æ¨¡å‹æ‰€å å†…å­˜ã€‚</p>
<h2 id="ç¨€ç–è¡¨ç¤º"><a href="#ç¨€ç–è¡¨ç¤º" class="headerlink" title="ç¨€ç–è¡¨ç¤º"></a>ç¨€ç–è¡¨ç¤º</h2><p>æƒ©ç½šç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å•å…ƒã€‚<br>ç¨€ç–æ€§ï¼Œå³å¾ˆå¤šå‚æ•°æ˜¯0ï¼Œç›¸å½“äºå¯¹æ¨¡å‹åšäº†ä¸€æ¬¡ç‰¹å¾é€‰æ‹©ï¼Œåªç•™ä¸‹äº†æ¯”è¾ƒé‡è¦çš„ç‰¹å¾ï¼Œæé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›ã€‚</p>
<h2 id="é›†æˆå­¦ä¹ Ensemble-learning"><a href="#é›†æˆå­¦ä¹ Ensemble-learning" class="headerlink" title="é›†æˆå­¦ä¹ Ensemble learning"></a>é›†æˆå­¦ä¹ Ensemble learning</h2><p>ç”¨å¤šä¸ªå¼±åˆ†ç±»å™¨ç»„åˆæˆä¸€ä¸ªå¼ºåˆ†ç±»å™¨</p>
<h3 id="bagging"><a href="#bagging" class="headerlink" title="bagging"></a>bagging</h3><p>ä»è®­ç»ƒé›†è¿›è¡Œå­æŠ½æ ·å¾—åˆ°æ¯ä¸ªåŸºæ¨¡å‹éœ€è¦çš„å­è®­ç»ƒé›†ï¼Œå¯¹æ‰€æœ‰åŸºæ¨¡å‹çš„é¢„æµ‹ç»“æœè¿›è¡Œç»¼åˆäº§ç”Ÿçš„æœ€ç»ˆçš„é¢„æµ‹ç»“æœã€‚ç»“åˆå‡ ä¸ªæ¨¡å‹é™ä½æ³›åŒ–è¯¯å·®ï¼Œè¢«ç§°ä¸ºæ¨¡å‹å¹³å‡(model averaging)ã€‚Baggingå…è®¸é‡å¤ä½¿ç”¨åŒä¸€ä¸ªæ¨¡å‹ã€è®­ç»ƒç®—æ³•å’Œç›®æ ‡å‡½æ•°ã€‚éšæœºæ£®æ—random forestæ˜¯å…¸å‹çš„åŸºäºbaggingæ¡†æ¶çš„æ¨¡å‹ã€‚Baggingå‡åŒ€éšæœºé‡é‡‡æ ·ï¼Œå„åˆ†ç±»å™¨æ˜¯ä¸ç›¸å…³çš„ï¼Œå¯ä»¥å¹¶è¡Œã€‚<strong>å‡å°‘æ–¹å·®</strong>ï¼šå„å­æ¨¡å‹ä¹‹é—´æœ‰ä¸€å®šç›¸å…³æ€§ï¼Œå¯ä»¥å‡å°‘æ–¹å·®ã€‚</p>
<h3 id="boosting"><a href="#boosting" class="headerlink" title="boosting"></a>boosting</h3><p>è®­ç»ƒè¿‡ç¨‹ä¸ºé˜¶æ¢¯çŠ¶ï¼ŒåŸºæ¨¡å‹æŒ‰æ¬¡åºä¸€ä¸€è®­ç»ƒï¼Œä¸‹ä¸€ä¸ªåˆ†ç±»å™¨ä¾èµ–äºä¸Šä¸€ä¸ªåˆ†ç±»å™¨ï¼Œåªèƒ½ä¸²è¡Œã€‚ï¼ˆå®ç°ä¸Šå¯ä»¥åšåˆ°å¹¶è¡Œï¼‰ï¼ŒåŸºæ¨¡å‹çš„è®­ç»ƒé›†æŒ‰ç…§æŸç§ç­–ç•¥æ¯æ¬¡éƒ½è¿›è¡Œä¸€å®šçš„è½¬åŒ–ï¼Œå¯¹æ‰€æœ‰åŸºæ¨¡å‹çš„é¢„æµ‹ç»“æœè¿›è¡Œç»¼åˆäº§ç”Ÿçš„æœ€ç»ˆçš„é¢„æµ‹ç»“æœã€‚Boostingæ ¹æ®é”™è¯¯ç‡é‡‡æ ·ï¼Œå› æ­¤Boostingåˆ†ç±»ç²¾åº¦ä¼˜äºBaggingã€‚<strong>å‡å°‘åå·®</strong>ï¼šåºåˆ—åŒ–æœ€å°åŒ–æŸå¤±å‡½æ•°ï¼Œç”±äºå„å­æ¨¡å‹å¼ºç›¸å…³ï¼Œä¸èƒ½æ˜¾è‘—å‡å°‘æ–¹å·®ã€‚</p>
<h3 id="stacking"><a href="#stacking" class="headerlink" title="stacking"></a>stacking</h3><p>å°†è®­ç»ƒå¥½çš„æ‰€æœ‰åŸºæ¨¡å‹å¯¹è®­ç»ƒé›†è¿›è¡Œé¢„æµ‹ï¼Œç¬¬jä¸ªåŸºæ¨¡å‹å¯¹ç¬¬iä¸ªè®­ç»ƒæ ·æœ¬çš„é¢„æµ‹å€¼å°†ä½œä¸ºæ–°çš„è®­ç»ƒé›†ä¸­ç¬¬iä¸ªæ ·æœ¬çš„ç¬¬jä¸ªè®­ç»ƒå€¼ï¼Œæœ€ååŸºäºæ–°çš„è®­ç»ƒé›†æœºå‹è®­ç»ƒã€‚åŒç†ï¼Œé¢„æµ‹çš„è¿‡ç¨‹ä¹Ÿè¦å…ˆç»è¿‡æ‰€æœ‰çš„åŸºæ¨¡å‹çš„é¢„æµ‹å½¢æˆæ–°çš„æµ‹è¯•é›†ï¼Œæœ€åå†å¯¹æµ‹è¯•é›†è¿›è¡Œé¢„æµ‹ã€‚</p>
<h2 id="Dropout"><a href="#Dropout" class="headerlink" title="Dropout"></a>Dropout</h2><p>Dropoutè¢«è®¤ä¸ºæ˜¯é›†æˆå¤§é‡æ·±åº¦ç¥ç»ç½‘ç»œçš„ä½¿ç”¨Baggingæ–¹æ³•ã€‚Dropoutè®­ç»ƒçš„é›†æˆåŒ…æ‹¬æ‰€æœ‰ä»åŸºç¡€ç½‘ç»œé™¤å»éè¾“å‡ºå•å…ƒåå½¢æˆçš„å­ç½‘ç»œã€‚<br>åœ¨baggingä¸­æ‰€æœ‰æ¨¡å‹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œåœ¨dropoutä¸­æ‰€æœ‰æ¨¡å‹å…±äº«å‚æ•°ã€‚</p>
<h2 id="æ‰¹æ ‡å‡†åŒ–"><a href="#æ‰¹æ ‡å‡†åŒ–" class="headerlink" title="æ‰¹æ ‡å‡†åŒ–"></a>æ‰¹æ ‡å‡†åŒ–</h2><h2 id="å¯¹æŠ—è®­ç»ƒ"><a href="#å¯¹æŠ—è®­ç»ƒ" class="headerlink" title="å¯¹æŠ—è®­ç»ƒ"></a>å¯¹æŠ—è®­ç»ƒ</h2>]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šæ·±åº¦å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>Optimization</tag>
      </tags>
  </entry>
  <entry>
    <title>Note for &quot;Federated Machine Learning -- Concept and Applications&quot;</title>
    <url>/2020/10/30/Reading_Note_FL/</url>
    <content><![CDATA[<p>Paper: <a href="https://arxiv.org/abs/1902.04885">https://arxiv.org/abs/1902.04885</a></p>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>As the technology grows rapidly, more and more attentions are paid to Artificial Intelligence, one of the most famous examples is Alpha Go. It used 30000 games to train the model and finally defeated the top human Go players. The current rapid development of AI largely depends on the <em>availability of Big Data</em>.<br><a id="more"></a></p>
<p>The real-world situations, however are less encouraging. We have the following troubles such as limited amount of data, data without high quality, and it may cost a lot to exchange data, we should meet the requirements of laws and go through administrative procedures. Sometimes, considering the industry competition and privacy security, it is impossible to get more data at all. In this case, most of time we are confronted with a big issue: how can we fuse enough high-quality data for training a machine learning model legally with a low cost.</p>
<p>In general, all the problems above can be concluded as two parts: <strong>data island</strong> and <strong>data security</strong>, which lead to federated learning framework to achieve model training regardless of these troubles.</p>
<h1 id="Federated-Learning"><a href="#Federated-Learning" class="headerlink" title="Federated Learning"></a>Federated Learning</h1><p>Federated Learning is a machine learning setting where the goal is to train a high-quality centralized model while training data remains distributed over a large number of clients each with unreliable and relatively slow network connections.</p>
<p>Here are some privacy protect methods for FL:</p>
<ul>
<li><p>The First is <strong>Secure Multi-party Computation</strong>. SMC models naturally involve multiple parties, each party knows nothing except its input and output. But this setting requires complex computation protocols and be may hard to achieve effectively.</p>
</li>
<li><p>As for <strong>Differential privacy</strong>, The basic idea is to add noise to the data, or use other methods to obscure certain sensitive information until the individual cannot be distinguished. We can see this method leads to a trade-off between accuracy and privacy.</p>
</li>
<li><p>Also, we can use <strong>Homomorphic Encryption</strong> to guarantee privacy through parameter exchange under the encryption mechanism, while the data and the model itself are not transmitted, so thereâ€™s risks in raw data leakage.</p>
</li>
</ul>
<p>Federated Learning can be divided to three categories:</p>
<ol>
<li><p><strong>Horizontal federated learning</strong><br>The first kind of FL is Horizontal federated learning.<br><img src="/images/CS6203/FL-1.png" alt="HFL"><br>Each row of the matrix represents a sample, and each column represents a feature. In HFL, datasets share the same feature space but different in samples. For example, people in different cities leads to different samples, while the banks in different cities have similar functions, i.e., similar features. Therefore, we can train a ML model using decentralized data.<br><img src="/images/CS6203/FL-2.png" alt="HFL"><br>This figure shows a typical architecture of server/client horizontal federated learning system. In the first step, the clients locally train the model, mask the gradients using differential privacy or other encryption techniques and send their encrypted gradients to the server. Then the server aggregates the gradients and updates the model. Next, the server sends the model parameters back to clients and clients update their local model. This process will loop until every party gets a satisfying model.<br>In the whole process, thereâ€™re are no information leakage between any parties.<br>And this architecture is independent from specific ML algorithms that the clients choose to train and all participants will share the final model parameters.</p>
</li>
<li><p><strong>Vertical Federated Learning</strong><br><img src="/images/CS6203/FL-3.png" alt="VFL"><br>We can see from the figure that in this framework, datasets have different features but similar samples. For example, the bank and shopping mall in the same city, they have the same target clients while their services are quite different. In this case we can jointly train a model for product purchase based on user and product information.<br><img src="/images/CS6203/FL-4.png" alt="VFL"><br>As for the architecture of vertical federated learning, suppose A has training data while B has training data and labels. We want to model how the data in A and data in B jointly influence the value of label. Since A and B cannot exchange data directly, we need a third party, C to help with the model training.<br>To start with, we need to confirm the common users between A and B without exposing users that do not overlap. This process is called entity alignment.<br>Then weâ€™ll begin model training. Firstly, the collaborator C send public key to A and B. Then A and B exchange encrypted intermediate result. After exchanging, A and B compute encrypted gradient and loss and send to C. C decrypts and send gradient and loss back to A and B, the clients updates their model locally.</p>
</li>
<li><p><strong>Federated Transfer Learning</strong><br>Federated Transfer Learning applies to datasets differ in both sample space and feature space. For instance, the datasets from bank in China and hospital in Singapore. Finding similarities (invariants) is the core of transfer learning. So we learn a representation between the two feature space using the overlapped sample sets and apply this model to obtain predictions for samples.<br><img src="/images/CS6203/FL-5.png" alt="FTL"><br>In the scenario of TFL, datasets have only a little set of overlapping samples. It does not change the architecture of vertical federated learning, but different in detail which tries to find the common representation among the parties.<br>Incentive mechanism means after the model is built, the local modelâ€™s performance depends on how much this party contribute to the whole federated system. Combining the incentive mechanism may improve the entire architecture, encouraging more organizations to participant and provide more data.</p>
</li>
</ol>
<h1 id="Related-work"><a href="#Related-work" class="headerlink" title="Related work"></a>Related work</h1><p>Federated learning can be considered as <strong>privacy-preserving decentralized collaborative machine learning</strong> and most of the privacy protection techniques using in privacy-preserving machine learning can be applied in Federated learning</p>
<p>Horizontal federated learning is similar to <strong>Distributed Machine Learning</strong> to some extent. This figure shows an example of distributed machine learning using distributed storage of training data. In distributed machine learning, the parameter server allocates data on distributed working nodes and compute model parameters in a scheduled way. However in Federated learning, each working node which is the data holder, can independently decide when and how to join federated learning. Whatâ€™s more, federated learning focus on the privacy protection during parameter transferring while distributed machine learning makes no achievements in this security issue.</p>
<p><strong>Edge computing</strong> is also closely connected to federated learning. Federated learning can provide protocols of implementation details that helps to guarantee data security as well as the improvement in accuracy of global model. In this case federated learning can work as an operation system for edge computing.</p>
<p><strong>Federated Database Systems</strong> are systems that integrate multiple database units and manage the integrated system as a whole. Compare to distributed data system, working nodes in federated database system store heterogenous data. So federated database has similar type and storage of data compared to federated learning. But as a database system, federated database system mainly focuses on the basic operations of data such as inserting, deleting and searching while the goal of federated learning is to jointly train a model that works well in each independent unit. Meanwhile federated database system does not have a privacy protection mechanism.</p>
<h1 id="Applications"><a href="#Applications" class="headerlink" title="Applications"></a>Applications</h1><p>The first common application of federated learning is <strong>smart retail</strong>. Smart retail aims at providing personal recommendation and services based on userâ€™s preference and purchasing power. However, these features may be stored in different places: purchasing power can be analyzed from bank saving, userâ€™s preference can be indicated from social media and information of product is recorded in the e-shops. </p>
<p>In this case we are facing the problem that <em>these three kinds of organizations cannot exchange data directly so the data are scattered and cannot be aggregated</em>.</p>
<p>The other problem is <em>data Heterogeneity</em>.<br>Heterogeneous data are any data with high variability of data types and formats. They are possibly ambiguous and low quality due to missing values, high data redundancy, and untruthfulness. It is difficult to integrate heterogeneous data to meet the business information demands.</p>
<p>The solution is Federated learning and Transfer learning. We can use federated learning to break the data island and use transfer learning to handle the Heterogeneous data, in this way we can train a model using data in various parties to achieve personal recommendation and break through the limitations of traditional artificial intelligence techniques Therefore, federated learning provides a cross-enterprise, cross-data, and cross-domain ecosphere of big data and artificial intelligence. </p>
<p><img src="/images/CS6203/FL-6.png" alt="Smart Healthcare"><br><strong>Smart Healthcare</strong> is obviously a direct application of horizontal federated learning. Different hospitals treat different patients, but are doing research for the treating of the same diseases. Due to the limitation of people treated in one single hospital, each hospital may not get enough data for a certain disease. Medical information is definitely sensitive information that involves patient privacy. Therefore, hospitals cannot exchange data directly. In this case we can use federated learning to jointly make use of data in different hospitals to train a global model that works well in each single hospital and protect patientsâ€™ privacy at the same time.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>It is expected that in the near future, federated learning would break the barriers between industries and establish a community where data and knowledge could be shared together with safety, and the benefits would be fairly distributed according to the contribution of each participant.</p>
<p>Here are some of my insights.</p>
<p>One of the challenges for federated learning is the Non-IID data as introduced in the section of distributed machine learning. So the main problem is that when we are using SGD in local models, weâ€™ll face the problem of weight divergence, as we can see in the figure, the global model does not work well on each local datasets. So <strong>I think we can use adaptive optimizer as it can learn from the history gradient, which means it can make use of local data distribution when computing local gradients and can solve the problem of weight divergence to some extent</strong>.<br><img src="/images/CS6203/FL-7.png" alt="Non-i.i.d"></p>
<blockquote>
<p>Yue Zhao,Meng Li,Liang zhen Lai,Naveen Suda,Damon Civin,and Vikas Chandra.2018. Federated Learning with Non-IID Data</p>
</blockquote>
<p>And the other thing I notice is that all the framework above assume no delay for each nodesâ€™ model transferring to the server, i.e, the server has to collect all gradients before updating global model. This lead to the fact that server may wait for too much time for collecting all gradients in one single round. So, <strong>I think the federated model can work asynchronously</strong>. Every time the server receives a model from A, the server updates the global model and immediately sends the new model back to A. Therefore, thereâ€™re less time waste in one round and more efficiency. </p>
]]></content>
      <categories>
        <category>Readings</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>DB</tag>
      </tags>
  </entry>
  <entry>
    <title>NNDL Summary</title>
    <url>/2020/10/05/ML_Summary/</url>
    <content><![CDATA[<h1 id="Linear-Regression"><a href="#Linear-Regression" class="headerlink" title="Linear Regression"></a>Linear Regression</h1><h2 id="Linear-regression"><a href="#Linear-regression" class="headerlink" title="Linear regression"></a>Linear regression</h2><p>Univariate: single feature $x\in R$<br>Multivariate: multiple features $\boldsymbol{x}\in R^m$<br>Linear Transformation: $\widetilde{y}=\boldsymbol{w^Tx}$<br>Loss: measures the difference between the prediction and the ground truth<br>Training: to optimize(i.e. minimize) the loss w.r.t parameters($\boldsymbol{w}$)<br><a id="more"></a></p>
<h2 id="Gradient-descent-algorithm"><a href="#Gradient-descent-algorithm" class="headerlink" title="Gradient descent algorithm"></a>Gradient descent algorithm</h2><p>minimize the target loss iterately, for each iteration:<br>conpute the gradient of average loss</p>
<ul>
<li>for single feature multiple examples: <script type="math/tex; mode=display">J(w)=\frac{1}{2m}\sum_{i=1}^m(wx^{(i)}-y^{(i)})^2</script></li>
<li>for multiple features one single instance: <script type="math/tex; mode=display">J(\boldsymbol{w})=\frac{1}{2}(\boldsymbol{w^Tx}-y)^2</script></li>
<li>for multiple features multiple examples: <script type="math/tex; mode=display">J(\boldsymbol{w})=\frac{1}{2m}(\mathbf{X}\boldsymbol{w}-\boldsymbol{y})^T(\mathbf{X}\boldsymbol{w}-\boldsymbol{y})</script></li>
</ul>
<p>update parameter in the opposite of the gradient direction: $\boldsymbol{w}=\boldsymbol{w}-\alpha\frac{\partial J}{\partial \boldsymbol{w}}$</p>
<ul>
<li>for single feature multiple examples: <script type="math/tex; mode=display">\frac{\partial J}{\partial w}=\sum_{i=1}^m(wx^{(i)}-y^{(i)})</script></li>
<li>for multiple features one single instance: <script type="math/tex; mode=display">\frac{\partial J}{\partial \boldsymbol{w}}=(\boldsymbol{w^Tx}-y)\boldsymbol{x}</script></li>
<li>for multiple features multiple examples: <script type="math/tex; mode=display">\frac{\partial J}{\partial \boldsymbol{w}}=\frac{1}{m}\mathbf{X}^T(\mathbf{X}\boldsymbol{w}-\boldsymbol{y})</script></li>
</ul>
<p>stop until paremeters converge or reach a certain number of iterations.</p>
<ul>
<li>$f(x)=g(x)+h(x)\quad\to\quad fâ€™(x)=gâ€™(x)+hâ€™(x)$</li>
<li>$f(x)=g(x)h(x)\quad\to\quad fâ€™(x)=gâ€™(x)h(x)+g(x)hâ€™(x)$</li>
<li>$f(x)=\frac{g(x)}{h(x)}\quad\to\quad fâ€™(x)=\frac{gâ€™(x)h(x)-g(x)hâ€™(x)}{h(x)^2}$</li>
<li>$f(x)=g(u),g(u)=h(x)\quad\to\quad fâ€™(x)=gâ€™(u)hâ€™(x)$</li>
</ul>
<p><img src="/images/CS5242/Summary/vecBYvec0.png" alt="vecBYvec0"><br><img src="/images/CS5242/Summary/vecBYvec.png" alt="vecBYvec"><br><img src="/images/CS5242/Summary/scalBYvec.png" alt="scalBYvec"></p>
<p><strong>Example:</strong><br>$y=(\mathbf{A}\boldsymbol{x})^T(2\boldsymbol{x+z})$ , $\mathbf{A}$ is a square matrix, $\boldsymbol{x}$ and $\boldsymbol{z}$ are vectors, y is a scalar, what is $\frac{\partial y}{\partial \boldsymbol{x}}$ ?</p>
<script type="math/tex; mode=display">\boldsymbol{u}=\mathbf{A}\boldsymbol{x}\quad \boldsymbol{v}=2\boldsymbol{x+z}</script><script type="math/tex; mode=display">\begin{aligned}\frac{\partial y}{\partial \boldsymbol{x}}&=\frac{\partial \boldsymbol{u^Tv}}{\partial \boldsymbol{x}}=\frac{\partial \boldsymbol{u}}{\partial \boldsymbol{x}}\cdot\boldsymbol{v}+\frac{\partial \boldsymbol{v}}{\partial \boldsymbol{x}}\cdot\boldsymbol{u}\\&=\mathbf{A}^T(2\boldsymbol{x+z})+(2\boldsymbol{I})\cdot(\mathbf{A}\boldsymbol{x})\\&=2\mathbf{A}^T\boldsymbol{x}+\mathbf{A}^T\boldsymbol{z}+2\mathbf{A}\boldsymbol{x}\end{aligned}</script><p>$L=\frac{1}{2}(\boldsymbol{w^Tx}-y)^2$, $\boldsymbol{x}=(1,2)^T$, $\boldsymbol{w}=(2,1)^T$, $y=0$, compute the gradient of $\frac{\partial L}{\partial \boldsymbol{w}}$</p>
<script type="math/tex; mode=display">\begin{aligned}\frac{\partial L}{\partial \boldsymbol{w}}&=(\boldsymbol{w^Tx}-y)\boldsymbol{x}\\&=(\begin{pmatrix}2,1\end{pmatrix}\cdot\begin{pmatrix}1\\2\end{pmatrix}-0)\cdot\begin{pmatrix}1\\2\end{pmatrix}\\&=(4-0)\cdot\begin{pmatrix}1\\2\end{pmatrix}\\&=\begin{pmatrix}4\\8\end{pmatrix}\end{aligned}</script><h1 id="Classification"><a href="#Classification" class="headerlink" title="Classification"></a>Classification</h1><h2 id="Logistic-regression"><a href="#Logistic-regression" class="headerlink" title="Logistic regression"></a>Logistic regression</h2><p>From Linear regression to Logistic regression:<br>The function <script type="math/tex">\widetilde{y}=\begin{cases} 1,\qquad\qquad if\boldsymbol{w^Tx}>0 \\ 0,\qquad\qquad else\end{cases}</script> is not differentiable, therefore we use Logistic function as the probability: <script type="math/tex">p=\sigma (z) = \sigma(\boldsymbol{w^Tx})=\frac{1}{1+e^{-\boldsymbol{w^Tx}}}</script><br>$L2$ loss function: <script type="math/tex">L=\frac{1}{2}||p-y||^2=\frac{1}{2}||\sigma(z)-y||^2</script><br>thus the gradient is: <script type="math/tex">\frac{\partial L}{\partial \boldsymbol{w}}=(\sigma(z)-y)\sigma(z)(1-\sigma(z))\boldsymbol{x}</script><br>There exists gradient vanishing. In order to solve this problem, we use the <strong>binary cross entropy</strong> to compute the loss: <script type="math/tex">L=-ylogp-(1-y)log(1-p)</script><br>The gradient now is : <script type="math/tex">\frac{\partial L}{\partial \boldsymbol{w}}=(p-y)\boldsymbol{x}</script></p>
<script type="math/tex; mode=display">z=\boldsymbol{w^Tx},\boldsymbol{x}\in R^{n\times 1}, \boldsymbol{w}\in R^{n\times 1}</script><script type="math/tex; mode=display">p=\sigma (z)=\frac{1}{1+e^{-z}}</script><script type="math/tex; mode=display">L(p, y)=-ylogp-(1-y)log(1-p)</script><script type="math/tex; mode=display">\frac{\partial L}{\partial \boldsymbol{w}}=(p-y)\boldsymbol{x}</script><h2 id="Multi-label-classification"><a href="#Multi-label-classification" class="headerlink" title="Multi-label classification"></a>Multi-label classification</h2><p>å¯¹ç¬¬ $i$ ä¸ªç±»åˆ«æœ‰ï¼š<br>$z_i=\boldsymbol{W}_i\boldsymbol{x}+b_i\quad p_i=\sigma(z_i)\quad L_{ce}=-y_ilogp_i-(1-y_i)log(1-p_i)$<br>å¯¹äºæ‰€æœ‰ç±»åˆ«å‘é‡åŒ–è¡¨ç¤ºä¸º:<br>$\boldsymbol{z}=\boldsymbol{W}\boldsymbol{x}+\boldsymbol{b}\quad \boldsymbol{p}=\sigma(\boldsymbol{z})\quad L_{ce}=-\boldsymbol{y}^Tlog\boldsymbol{p}-(1-\boldsymbol{y})^Tlog(1-\boldsymbol{p})$</p>
<h2 id="Softmax-multinomial-classification"><a href="#Softmax-multinomial-classification" class="headerlink" title="Softmax/multinomial classification"></a>Softmax/multinomial classification</h2><p>Multi-class single-label: classes are not independent, they are exclusive. </p>
<ul>
<li><strong>Softmax function</strong> <script type="math/tex; mode=display">p_i=\frac{e^{z_i}}{\sum_j e^{z_j}}=softmax(z_i)</script></li>
<li><strong>Cross-entropy loss</strong><script type="math/tex; mode=display">L_{ce}(\boldsymbol{x},\boldsymbol{y})=\sum_i-y_ilogp_i=-\boldsymbol{y}^Tlog\boldsymbol{p}</script><script type="math/tex; mode=display">\frac{\partial J}{\partial \mathbf{W}}=\frac{1}{m}(\mathbf{P}-\mathbf{Y})\mathbf{X}^T\in R^{k\times n}, \mathbf{X}\in R^{(m\times n)} ,\mathbf{Y}\in R^{(m\times k)}</script></li>
</ul>
<p><strong>Detail:</strong><br>$L=\frac{1}{2}(\sigma(\boldsymbol{w^Tx})-y)^2$</p>
<script type="math/tex; mode=display">z=\boldsymbol{w^Tx}</script><script type="math/tex; mode=display">\begin{aligned}\frac{\partial L}{\partial \boldsymbol{w}}&=(\sigma(z)-y)\frac{\partial \sigma(z)}{\partial z}\frac{\partial z}{\boldsymbol{w}}\\&=(\sigma(z)-y)\frac{\partial (1-e^{-z})^{-1}}{\partial z}\boldsymbol{x}\\&=(\sigma(z)-y)(-1(1-e^{-z})^{-2})\frac{\partial (1-e^{-z})}{\partial z}\boldsymbol{x}\\&=(\sigma(z)-y)(-\sigma(z)^2)\frac{\partial (1-e^{-z})}{\partial z}\boldsymbol{x}\\&=(\sigma(z)-y)(-\sigma(z)^2)e^{-z}\boldsymbol{x}\\&=(\sigma(z)-y)(-\sigma(z)^2)(1-\frac{1}{\sigma(z)})\boldsymbol{x}\\&=(\sigma(z)-y)(-\sigma(z))(\sigma(z)-1)\boldsymbol{x}\\&=(\sigma(z)-y)\sigma(z)(1-\sigma(z))\boldsymbol{x}\end{aligned}</script><p>$L_{ce}=-ylogp-(1-y)log(1-p)\quad p=\sigma(z)$</p>
<script type="math/tex; mode=display">\begin{aligned}\frac{\partial L}{\partial \boldsymbol{w}}&=\frac{\partial L}{\partial p}\frac{\partial p}{\partial z}\frac{\partial z}{\partial \boldsymbol{w}}\\&=(-\frac{y}{p}+\frac{1-y}{1-p})p(1-p)\boldsymbol{x}\\&=(-y+py+p-py)\boldsymbol{x}\\&=(p-y)\boldsymbol{x}\end{aligned}</script><p>$L_{ce}(\boldsymbol{x},\boldsymbol{y})=\sum_i-y_ilogp_i=-\boldsymbol{y^T}log\boldsymbol{p}$</p>
<script type="math/tex; mode=display">\frac{\partial J}{\partial \mathbf{W}}=\frac{1}{m}(\mathbf{P}-\mathbf{Y})\mathbf{X}^T\in R^{k\times n}</script><script type="math/tex; mode=display">\mathbf{X}\in R^{(m\times n)} ,\mathbf{Y}\in R^{(m\times k)}</script><h1 id="From-Shallow-to-Deep-Neural-Network"><a href="#From-Shallow-to-Deep-Neural-Network" class="headerlink" title="From Shallow to Deep Neural Network"></a>From Shallow to Deep Neural Network</h1><h2 id="MLP"><a href="#MLP" class="headerlink" title="MLP"></a>MLP</h2><p>A net with multiple layers that transform input features into hidden features and then make predictions .</p>
<ul>
<li>At least one non-linear hidden layer</li>
<li>A linear function is always followed by a non-linear function</li>
</ul>
<script type="math/tex; mode=display">\boldsymbol{z}^{[i]}=a^{[i]}(\boldsymbol{h}^{[i-1]})=W^{[i]}\boldsymbol{h}^{[i-1]}+\boldsymbol{b}^{[i]}</script><script type="math/tex; mode=display">W^{[i]}\in R^{n_i\times n_{i-1}}\quad \boldsymbol{b}^{[i]}\in R^{n_i}</script><p><img src="/images/CS5242/3/MLP.png" alt="MLP"></p>
<h2 id="Chain-Rule"><a href="#Chain-Rule" class="headerlink" title="Chain Rule"></a>Chain Rule</h2><p><img src="/images/CS5242/Summary/chain-rule.png" alt="chain-rule"></p>
<h2 id="Backpropagation"><a href="#Backpropagation" class="headerlink" title="Backpropagation"></a>Backpropagation</h2><p><img src="/images/CS5242/Summary/Backpropagation.png" alt="Backpropagation"></p>
<ul>
<li><p>Add bias<br>$\boldsymbol{A}\in R^{m\times n}\quad b\in R^{1\times n}$<br>Forward($\boldsymbol{A},b$): $\boldsymbol{C}=\boldsymbol{A}+b$<br>Backward($d\boldsymbol{C},\boldsymbol{A},b$): $d\boldsymbol{A}=d\boldsymbol{C}\quad db=1^Td\boldsymbol{C}$</p>
</li>
<li><p>Array and scalar multiplication<br>$\boldsymbol{v}$ is an array, $k$ is a scalar(usually hyperparameter)<br>Forward($\boldsymbol{v},k$): $\boldsymbol{c}=k\boldsymbol{v}$<br>Backward($d\boldsymbol{c},\boldsymbol{v},k$): $d\boldsymbol{v}=kd\boldsymbol{c}$</p>
</li>
<li><p>Matmul matrix multiplication operation<br>$\boldsymbol{A}\in R^{m\times k}\quad \boldsymbol{B}\in R^{k\times n}$ (including matrix with a single column or row)<br>Forward($\boldsymbol{A},\boldsymbol{B}$):$\boldsymbol{C=A\cdot B^T}\in R^{m\times n}$<br>Backward($d\boldsymbol{C},\boldsymbol{A},\boldsymbol{B}$): $d\boldsymbol{A}=d\boldsymbol{C}\cdot \boldsymbol{B^T}\quad d\boldsymbol{B}=\boldsymbol{A^T}\cdot d\boldsymbol{C}$</p>
</li>
<li><p>Logistic operation<br>$a$ is an array of any shape<br>Forward($a$): $b=\sigma(a)$<br>Backward($db,a$): $da=db\times b\times (1-b)$</p>
</li>
<li><p>Softmax-Cross-entropy operation<br>Forward($\boldsymbol{Z},\boldsymbol{P}$): $\boldsymbol{P}=softmax(\boldsymbol{Z})\quad L=\frac{1}{m}sum(-YlogP) $<br>Backward($\boldsymbol{Z},\boldsymbol{P}$): $d\boldsymbol{Z}=\frac{1}{m}(\boldsymbol{P}-\boldsymbol{Y})$</p>
</li>
</ul>
<h1 id="Training-Deep-Networks"><a href="#Training-Deep-Networks" class="headerlink" title="Training Deep Networks"></a>Training Deep Networks</h1><h2 id="Mini-batch-stochastic-gradient-descent-SGD"><a href="#Mini-batch-stochastic-gradient-descent-SGD" class="headerlink" title="Mini-batch stochastic gradient descent (SGD)"></a>Mini-batch stochastic gradient descent (SGD)</h2><p>â€¢ Reduces the chance of local optimal points and saddle points from GD<br>â€¢ More stable and smooth than standard SGD<br>â€¢ Extensions: Momentum, RMSProp, Adam</p>
<ul>
<li>Smooth the gradients by preserving historical gradients</li>
<li>Adaptive learning rate per parameter</li>
</ul>
<p>Momentum:</p>
<script type="math/tex; mode=display">v=\beta v+\alpha g</script><script type="math/tex; mode=display">w=w-v</script><p>RMSprop:</p>
<script type="math/tex; mode=display">s=\beta s+(1-\beta)g^2\qquad moving\quad average</script><script type="math/tex; mode=display">w=w-\frac{\alpha}{\sqrt{s+\epsilon}}g\qquad nomalize\quad the\quad gradient</script><p>Adam:</p>
<script type="math/tex; mode=display">v=\beta_1 v+(1-\beta_1)g\quad \hat v = \frac{v}{1-\beta_1^t}</script><script type="math/tex; mode=display">s=\beta_2 s+(1-\beta_2)g^2\quad \hat s = \frac{s}{1-\beta_2^t}</script><script type="math/tex; mode=display">w=w-\frac{\alpha}{\sqrt{s+\epsilon}} v=w-\frac{\alpha}{\sqrt{\hat s+\epsilon}}\hat v</script><h2 id="Tricks"><a href="#Tricks" class="headerlink" title="Tricks"></a>Tricks</h2><ul>
<li>Learning rate decay: start large and decrease gradually</li>
<li>Randomly initialize parameters: break symmetry<br>and avoid gradient vanishing / exploding</li>
<li>Data normalization</li>
</ul>
<h2 id="Overfitting-and-underfitting"><a href="#Overfitting-and-underfitting" class="headerlink" title="Overfitting and underfitting"></a>Overfitting and underfitting</h2><ul>
<li>Underfitting means high bias, Overfitting means high variance.</li>
<li>Regularization: Early stop and L2 Norm.</li>
<li>Model capacity: the ability for the model to fit different functions or datasets; with more unconstrained parameters, the model can fit more functions and datasets.</li>
<li>Hyper-parameter tuning:<ul>
<li>Tune parameters using training data.</li>
<li>Tune hyper-parameters using validation data.</li>
<li>Report model performance using test data.</li>
</ul>
</li>
</ul>
<h1 id="Convolution-and-Pooling"><a href="#Convolution-and-Pooling" class="headerlink" title="Convolution and Pooling"></a>Convolution and Pooling</h1><h2 id="2D-Convolution"><a href="#2D-Convolution" class="headerlink" title="2D Convolution"></a>2D Convolution</h2><p>Convolution is an affine transformation.<br>Each receptive field generates aone output value: sparse connection<br># kernels = # output feature maps<br>Output size: $(c_0,o_h,o_w)=(c_o,\lfloor\frac{n_h+p_h-k_h}{s_h}\rfloor+1,\lfloor\frac{n_w+p_w-k_w}{s_w}\rfloor+1)$</p>
<p>Share the same parameters across different locations: reduce parameter, location invariant, </p>
<p>Implementation: Receptive fields across feature maps are concatenated into to one column.<br><img src="/images/CS5242/Summary/conv2D.png" alt="conv2D"></p>
<h2 id="3D-Convolution"><a href="#3D-Convolution" class="headerlink" title="3D Convolution"></a>3D Convolution</h2><p><img src="/images/CS5242/Summary/conv3D.png" alt="conv3D"></p>
<h2 id="Average-amp-max-pooling"><a href="#Average-amp-max-pooling" class="headerlink" title="Average &amp; max pooling"></a>Average &amp; max pooling</h2><ul>
<li>Aggregate the information from each receptive field.</li>
<li>The output is invariant to some variations of the input. eg. rotation.</li>
<li>Stride is usually &gt; 1 to reduce dimensionality </li>
<li>Pooling is applied to each channel / feature map separately</li>
</ul>
<p><img src="/images/CS5242/Summary/pooling.png" alt="pooling"></p>
<ul>
<li>Information will be lost from pooling but local â€œusefulâ€ information remains.</li>
<li>We donâ€™t need to keep as many features as possible because we want to derive higher levels of abstraction. e.g. from simple edges to parts of objects</li>
</ul>
<h1 id="ConvNet-Architecture"><a href="#ConvNet-Architecture" class="headerlink" title="ConvNet Architecture"></a>ConvNet Architecture</h1><h2 id="Neocognitron"><a href="#Neocognitron" class="headerlink" title="Neocognitron"></a>Neocognitron</h2><ul>
<li><strong>Hierarchical Feature Extraction + Multi-Layer + Hand-crafted weights.</strong></li>
</ul>
<h2 id="LeNet-1-5"><a href="#LeNet-1-5" class="headerlink" title="LeNet 1-5"></a>LeNet 1-5</h2><ul>
<li><strong>Small CNN with convolution + pooling (subsampling)</strong></li>
</ul>
<h2 id="AlexNet"><a href="#AlexNet" class="headerlink" title="AlexNet"></a>AlexNet</h2><ul>
<li><strong>GPUs</strong> (instead of CPUS): Fast training </li>
<li><strong>Ensemble modelling</strong></li>
<li><strong>ReLU</strong>: Reduce the chance of gradient vanishing</li>
<li><strong>Dropout</strong>: Multiple the outputs (h) with scale 1/(1-p); Regularization (Similar to L2 norm) </li>
<li><strong>Image augmentation</strong>: Done on-the-fly during training, so no need to store entire (augmented) dataset and occupy memory. Random operation for training; No random operations during test,  Make predictions by aggregating the results from all augmented images.(Voting)</li>
</ul>
<h2 id="VGG"><a href="#VGG" class="headerlink" title="VGG"></a>VGG</h2><ul>
<li><strong>Uniform kernel size</strong></li>
<li><strong>Consecutive convolution layers</strong></li>
</ul>
<h2 id="InceptionNetV1"><a href="#InceptionNetV1" class="headerlink" title="InceptionNetV1"></a>InceptionNetV1</h2><ul>
<li><strong>Parallel paths</strong>: inception block (1x1 convolution),  insert the 1x1 convolution layer with a small number of kernels to <em>fuse the channels</em> from the input tensor and <em>reduce the computational cost</em> for the next convolution</li>
<li><strong>Complexity optimization</strong></li>
<li><strong>Average pooling</strong>: Reduce model size (less overfitting); Reduce time complexity </li>
<li><strong>New image augmentation methods</strong></li>
</ul>
<h2 id="InceptionNetV2"><a href="#InceptionNetV2" class="headerlink" title="InceptionNetV2"></a>InceptionNetV2</h2><ul>
<li><strong>Batch Normalization</strong><br>Computes the mean and variance over <em>mini-batch samplesâ€™s features</em>.<br>Normalize every neuron of each sample.<br>Applied after linear transformations and before activation.<br>(z = relu(BN(conv/ fc(x))) or z = BN(relu(conv/ fc)))<br>Accumulates the mean and variance from every batch during training, and then apply them during test</li>
</ul>
<h2 id="InceptionNetV3"><a href="#InceptionNetV3" class="headerlink" title="InceptionNetV3"></a>InceptionNetV3</h2><ul>
<li><strong>Spatially separable convolutions</strong>(Factorization of the kernel): Reduce computation cost $\to$ train faster ( 7x7 == 1x7 and 7x1 (receptive field))</li>
<li><strong>Label smoothing</strong>: prevents network from becoming over-confident and optimizing towards values that cannot be achieved</li>
</ul>
<h2 id="ResNet"><a href="#ResNet" class="headerlink" title="ResNet"></a>ResNet</h2><ul>
<li><strong>Skip/Residual-connection</strong>: Reduct gradient vanishing. </li>
</ul>
<h2 id="XceptionNet"><a href="#XceptionNet" class="headerlink" title="XceptionNet"></a>XceptionNet</h2><ul>
<li><strong>Depth-wise spatial convolution</strong>: 2D Convolution applied to each channel independently; Number of input channels = number of kernels = number of output channels: $c_i=c_o$, Each kernel has a single channel </li>
<li><strong>Pointwise convolution</strong>: Normal 2D convolution with kernel height and width: 1x1</li>
</ul>
<h2 id="Neural-Architecture-Search-NAS"><a href="#Neural-Architecture-Search-NAS" class="headerlink" title="Neural Architecture Search (NAS)"></a>Neural Architecture Search (NAS)</h2><ul>
<li><strong>Model Compression</strong>: Prune layers, Low-precision representation<br><img src="/images/CS5242/7/model-compression.png" alt="model-compression"></li>
</ul>
<h2 id="Transfer-Learning-with-DCNN"><a href="#Transfer-Learning-with-DCNN" class="headerlink" title="Transfer Learning with DCNN"></a>Transfer Learning with DCNN</h2><ol>
<li>Train model (or use someone elseâ€™s model) on ImageNet 2012 training set </li>
<li>Re-train classifier on new dataset //Just the top layer (softmax or SVM) </li>
<li>Classify test set of new dataset<br><img src="/images/CS5242/7/transfer-learning.png" alt="transfer-learning"></li>
</ol>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>PPT for &quot;The Case For Learned Index Structures&quot;</title>
    <url>/2020/09/11/Reading_ppt_Learned_Index/</url>
    <content><![CDATA[<p>Paper: <a href="https://www.arxiv-vanity.com/papers/1712.01208/">https://www.arxiv-vanity.com/papers/1712.01208/</a><br><a id="more"></a></p>
<object data="/pdf/nus/CS6203/Learned_Index.pdf" type="application/pdf" width="100%" height="877px"></object>]]></content>
      <categories>
        <category>Readings</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>DB</tag>
      </tags>
  </entry>
  <entry>
    <title>Note for &quot;The Case For Learned Index Structures&quot;</title>
    <url>/2020/09/11/Reading_Note_Learned_Index/</url>
    <content><![CDATA[<p>Paper: <a href="https://www.arxiv-vanity.com/papers/1712.01208/">https://www.arxiv-vanity.com/papers/1712.01208/</a> </p>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>There exists various data access patterns, and correspondingly various choices of index structure.<br>B-tree: range request  (from sorted array)<br>HashMap: single key look-ups (from unsorted array)<br>Bloom filters: check for record existence<br><a id="more"></a></p>
<p>If data is from 1 to 1000, we donâ€™t actually need a tree structure, we just need to use a direct look-up for the key. This example shows that <strong>One size does not fit all</strong>.<br>Traditional data structures make no assumptions about data, they only rely on the size of data.<br>While using ML, we try to learn the distribution of data,  We use data complexity instead of data size to construct a suitable index. In this way, we can achieve huge performance improvement.</p>
<p>There are also many other data structures and algorithms in database system, we can apply the idea of using ML to change the design of them.</p>
<p>Basically, we want to use ML techniques to enhance traditional index structures or even replace them to get a better performance.</p>
<h1 id="Range-Index-B-tree"><a href="#Range-Index-B-tree" class="headerlink" title="Range Index (B-tree)"></a>Range Index (B-tree)</h1><h2 id="Range-Index-Models-are-CDF-Models"><a href="#Range-Index-Models-are-CDF-Models" class="headerlink" title="Range Index Models are CDF Models"></a>Range Index Models are CDF Models</h2><p>B-tree can be viewed as a model which takes the featureâ€™s key as input and predict the position of the feature. Usually a B-tree maps a key to a page, and then searches within this page. Which means B-tree outputs a position, and searches within $[pos, pos+page_ size]$. i.e., by normal B-trees, the error is defined by the pagesize.</p>
<p>model:f(key)-&gt;pos, searches from $[pos-err_{min},pos+err_{max}]$<br>we can search in this range to find the exact right record.<br><img src="/images/CS6203/index-1.png" alt="history"></p>
<p><strong>We donâ€™t care about generalization, we only care about the data we have.</strong></p>
<p>So B-tree is actually building a model of Cumulative Distribution Function:<br>$p=P(x\leq key)*nums_of_Keys$<br>p is the predict position from key.<br><img src="/images/CS6203/index-2.png" alt="history"><br>For example, if your data is a Gaussian Distribution, most of your data is around the middle, and the learned index can allocate more trees in that area because of this information.</p>
<p>Potantial Advantages of learned b-tree models:<br>smaller index: less main-memory storage<br>faster lookup<br>more parallelism: sequential if-statement is exchanged for multiplications</p>
<p>assume read-only</p>
<h2 id="A-First-Naive-Learned-Index"><a href="#A-First-Naive-Learned-Index" class="headerlink" title="A First Naive Learned Index"></a>A First Naive Learned Index</h2><p>200 M records of timestamps (sorted)<br>two-layer fully-connected neural network<br>32 neurons per layer<br>ReLu activation functions<br>train this model to predict the position of the timestamp<br>measure the look-up time for a randomly selected key (averaged over several runs)</p>
<p>look-up with B-tree: 300ns<br>look-up with binary search: 900ns<br>look-up with Model: 80000ns (1250 predictions per second)</p>
<p>This model is a naive version and doesnâ€™t work well and we find this model is limited in the following ways:</p>
<ol>
<li>Tensorflow is designed for large models, not small models like this.</li>
<li>B-tree can easily overfit the training data and can predict the position precisely. For database system, overfitting is not that bad, you get a database, you know the data youâ€™re trying to search, and there are no other data outside to generalize,<br>While learned index can easily narrow the space from 100M to 10k but have trouble in narrowing the space from 100M to hundreds, which is â€œthe last mile of learned indexâ€, in other words, learned index has problems being accurate at the individual data instance level.</li>
<li>B-trees are cache efficient, they keep the top nodes always in cache and they access other pages if needed. In contrast NN need to load the all parameters into memory to compute a prediction and have a high cost in the number of multiplications.</li>
<li>For classic machine learning problems, the ultimate goal is the desired average average error, but we look for the index, hoping to get the best prediction, and finally hoping to find the true position of the key. Search does not make advantage of this prediction, the question is what is the right search style given an approximate answer</li>
</ol>
<h1 id="RM-Index-B-tree"><a href="#RM-Index-B-tree" class="headerlink" title="RM-Index (B-tree)"></a>RM-Index (B-tree)</h1><h2 id="The-Learning-Index-Framework-LIF"><a href="#The-Learning-Index-Framework-LIF" class="headerlink" title="The Learning Index Framework (LIF)"></a>The Learning Index Framework (LIF)</h2><p>LIF is an index optimization system. Given a set of index data, LIF automatically generates multiple sets of hyperparameters, and automatically optimizes and tests to find the optimal set of configurations.<br>When applied in a real database, LIF will generate an efficient index structure based on C++. LIF focuses on small models, so many unnecessary costs for managing large models must be reduced(Use a specific model structure to reduce runtime overhead, such as pruning, removing redundant if-else, direct memory access, etc.), now we can optimize the model prediction to within 30ns.<br><em>LIF is still an experimental framework and is instumentalized to quickly evaluate different index configurations.</em></p>
<h2 id="Recursive-Model-Index"><a href="#Recursive-Model-Index" class="headerlink" title="Recursive Model Index"></a>Recursive Model Index</h2><p>The real data distribution function is often between the two: in general, it satisfies a change trend, but the part is a piecewise function (the piecewise function of daily data may be different)<br><img src="/images/CS6203/index-2.png" alt="history"></p>
<p>In that case we use the idea of Mixture-of-Experts and propose Recursive Model Index to solve the problem of â€œthe last mile of learned indexâ€</p>
<p>We use a hierarchical experts, i.e. a hierarchy of models.<br>At each stage, take the key as input and based on it to pick another model, until final stage predicts the position.</p>
<p>Every model is like an expert for a certain range and may has a better prediction.</p>
<ul>
<li>Such a multi-layer model structure is not a search tree, and multiple stage 2 models may point to the same stage 3 model. In addition, at the lowest level, in order to ensure that the smallest and largest deviations can be controlled, we can also use B-Tree to complete the final index.</li>
<li>Each model does not need to cover the same amount of records like B-trees do.</li>
<li>predictions between stages donâ€™t need to be the estimate of position, but can be considered as picking an expert which has a better knowledge about certain keys.</li>
</ul>
<p><img src="/images/CS6203/index-3.png" alt="history"><br>RMI has several benefits:</p>
<ol>
<li>It separates model size and complexity from execution cost</li>
<li>It is easy to learn the overall data distribution</li>
<li>Divide the entire space into smaller subranges. Each subranges is similar to a B-tree or decision tree, making it easier to solve the last-mile accuracy problem.</li>
<li>No search process is required in-between stages. For example, the output y of model 1.1 is an offset, which can be directly used to select the model of the next stage.</li>
</ol>
<h2 id="Hybrid-Indexes"><a href="#Hybrid-Indexes" class="headerlink" title="Hybrid Indexes"></a>Hybrid Indexes</h2><p>Another advantage of the recursive model index is that we are able to build mixtures of models.<br>top-layer: a small ReLU neural net â€”- they can learn a wide range of  complex data<br>bottom: simple models like linear regression(inexpensive in space and execution), or B-trees if the data is particularly hard to learn(worst case)</p>
<p>Such a recursive model has several advantages: </p>
<ol>
<li>It can learn the shape of the output data well. </li>
<li>Through stratification, you can basically use B-Tree or decision tree to obtain very high search efficiency. </li>
<li>Different stages can use penetration to initialize the model instead of searching, which makes it easier to refactor and optimize the programming language.</li>
</ol>
<h2 id="Search-Strategy"><a href="#Search-Strategy" class="headerlink" title="Search Strategy"></a>Search Strategy</h2><ol>
<li>Model Biased Searchï¼šthe default search strategy, based on binary search, the new intermediate point is based on the standard deviation $\sigma$ of the last layer of model settings</li>
<li>Biased Quaternary Searchï¼šsearch three points at the same time, $pos-\sigma, pos, pos+\sigma$ . Requires CPU to obtain multiple data addresses in parallel from main memory</li>
</ol>
<ul>
<li>how to deal with large address spaces</li>
<li>how do we deal with not able to assume that the end location is ordered<br>if pages are in disks or other seperate devices they may not be in order<br>itâ€™s an engineering issue</li>
</ul>
<h2 id="Indexing-Strings"><a href="#Indexing-Strings" class="headerlink" title="Indexing Strings"></a>Indexing Strings</h2><h2 id="Training"><a href="#Training" class="headerlink" title="Training"></a>Training</h2><h2 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h2><p>trade-off between memory and latency</p>
<p>Map data: relatively linear<br>Web data: (timestamp) complex, a worst case<br>Log Normal Data: non-linear integers, heavy tail<br>2nd stage: linear models have the best performance.<br>For the last mile we donâ€™t need to execute complex models.</p>
<p><img src="/images/CS6203/index-4.png" alt="history"></p>
<ul>
<li>Histogram: B-Trees approximate the CDF of the underlying data distribution. When we use  histograms as a CDF,this histogram must be a low error approximation of the CDF. However,  this requires a large number of buckets, which makes it expensive to search the histogram itself. And almost every bucket has data insides, only few buckets are empty or too full. The solution to this case is B-Trees, so weâ€™ll not discuss Histogram individually.</li>
<li>Lookup-Table: Lookup-table is another simple alternative to B-trees. A lookup table is an array that replaces runtime computation with a simpler array indexing operation(Wikipedia).<blockquote>
<p>Performance comparison: linear search vs binary search.<br><a href="https://dirtyhandscoding.wordpress.com/2017/08/25/performance-comparison-linear-search-vs-binary-search/">https://dirtyhandscoding.wordpress.com/2017/08/25/performance-comparison-linear-search-vs-binary-search/</a></p>
</blockquote>
</li>
<li>FAST: a highly SIMD optimized data structure, allocate memory in the power of 2, leading to significantly larger indexes</li>
<li>Fixed-size B-Tree &amp; interpolation search</li>
<li>Learned indexes without overhead: a multivariate linear regression model at the top and simple linear models at bottom<br><img src="/images/CS6203/index-5.png" alt="history"></li>
</ul>
<p>Because the binary search of string will be more time-consuming, the search strategy proposed above(learned QS with quaternary search) can improve efficiency more significantly<br><img src="/images/CS6203/index-6.png" alt="history"></p>
<h1 id="Point-Index-hash"><a href="#Point-Index-hash" class="headerlink" title="Point Index (hash)"></a>Point Index (hash)</h1><p>Point Index, as the name suggests, is to search for the position corresponding to the key, which is Hashmap. Hashmap is naturally a model, the input is the key and the output is the position. For Hashmap, in order to reduce conflicts, it is often necessary to use a much larger number of slots than the number of keys (the paper mentions that a hashmap usually has 78% extra slots in Google). For conflicts, although there are linked-list or secondary probing methods to deal with, their overhead is not small. Even using sparse-hashmap to optimize memory usage, the performance is 3-7 times slower than hashmap. </p>
<p>Therefore,  the learned model can reduce the additional memory overhead on the one hand, and reduce the overhead of some conflicts on the other hand (Hashmap can avoid conflicts by using more slots. If there are few conflicts, it will be difficult to optimize the index Time Because Hashmap is inherently constant complexity, the goal here is to reduce the memory overhead of Hashmap while ensuring indexing time). As shown in the figure below, the Learned Hashmap can not only reduce conflicts, but also make better use of memory space under the same number of slots.</p>
<p>The point index does not need to ensure that the records are continuous (maxerr and minerr do not need to be considered), so the trained model F fit CDF is easier to meet<br><img src="/images/CS6203/index-7.png" alt="history"><br>After the hash function is replaced with the model, the index time is not shortened, but the key space is indeed effectively reduced, which improves the space utilization<br><img src="/images/CS6203/index-8.png" alt="history"></p>
<h1 id="Existence-Index-Bloom-Filters"><a href="#Existence-Index-Bloom-Filters" class="headerlink" title="Existence Index (Bloom-Filters)"></a>Existence Index (Bloom-Filters)</h1><p>Although Bloom filters allow false positives,<br>for many applications the space savings outweigh this drawback</p>
<p>Considering the usage scenario of the existence index is usually to first determine whether the record exists in the cold storage, and then access the data through disk or network. So the latency can be relatively high, so that we can use more complex RNN or CNN models as classifiers.</p>
<h1 id="Related-Work"><a href="#Related-Work" class="headerlink" title="Related Work"></a>Related Work</h1><h2 id="B-Tree-and-Variants"><a href="#B-Tree-and-Variants" class="headerlink" title="B-Tree and Variants"></a>B-Tree and Variants</h2><p>Over the last few years, a variety of different index structures have been proposed, such as B+-trees, red-black trees, all aiming at improving the performance of original main-memory trees. However, none of the structures have learned from the data distribution.</p>
<p>While using our hybrid model, we can combine the existing index structures with the learned index for further performance gains.</p>
<h2 id="Perfect-hashing"><a href="#Perfect-hashing" class="headerlink" title="Perfect hashing"></a>Perfect hashing</h2><p>Perfect hashing tried to avoid conflicts without learning techniques.<br>The size of perfect hash function relies on data size.<br>In contrast, Learned hash function can be indenpendent of data size.<br>Whatâ€™s more, perfect hash is not suitable for B-trees and Bloom filters.</p>
<h2 id="Bloom-filters"><a href="#Bloom-filters" class="headerlink" title="Bloom filters"></a>Bloom filters</h2><p>Our existence indexes directly make use of the current bloom filters by adding a ML model before the simple bloom filter and creating a classification model.<br>And in addition we can also use our learning model as a special hash function to seperate the keys and non-keys.</p>
<h2 id="Modeling-CDFs"><a href="#Modeling-CDFs" class="headerlink" title="Modeling CDFs"></a>Modeling CDFs</h2><p>Our models for both range and point indexes are closely tied to models of CDF.<br>How to mostly model CDF remanins an open question.</p>
<h2 id="Mixture-of-Experts"><a href="#Mixture-of-Experts" class="headerlink" title="Mixture of Experts"></a>Mixture of Experts</h2><p>Our RMI architecture builds experts for subsets of the data and in this way we can make our model size indepentent on model computation.<br>So we can create models that are complex but still cheap to execute.</p>
<h1 id="Conclusion-and-future-work"><a href="#Conclusion-and-future-work" class="headerlink" title="Conclusion and future work"></a>Conclusion and future work</h1><h2 id="Other-ML-Models"><a href="#Other-ML-Models" class="headerlink" title="Other ML Models"></a>Other ML Models</h2><p>We combine some simple neural networks with the existing data structures, and there are definitely more ways to do the combination which are worth exploring.</p>
<h2 id="Multi-Dimensional-Indexes"><a href="#Multi-Dimensional-Indexes" class="headerlink" title="Multi-Dimensional Indexes"></a>Multi-Dimensional Indexes</h2><p>Models like NN are extremely good at handling multi-dimensional data, and the learned model could be used to estimate the position given various attributes.</p>
<h2 id="Learned-Algorithms-beyond-indexing"><a href="#Learned-Algorithms-beyond-indexing" class="headerlink" title="Learned Algorithms beyond indexing"></a>Learned Algorithms beyond indexing</h2><p>Learned Algorithms can also be applied to other data structures and CDF models are beneficial to join and sorting operations as well.</p>
<h2 id="GPU-TPU"><a href="#GPU-TPU" class="headerlink" title="GPU/TPU"></a>GPU/TPU</h2><p>All we have been doing is to learn data pattern and use it in data structure design.<br>We are now having TPU/GPU which are vector processors and vector multiplies become very cheap.<br>We can make use of this property and construct new data structure along with ML techniques to speed up the look-up time and get better performance.</p>
<p><strong>In summary, we have demonstrated that machine learned models have the potential to provide significant benefits over state-of-the-art indexes, and we believe this is a fruitful direction for future research.</strong></p>
<blockquote>
<p>B-tree indexes and CPU caches<br><a href="https://www.researchgate.net/search.Search.html?type=publication&amp;query=%20B-tree%20indexes%20and%20CPU%20caches">https://www.researchgate.net/search.Search.html?type=publication&amp;query=%20B-tree%20indexes%20and%20CPU%20caches</a><br>Making B+-Trees Cache Conscious in Main Memory<br><a href="http://www.cse.iitb.ac.in/infolab/Data/Courses/CS632/2006/Papers/cache-b-tree.pdf">http://www.cse.iitb.ac.in/infolab/Data/Courses/CS632/2006/Papers/cache-b-tree.pdf</a><br>Adaptive Range Filters for Cold Data: Avoiding Trips to Siberia<br><a href="http://www.vldb.org/pvldb/vol6/p1714-kossmann.pdf">http://www.vldb.org/pvldb/vol6/p1714-kossmann.pdf</a><br>Cuckoo Filter: Practically Better Than Bloom<br><a href="https://www.cs.cmu.edu/~dga/papers/cuckoo-conext2014.pdf">https://www.cs.cmu.edu/~dga/papers/cuckoo-conext2014.pdf</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Readings</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>DB</tag>
      </tags>
  </entry>
  <entry>
    <title>PPT for &quot;Federated Machine Learning -- Concept and Applications&quot;</title>
    <url>/2020/10/30/Reading_ppt_FL/</url>
    <content><![CDATA[<p>Paper: <a href="https://arxiv.org/abs/1902.04885">https://arxiv.org/abs/1902.04885</a><br><a id="more"></a></p>
<object data="/pdf/nus/CS6203/Federated_Learning.pdf" type="application/pdf" width="100%" height="877px"></object>]]></content>
      <categories>
        <category>Readings</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>DB</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/07/12/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><a id="more"></a>
<p>ss<br> <strong>BPç®—æ³•</strong></p>
<p>  è®­ç»ƒé›†    $\left\{\left(x^{(1)}, y^{(1)}\right), \ldots,\left(x^{(m)}, y^{(m)}\right)\right\}$</p>
<p>  è®¾    $\Delta_{i j}^{(l)}=0(\text { for all } l, i, j)$</p>
<p>  $\begin{array}{l}{\text {For } i=1 \text { to } m}\end{array}$</p>
<script type="math/tex; mode=display">
  \begin{array}{l}{\text { Set } a^{(1)}=x^{(i)}} \\ {\text { Perform forward propagation to compute } a^{(l)} \text { for } l=2,3, \ldots, L} \\ {\text { Using } y^{(i)}, \text { compute } \delta^{(L)}=a^{(L)}-y^{(i)}} \\ {\text { Compute } \delta^{(L-1)}, \delta^{(l+1)}, \ldots, \delta^{(2)}} \\ {\Delta_{i j}^{(l)} :=\Delta_{i j}^{(l)}+a_{j}^{(l)} \delta_{i}^{(l+1)}}\end{array}</script><p>  $\begin{array}{l}{D_{i j}^{(l)} :=\frac{1}{m} \Delta_{i j}^{(l)}+\lambda \Theta_{i j}^{(l)}} &amp; {\text { if } j \neq 0} \\ {D_{i j}^{(l)} :=\frac{1}{m} \Delta_{i j}^{(l)}} &amp; {\text { if } j=0}\end{array}$</p>
<p>  å…¶ä¸­    $\frac{\partial}{\partial \Theta_{i j}^{(l)}} J(\Theta)=D_{i j}^{(l)}$</p>
<h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>æ ‘ç»“æ„ Tree</title>
    <url>/2020/07/20/Tree%20Structure/</url>
    <content><![CDATA[<h2 id="äºŒå‰æœç´¢æ ‘"><a href="#äºŒå‰æœç´¢æ ‘" class="headerlink" title="äºŒå‰æœç´¢æ ‘"></a>äºŒå‰æœç´¢æ ‘</h2><p>ä¸€æ£µæœç´¢æ ‘æ—¢å¯ä»¥ä½œä¸ºä¸€ä¸ªå­—å…¸åˆå¯ä»¥ä½œä¸ºä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ã€‚</p>
<h2 id="çº¢é»‘æ ‘"><a href="#çº¢é»‘æ ‘" class="headerlink" title="çº¢é»‘æ ‘"></a>çº¢é»‘æ ‘</h2><h2 id="Bæ ‘"><a href="#Bæ ‘" class="headerlink" title="Bæ ‘"></a>Bæ ‘</h2><h2 id="B-æ ‘"><a href="#B-æ ‘" class="headerlink" title="B+æ ‘"></a>B+æ ‘</h2>]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°ï¼šæ•°æ®ç»“æ„</category>
      </categories>
      <tags>
        <tag>Tree</tag>
      </tags>
  </entry>
  <entry>
    <title>Python</title>
    <url>/2020/07/28/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9APython/</url>
    <content><![CDATA[<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><h3 id="Pythonå¯å˜å‚æ•°argsï¼Œ-kwargs"><a href="#Pythonå¯å˜å‚æ•°argsï¼Œ-kwargs" class="headerlink" title="Pythonå¯å˜å‚æ•°argsï¼Œ*kwargs"></a>Pythonå¯å˜å‚æ•°<em>argsï¼Œ*</em>kwargs</h3><p>å½“å‡½æ•°çš„å‚æ•°å‰é¢æœ‰ä¸€ä¸ªæ˜Ÿå·çš„æ—¶å€™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¯å˜çš„ä½ç½®å‚æ•°<br>ä¸¤ä¸ªæ˜Ÿå·è¡¨ç¤ºè¿™ä¸ªæ˜¯ä¸€ä¸ªå¯å˜çš„å…³é”®è¯å‚æ•°ã€‚<br>æ˜Ÿå·<em>æŠŠåºåˆ—æˆ–è€…é›†åˆè§£åŒ…ï¼ˆunpackï¼‰æˆä½ç½®å‚æ•°ï¼Œä¸¤ä¸ªæ˜Ÿå·*</em>æŠŠå­—å…¸è§£åŒ…æˆå…³é”®è¯å‚æ•°ã€‚</p>
<h3 id="Pythonå†…ç½®å®¹å™¨åŠå…¶å®¹å™¨åŠå…¶ä½¿ç”¨åœºæ™¯"><a href="#Pythonå†…ç½®å®¹å™¨åŠå…¶å®¹å™¨åŠå…¶ä½¿ç”¨åœºæ™¯" class="headerlink" title="Pythonå†…ç½®å®¹å™¨åŠå…¶å®¹å™¨åŠå…¶ä½¿ç”¨åœºæ™¯ "></a>Pythonå†…ç½®å®¹å™¨åŠå…¶å®¹å™¨åŠå…¶ä½¿ç”¨åœºæ™¯ <a id="more"></a></h3><h3 id="pythonå¤šçº¿ç¨‹"><a href="#pythonå¤šçº¿ç¨‹" class="headerlink" title="pythonå¤šçº¿ç¨‹"></a>pythonå¤šçº¿ç¨‹</h3><h3 id="å¯¹Pythonäº†è§£å—ï¼Ÿè¯´è¯´å®ƒåº•å±‚çš„å®ç°åŸç†ã€‚"><a href="#å¯¹Pythonäº†è§£å—ï¼Ÿè¯´è¯´å®ƒåº•å±‚çš„å®ç°åŸç†ã€‚" class="headerlink" title="å¯¹Pythonäº†è§£å—ï¼Ÿè¯´è¯´å®ƒåº•å±‚çš„å®ç°åŸç†ã€‚"></a>å¯¹Pythonäº†è§£å—ï¼Ÿè¯´è¯´å®ƒåº•å±‚çš„å®ç°åŸç†ã€‚</h3><h3 id="ä»€ä¹ˆæ˜¯Pythonç”Ÿæˆå™¨ï¼Œè¿­ä»£å™¨ï¼›"><a href="#ä»€ä¹ˆæ˜¯Pythonç”Ÿæˆå™¨ï¼Œè¿­ä»£å™¨ï¼›" class="headerlink" title="ä»€ä¹ˆæ˜¯Pythonç”Ÿæˆå™¨ï¼Œè¿­ä»£å™¨ï¼›"></a>ä»€ä¹ˆæ˜¯Pythonç”Ÿæˆå™¨ï¼Œè¿­ä»£å™¨ï¼›</h3><h3 id="Pythonä¸­çš„dictåº•å±‚æ€ä¹ˆå®ç°çš„"><a href="#Pythonä¸­çš„dictåº•å±‚æ€ä¹ˆå®ç°çš„" class="headerlink" title="Pythonä¸­çš„dictåº•å±‚æ€ä¹ˆå®ç°çš„"></a>Pythonä¸­çš„dictåº•å±‚æ€ä¹ˆå®ç°çš„</h3><h3 id="Pythonå¤šçº¿ç¨‹ç”¨äº†å‡ ä¸ªCPU"><a href="#Pythonå¤šçº¿ç¨‹ç”¨äº†å‡ ä¸ªCPU" class="headerlink" title="Pythonå¤šçº¿ç¨‹ç”¨äº†å‡ ä¸ªCPU"></a>Pythonå¤šçº¿ç¨‹ç”¨äº†å‡ ä¸ªCPU</h3><h3 id="ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼›è®²ä¸€è®²è£…é¥°å™¨ï¼Œèƒ½æ‰‹å†™å®ç°ä¸€ä¸ªè£…é¥°å™¨ä¹ˆï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼›è®²ä¸€è®²è£…é¥°å™¨ï¼Œèƒ½æ‰‹å†™å®ç°ä¸€ä¸ªè£…é¥°å™¨ä¹ˆï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼›è®²ä¸€è®²è£…é¥°å™¨ï¼Œèƒ½æ‰‹å†™å®ç°ä¸€ä¸ªè£…é¥°å™¨ä¹ˆï¼Ÿ"></a>ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼›è®²ä¸€è®²è£…é¥°å™¨ï¼Œèƒ½æ‰‹å†™å®ç°ä¸€ä¸ªè£…é¥°å™¨ä¹ˆï¼Ÿ</h3><p>æœ¬è´¨ä¸Šï¼Œdecoratorå°±æ˜¯ä¸€ä¸ªè¿”å›å‡½æ•°çš„é«˜é˜¶å‡½æ•°ã€‚<br>@ç¬¦å·ç”¨åšå‡½æ•°çš„ä¿®é¥°ç¬¦ï¼Œå¯ä»¥åœ¨æ¨¡å—æˆ–è€…ç±»çš„å®šä¹‰å±‚å†…å¯¹å‡½æ•°è¿›è¡Œä¿®é¥°ï¼Œå‡ºç°åœ¨å‡½æ•°å®šä¹‰çš„å‰ä¸€è¡Œï¼Œä¸å…è®¸å’Œå‡½æ•°å®šä¹‰åœ¨åŒä¸€è¡Œã€‚ä¸€ä¸ªä¿®é¥°ç¬¦å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†è¢«ä¿®é¥°çš„å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¿®é¥°åçš„åŒåå‡½æ•°æˆ–å…¶ä»–å¯è°ƒç”¨çš„ä¸œè¥¿ï¼ˆå¦‚æœè¿”å›ä¸æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„å¯¹è±¡é‚£ä¹ˆä¼šæŠ¥é”™ï¼‰ã€‚æ¯ä¸€å±‚è°ƒç”¨è£…é¥°éƒ½ä¼ é€’çš„æ˜¯å‡½æ•°å¯¹è±¡ï¼Œæ¯ä¸€å±‚Wrapè¿”å›å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„å¯¹è±¡ï¼ˆå¦‚ä¸Šä¾‹ä¸­çš„decoratorï¼‰</p>
<h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><h3 id="C-ä¸­constä¸-defineçš„åŒºåˆ«ä¸ä¼˜åŠ¿"><a href="#C-ä¸­constä¸-defineçš„åŒºåˆ«ä¸ä¼˜åŠ¿" class="headerlink" title="C++ä¸­constä¸#defineçš„åŒºåˆ«ä¸ä¼˜åŠ¿"></a>C++ä¸­constä¸#defineçš„åŒºåˆ«ä¸ä¼˜åŠ¿</h3><h3 id="C-11æ–°ç‰¹æ€§autoçš„ç”¨æ³•"><a href="#C-11æ–°ç‰¹æ€§autoçš„ç”¨æ³•" class="headerlink" title="C++11æ–°ç‰¹æ€§autoçš„ç”¨æ³•"></a>C++11æ–°ç‰¹æ€§autoçš„ç”¨æ³•</h3><h3 id="C-è™šå‡½æ•°ï¼Œè¯»ç¨‹åºå†™ç»“æœ"><a href="#C-è™šå‡½æ•°ï¼Œè¯»ç¨‹åºå†™ç»“æœ" class="headerlink" title="C++è™šå‡½æ•°ï¼Œè¯»ç¨‹åºå†™ç»“æœ"></a>C++è™šå‡½æ•°ï¼Œè¯»ç¨‹åºå†™ç»“æœ</h3><h3 id="C-å…³é”®å­—staticã€extern"><a href="#C-å…³é”®å­—staticã€extern" class="headerlink" title="C++å…³é”®å­—staticã€extern"></a>C++å…³é”®å­—staticã€extern</h3><h3 id="C-å…³é”®å­—thisï¼ŒC-ç±»çš„å®ä¾‹æ–¹æ³•ä¸­èƒ½å¦å†™delete-thisï¼Œè¿™ç§æƒ…å†µçš„ä½¿ç”¨åœºæ™¯"><a href="#C-å…³é”®å­—thisï¼ŒC-ç±»çš„å®ä¾‹æ–¹æ³•ä¸­èƒ½å¦å†™delete-thisï¼Œè¿™ç§æƒ…å†µçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="C++å…³é”®å­—thisï¼ŒC++ç±»çš„å®ä¾‹æ–¹æ³•ä¸­èƒ½å¦å†™delete thisï¼Œè¿™ç§æƒ…å†µçš„ä½¿ç”¨åœºæ™¯"></a>C++å…³é”®å­—thisï¼ŒC++ç±»çš„å®ä¾‹æ–¹æ³•ä¸­èƒ½å¦å†™delete thisï¼Œè¿™ç§æƒ…å†µçš„ä½¿ç”¨åœºæ™¯</h3><h3 id="C-ä¸­newå’Œdeleteè¯­å¥çš„åº•å±‚å®ç°"><a href="#C-ä¸­newå’Œdeleteè¯­å¥çš„åº•å±‚å®ç°" class="headerlink" title="C++ä¸­newå’Œdeleteè¯­å¥çš„åº•å±‚å®ç°"></a>C++ä¸­newå’Œdeleteè¯­å¥çš„åº•å±‚å®ç°</h3><h2 id="ç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„å¯¹æ¯”"><a href="#ç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„å¯¹æ¯”" class="headerlink" title="ç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„å¯¹æ¯”"></a>ç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„å¯¹æ¯”</h2><h3 id="Javaå’ŒC-ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"><a href="#Javaå’ŒC-ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="Javaå’ŒC++ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"></a>Javaå’ŒC++ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h3><h3 id="C-ä¸ºä»€ä¹ˆæ¯”Javaè¿è¡Œå¾—å¿«ï¼Ÿ"><a href="#C-ä¸ºä»€ä¹ˆæ¯”Javaè¿è¡Œå¾—å¿«ï¼Ÿ" class="headerlink" title="C++ä¸ºä»€ä¹ˆæ¯”Javaè¿è¡Œå¾—å¿«ï¼Ÿ"></a>C++ä¸ºä»€ä¹ˆæ¯”Javaè¿è¡Œå¾—å¿«ï¼Ÿ</h3><h3 id="javaå’Œpythonçš„å¼‚åŒï¼Ÿ"><a href="#javaå’Œpythonçš„å¼‚åŒï¼Ÿ" class="headerlink" title="javaå’Œpythonçš„å¼‚åŒï¼Ÿ"></a>javaå’Œpythonçš„å¼‚åŒï¼Ÿ</h3><h2 id="è®¡ç®—æœºç³»ç»Ÿ"><a href="#è®¡ç®—æœºç³»ç»Ÿ" class="headerlink" title="è®¡ç®—æœºç³»ç»Ÿ"></a>è®¡ç®—æœºç³»ç»Ÿ</h2><h3 id="äº†è§£Linuxä¹ˆï¼Ÿç”¨è¿‡å“ªäº›å‘½ä»¤ï¼Ÿ"><a href="#äº†è§£Linuxä¹ˆï¼Ÿç”¨è¿‡å“ªäº›å‘½ä»¤ï¼Ÿ" class="headerlink" title="äº†è§£Linuxä¹ˆï¼Ÿç”¨è¿‡å“ªäº›å‘½ä»¤ï¼Ÿ"></a>äº†è§£Linuxä¹ˆï¼Ÿç”¨è¿‡å“ªäº›å‘½ä»¤ï¼Ÿ</h3><h3 id="SSOäº†è§£å—ï¼Ÿ"><a href="#SSOäº†è§£å—ï¼Ÿ" class="headerlink" title="SSOäº†è§£å—ï¼Ÿ"></a>SSOäº†è§£å—ï¼Ÿ</h3><h3 id="è´Ÿè½½å‡è¡¡äº†è§£å—ï¼Ÿ"><a href="#è´Ÿè½½å‡è¡¡äº†è§£å—ï¼Ÿ" class="headerlink" title="è´Ÿè½½å‡è¡¡äº†è§£å—ï¼Ÿ"></a>è´Ÿè½½å‡è¡¡äº†è§£å—ï¼Ÿ</h3><h3 id="MD5åŠ å¯†å¯é€†å—ï¼Ÿä¼šè¢«ç ´è§£å—-å¦‚ä½•ç ´è§£ï¼Ÿ"><a href="#MD5åŠ å¯†å¯é€†å—ï¼Ÿä¼šè¢«ç ´è§£å—-å¦‚ä½•ç ´è§£ï¼Ÿ" class="headerlink" title="MD5åŠ å¯†å¯é€†å—ï¼Ÿä¼šè¢«ç ´è§£å—?å¦‚ä½•ç ´è§£ï¼Ÿ"></a>MD5åŠ å¯†å¯é€†å—ï¼Ÿä¼šè¢«ç ´è§£å—?å¦‚ä½•ç ´è§£ï¼Ÿ</h3><h3 id="DDOSæ”»å‡»ï¼ˆæˆ‘ç­”äº†SYNæ”»å‡»ï¼Œæ·±å…¥é—®äº†å¦‚ä½•è§£å†³ï¼Œå…³é”®ç‚¹æ˜¯ä»€ä¹ˆï¼‰"><a href="#DDOSæ”»å‡»ï¼ˆæˆ‘ç­”äº†SYNæ”»å‡»ï¼Œæ·±å…¥é—®äº†å¦‚ä½•è§£å†³ï¼Œå…³é”®ç‚¹æ˜¯ä»€ä¹ˆï¼‰" class="headerlink" title="DDOSæ”»å‡»ï¼ˆæˆ‘ç­”äº†SYNæ”»å‡»ï¼Œæ·±å…¥é—®äº†å¦‚ä½•è§£å†³ï¼Œå…³é”®ç‚¹æ˜¯ä»€ä¹ˆï¼‰"></a>DDOSæ”»å‡»ï¼ˆæˆ‘ç­”äº†SYNæ”»å‡»ï¼Œæ·±å…¥é—®äº†å¦‚ä½•è§£å†³ï¼Œå…³é”®ç‚¹æ˜¯ä»€ä¹ˆï¼‰</h3><h3 id="å¹¶å‘ç”¨ä»€ä¹ˆ"><a href="#å¹¶å‘ç”¨ä»€ä¹ˆ" class="headerlink" title="å¹¶å‘ç”¨ä»€ä¹ˆ"></a>å¹¶å‘ç”¨ä»€ä¹ˆ</h3><h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><h3 id="è®¾è®¡ä¸€ä¸ªçº¿ç¨‹æ± "><a href="#è®¾è®¡ä¸€ä¸ªçº¿ç¨‹æ± " class="headerlink" title="è®¾è®¡ä¸€ä¸ªçº¿ç¨‹æ± "></a>è®¾è®¡ä¸€ä¸ªçº¿ç¨‹æ± </h3><h3 id="è§£é‡Šä¸‹å†…å­˜ä¸­å †å’Œæ ˆï¼Œå†™ä¸€ä¸ªstack-overflowçš„ä»£ç "><a href="#è§£é‡Šä¸‹å†…å­˜ä¸­å †å’Œæ ˆï¼Œå†™ä¸€ä¸ªstack-overflowçš„ä»£ç " class="headerlink" title="è§£é‡Šä¸‹å†…å­˜ä¸­å †å’Œæ ˆï¼Œå†™ä¸€ä¸ªstack overflowçš„ä»£ç "></a>è§£é‡Šä¸‹å†…å­˜ä¸­å †å’Œæ ˆï¼Œå†™ä¸€ä¸ªstack overflowçš„ä»£ç </h3><h3 id="å…ƒç»„å’Œlistçš„åŒºåˆ«ï¼›"><a href="#å…ƒç»„å’Œlistçš„åŒºåˆ«ï¼›" class="headerlink" title="å…ƒç»„å’Œlistçš„åŒºåˆ«ï¼›"></a>å…ƒç»„å’Œlistçš„åŒºåˆ«ï¼›</h3><h3 id="listçš„åº•å±‚æ€ä¹ˆå®ç°çš„ï¼›"><a href="#listçš„åº•å±‚æ€ä¹ˆå®ç°çš„ï¼›" class="headerlink" title="listçš„åº•å±‚æ€ä¹ˆå®ç°çš„ï¼›"></a>listçš„åº•å±‚æ€ä¹ˆå®ç°çš„ï¼›</h3><h3 id="åŒç­‰äºå’Œisæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#åŒç­‰äºå’Œisæœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="åŒç­‰äºå’Œisæœ‰ä»€ä¹ˆåŒºåˆ«"></a>åŒç­‰äºå’Œisæœ‰ä»€ä¹ˆåŒºåˆ«</h3><h3 id="æ ˆçš„é»˜è®¤å¤§å°ï¼ˆ1Mï¼‰"><a href="#æ ˆçš„é»˜è®¤å¤§å°ï¼ˆ1Mï¼‰" class="headerlink" title="æ ˆçš„é»˜è®¤å¤§å°ï¼ˆ1Mï¼‰"></a>æ ˆçš„é»˜è®¤å¤§å°ï¼ˆ1Mï¼‰</h3><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><h3 id="è¯´ä¸€è¯´å„ç§æ’åºç®—æ³•åŸç†ï¼ŒåŠå…¶æ—¶é—´å¤æ‚åº¦ã€‚"><a href="#è¯´ä¸€è¯´å„ç§æ’åºç®—æ³•åŸç†ï¼ŒåŠå…¶æ—¶é—´å¤æ‚åº¦ã€‚" class="headerlink" title="è¯´ä¸€è¯´å„ç§æ’åºç®—æ³•åŸç†ï¼ŒåŠå…¶æ—¶é—´å¤æ‚åº¦ã€‚"></a>è¯´ä¸€è¯´å„ç§æ’åºç®—æ³•åŸç†ï¼ŒåŠå…¶æ—¶é—´å¤æ‚åº¦ã€‚</h3><h3 id="ä¸€é“äºŒå‰æ ‘çš„ç®—æ³•é¢˜ï¼šç»™å‡ºä¸€æ£µäºŒå‰æ ‘ï¼Œæ±‚å‡ºæ‰€æœ‰å·¦å¶å­ç»“ç‚¹çš„å€¼çš„å’Œ"><a href="#ä¸€é“äºŒå‰æ ‘çš„ç®—æ³•é¢˜ï¼šç»™å‡ºä¸€æ£µäºŒå‰æ ‘ï¼Œæ±‚å‡ºæ‰€æœ‰å·¦å¶å­ç»“ç‚¹çš„å€¼çš„å’Œ" class="headerlink" title="ä¸€é“äºŒå‰æ ‘çš„ç®—æ³•é¢˜ï¼šç»™å‡ºä¸€æ£µäºŒå‰æ ‘ï¼Œæ±‚å‡ºæ‰€æœ‰å·¦å¶å­ç»“ç‚¹çš„å€¼çš„å’Œ"></a>ä¸€é“äºŒå‰æ ‘çš„ç®—æ³•é¢˜ï¼šç»™å‡ºä¸€æ£µäºŒå‰æ ‘ï¼Œæ±‚å‡ºæ‰€æœ‰å·¦å¶å­ç»“ç‚¹çš„å€¼çš„å’Œ</h3><h3 id="æ ˆï¼Œé˜Ÿåˆ—æ˜¯ä»€ä¹ˆï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ ˆï¼Œé˜Ÿåˆ—æ˜¯ä»€ä¹ˆï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ ˆï¼Œé˜Ÿåˆ—æ˜¯ä»€ä¹ˆï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æ ˆï¼Œé˜Ÿåˆ—æ˜¯ä»€ä¹ˆï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><h3 id="è®¾è®¡ä¸€ä¸ªå¯ä»¥æ»¡è¶³é«˜æ•ˆç‡è·å–ç¬¬kå¤§å’Œå‰kä¸ªå¤§çš„å…ƒç´ çš„æ•°æ®ç»“æ„"><a href="#è®¾è®¡ä¸€ä¸ªå¯ä»¥æ»¡è¶³é«˜æ•ˆç‡è·å–ç¬¬kå¤§å’Œå‰kä¸ªå¤§çš„å…ƒç´ çš„æ•°æ®ç»“æ„" class="headerlink" title="è®¾è®¡ä¸€ä¸ªå¯ä»¥æ»¡è¶³é«˜æ•ˆç‡è·å–ç¬¬kå¤§å’Œå‰kä¸ªå¤§çš„å…ƒç´ çš„æ•°æ®ç»“æ„"></a>è®¾è®¡ä¸€ä¸ªå¯ä»¥æ»¡è¶³é«˜æ•ˆç‡è·å–ç¬¬kå¤§å’Œå‰kä¸ªå¤§çš„å…ƒç´ çš„æ•°æ®ç»“æ„</h3><h3 id="æ‰‹å†™æ±‚ä¸¤ä¸ªé“¾è¡¨ç¬¬ä¸€ä¸ªäº¤å‰èŠ‚ç‚¹"><a href="#æ‰‹å†™æ±‚ä¸¤ä¸ªé“¾è¡¨ç¬¬ä¸€ä¸ªäº¤å‰èŠ‚ç‚¹" class="headerlink" title="æ‰‹å†™æ±‚ä¸¤ä¸ªé“¾è¡¨ç¬¬ä¸€ä¸ªäº¤å‰èŠ‚ç‚¹"></a>æ‰‹å†™æ±‚ä¸¤ä¸ªé“¾è¡¨ç¬¬ä¸€ä¸ªäº¤å‰èŠ‚ç‚¹</h3><h3 id="æ±‚xçš„yæ¬¡æ–¹ï¼Œæƒ³å‡ºæ¯”ç›´æ¥forå¾ªç¯æ›´å¥½çš„æ–¹æ¡ˆ"><a href="#æ±‚xçš„yæ¬¡æ–¹ï¼Œæƒ³å‡ºæ¯”ç›´æ¥forå¾ªç¯æ›´å¥½çš„æ–¹æ¡ˆ" class="headerlink" title="æ±‚xçš„yæ¬¡æ–¹ï¼Œæƒ³å‡ºæ¯”ç›´æ¥forå¾ªç¯æ›´å¥½çš„æ–¹æ¡ˆ"></a>æ±‚xçš„yæ¬¡æ–¹ï¼Œæƒ³å‡ºæ¯”ç›´æ¥forå¾ªç¯æ›´å¥½çš„æ–¹æ¡ˆ</h3><h3 id="æ±‚ç»å¯¹ä¼—æ•°"><a href="#æ±‚ç»å¯¹ä¼—æ•°" class="headerlink" title="æ±‚ç»å¯¹ä¼—æ•°"></a>æ±‚ç»å¯¹ä¼—æ•°</h3><h3 id="äºŒå‰æ ‘ï¼Œè¾“å‡ºæ‰€æœ‰å’Œä¸ºnçš„è·¯å¾„ï¼ˆå¯ä»¥ä»ä¸­é—´ç»“ç‚¹åˆ°ä¸­é—´ç»“ç‚¹ï¼‰"><a href="#äºŒå‰æ ‘ï¼Œè¾“å‡ºæ‰€æœ‰å’Œä¸ºnçš„è·¯å¾„ï¼ˆå¯ä»¥ä»ä¸­é—´ç»“ç‚¹åˆ°ä¸­é—´ç»“ç‚¹ï¼‰" class="headerlink" title="äºŒå‰æ ‘ï¼Œè¾“å‡ºæ‰€æœ‰å’Œä¸ºnçš„è·¯å¾„ï¼ˆå¯ä»¥ä»ä¸­é—´ç»“ç‚¹åˆ°ä¸­é—´ç»“ç‚¹ï¼‰"></a>äºŒå‰æ ‘ï¼Œè¾“å‡ºæ‰€æœ‰å’Œä¸ºnçš„è·¯å¾„ï¼ˆå¯ä»¥ä»ä¸­é—´ç»“ç‚¹åˆ°ä¸­é—´ç»“ç‚¹ï¼‰</h3><h3 id="å¦‚ä½•ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚"><a href="#å¦‚ä½•ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚" class="headerlink" title="å¦‚ä½•ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚"></a>å¦‚ä½•ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚</h3><h3 id="å¦‚ä½•å¼€å¯ä¸€ä¸ªè¿›ç¨‹ã€‚"><a href="#å¦‚ä½•å¼€å¯ä¸€ä¸ªè¿›ç¨‹ã€‚" class="headerlink" title="å¦‚ä½•å¼€å¯ä¸€ä¸ªè¿›ç¨‹ã€‚"></a>å¦‚ä½•å¼€å¯ä¸€ä¸ªè¿›ç¨‹ã€‚</h3><h3 id="å®ç°ä¸€ä¸ª-hashtable"><a href="#å®ç°ä¸€ä¸ª-hashtable" class="headerlink" title="å®ç°ä¸€ä¸ª hashtable"></a>å®ç°ä¸€ä¸ª hashtable</h3><h3 id="å†™ä»£ç ï¼šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰å·¦å³å­èŠ‚ç‚¹å¤–ï¼Œè¿˜æœ‰æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨ã€‚ç»™å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›å®ƒåœ¨äºŒå‰æ ‘ä¸­ä¸­åºéå†çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚"><a href="#å†™ä»£ç ï¼šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰å·¦å³å­èŠ‚ç‚¹å¤–ï¼Œè¿˜æœ‰æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨ã€‚ç»™å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›å®ƒåœ¨äºŒå‰æ ‘ä¸­ä¸­åºéå†çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚" class="headerlink" title="å†™ä»£ç ï¼šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰å·¦å³å­èŠ‚ç‚¹å¤–ï¼Œè¿˜æœ‰æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨ã€‚ç»™å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›å®ƒåœ¨äºŒå‰æ ‘ä¸­ä¸­åºéå†çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚"></a>å†™ä»£ç ï¼šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰å·¦å³å­èŠ‚ç‚¹å¤–ï¼Œè¿˜æœ‰æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨ã€‚ç»™å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›å®ƒåœ¨äºŒå‰æ ‘ä¸­ä¸­åºéå†çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</h3><h3 id="æœ€é•¿å…¬å…±è¿ç»­å­ä¸²"><a href="#æœ€é•¿å…¬å…±è¿ç»­å­ä¸²" class="headerlink" title="æœ€é•¿å…¬å…±è¿ç»­å­ä¸²"></a>æœ€é•¿å…¬å…±è¿ç»­å­ä¸²</h3><h3 id="å‡ åGçš„æ•°æ®éƒ½æ˜¯URLï¼Œå†…å­˜ç©ºé—´åªæœ‰1Gï¼Œç£ç›˜ç©ºé—´æ— é™ï¼Œç»Ÿè®¡é¢‘ç‡æœ€é«˜çš„Top-10ï¼›"><a href="#å‡ åGçš„æ•°æ®éƒ½æ˜¯URLï¼Œå†…å­˜ç©ºé—´åªæœ‰1Gï¼Œç£ç›˜ç©ºé—´æ— é™ï¼Œç»Ÿè®¡é¢‘ç‡æœ€é«˜çš„Top-10ï¼›" class="headerlink" title="å‡ åGçš„æ•°æ®éƒ½æ˜¯URLï¼Œå†…å­˜ç©ºé—´åªæœ‰1Gï¼Œç£ç›˜ç©ºé—´æ— é™ï¼Œç»Ÿè®¡é¢‘ç‡æœ€é«˜çš„Top 10ï¼›"></a>å‡ åGçš„æ•°æ®éƒ½æ˜¯URLï¼Œå†…å­˜ç©ºé—´åªæœ‰1Gï¼Œç£ç›˜ç©ºé—´æ— é™ï¼Œç»Ÿè®¡é¢‘ç‡æœ€é«˜çš„Top 10ï¼›</h3><h3 id="åˆ¤æ–­å¹³è¡¡äºŒå‰æ ‘ã€‚"><a href="#åˆ¤æ–­å¹³è¡¡äºŒå‰æ ‘ã€‚" class="headerlink" title="åˆ¤æ–­å¹³è¡¡äºŒå‰æ ‘ã€‚"></a>åˆ¤æ–­å¹³è¡¡äºŒå‰æ ‘ã€‚</h3><h3 id="1äº¿æ•°æ®å–top10-ï¼Œ-1äº¿æ•°æ®å–å‡ºç°é¢‘ç‡top10ï¼Œ1äº¿URLå–å‡ºé‡å¤URL"><a href="#1äº¿æ•°æ®å–top10-ï¼Œ-1äº¿æ•°æ®å–å‡ºç°é¢‘ç‡top10ï¼Œ1äº¿URLå–å‡ºé‡å¤URL" class="headerlink" title="1äº¿æ•°æ®å–top10 ï¼Œ 1äº¿æ•°æ®å–å‡ºç°é¢‘ç‡top10ï¼Œ1äº¿URLå–å‡ºé‡å¤URL"></a>1äº¿æ•°æ®å–top10 ï¼Œ 1äº¿æ•°æ®å–å‡ºç°é¢‘ç‡top10ï¼Œ1äº¿URLå–å‡ºé‡å¤URL</h3><h3 id="æœ‰åºæ•°ç»„è½¬äºŒå‰æœç´¢æ ‘"><a href="#æœ‰åºæ•°ç»„è½¬äºŒå‰æœç´¢æ ‘" class="headerlink" title="æœ‰åºæ•°ç»„è½¬äºŒå‰æœç´¢æ ‘"></a>æœ‰åºæ•°ç»„è½¬äºŒå‰æœç´¢æ ‘</h3><h3 id="è®¾è®¡é˜»å¡é˜Ÿåˆ—ï¼ˆä¸èƒ½ç”¨JDKçš„api"><a href="#è®¾è®¡é˜»å¡é˜Ÿåˆ—ï¼ˆä¸èƒ½ç”¨JDKçš„api" class="headerlink" title="è®¾è®¡é˜»å¡é˜Ÿåˆ—ï¼ˆä¸èƒ½ç”¨JDKçš„api"></a>è®¾è®¡é˜»å¡é˜Ÿåˆ—ï¼ˆä¸èƒ½ç”¨JDKçš„api</h3><h3 id="äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿæ‰‹å†™ä¸€ä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿæ‰‹å†™ä¸€ä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿæ‰‹å†™ä¸€ä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼"></a>äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿæ‰‹å†™ä¸€ä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼</h3><h3 id="æ‰‹æ’•sql"><a href="#æ‰‹æ’•sql" class="headerlink" title="æ‰‹æ’•sql"></a>æ‰‹æ’•sql</h3><h3 id="åè½¬é“¾è¡¨"><a href="#åè½¬é“¾è¡¨" class="headerlink" title="åè½¬é“¾è¡¨"></a>åè½¬é“¾è¡¨</h3><h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2>]]></content>
      <categories>
        <category>é¢è¯•å‡†å¤‡</category>
      </categories>
      <tags>
        <tag>programming language</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVA</title>
    <url>/2020/07/28/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9AJAVA/</url>
    <content><![CDATA[<h2 id="é¢å‘å¯¹è±¡æœ‰å“ªäº›ç‰¹å¾ï¼Ÿè§£é‡Šä¸€ä¸‹"><a href="#é¢å‘å¯¹è±¡æœ‰å“ªäº›ç‰¹å¾ï¼Ÿè§£é‡Šä¸€ä¸‹" class="headerlink" title="é¢å‘å¯¹è±¡æœ‰å“ªäº›ç‰¹å¾ï¼Ÿè§£é‡Šä¸€ä¸‹"></a>é¢å‘å¯¹è±¡æœ‰å“ªäº›ç‰¹å¾ï¼Ÿè§£é‡Šä¸€ä¸‹</h2><p>é¢å‘å¯¹è±¡ä¸»è¦æœ‰å››å¤§ç‰¹æ€§ï¼š<em>æŠ½è±¡ã€å°è£…ã€ç»§æ‰¿å’Œå¤šæ€</em>ã€‚<br>OOå¼€å‘èŒƒå¼å¤§è‡´ä¸ºï¼š<strong>åˆ’åˆ†å¯¹è±¡â†’æŠ½è±¡ç±»â†’å°†ç±»ç»„ç»‡æˆä¸ºå±‚æ¬¡åŒ–ç»“æ„(ç»§æ‰¿å’Œåˆæˆ) â†’ç”¨ç±»ä¸å®ä¾‹è¿›è¡Œè®¾è®¡å’Œå®ç°å‡ ä¸ªé˜¶æ®µã€‚</strong><a id="more"></a></p>
<blockquote>
<p>  <a href="https://juejin.im/entry/59f292635188254115701364">https://juejin.im/entry/59f292635188254115701364</a><br>    <a href="https://blog.csdn.net/cancan8538/article/details/8057095">https://blog.csdn.net/cancan8538/article/details/8057095</a></p>
</blockquote>
<ol>
<li>æŠ½è±¡å°±æ˜¯å°†ä¸€ç±»å®ä½“çš„å…±åŒç‰¹æ€§æŠ½è±¡å‡ºæ¥ï¼Œå°è£…åœ¨ä¸€ä¸ªæ–°çš„æ¦‚å¿µ(ç±») ä¸­ï¼Œæ‰€ä»¥æŠ½è±¡æ˜¯é¢å‘å¯¹è±¡è¯­è¨€çš„åŸºç¡€ã€‚</li>
<li>å°è£…ç‰¹æ€§æ˜¯ç”±ç±»æ¥ä½“ç°çš„ã€‚å°†ç°å®ç”Ÿæ´»ä¸­çš„ä¸€ç±»å®ä½“å®šä¹‰æˆç±»ï¼Œå…¶ä¸­åŒ…æ‹¬å±æ€§å’Œè¡Œä¸ºï¼ˆåœ¨Javaä¸­å°±æ˜¯æ–¹æ³•ï¼‰ã€‚</li>
<li>ä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿å¦ä¸€ä¸ªç±»çš„ä¸€äº›ç‰¹æ€§ï¼Œä»è€Œå¯ä»¥ä»£ç é‡ç”¨ï¼Œå…¶å®ç»§æ‰¿ä½“ç°çš„æ˜¯is-aå…³ç³»ï¼Œçˆ¶ç±»å’Œå­ç±»åœ¨æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ç±»å®ä½“ã€‚ç»§æ‰¿æ˜¯ä¸€ä¸ªå¯¹è±¡è·å¾—å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§çš„è¿‡ç¨‹ï¼Œä½¿ä¸€ä¸ªå¯¹è±¡æˆä¸ºä¸€ä¸ªæ›´å…·é€šç”¨ç±»çš„ä¸€ä¸ªç‰¹å®šå®ä¾‹ï¼ˆå¯ä¼ é€’å¯æ‰©å±•ã€å¯å¤ç”¨ã€å¯ç»´æŠ¤ï¼‰é€šè¿‡ç»§æ‰¿åˆ›å»ºçš„æ–°ç±»ç§°ä¸ºâ€œå­ç±»â€æˆ–â€œæ´¾ç”Ÿç±»â€ï¼›è¢«ç»§æ‰¿çš„ç±»ç§°ä¸ºâ€œåŸºç±»â€ã€â€œçˆ¶ç±»â€æˆ–â€œè¶…ç±»â€ã€‚</li>
<li>å¤šæ€æ˜¯å…è®¸ä¸€ä¸ªæ¥å£è¢«å¤šä¸ªåŒç±»åŠ¨ä½œä½¿ç”¨çš„ç‰¹æ€§ï¼Œå…·ä½“ä½¿ç”¨å“ªä¸ªåŠ¨ä½œä¸åº”ç”¨åœºåˆæœ‰å…³ã€‚å¤šæ€å°±æ˜¯é€šè¿‡ä¼ é€’ç»™çˆ¶ç±»å¯¹è±¡å¼•ç”¨ä¸åŒçš„å­ç±»å¯¹è±¡ä»è€Œè¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼Œå¤šæ€å¯ä¸ºç¨‹åºæä¾›æ›´å¥½çš„å¯æ‰©å±•æ€§ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ä»£ç é‡ç”¨ã€‚<br>â€œå‘ä¸Šè½¬å‹â€: Animal a = new Dog(); å®šä¹‰äº†ä¸€ä¸ªAnimalç±»å‹çš„å¼•ç”¨ï¼ŒæŒ‡å‘æ–°å»ºçš„Dogç±»å‹çš„å¯¹è±¡ã€‚<strong>çˆ¶ç±»å¼•ç”¨aå¯ä»¥ç›´æ¥è°ƒç”¨Animalä¸­æœªè¢«dogé‡å†™(override)çš„æ–¹æ³•ï¼Œè°ƒç”¨è¢«é‡å†™çš„æ–¹æ³•æ—¶ä¼šè°ƒç”¨å­ç±»ä¸­çš„è¿™ä¸ªæ–¹æ³•ï¼Œè¿™å°±æ˜¯åŠ¨æ€è¿æ¥ã€‚</strong>è¿™æ ·çš„å‡½æ•°è°ƒç”¨åœ¨ç¼–è¯‘æœŸé—´æ˜¯æ— æ³•ç¡®å®šçš„ï¼ˆè°ƒç”¨çš„å­ç±»çš„è™šå‡½æ•°çš„åœ°å€æ— æ³•ç»™å‡ºï¼‰ã€‚å½“éœ€è¦åœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»çš„è¢«é‡å†™æ–¹æ³•æ—¶ï¼Œè¦ä½¿ç”¨ super å…³é”®å­—ã€‚</li>
</ol>
<p>æ³¨æ„ï¼šé‡è½½(overloading) æ˜¯åœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼Œæ–¹æ³•åå­—ç›¸åŒï¼Œè€Œå‚æ•°ä¸åŒã€‚è¿”å›ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒã€‚ç¼–è¯‘å™¨æ ¹æ®å‡½æ•°ä¸åŒçš„å‚æ•°è¡¨ï¼Œå¯¹åŒåå‡½æ•°çš„åç§°åšä¿®é¥°ï¼Œç„¶åè¿™äº›åŒåå‡½æ•°å°±æˆäº†ä¸åŒçš„å‡½æ•°ï¼ˆå¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼‰ã€‚å¯¹äºè¿™ä¸¤ä¸ªå‡½æ•°çš„è°ƒç”¨ï¼Œåœ¨ç¼–è¯‘å™¨é—´å°±å·²ç»ç¡®å®šäº†ï¼Œæ˜¯é™æ€çš„ï¼ˆè®°ä½ï¼šæ˜¯é™æ€ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬çš„åœ°å€åœ¨ç¼–è¯‘æœŸå°±ç»‘å®šäº†ï¼ˆæ—©ç»‘å®šï¼‰ï¼Œå› æ­¤ï¼Œé‡è½½åªæ˜¯ä¸€ç§è¯­è¨€ç‰¹æ€§ï¼Œä¸å¤šæ€æ— å…³ï¼Œä¸é¢å‘å¯¹è±¡ä¹Ÿæ— å…³ã€‚<strong>æ— æ³•ä»¥è¿”å›å€¼ç±»å‹ä½œä¸ºé‡è½½å‡½æ•°çš„åŒºåˆ†æ ‡å‡†ã€‚</strong></p>
<h2 id="Javaé›†åˆæ¡†æ¶"><a href="#Javaé›†åˆæ¡†æ¶" class="headerlink" title="Javaé›†åˆæ¡†æ¶"></a>Javaé›†åˆæ¡†æ¶</h2><blockquote>
<p>  <a href="https://www.runoob.com/java/java-collections.html">https://www.runoob.com/java/java-collections.html</a></p>
</blockquote>
<p>é›†åˆæ¡†æ¶æ˜¯ä¸€ä¸ªç”¨æ¥ä»£è¡¨å’Œæ“çºµé›†åˆçš„ç»Ÿä¸€æ¶æ„ã€‚æ‰€æœ‰çš„é›†åˆæ¡†æ¶éƒ½åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š<br>    æ¥å£ï¼šæ˜¯ä»£è¡¨é›†åˆçš„æŠ½è±¡æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ Collectionã€Listã€Setã€Map ç­‰ã€‚ä¹‹æ‰€ä»¥å®šä¹‰å¤šä¸ªæ¥å£ï¼Œæ˜¯ä¸ºäº†ä»¥ä¸åŒçš„æ–¹å¼æ“ä½œé›†åˆå¯¹è±¡<br>    å®ç°ï¼ˆç±»ï¼‰ï¼šæ˜¯é›†åˆæ¥å£çš„å…·ä½“å®ç°ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå®ƒä»¬æ˜¯å¯é‡å¤ä½¿ç”¨çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ï¼šArrayListã€LinkedListã€HashSetã€HashMapã€‚<br>    ç®—æ³•ï¼šæ˜¯å®ç°é›†åˆæ¥å£çš„å¯¹è±¡é‡Œçš„æ–¹æ³•æ‰§è¡Œçš„ä¸€äº›æœ‰ç”¨çš„è®¡ç®—ï¼Œä¾‹å¦‚ï¼šæœç´¢å’Œæ’åºã€‚è¿™äº›ç®—æ³•è¢«ç§°ä¸ºå¤šæ€ï¼Œé‚£æ˜¯å› ä¸ºç›¸åŒçš„æ–¹æ³•å¯ä»¥åœ¨ç›¸ä¼¼çš„æ¥å£ä¸Šæœ‰ç€ä¸åŒçš„å®ç°ã€‚</p>
<h3 id="æ¥å£å’ŒæŠ½è±¡ç±»åŒºåˆ«"><a href="#æ¥å£å’ŒæŠ½è±¡ç±»åŒºåˆ«" class="headerlink" title="æ¥å£å’ŒæŠ½è±¡ç±»åŒºåˆ«"></a>æ¥å£å’ŒæŠ½è±¡ç±»åŒºåˆ«</h3><blockquote>
<p>  <a href="https://www.cnblogs.com/dolphin0520/p/3811437.html">https://www.cnblogs.com/dolphin0520/p/3811437.html</a><br>    <a href="https://www.jianshu.com/p/038f0b356e9a">https://www.jianshu.com/p/038f0b356e9a</a></p>
</blockquote>
<p>æŠ½è±¡æ–¹æ³•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ï¼šå®ƒåªæœ‰å£°æ˜ï¼Œè€Œæ²¡æœ‰å…·ä½“çš„å®ç°ï¼šabstract void fun();å› ä¸ºæŠ½è±¡ç±»ä¸­å«æœ‰æ— å…·ä½“å®ç°çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æŠ½è±¡ç±»åˆ›å»ºå¯¹è±¡ã€‚åŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»ç§°ä¸º<em>æŠ½è±¡ç±»</em>ï¼ŒæŠ½è±¡æ–¹æ³•å¿…é¡»ä¸ºpublicæˆ–è€…protectedï¼ˆå› ä¸ºå¦‚æœä¸ºprivateï¼Œåˆ™ä¸èƒ½è¢«å­ç±»ç»§æ‰¿ï¼Œå­ç±»ä¾¿æ— æ³•å®ç°è¯¥æ–¹æ³•ï¼‰ï¼Œç¼ºçœæƒ…å†µä¸‹é»˜è®¤ä¸ºpublicï¼›æŠ½è±¡ç±»ä¸èƒ½ç”¨æ¥åˆ›å»ºå¯¹è±¡ï¼›å¦‚æœä¸€ä¸ªç±»ç»§æ‰¿äºä¸€ä¸ªæŠ½è±¡ç±»ï¼Œåˆ™å­ç±»å¿…é¡»å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ã€‚å¦‚æœå­ç±»æ²¡æœ‰å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œåˆ™å¿…é¡»å°†å­ç±»ä¹Ÿå®šä¹‰ä¸ºä¸ºabstractç±»ã€‚<br><em>æ¥å£</em>æ³›æŒ‡ä¾›åˆ«äººè°ƒç”¨çš„æ–¹æ³•æˆ–è€…å‡½æ•°ã€‚æ¥å£ä¸­çš„å˜é‡ä¼šè¢«éšå¼åœ°æŒ‡å®šä¸ºpublic static finalå˜é‡ï¼Œæ–¹æ³•ä¼šè¢«éšå¼åœ°æŒ‡å®šä¸ºpublic abstractæ–¹æ³•ï¼Œå¹¶ä¸”æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•ä¸èƒ½æœ‰å…·ä½“çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æ¥å£ä¸­çš„æ–¹æ³•å¿…é¡»éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ã€‚</strong>å¯ä»¥çœ‹å‡ºï¼Œæ¥å£æ˜¯ä¸€ç§æåº¦æŠ½è±¡çš„ç±»å‹ã€‚<br><strong>å…è®¸ä¸€ä¸ªç±»å®ç°(implements)å¤šä¸ªç‰¹å®šçš„æ¥å£ã€‚</strong><br><strong>å¦‚æœä¸€ä¸ªéæŠ½è±¡ç±»å®ç°(implements)æŸä¸ªæ¥å£ï¼Œå°±å¿…é¡»å®ç°è¯¥æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚</strong><br>å¯¹äºå®ç°(implements)æŸä¸ªæ¥å£çš„æŠ½è±¡ç±»ï¼Œå¯ä»¥ä¸å®ç°è¯¥æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚</p>
<ol>
<li>æŠ½è±¡ç±»å¯ä»¥æœ‰é»˜è®¤çš„æ–¹æ³•å®ç°å®Œå…¨æ˜¯æŠ½è±¡çš„ã€‚æ¥å£æ ¹æœ¬ä¸å­˜åœ¨æ–¹æ³•çš„å®ç°ã€‚</li>
<li>æŠ½è±¡ç±»ä½¿ç”¨extendså…³é”®å­—æ¥ç»§æ‰¿æŠ½è±¡ç±»ã€‚å¦‚æœå­ç±»ä¸æ˜¯æŠ½è±¡ç±»çš„è¯ï¼Œå®ƒéœ€è¦æä¾›æŠ½è±¡ç±»ä¸­æ‰€æœ‰å£°æ˜çš„æ–¹æ³•çš„å®ç°ã€‚å­ç±»ä½¿ç”¨å…³é”®å­—implementsæ¥å®ç°æ¥å£ã€‚å®ƒéœ€è¦æä¾›æ¥å£ä¸­æ‰€æœ‰å£°æ˜çš„æ–¹æ³•çš„å®ç°ã€‚</li>
<li>æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å™¨ï¼Œè€Œæ¥å£ä¸èƒ½æœ‰æ„é€ å™¨ã€‚</li>
<li>æŠ½è±¡æ–¹æ³•å¯ä»¥æœ‰publicã€protectedå’Œdefaultè¿™äº›ä¿®é¥°ç¬¦ ;æ¥å£æ–¹æ³•é»˜è®¤ä¿®é¥°ç¬¦æ˜¯publicï¼Œä¸å¯ä»¥ä½¿ç”¨å…¶å®ƒä¿®é¥°ç¬¦ã€‚</li>
<li>æŠ½è±¡ç±»åœ¨javaè¯­è¨€ä¸­æ‰€è¡¨ç¤ºçš„æ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œä¸€ä¸ªå­ç±»åªèƒ½å­˜åœ¨ä¸€ä¸ªçˆ¶ç±»ï¼Œä½†æ˜¯å¯ä»¥å­˜åœ¨å¤šä¸ªæ¥å£ã€‚</li>
<li>æŠ½è±¡æ–¹æ³•æ¯”æ¥å£é€Ÿåº¦è¦å¿«ï¼Œæ¥å£æ˜¯ç¨å¾®æœ‰ç‚¹æ…¢çš„ï¼Œå› ä¸ºå®ƒéœ€è¦æ—¶é—´å»å¯»æ‰¾åœ¨ç±»ä¸­å®ç°çš„æ–¹æ³•ã€‚</li>
<li>å¦‚æœä½ å¾€æŠ½è±¡ç±»ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œä½ å¯ä»¥ç»™å®ƒæä¾›é»˜è®¤çš„å®ç°ã€‚å› æ­¤ä½ ä¸éœ€è¦æ”¹å˜ä½ ç°åœ¨çš„ä»£ç ã€‚å¦‚æœä½ å¾€æ¥å£ä¸­æ·»åŠ æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å¿…é¡»æ”¹å˜å®ç°è¯¥æ¥å£çš„ç±»ã€‚</li>
</ol>
<h3 id="ã€é«˜é¢‘ã€‘-ç±»åŠ è½½è¿‡ç¨‹"><a href="#ã€é«˜é¢‘ã€‘-ç±»åŠ è½½è¿‡ç¨‹" class="headerlink" title="ã€é«˜é¢‘ã€‘ ç±»åŠ è½½è¿‡ç¨‹"></a>ã€é«˜é¢‘ã€‘ ç±»åŠ è½½è¿‡ç¨‹</h3><p> åŠ è½½ï¼Œè¿æ¥ï¼Œåˆå§‹åŒ– </p>
<h3 id="æœ‰å“ªäº›ç±»åŠ è½½å™¨ï¼Œèƒ½å¦è‡ªå®šä¹‰-Java-Object-String-çš„ç±»åŠ è½½å™¨-ï¼Ÿ"><a href="#æœ‰å“ªäº›ç±»åŠ è½½å™¨ï¼Œèƒ½å¦è‡ªå®šä¹‰-Java-Object-String-çš„ç±»åŠ è½½å™¨-ï¼Ÿ" class="headerlink" title="æœ‰å“ªäº›ç±»åŠ è½½å™¨ï¼Œèƒ½å¦è‡ªå®šä¹‰ Java.Object.String çš„ç±»åŠ è½½å™¨ ï¼Ÿ"></a>æœ‰å“ªäº›ç±»åŠ è½½å™¨ï¼Œèƒ½å¦è‡ªå®šä¹‰ Java.Object.String çš„ç±»åŠ è½½å™¨ ï¼Ÿ</h3><h3 id="åŒäº²å§”æ´¾æœºåˆ¶ä»‹ç»-amp-ä½œç”¨"><a href="#åŒäº²å§”æ´¾æœºåˆ¶ä»‹ç»-amp-ä½œç”¨" class="headerlink" title="åŒäº²å§”æ´¾æœºåˆ¶ä»‹ç» &amp; ä½œç”¨"></a>åŒäº²å§”æ´¾æœºåˆ¶ä»‹ç» &amp; ä½œç”¨</h3><p>ç±»åŠ è½½å™¨åŠ è½½ç±»æ—¶å…ˆå§”æ´¾ç»™çˆ¶ç±»åŠ è½½ï¼Œåªæœ‰çˆ¶ç±»æ— æ³•åŠ è½½æ—¶ï¼Œè‡ªå·±æ‰å°è¯•åŠ è½½ã€‚<br>ä¿è¯javaç±»åº“ä¸­çš„ç±»ä¸å—ç”¨æˆ·ç±»å½±å“ï¼Œé˜²æ­¢ç”¨æˆ·è‡ªå®šä¹‰ä¸€ä¸ªç±»åº“ä¸­çš„åŒåç±»ï¼Œå¼•èµ·é—®é¢˜ã€‚</p>
<h2 id="æºç -amp-åŸç†-amp-å¯¹æ¯”ï¼šarraylistã€linkedlistã€vector"><a href="#æºç -amp-åŸç†-amp-å¯¹æ¯”ï¼šarraylistã€linkedlistã€vector" class="headerlink" title="æºç &amp;åŸç†&amp;å¯¹æ¯”ï¼šarraylistã€linkedlistã€vector"></a>æºç &amp;åŸç†&amp;å¯¹æ¯”ï¼šarraylistã€linkedlistã€vector</h2><h2 id="JVMç›¸å…³é—®é¢˜"><a href="#JVMç›¸å…³é—®é¢˜" class="headerlink" title="JVMç›¸å…³é—®é¢˜"></a>JVMç›¸å…³é—®é¢˜</h2><h3 id="JOOM-å¦‚ä½•å®šä½"><a href="#JOOM-å¦‚ä½•å®šä½" class="headerlink" title="JOOM å¦‚ä½•å®šä½"></a>JOOM å¦‚ä½•å®šä½</h3><h3 id="è¯´å‡ ä¸ªè™šæ‹ŸæœºæŒ‡ä»¤ä»¥åŠè™šæ‹Ÿæœºæ ˆå¯èƒ½ä¼šå‘ç”Ÿä»€ä¹ˆé”™è¯¯"><a href="#è¯´å‡ ä¸ªè™šæ‹ŸæœºæŒ‡ä»¤ä»¥åŠè™šæ‹Ÿæœºæ ˆå¯èƒ½ä¼šå‘ç”Ÿä»€ä¹ˆé”™è¯¯" class="headerlink" title="è¯´å‡ ä¸ªè™šæ‹ŸæœºæŒ‡ä»¤ä»¥åŠè™šæ‹Ÿæœºæ ˆå¯èƒ½ä¼šå‘ç”Ÿä»€ä¹ˆé”™è¯¯"></a>è¯´å‡ ä¸ªè™šæ‹ŸæœºæŒ‡ä»¤ä»¥åŠè™šæ‹Ÿæœºæ ˆå¯èƒ½ä¼šå‘ç”Ÿä»€ä¹ˆé”™è¯¯</h3><h3 id="å››ç§å¼•ç”¨ç±»å‹"><a href="#å››ç§å¼•ç”¨ç±»å‹" class="headerlink" title="å››ç§å¼•ç”¨ç±»å‹"></a>å››ç§å¼•ç”¨ç±»å‹</h3><h3 id="jvm-çš„å±€éƒ¨å˜é‡è¡¨æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"><a href="#jvm-çš„å±€éƒ¨å˜é‡è¡¨æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="jvm çš„å±€éƒ¨å˜é‡è¡¨æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"></a>jvm çš„å±€éƒ¨å˜é‡è¡¨æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</h3><p>å­˜å‚¨å±€éƒ¨å˜é‡ã€å‡½æ•°è°ƒç”¨æ—¶ä¼ é€’å‚æ•°ï¼Œå¾ˆå¤šå­—èŠ‚ç æŒ‡ä»¤éƒ½æ˜¯å¯¹å±€éƒ¨å˜é‡è¡¨å’Œæ“ä½œæ•°æ ˆè¿›è¡Œæ“ä½œçš„ã€‚</p>
<h2 id="staticå˜é‡ä»€ä¹ˆä½œç”¨ï¼Œæ”¾åœ¨å“ªé‡Œ"><a href="#staticå˜é‡ä»€ä¹ˆä½œç”¨ï¼Œæ”¾åœ¨å“ªé‡Œ" class="headerlink" title="staticå˜é‡ä»€ä¹ˆä½œç”¨ï¼Œæ”¾åœ¨å“ªé‡Œ"></a>staticå˜é‡ä»€ä¹ˆä½œç”¨ï¼Œæ”¾åœ¨å“ªé‡Œ</h2><h2 id="çº¿ç¨‹æ± çš„æ‰§è¡Œè¿‡ç¨‹ã€æ ¸å¿ƒå‚æ•°ä»¥åŠå¸¸ç”¨çš„å‡ ä¸ªçº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± çš„æ‰§è¡Œè¿‡ç¨‹ã€æ ¸å¿ƒå‚æ•°ä»¥åŠå¸¸ç”¨çš„å‡ ä¸ªçº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± çš„æ‰§è¡Œè¿‡ç¨‹ã€æ ¸å¿ƒå‚æ•°ä»¥åŠå¸¸ç”¨çš„å‡ ä¸ªçº¿ç¨‹æ± "></a>çº¿ç¨‹æ± çš„æ‰§è¡Œè¿‡ç¨‹ã€æ ¸å¿ƒå‚æ•°ä»¥åŠå¸¸ç”¨çš„å‡ ä¸ªçº¿ç¨‹æ± </h2><h2 id="Javaå†…å­˜åŒºåŸŸ-ï¼š"><a href="#Javaå†…å­˜åŒºåŸŸ-ï¼š" class="headerlink" title="Javaå†…å­˜åŒºåŸŸ   ï¼š"></a>Javaå†…å­˜åŒºåŸŸ   ï¼š</h2><p>ç¨‹åºè®¡æ•°å™¨ ï¼Œ è™šæ‹Ÿæœºæ ˆ ï¼Œæœ¬åœ°æ–¹æ³•æ ˆ ï¼Œ å † ï¼Œæ–¹æ³•åŒº ï¼Œå…ƒç©ºé—´ </p>
<h3 id="è®²ä¸€ä¸‹-volatile-ã€‚"><a href="#è®²ä¸€ä¸‹-volatile-ã€‚" class="headerlink" title="è®²ä¸€ä¸‹ volatile ã€‚"></a>è®²ä¸€ä¸‹ volatile ã€‚</h3><p>å†…å­˜å¯è§æ€§ã€æŒ‡ä»¤é‡æ’ã€32ä½jvmå¯¹64æ•°æ®çš„åŸå­æ“ä½œä»€ä¹ˆçš„</p>
<h3 id="volatile-å¯ä»¥ä¿è¯å¹¶å‘è®¡æ•°æ­£ç¡®æ€§ï¼Ÿ"><a href="#volatile-å¯ä»¥ä¿è¯å¹¶å‘è®¡æ•°æ­£ç¡®æ€§ï¼Ÿ" class="headerlink" title="volatile å¯ä»¥ä¿è¯å¹¶å‘è®¡æ•°æ­£ç¡®æ€§ï¼Ÿ"></a>volatile å¯ä»¥ä¿è¯å¹¶å‘è®¡æ•°æ­£ç¡®æ€§ï¼Ÿ</h3><p>ä¸èƒ½</p>
<h3 id="å¦‚æœéœ€è¦ä¿è¯å¹¶å‘è®¡æ•°æ­£ç¡®æ€ä¹ˆåŠï¼Œåªèƒ½åŠ é”å—ï¼Ÿ"><a href="#å¦‚æœéœ€è¦ä¿è¯å¹¶å‘è®¡æ•°æ­£ç¡®æ€ä¹ˆåŠï¼Œåªèƒ½åŠ é”å—ï¼Ÿ" class="headerlink" title="å¦‚æœéœ€è¦ä¿è¯å¹¶å‘è®¡æ•°æ­£ç¡®æ€ä¹ˆåŠï¼Œåªèƒ½åŠ é”å—ï¼Ÿ"></a>å¦‚æœéœ€è¦ä¿è¯å¹¶å‘è®¡æ•°æ­£ç¡®æ€ä¹ˆåŠï¼Œåªèƒ½åŠ é”å—ï¼Ÿ</h3><p>è®¡æ•°æ˜¯ä¸ªè½»é‡çº§çš„æ“ä½œï¼Œjava æœ‰åŸå­å˜é‡ï¼Œäºæ˜¯è¯´ AtomicIntegerã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆåŸå­å˜é‡èƒ½ä¿è¯é«˜æ•ˆæ­£ç¡®è®¡æ•°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆåŸå­å˜é‡èƒ½ä¿è¯é«˜æ•ˆæ­£ç¡®è®¡æ•°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆåŸå­å˜é‡èƒ½ä¿è¯é«˜æ•ˆæ­£ç¡®è®¡æ•°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆåŸå­å˜é‡èƒ½ä¿è¯é«˜æ•ˆæ­£ç¡®è®¡æ•°ï¼Ÿ</h3><h2 id="åƒåœ¾å›æ”¶ï¼šJVM-GCçš„ä¸€æ•´å¥—-ç®—æ³•ã€åˆ†åŒºã€åˆ¤æ–­æ–¹æ³•ã€GCå™¨"><a href="#åƒåœ¾å›æ”¶ï¼šJVM-GCçš„ä¸€æ•´å¥—-ç®—æ³•ã€åˆ†åŒºã€åˆ¤æ–­æ–¹æ³•ã€GCå™¨" class="headerlink" title="åƒåœ¾å›æ”¶ï¼šJVM GCçš„ä¸€æ•´å¥—(ç®—æ³•ã€åˆ†åŒºã€åˆ¤æ–­æ–¹æ³•ã€GCå™¨)"></a>åƒåœ¾å›æ”¶ï¼šJVM GCçš„ä¸€æ•´å¥—(ç®—æ³•ã€åˆ†åŒºã€åˆ¤æ–­æ–¹æ³•ã€GCå™¨)</h2><p>ä¸ºæ–°ç”Ÿæˆçš„å¯¹è±¡åˆ†é…å†…å­˜,è¯†åˆ«é‚£äº›åƒåœ¾å¯¹è±¡ï¼Œå¹¶ä¸”ä»åƒåœ¾å¯¹è±¡é‚£å›æ”¶å†…å­˜</p>
<h3 id="ã€é«˜é¢‘ã€‘-åˆ¤æ–­å¯¹è±¡æ­»äº¡çš„æ–¹æ³•-ï¼š-å¼•ç”¨è®¡æ•°æ³•-ï¼Œå¯è¾¾åˆ†æç®—æ³•"><a href="#ã€é«˜é¢‘ã€‘-åˆ¤æ–­å¯¹è±¡æ­»äº¡çš„æ–¹æ³•-ï¼š-å¼•ç”¨è®¡æ•°æ³•-ï¼Œå¯è¾¾åˆ†æç®—æ³•" class="headerlink" title="ã€é«˜é¢‘ã€‘ åˆ¤æ–­å¯¹è±¡æ­»äº¡çš„æ–¹æ³• ï¼š { å¼•ç”¨è®¡æ•°æ³• ï¼Œå¯è¾¾åˆ†æç®—æ³• }"></a>ã€é«˜é¢‘ã€‘ åˆ¤æ–­å¯¹è±¡æ­»äº¡çš„æ–¹æ³• ï¼š { å¼•ç”¨è®¡æ•°æ³• ï¼Œå¯è¾¾åˆ†æç®—æ³• }</h3><h3 id="åƒåœ¾æ”¶é›†ç®—æ³•-ï¼š"><a href="#åƒåœ¾æ”¶é›†ç®—æ³•-ï¼š" class="headerlink" title="åƒåœ¾æ”¶é›†ç®—æ³•  ï¼š"></a>åƒåœ¾æ”¶é›†ç®—æ³•  ï¼š</h3><p> { æ ‡è®°æ¸…é™¤ç®—æ³• ã€æ ‡è®°æ•´ç†ç®—æ³• ã€ å¤åˆ¶ç®—æ³•ã€ åˆ†ä»£æ”¶é›†ç®—æ³• }<br>æ·±å…¥ä¸€äº›ï¼š å„ä¸ªç®—æ³•çš„ä¼˜ç‚¹å’Œé€‚ç”¨åœºæ™¯</p>
<h3 id="åƒåœ¾æ”¶é›†å™¨-ï¼š"><a href="#åƒåœ¾æ”¶é›†å™¨-ï¼š" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨ ï¼š"></a>åƒåœ¾æ”¶é›†å™¨ ï¼š</h3><p> { serial  ã€ parallel ã€ CMS ã€ G1  }</p>
<h3 id="åƒåœ¾å›æ”¶æ€ä¹ˆåˆ¤æ–­å“ªäº›å¯¹è±¡åº”è¯¥å›æ”¶ï¼Ÿ"><a href="#åƒåœ¾å›æ”¶æ€ä¹ˆåˆ¤æ–­å“ªäº›å¯¹è±¡åº”è¯¥å›æ”¶ï¼Ÿ" class="headerlink" title="åƒåœ¾å›æ”¶æ€ä¹ˆåˆ¤æ–­å“ªäº›å¯¹è±¡åº”è¯¥å›æ”¶ï¼Ÿ"></a>åƒåœ¾å›æ”¶æ€ä¹ˆåˆ¤æ–­å“ªäº›å¯¹è±¡åº”è¯¥å›æ”¶ï¼Ÿ</h3><p>å¯è¾¾æ€§åˆ†æï¼Œä» GCRoot å¼€å§‹éå†ï¼Œä¸èƒ½éå†åˆ°çš„å¯¹è±¡å°±å¯ä»¥è®¤ä¸ºå·²ç»æ­»äº†ï¼Œå¯ä»¥å›æ”¶ã€‚</p>
<h3 id="ä»€ä¹ˆå¯ä»¥ä½œä¸ºGCRootï¼Ÿ"><a href="#ä»€ä¹ˆå¯ä»¥ä½œä¸ºGCRootï¼Ÿ" class="headerlink" title="ä»€ä¹ˆå¯ä»¥ä½œä¸ºGCRootï¼Ÿ"></a>ä»€ä¹ˆå¯ä»¥ä½œä¸ºGCRootï¼Ÿ</h3><p>æ–¹æ³•åŒºçš„æ•°æ®å¼•ç”¨ã€å½“å‰ä»£ç å¤„çš„å±€éƒ¨å˜é‡ï¼ŒåŸºæœ¬å°±æ˜¯ç”¨æˆ·èƒ½é€šè¿‡ä»£ç å¼•ç”¨åˆ°çš„ã€‚</p>
<h3 id="Minor-GC-è§¦å‘æ¡ä»¶-ï¼š"><a href="#Minor-GC-è§¦å‘æ¡ä»¶-ï¼š" class="headerlink" title="Minor GC è§¦å‘æ¡ä»¶ ï¼š"></a>Minor GC è§¦å‘æ¡ä»¶ ï¼š</h3><p>edenåŒºå‰©ä½™å†…å­˜æ˜¯å¦è¶³å¤Ÿ ä¸¤ç§æƒ…å†µåˆ†å¼€åˆ†æ</p>
<h3 id="FULL-GC-è§¦å‘æ¡ä»¶-ï¼š"><a href="#FULL-GC-è§¦å‘æ¡ä»¶-ï¼š" class="headerlink" title="FULL GC  è§¦å‘æ¡ä»¶ ï¼š"></a>FULL GC  è§¦å‘æ¡ä»¶ ï¼š</h3><p>Minor GC å¹³å‡æ™‹å‡ç©ºé—´å¤§å° &gt; è€å¹´ä»£è¿ç»­å‰©ä½™ç©ºé—´ï¼Œåˆ™è§¦å‘FULL GC</p>
<h3 id="è®²è®²äº†è§£çš„åƒåœ¾å›æ”¶ç®—æ³•å’Œå›æ”¶å™¨ï¼Œä»€ä¹ˆæ—¶å€™æ‰§è¡ŒSTOP-THE-WORLDï¼Ÿ"><a href="#è®²è®²äº†è§£çš„åƒåœ¾å›æ”¶ç®—æ³•å’Œå›æ”¶å™¨ï¼Œä»€ä¹ˆæ—¶å€™æ‰§è¡ŒSTOP-THE-WORLDï¼Ÿ" class="headerlink" title="è®²è®²äº†è§£çš„åƒåœ¾å›æ”¶ç®—æ³•å’Œå›æ”¶å™¨ï¼Œä»€ä¹ˆæ—¶å€™æ‰§è¡ŒSTOP THE WORLDï¼Ÿ"></a>è®²è®²äº†è§£çš„åƒåœ¾å›æ”¶ç®—æ³•å’Œå›æ”¶å™¨ï¼Œä»€ä¹ˆæ—¶å€™æ‰§è¡ŒSTOP THE WORLDï¼Ÿ</h3><h3 id="CMS-ã€G1-é‡ç‚¹-ï¼Œ-ä»‹ç»å·¥ä½œæµç¨‹å’Œä¼˜ç¼ºç‚¹"><a href="#CMS-ã€G1-é‡ç‚¹-ï¼Œ-ä»‹ç»å·¥ä½œæµç¨‹å’Œä¼˜ç¼ºç‚¹" class="headerlink" title="CMS ã€G1 é‡ç‚¹ ï¼Œ ä»‹ç»å·¥ä½œæµç¨‹å’Œä¼˜ç¼ºç‚¹"></a>CMS ã€G1 é‡ç‚¹ ï¼Œ ä»‹ç»å·¥ä½œæµç¨‹å’Œä¼˜ç¼ºç‚¹</h3><h3 id="å†…å­˜æ³„æ¼"><a href="#å†…å­˜æ³„æ¼" class="headerlink" title="å†…å­˜æ³„æ¼"></a>å†…å­˜æ³„æ¼</h3><p>ä¾‹å­ï¼š { å•ä¾‹ ï¼Œ å®¹å™¨ ç­‰ç­‰}<br>åŸå›  ï¼š é•¿ç”Ÿå‘½å‘¨æœŸæŒæœ‰çŸ­ç”Ÿå‘½å‘¨æœŸå¼•ç”¨</p>
<h3 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h3><p>å¼ºå¼•ç”¨ã€ è½¯å¼•ç”¨ã€ å¼±å¼•ç”¨ ã€ è™šå¼•ç”¨  </p>
<h3 id="å¦‚ä½•é«˜æ•ˆè¿›è¡Œæ•°ç»„æ‹·è´ï¼ˆå…¶å®æ˜¯System-arraycopy-çš„åŸç†"><a href="#å¦‚ä½•é«˜æ•ˆè¿›è¡Œæ•°ç»„æ‹·è´ï¼ˆå…¶å®æ˜¯System-arraycopy-çš„åŸç†" class="headerlink" title="å¦‚ä½•é«˜æ•ˆè¿›è¡Œæ•°ç»„æ‹·è´ï¼ˆå…¶å®æ˜¯System.arraycopy()çš„åŸç†"></a>å¦‚ä½•é«˜æ•ˆè¿›è¡Œæ•°ç»„æ‹·è´ï¼ˆå…¶å®æ˜¯System.arraycopy()çš„åŸç†</h3><h3 id="equals-å’Œ-åŒºåˆ«"><a href="#equals-å’Œ-åŒºåˆ«" class="headerlink" title="equals å’Œ == åŒºåˆ«"></a>equals å’Œ == åŒºåˆ«</h3><h3 id="ä¸ºå•¥é‡å†™equalsè¦é‡å†™hashCode"><a href="#ä¸ºå•¥é‡å†™equalsè¦é‡å†™hashCode" class="headerlink" title="ä¸ºå•¥é‡å†™equalsè¦é‡å†™hashCode()"></a>ä¸ºå•¥é‡å†™equalsè¦é‡å†™hashCode()</h3><p>hashå€¼ç›¸ç­‰ï¼Œè€Œä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šequals</p>
<h3 id="String-StringBuffer-StringBuilder-åŒºåˆ«-å’Œå„è‡ªä½¿ç”¨åœºæ™¯"><a href="#String-StringBuffer-StringBuilder-åŒºåˆ«-å’Œå„è‡ªä½¿ç”¨åœºæ™¯" class="headerlink" title="String StringBuffer StringBuilder  åŒºåˆ« å’Œå„è‡ªä½¿ç”¨åœºæ™¯"></a>String StringBuffer StringBuilder  åŒºåˆ« å’Œå„è‡ªä½¿ç”¨åœºæ™¯</h3><p>æ·±å…¥ä¸€äº› ï¼š String æ˜¯å¦‚ä½•å®ç°å®ƒä¸å¯å˜çš„ï¼Ÿ ä¸ºä»€ä¹ˆè¦è®¾ç½®Stringä¸ºä¸å¯å˜å¯¹è±¡  ?  </p>
<h3 id="æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«"><a href="#æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«" class="headerlink" title="æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«"></a>æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«</h3><h3 id="Objectçš„æ–¹æ³•"><a href="#Objectçš„æ–¹æ³•" class="headerlink" title="Objectçš„æ–¹æ³•"></a>Objectçš„æ–¹æ³•</h3><p>{ finalize ã€ cloneã€ getClass ã€ equals ã€ hashCode }</p>
<h3 id="ã€é«˜é¢‘ã€‘-è®¾è®¡æ¨¡å¼"><a href="#ã€é«˜é¢‘ã€‘-è®¾è®¡æ¨¡å¼" class="headerlink" title="ã€é«˜é¢‘ã€‘ è®¾è®¡æ¨¡å¼"></a>ã€é«˜é¢‘ã€‘ è®¾è®¡æ¨¡å¼</h3><p> {    å•ä¾‹æ¨¡å¼ ã€ å·¥å‚æ¨¡å¼ ã€ è£…é¥°è€…æ¨¡å¼ ã€ ä»£ç†æ¨¡å¼ ã€ ç­–ç•¥æ¨¡å¼ ç­‰ç­‰} ï¼ˆæ­¤å¤„æˆ‘çš„æŒæ¡ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼‰</p>
<h3 id="æ·±å…¥ä¸€äº›"><a href="#æ·±å…¥ä¸€äº›" class="headerlink" title="æ·±å…¥ä¸€äº›"></a>æ·±å…¥ä¸€äº›</h3><p>å•ä¾‹æ¨¡å¼ä¸ºä»€ä¹ˆé‡‡ç”¨åŒæ£€æµ‹æœºåˆ¶ ï¼Ÿ å•ä¾‹ä¸ºä»€ä¹ˆç”¨Volatileä¿®é¥°ï¼Ÿ è£…é¥°æ¨¡å¼å’Œä»£ç†æ¨¡å¼åŒºåˆ«ï¼Ÿ</p>
<h3 id="Bæ ‘æ€ä¹ˆä¿è¯æ¯æ¬¡æ“ä½œå®Œéƒ½å¹³è¡¡çš„ï¼Ÿ"><a href="#Bæ ‘æ€ä¹ˆä¿è¯æ¯æ¬¡æ“ä½œå®Œéƒ½å¹³è¡¡çš„ï¼Ÿ" class="headerlink" title="Bæ ‘æ€ä¹ˆä¿è¯æ¯æ¬¡æ“ä½œå®Œéƒ½å¹³è¡¡çš„ï¼Ÿ"></a>Bæ ‘æ€ä¹ˆä¿è¯æ¯æ¬¡æ“ä½œå®Œéƒ½å¹³è¡¡çš„ï¼Ÿ</h3><p>è·Ÿçº¢é»‘æ ‘è¿˜æ˜¯å·®ä¸å¤ªå¤š</p>
]]></content>
      <categories>
        <category>é¢è¯•å‡†å¤‡</category>
      </categories>
      <tags>
        <tag>programming language</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“</title>
    <url>/2020/07/29/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<h3 id="expolläº†è§£å—"><a href="#expolläº†è§£å—" class="headerlink" title="expolläº†è§£å—"></a>expolläº†è§£å—</h3><h3 id="MVCC"><a href="#MVCC" class="headerlink" title="MVCC"></a>MVCC</h3><h3 id="æ•°æ®åº“äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#æ•°æ®åº“äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="æ•°æ®åº“äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>æ•°æ®åº“äº‹åŠ¡éš”ç¦»çº§åˆ«</h3><h3 id="å¤šäººåŒæ—¶ä½¿ç”¨æ•°æ®åº“çš„æ³¨æ„äº‹é¡¹"><a href="#å¤šäººåŒæ—¶ä½¿ç”¨æ•°æ®åº“çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="å¤šäººåŒæ—¶ä½¿ç”¨æ•°æ®åº“çš„æ³¨æ„äº‹é¡¹"></a>å¤šäººåŒæ—¶ä½¿ç”¨æ•°æ®åº“çš„æ³¨æ„äº‹é¡¹</h3><h3 id="MySQLä¸å…¶ä»–ä¸»æµæ•°æ®åº“ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"><a href="#MySQLä¸å…¶ä»–ä¸»æµæ•°æ®åº“ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="MySQLä¸å…¶ä»–ä¸»æµæ•°æ®åº“ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"></a>MySQLä¸å…¶ä»–ä¸»æµæ•°æ®åº“ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h3><h3 id="äº‹åŠ¡çš„å››å¤§ç‰¹æ€§"><a href="#äº‹åŠ¡çš„å››å¤§ç‰¹æ€§" class="headerlink" title="äº‹åŠ¡çš„å››å¤§ç‰¹æ€§"></a>äº‹åŠ¡çš„å››å¤§ç‰¹æ€§</h3><h3 id="å››ç§éš”ç¦»çº§åˆ«"><a href="#å››ç§éš”ç¦»çº§åˆ«" class="headerlink" title="å››ç§éš”ç¦»çº§åˆ«"></a>å››ç§éš”ç¦»çº§åˆ«</h3><h3 id="ä»€ä¹ˆæ˜¯å¹»è¯»"><a href="#ä»€ä¹ˆæ˜¯å¹»è¯»" class="headerlink" title="ä»€ä¹ˆæ˜¯å¹»è¯»"></a>ä»€ä¹ˆæ˜¯å¹»è¯»</h3><h3 id="InnoDB-æ€ä¹ˆé˜²æ­¢å¹»è¯»"><a href="#InnoDB-æ€ä¹ˆé˜²æ­¢å¹»è¯»" class="headerlink" title="InnoDB æ€ä¹ˆé˜²æ­¢å¹»è¯»"></a>InnoDB æ€ä¹ˆé˜²æ­¢å¹»è¯»</h3><h3 id="B-æ ‘åŸç†ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨B-è€Œä¸æ˜¯äºŒå‰å¹³è¡¡æ ‘"><a href="#B-æ ‘åŸç†ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨B-è€Œä¸æ˜¯äºŒå‰å¹³è¡¡æ ‘" class="headerlink" title="B+æ ‘åŸç†ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨B+è€Œä¸æ˜¯äºŒå‰å¹³è¡¡æ ‘"></a>B+æ ‘åŸç†ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨B+è€Œä¸æ˜¯äºŒå‰å¹³è¡¡æ ‘</h3><h3 id="ä¸ºä»€ä¹ˆè¦åˆ†ç”¨æˆ·æ€å’Œå†…æ ¸æ€"><a href="#ä¸ºä»€ä¹ˆè¦åˆ†ç”¨æˆ·æ€å’Œå†…æ ¸æ€" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆ†ç”¨æˆ·æ€å’Œå†…æ ¸æ€"></a>ä¸ºä»€ä¹ˆè¦åˆ†ç”¨æˆ·æ€å’Œå†…æ ¸æ€</h3><h3 id="ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åŒºåˆ«"><a href="#ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åŒºåˆ«" class="headerlink" title="ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åŒºåˆ«"></a>ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åŒºåˆ«</h3><h3 id="Git-åˆ‡æ¢åˆ†æ”¯ï¼Œæäº¤ï¼Œå…·ä½“å¦‚ä½•åˆå¹¶åˆ†æ”¯"><a href="#Git-åˆ‡æ¢åˆ†æ”¯ï¼Œæäº¤ï¼Œå…·ä½“å¦‚ä½•åˆå¹¶åˆ†æ”¯" class="headerlink" title="Git åˆ‡æ¢åˆ†æ”¯ï¼Œæäº¤ï¼Œå…·ä½“å¦‚ä½•åˆå¹¶åˆ†æ”¯"></a>Git åˆ‡æ¢åˆ†æ”¯ï¼Œæäº¤ï¼Œå…·ä½“å¦‚ä½•åˆå¹¶åˆ†æ”¯</h3><h3 id="æ•°æ®åº“éƒ¨åˆ†çŸ¥è¯†ï¼Œæ‰‹å†™ä¸€ä¸ª-SQL-ï¼ˆå­æŸ¥è¯¢-æ„Ÿè§‰ä¸»è¦çœ‹-group-by-å’Œ-havingï¼‰"><a href="#æ•°æ®åº“éƒ¨åˆ†çŸ¥è¯†ï¼Œæ‰‹å†™ä¸€ä¸ª-SQL-ï¼ˆå­æŸ¥è¯¢-æ„Ÿè§‰ä¸»è¦çœ‹-group-by-å’Œ-havingï¼‰" class="headerlink" title="æ•°æ®åº“éƒ¨åˆ†çŸ¥è¯†ï¼Œæ‰‹å†™ä¸€ä¸ª SQL ï¼ˆå­æŸ¥è¯¢ æ„Ÿè§‰ä¸»è¦çœ‹ group by å’Œ havingï¼‰"></a>æ•°æ®åº“éƒ¨åˆ†çŸ¥è¯†ï¼Œæ‰‹å†™ä¸€ä¸ª SQL ï¼ˆå­æŸ¥è¯¢ æ„Ÿè§‰ä¸»è¦çœ‹ group by å’Œ havingï¼‰</h3><h3 id="MySQLçš„ç´¢å¼•-B-å’ŒBæ ‘çš„åŒºåˆ«ï¼Œä¸ºå•¥ç”¨B-ï¼›"><a href="#MySQLçš„ç´¢å¼•-B-å’ŒBæ ‘çš„åŒºåˆ«ï¼Œä¸ºå•¥ç”¨B-ï¼›" class="headerlink" title="MySQLçš„ç´¢å¼•(B+å’ŒBæ ‘çš„åŒºåˆ«ï¼Œä¸ºå•¥ç”¨B+)ï¼›"></a>MySQLçš„ç´¢å¼•(B+å’ŒBæ ‘çš„åŒºåˆ«ï¼Œä¸ºå•¥ç”¨B+)ï¼›</h3><h3 id="è®©ä½ è®¾è®¡æ•°æ®åº“ä¼šæ³¨æ„ä»€ä¹ˆï¼›"><a href="#è®©ä½ è®¾è®¡æ•°æ®åº“ä¼šæ³¨æ„ä»€ä¹ˆï¼›" class="headerlink" title="è®©ä½ è®¾è®¡æ•°æ®åº“ä¼šæ³¨æ„ä»€ä¹ˆï¼›"></a>è®©ä½ è®¾è®¡æ•°æ®åº“ä¼šæ³¨æ„ä»€ä¹ˆï¼›</h3><h3 id="ã€é«˜é¢‘ã€‘MyISAM-å’Œ-InnoDBçš„åŒºåˆ«"><a href="#ã€é«˜é¢‘ã€‘MyISAM-å’Œ-InnoDBçš„åŒºåˆ«" class="headerlink" title="ã€é«˜é¢‘ã€‘MyISAM å’Œ InnoDBçš„åŒºåˆ«"></a>ã€é«˜é¢‘ã€‘MyISAM å’Œ InnoDBçš„åŒºåˆ«</h3><p>{æ˜¯å¦æ”¯æŒè¡Œé” ã€ æ˜¯å¦æ”¯æŒåäº” ã€ æ˜¯å¦æ”¯æŒ MVCC ã€ åº•å±‚ç´¢å¼•ç»“æ„ä¸åŒ }</p>
<h3 id="updateæ—¶ä»€ä¹ˆé”-next-key-lockï¼Œä½†å”¯ä¸€æ€§ç´¢å¼•æ—¶é™çº§ä¸ºè¡Œé”ï¼Œ"><a href="#updateæ—¶ä»€ä¹ˆé”-next-key-lockï¼Œä½†å”¯ä¸€æ€§ç´¢å¼•æ—¶é™çº§ä¸ºè¡Œé”ï¼Œ" class="headerlink" title="updateæ—¶ä»€ä¹ˆé” (next-key lockï¼Œä½†å”¯ä¸€æ€§ç´¢å¼•æ—¶é™çº§ä¸ºè¡Œé”ï¼Œ"></a>updateæ—¶ä»€ä¹ˆé” (next-key lockï¼Œä½†å”¯ä¸€æ€§ç´¢å¼•æ—¶é™çº§ä¸ºè¡Œé”ï¼Œ</h3><h3 id="Mysql-æ¯”è¾ƒç†Ÿæ‚‰æ˜¯å§ï¼Ÿè¯´ä¸€ä¸‹åº•å±‚æ•°æ®å­˜å‚¨åŸç†ï¼Ÿ"><a href="#Mysql-æ¯”è¾ƒç†Ÿæ‚‰æ˜¯å§ï¼Ÿè¯´ä¸€ä¸‹åº•å±‚æ•°æ®å­˜å‚¨åŸç†ï¼Ÿ" class="headerlink" title="Mysql æ¯”è¾ƒç†Ÿæ‚‰æ˜¯å§ï¼Ÿè¯´ä¸€ä¸‹åº•å±‚æ•°æ®å­˜å‚¨åŸç†ï¼Ÿ"></a>Mysql æ¯”è¾ƒç†Ÿæ‚‰æ˜¯å§ï¼Ÿè¯´ä¸€ä¸‹åº•å±‚æ•°æ®å­˜å‚¨åŸç†ï¼Ÿ</h3><p>å¦‚æœç›´æ¥çº¿æ€§å­˜å‚¨çš„è¯ï¼Œæ¯æ¬¡æŸ¥æ‰¾æ•°æ®éƒ½è¦æ•´ä¸ªéå†ä¸€éï¼Œé‚£ä¹ˆå¤æ‚åº¦å°±æ˜¯log(n)ï¼Œäºæ˜¯å¯ä»¥ç”¨äºŒå‰æ ‘æ¥å­˜å‚¨ï¼ŒæŠŠå¤æ‚åº¦é™ä½åˆ°çº¦log(n)ï¼Œä½†æ˜¯äºŒå‰æ ‘æœ‰ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå®ƒæœ‰å¯èƒ½å› ä¸ºæ’å…¥é¡ºåºçš„é—®é¢˜ï¼Œå˜å¾—ä¸å¹³è¡¡ï¼Œæœ€åæƒ…å†µå°±æ˜¯éƒ½åœ¨èŠ‚ç‚¹ä¸€è¾¹ï¼Œåˆå˜æˆäº†log(n)ï¼Œæ‰€æœ‰å°±é€šè¿‡æ”¹è¿›æ’å…¥å’Œåˆ é™¤ç­‰æ“ä½œï¼Œä¿è¯æ¯æ¬¡æ“ä½œå®Œåæ ‘éƒ½æ˜¯å¹³è¡¡çš„ï¼Œå°±æœ‰äº†Bæ ‘â€¦â€¦</p>
<h3 id="è¯´ä¸€ä¸‹å»ºè¡¨æ—¶ï¼Œå»ºç´¢å¼•æœ‰å“ªäº›è¦æ³¨æ„çš„ã€‚"><a href="#è¯´ä¸€ä¸‹å»ºè¡¨æ—¶ï¼Œå»ºç´¢å¼•æœ‰å“ªäº›è¦æ³¨æ„çš„ã€‚" class="headerlink" title="è¯´ä¸€ä¸‹å»ºè¡¨æ—¶ï¼Œå»ºç´¢å¼•æœ‰å“ªäº›è¦æ³¨æ„çš„ã€‚"></a>è¯´ä¸€ä¸‹å»ºè¡¨æ—¶ï¼Œå»ºç´¢å¼•æœ‰å“ªäº›è¦æ³¨æ„çš„ã€‚</h3><p>é€‰åŒºåˆ†åº¦æ¯”è¾ƒå¤§çš„ï¼Œé€‰æ•°æ®ç±»å‹æ¯”è¾ƒå°çš„æ¯”å¦‚æ•´æ•°è€Œä¸è¦é€‰é•¿å­—ç¬¦ä¸²ï¼Œé€‰whereå­å¥ä¸­å‡ºç°çš„ï¼Œè¦†ç›–ç´¢å¼• balabalaâ€¦â€¦</p>
<h3 id="äº‹åŠ¡ç‰¹æ€§ACID"><a href="#äº‹åŠ¡ç‰¹æ€§ACID" class="headerlink" title="äº‹åŠ¡ç‰¹æ€§ACID"></a>äº‹åŠ¡ç‰¹æ€§ACID</h3><p>æ·±å…¥ä¸€äº› ï¼š ä¸ºä»€ä¹ˆè¦æœ‰ä¸€è‡´æ€§ ï¼Ÿ AIDä¸æ˜¯å·²ç»ä¿è¯äº†ä¸€è‡´æ€§äº†å— ï¼Ÿ</p>
<h3 id="å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜"><a href="#å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜" class="headerlink" title="å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜"></a>å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜</h3><p>{    è„è¯» ã€ ä¿®æ”¹ä¸¢å¤± ã€ ä¸å¯é‡å¤è¯» ã€ å¹»å½±è¯»    }</p>
<h3 id="ã€é«˜é¢‘ã€‘äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#ã€é«˜é¢‘ã€‘äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="ã€é«˜é¢‘ã€‘äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>ã€é«˜é¢‘ã€‘äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h3><h3 id="ã€é«˜é¢‘ã€‘-MVCCæœºåˆ¶"><a href="#ã€é«˜é¢‘ã€‘-MVCCæœºåˆ¶" class="headerlink" title="ã€é«˜é¢‘ã€‘ MVCCæœºåˆ¶"></a>ã€é«˜é¢‘ã€‘ MVCCæœºåˆ¶</h3><h3 id="ã€é«˜é¢‘ã€‘ç´¢å¼•"><a href="#ã€é«˜é¢‘ã€‘ç´¢å¼•" class="headerlink" title="ã€é«˜é¢‘ã€‘ç´¢å¼•"></a>ã€é«˜é¢‘ã€‘ç´¢å¼•</h3><h3 id="ä¸ºä»€ä¹ˆç´¢å¼•ä½¿ç”¨B-æ ‘ç»“æ„ï¼Œè€Œä¸æ˜¯Bæ ‘"><a href="#ä¸ºä»€ä¹ˆç´¢å¼•ä½¿ç”¨B-æ ‘ç»“æ„ï¼Œè€Œä¸æ˜¯Bæ ‘" class="headerlink" title="ä¸ºä»€ä¹ˆç´¢å¼•ä½¿ç”¨B+æ ‘ç»“æ„ï¼Œè€Œä¸æ˜¯Bæ ‘"></a>ä¸ºä»€ä¹ˆç´¢å¼•ä½¿ç”¨B+æ ‘ç»“æ„ï¼Œè€Œä¸æ˜¯Bæ ‘</h3><h3 id="ä¸ºä»€ä¹ˆç´¢å¼•ä½¿ç”¨B-æ ‘ç»“æ„ï¼Œè€Œä¸æ˜¯çº¢é»‘æ ‘-ï¼š"><a href="#ä¸ºä»€ä¹ˆç´¢å¼•ä½¿ç”¨B-æ ‘ç»“æ„ï¼Œè€Œä¸æ˜¯çº¢é»‘æ ‘-ï¼š" class="headerlink" title="ä¸ºä»€ä¹ˆç´¢å¼•ä½¿ç”¨B+æ ‘ç»“æ„ï¼Œè€Œä¸æ˜¯çº¢é»‘æ ‘ ï¼š"></a>ä¸ºä»€ä¹ˆç´¢å¼•ä½¿ç”¨B+æ ‘ç»“æ„ï¼Œè€Œä¸æ˜¯çº¢é»‘æ ‘ ï¼š</h3><p>{  ç£ç›˜é¢„è¯»å– ã€çº¢é»‘æ ‘é«˜åº¦ }</p>
<h3 id="èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•åŒºåˆ«ï¼Ÿ-ä¸»é”®ç´¢å¼•å’ŒäºŒçº§ç´¢å¼•äº†è§£å—ï¼Ÿ"><a href="#èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•åŒºåˆ«ï¼Ÿ-ä¸»é”®ç´¢å¼•å’ŒäºŒçº§ç´¢å¼•äº†è§£å—ï¼Ÿ" class="headerlink" title="èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•åŒºåˆ«ï¼Ÿ ä¸»é”®ç´¢å¼•å’ŒäºŒçº§ç´¢å¼•äº†è§£å—ï¼Ÿ"></a>èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•åŒºåˆ«ï¼Ÿ ä¸»é”®ç´¢å¼•å’ŒäºŒçº§ç´¢å¼•äº†è§£å—ï¼Ÿ</h3><h3 id="ä¸ºä»€ä¹ˆä¸å¯¹æ¯ä¸ªåˆ—åˆ›å»ºç´¢å¼•å‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸å¯¹æ¯ä¸ªåˆ—åˆ›å»ºç´¢å¼•å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸å¯¹æ¯ä¸ªåˆ—åˆ›å»ºç´¢å¼•å‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¸å¯¹æ¯ä¸ªåˆ—åˆ›å»ºç´¢å¼•å‘¢ï¼Ÿ</h3><h3 id="ã€é«˜é¢‘ã€‘SQLè¯­å¥ä¼˜åŒ–-ï¼ŒSQLé¢˜ç›®ï¼ˆå­—èŠ‚è¦æ±‚æ’¸ä»£ç ï¼‰"><a href="#ã€é«˜é¢‘ã€‘SQLè¯­å¥ä¼˜åŒ–-ï¼ŒSQLé¢˜ç›®ï¼ˆå­—èŠ‚è¦æ±‚æ’¸ä»£ç ï¼‰" class="headerlink" title="ã€é«˜é¢‘ã€‘SQLè¯­å¥ä¼˜åŒ– ï¼ŒSQLé¢˜ç›®ï¼ˆå­—èŠ‚è¦æ±‚æ’¸ä»£ç ï¼‰"></a>ã€é«˜é¢‘ã€‘SQLè¯­å¥ä¼˜åŒ– ï¼ŒSQLé¢˜ç›®ï¼ˆå­—èŠ‚è¦æ±‚æ’¸ä»£ç ï¼‰</h3><h3 id="explainä¸­-rows-type-key-extraå­—æ®µçš„å«ä¹‰ï¼Ÿ"><a href="#explainä¸­-rows-type-key-extraå­—æ®µçš„å«ä¹‰ï¼Ÿ" class="headerlink" title="explainä¸­ rows type key extraå­—æ®µçš„å«ä¹‰ï¼Ÿ"></a>explainä¸­ rows type key extraå­—æ®µçš„å«ä¹‰ï¼Ÿ</h3><h3 id="count-1-count-count-åˆ—å€¼-çš„åŒºåˆ«"><a href="#count-1-count-count-åˆ—å€¼-çš„åŒºåˆ«" class="headerlink" title="count(1) count(*) count(åˆ—å€¼)çš„åŒºåˆ«"></a>count(1) count(*) count(åˆ—å€¼)çš„åŒºåˆ«</h3><h3 id="æ•°æ®åº“çš„å…³ç³»æœ‰å“ªäº›ï¼Ÿ"><a href="#æ•°æ®åº“çš„å…³ç³»æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="æ•°æ®åº“çš„å…³ç³»æœ‰å“ªäº›ï¼Ÿ"></a>æ•°æ®åº“çš„å…³ç³»æœ‰å“ªäº›ï¼Ÿ</h3><h3 id="ä¸€å¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿå¤šå¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿ"><a href="#ä¸€å¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿå¤šå¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿ" class="headerlink" title="ä¸€å¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿå¤šå¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿ"></a>ä¸€å¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿå¤šå¯¹å¤šæ€ä¹ˆå®ç°ï¼Ÿ</h3><h3 id="MySQLæ•°æ®åº“æœ‰å“ªäº›ç±»å‹ï¼Ÿè¿™äº›ç±»å‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#MySQLæ•°æ®åº“æœ‰å“ªäº›ç±»å‹ï¼Ÿè¿™äº›ç±»å‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="MySQLæ•°æ®åº“æœ‰å“ªäº›ç±»å‹ï¼Ÿè¿™äº›ç±»å‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>MySQLæ•°æ®åº“æœ‰å“ªäº›ç±»å‹ï¼Ÿè¿™äº›ç±»å‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3>]]></content>
      <categories>
        <category>é¢è¯•å‡†å¤‡</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œ</title>
    <url>/2020/07/27/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</url>
    <content><![CDATA[<h1 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h1><p>é”(lock)æˆ–äº’æ–¥(mutex)æ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œç”¨äºåœ¨æœ‰è®¸å¤šæ‰§è¡Œçº¿ç¨‹çš„ç¯å¢ƒä¸­å¼ºåˆ¶å¯¹èµ„æºçš„è®¿é—®é™åˆ¶ã€‚é”æ—¨åœ¨å¼ºåˆ¶å®æ–½äº’æ–¥æ’ä»–ã€å¹¶å‘æ§åˆ¶ç­–ç•¥ã€‚</p>
<h2 id="å¸¸è§é”æœºåˆ¶"><a href="#å¸¸è§é”æœºåˆ¶" class="headerlink" title="å¸¸è§é”æœºåˆ¶"></a>å¸¸è§é”æœºåˆ¶</h2><p>è¯»å†™é”ã€å¯é‡å…¥é”ã€ä¹è§‚é”ã€æ‚²è§‚é”ã€å…¬å¹³é”ã€éå…¬å¹³é”<br><a id="more"></a></p>
<h2 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h2><p>Javaä¸­çš„æ­»é”æ˜¯ä¸€ç§ç¼–ç¨‹æƒ…å†µï¼Œå…¶ä¸­ä¸¤ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹è¢«æ°¸ä¹…é˜»å¡ï¼ŒJavaæ­»é”æƒ…å†µå‡ºç°è‡³å°‘ä¸¤ä¸ªçº¿ç¨‹å’Œä¸¤ä¸ªæˆ–æ›´å¤šèµ„æºã€‚<br>Javaå‘ç”Ÿæ­»é”çš„æ ¹æœ¬åŸå› æ˜¯ï¼šåœ¨ç”³è¯·é”æ—¶å‘ç”Ÿäº†äº¤å‰é—­ç¯ç”³è¯·ã€‚</p>
<ul>
<li>æ˜¯å¤šä¸ªçº¿ç¨‹æ¶‰åŠåˆ°å¤šä¸ªé”ï¼Œè¿™äº›é”å­˜åœ¨ç€äº¤å‰ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå¯¼è‡´äº†ä¸€ä¸ªé”ä¾èµ–çš„é—­ç¯ã€‚<br>ä¾‹å¦‚ï¼šçº¿ç¨‹åœ¨è·å¾—äº†é”Aå¹¶ä¸”æ²¡æœ‰é‡Šæ”¾çš„æƒ…å†µä¸‹å»ç”³è¯·é”Bï¼Œè¿™æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å·²ç»è·å¾—äº†é”Bï¼Œåœ¨é‡Šæ”¾é”Bä¹‹å‰åˆè¦å…ˆè·å¾—é”Aï¼Œå› æ­¤é—­ç¯å‘ç”Ÿï¼Œé™·å…¥æ­»é”å¾ªç¯ã€‚</li>
<li>é»˜è®¤çš„é”ç”³è¯·æ“ä½œæ˜¯é˜»å¡çš„ã€‚<br>æ‰€ä»¥è¦é¿å…æ­»é”ï¼Œå°±è¦åœ¨ä¸€é‡åˆ°å¤šä¸ªå¯¹è±¡é”äº¤å‰çš„æƒ…å†µï¼Œå°±è¦ä»”ç»†å®¡æŸ¥è¿™å‡ ä¸ªå¯¹è±¡çš„ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œæ˜¯å¦å­˜åœ¨ç€å¯¼è‡´é”ä¾èµ–çš„ç¯è·¯çš„å¯èƒ½æ€§ã€‚æ€»ä¹‹æ˜¯å°½é‡é¿å…åœ¨ä¸€ä¸ªåŒæ­¥æ–¹æ³•ä¸­è°ƒç”¨å…¶å®ƒå¯¹è±¡çš„å»¶æ—¶æ–¹æ³•å’ŒåŒæ­¥æ–¹æ³•ã€‚</li>
</ul>
<h2 id="ç‹¬äº«é”-å…±äº«é”"><a href="#ç‹¬äº«é”-å…±äº«é”" class="headerlink" title="ç‹¬äº«é”/å…±äº«é”"></a>ç‹¬äº«é”/å…±äº«é”</h2><p>ç‹¬äº«é”æ˜¯æŒ‡è¯¥é”ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‰€æŒæœ‰ã€‚ (ReentrantLockã€ Synchronized)<br>å…±äº«é”æ˜¯æŒ‡è¯¥é”å¯è¢«å¤šä¸ªçº¿ç¨‹æ‰€æŒæœ‰ã€‚ (ReadWriteLock)<br>äº’æ–¥é”/è¯»å†™é”<br>ç‹¬äº«é”/å…±äº«é”è¿™æ˜¯å¹¿ä¹‰ä¸Šçš„è¯´æ³•ï¼Œäº’æ–¥é”/è¯»å†™é”å°±åˆ†åˆ«å¯¹åº”å…·ä½“çš„å®ç°ã€‚åœ¨Javaä¸­å¦‚ReentrantLockå°±æ˜¯äº’æ–¥é”(ç‹¬äº«é”)ï¼Œ ReadWriteLockå°±æ˜¯è¯»å†™é”(å…±äº«é”)ã€‚ ç‹¬äº«é”ä¸å…±äº«é”ä¹Ÿæ˜¯é€šè¿‡AQSæ¥å®ç°çš„<br>é”å‡çº§ï¼šè¯»é”åˆ°å†™é” (ä¸æ”¯æŒ)<br>é”é™çº§ï¼šå†™é”åˆ°è¯»é” (æ”¯æŒ)</p>
<h2 id="å…¬å¹³é”-amp-éå…¬å¹³é”"><a href="#å…¬å¹³é”-amp-éå…¬å¹³é”" class="headerlink" title="å…¬å¹³é” &amp; éå…¬å¹³é”"></a>å…¬å¹³é” &amp; éå…¬å¹³é”</h2><p>å…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºæ¥è·å–é”ã€‚<br>éå…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹è·å–é”çš„é¡ºåºå¹¶ä¸æ˜¯æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºï¼Œæœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹æ¯”å…ˆç”³è¯·çš„çº¿ç¨‹ä¼˜å…ˆè·å–é”ã€‚æœ‰å¯èƒ½ä¼šé€ æˆé¥¥é¥¿ç°è±¡ã€‚<br>å¯¹äºJava ReentrantLockè€Œè¨€ï¼Œé€šè¿‡æ„é€ å‡½æ•°æŒ‡å®šè¯¥é”æ˜¯å¦æ˜¯å…¬å¹³é”ï¼Œé»˜è®¤æ˜¯éå…¬å¹³é”ã€‚éå…¬å¹³é”çš„ä¼˜ç‚¹åœ¨äºååé‡æ¯”å…¬å¹³é”å¤§ã€‚<br>å¯¹äºSynchronizedè€Œè¨€ï¼Œä¹Ÿæ˜¯ä¸€ç§éå…¬å¹³é”ã€‚ç”±äºå…¶å¹¶ä¸åƒReentrantLockæ˜¯é€šè¿‡AQSçš„æ§åˆ¶çº¿ç¨‹å¯¹é”çš„è·å–ï¼Œ æ‰€ä»¥å¹¶æ²¡æœ‰ä»»ä½•åŠæ³•ä½¿å…¶å˜æˆå…¬å¹³é”ã€‚</p>
<h2 id="ä¹è§‚é”-amp-æ‚²è§‚é”"><a href="#ä¹è§‚é”-amp-æ‚²è§‚é”" class="headerlink" title="ä¹è§‚é” &amp; æ‚²è§‚é”"></a>ä¹è§‚é” &amp; æ‚²è§‚é”</h2><p>ä¹è§‚é”ï¼šå°±åƒå®ƒçš„åå­—ä¸€æ ·ï¼Œå¯¹äºå¹¶å‘é—´æ“ä½œäº§ç”Ÿçš„çº¿ç¨‹å®‰å…¨é—®é¢˜æŒä¹è§‚çŠ¶æ€ï¼Œä¹è§‚é”è®¤ä¸ºç«äº‰ä¸æ€»æ˜¯ä¼šå‘ç”Ÿï¼Œå› æ­¤å®ƒä¸éœ€è¦æŒæœ‰é”ï¼Œå°†æ¯”è¾ƒ-æ›¿æ¢è¿™ä¸¤ä¸ªåŠ¨ä½œä½œä¸ºä¸€ä¸ªåŸå­æ“ä½œå°è¯•å»ä¿®æ”¹å†…å­˜ä¸­çš„å˜é‡ï¼Œå¦‚æœå¤±è´¥åˆ™è¡¨ç¤ºå‘ç”Ÿå†²çªï¼Œé‚£ä¹ˆå°±åº”è¯¥æœ‰ç›¸åº”çš„é‡è¯•é€»è¾‘ã€‚<br>æ‚²è§‚é”ï¼šè¿˜æ˜¯åƒå®ƒçš„åå­—ä¸€æ ·ï¼Œå¯¹äºå¹¶å‘é—´æ“ä½œäº§ç”Ÿçš„çº¿ç¨‹å®‰å…¨é—®é¢˜æŒæ‚²è§‚çŠ¶æ€ï¼Œæ‚²è§‚é”è®¤ä¸ºç«äº‰æ€»æ˜¯ä¼šå‘ç”Ÿï¼Œå› æ­¤æ¯æ¬¡å¯¹æŸèµ„æºè¿›è¡Œæ“ä½œæ—¶ï¼Œéƒ½ä¼šæŒæœ‰ä¸€ä¸ªç‹¬å çš„é”ï¼Œå°±åƒsynchronizedï¼Œä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œç›´æ¥ä¸Šäº†é”å°±æ“ä½œèµ„æºäº†ã€‚</p>
<h2 id="å®ç°è¯»å†™é”ReentrantReadWriteLock"><a href="#å®ç°è¯»å†™é”ReentrantReadWriteLock" class="headerlink" title="å®ç°è¯»å†™é”ReentrantReadWriteLock"></a>å®ç°è¯»å†™é”ReentrantReadWriteLock</h2><p>ä½16ä½ä»£è¡¨å†™é”ï¼Œé«˜16ä½ä»£è¡¨è¯»é”</p>
<h2 id="å¯é‡å…¥é”ReetrantLockåŸç†"><a href="#å¯é‡å…¥é”ReetrantLockåŸç†" class="headerlink" title="å¯é‡å…¥é”ReetrantLockåŸç†"></a>å¯é‡å…¥é”ReetrantLockåŸç†</h2><p>å¯é‡å…¥é”åˆåé€’å½’é”ï¼Œæ˜¯æŒ‡åŒä¸€ä¸ªçº¿ç¨‹åœ¨å¤–å±‚æ–¹æ³•è·å–é”çš„æ—¶å€™ï¼Œåœ¨è¿›å…¥å†…å±‚æ–¹æ³•ä¼šè‡ªåŠ¨è·å–é”ã€‚<br>ReentrantLockå’ŒSynchronizedéƒ½æ˜¯å¯é‡å…¥é”ã€‚<strong>å¯é‡å…¥é”çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä¸€å®šç¨‹åº¦é¿å…æ­»é”ã€‚</strong><br>ReentrantLockä¸»è¦åˆ©ç”¨CAS+AQSé˜Ÿåˆ—æ¥å®ç°ã€‚å®ƒæ”¯æŒå…¬å¹³é”å’Œéå…¬å¹³é”ï¼Œä¸¤è€…çš„å®ç°ç±»ä¼¼ã€‚<br><strong>CASï¼šCompare and Swapï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ã€‚</strong>CASæœ‰3ä¸ªæ“ä½œæ•°ï¼šå†…å­˜å€¼Vã€é¢„æœŸå€¼Aã€è¦ä¿®æ”¹çš„æ–°å€¼Bã€‚å½“ä¸”ä»…å½“é¢„æœŸå€¼Aå’Œå†…å­˜å€¼Vç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼Vä¿®æ”¹ä¸ºBï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚è¯¥æ“ä½œæ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œè¢«å¹¿æ³›çš„åº”ç”¨åœ¨Javaçš„åº•å±‚å®ç°ä¸­ã€‚åœ¨Javaä¸­ï¼ŒCASä¸»è¦æ˜¯ç”±sun.misc.Unsafeè¿™ä¸ªç±»é€šè¿‡JNIè°ƒç”¨CPUåº•å±‚æŒ‡ä»¤å®ç°<br><strong>AbstractQueuedSynchronizerç®€ç§°AQSï¼Œæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºé”å’ŒåŒæ­¥å®¹å™¨çš„æ¡†æ¶ã€‚</strong>äº‹å®ä¸ŠconcurrentåŒ…å†…è®¸å¤šç±»éƒ½æ˜¯åŸºäºAQSæ„å»ºï¼Œä¾‹å¦‚ReentrantLockï¼ŒSemaphoreï¼ŒCountDownLatchï¼ŒReentrantReadWriteLockï¼ŒFutureTaskç­‰ã€‚AQSè§£å†³äº†åœ¨å®ç°åŒæ­¥å®¹å™¨æ—¶è®¾è®¡çš„å¤§é‡ç»†èŠ‚é—®é¢˜ã€‚</p>
<h2 id="synchronizedå’ŒReentrantLockçš„åŒºåˆ«"><a href="#synchronizedå’ŒReentrantLockçš„åŒºåˆ«" class="headerlink" title="synchronizedå’ŒReentrantLockçš„åŒºåˆ«"></a>synchronizedå’ŒReentrantLockçš„åŒºåˆ«</h2><p>synchronizedæ˜¯å’Œifã€elseã€forã€whileä¸€æ ·çš„å…³é”®å­—ï¼ŒReentrantLockæ˜¯ç±»ï¼Œè¿™æ˜¯äºŒè€…çš„æœ¬è´¨åŒºåˆ«ã€‚æ—¢ç„¶ReentrantLockæ˜¯ç±»ï¼Œé‚£ä¹ˆå®ƒå°±æä¾›äº†æ¯”synchronizedæ›´å¤šæ›´çµæ´»çš„ç‰¹æ€§ï¼Œå¯ä»¥è¢«ç»§æ‰¿ã€å¯ä»¥æœ‰æ–¹æ³•ã€å¯ä»¥æœ‰å„ç§å„æ ·çš„ç±»å˜é‡ï¼ŒReentrantLockæ¯”synchronizedçš„æ‰©å±•æ€§ä½“ç°åœ¨å‡ ç‚¹ä¸Šï¼š</p>
<ul>
<li>ReentrantLockå¯ä»¥å¯¹è·å–é”çš„ç­‰å¾…æ—¶é—´è¿›è¡Œè®¾ç½®ï¼Œè¿™æ ·å°±é¿å…äº†æ­»é”</li>
<li>ReentrantLockå¯ä»¥è·å–å„ç§é”çš„ä¿¡æ¯</li>
<li>ReentrantLockå¯ä»¥çµæ´»åœ°å®ç°å¤šè·¯é€šçŸ¥</li>
</ul>
<h2 id="å¦‚æœæœ‰å¤šä¸ªå˜é‡è¦æ›´æ–°ï¼Œè¦ä¿è¯ä¸€è‡´æ€§ï¼Œæ€æ ·åŠ é”æ¥ä¿è¯æ­£ç¡®æ€§ï¼Œæ•ˆç‡åˆæ¯”è¾ƒé«˜ï¼Ÿ"><a href="#å¦‚æœæœ‰å¤šä¸ªå˜é‡è¦æ›´æ–°ï¼Œè¦ä¿è¯ä¸€è‡´æ€§ï¼Œæ€æ ·åŠ é”æ¥ä¿è¯æ­£ç¡®æ€§ï¼Œæ•ˆç‡åˆæ¯”è¾ƒé«˜ï¼Ÿ" class="headerlink" title="å¦‚æœæœ‰å¤šä¸ªå˜é‡è¦æ›´æ–°ï¼Œè¦ä¿è¯ä¸€è‡´æ€§ï¼Œæ€æ ·åŠ é”æ¥ä¿è¯æ­£ç¡®æ€§ï¼Œæ•ˆç‡åˆæ¯”è¾ƒé«˜ï¼Ÿ"></a>å¦‚æœæœ‰å¤šä¸ªå˜é‡è¦æ›´æ–°ï¼Œè¦ä¿è¯ä¸€è‡´æ€§ï¼Œæ€æ ·åŠ é”æ¥ä¿è¯æ­£ç¡®æ€§ï¼Œæ•ˆç‡åˆæ¯”è¾ƒé«˜ï¼Ÿ</h2><p>åªåœ¨å†™æ—¶åŠ é”ï¼Œè¯»ä¸åŠ é”</p>
<h2 id="é‚£æ€ä¹ˆè§£å†³ä¸€ä¸ªå†™æ“ä½œä¿®æ”¹äº†éƒ¨åˆ†å˜é‡ï¼Œè¯»æ“ä½œï¼Œè¯»å–äº†è¿™ä¸ªä¸­é—´çŠ¶æ€çš„é—®é¢˜ï¼Ÿ"><a href="#é‚£æ€ä¹ˆè§£å†³ä¸€ä¸ªå†™æ“ä½œä¿®æ”¹äº†éƒ¨åˆ†å˜é‡ï¼Œè¯»æ“ä½œï¼Œè¯»å–äº†è¿™ä¸ªä¸­é—´çŠ¶æ€çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="é‚£æ€ä¹ˆè§£å†³ä¸€ä¸ªå†™æ“ä½œä¿®æ”¹äº†éƒ¨åˆ†å˜é‡ï¼Œè¯»æ“ä½œï¼Œè¯»å–äº†è¿™ä¸ªä¸­é—´çŠ¶æ€çš„é—®é¢˜ï¼Ÿ"></a>é‚£æ€ä¹ˆè§£å†³ä¸€ä¸ªå†™æ“ä½œä¿®æ”¹äº†éƒ¨åˆ†å˜é‡ï¼Œè¯»æ“ä½œï¼Œè¯»å–äº†è¿™ä¸ªä¸­é—´çŠ¶æ€çš„é—®é¢˜ï¼Ÿ</h2><p>å†™æ“ä½œæ—¶ï¼Œå…ˆé”ä½é”1ï¼Œåœ¨çº¿ç¨‹æœ¬åœ°ä¹Ÿå°±æ˜¯å‡½æ•°å±€éƒ¨è®¡ç®—å®Œæ‰€æœ‰ç»“æœåï¼Œé”ä½é”2ï¼Œä¸€æ¬¡æ›´æ–°å®Œåå†é‡Šæ”¾2ä¸ªé”ï¼Œè¯»æ“ä½œåªé”ä½é”2</p>
<h2 id="synchronized-amp-lock"><a href="#synchronized-amp-lock" class="headerlink" title="synchronized &amp; lock"></a>synchronized &amp; lock</h2><p>synchronizedåŸå§‹é‡‡ç”¨çš„æ˜¯CPUæ‚²è§‚é”æœºåˆ¶ï¼Œå³çº¿ç¨‹è·å¾—çš„æ˜¯ç‹¬å é”ã€‚ç‹¬å é”æ„å‘³ç€å…¶ä»–çº¿ç¨‹åªèƒ½ä¾é é˜»å¡æ¥ç­‰å¾…çº¿ç¨‹é‡Šæ”¾é”ã€‚è€Œåœ¨CPUè½¬æ¢çº¿ç¨‹é˜»å¡æ—¶ä¼šå¼•èµ·çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå½“æœ‰å¾ˆå¤šçº¿ç¨‹ç«äº‰é”çš„æ—¶å€™ï¼Œä¼šå¼•èµ·CPUé¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¯¼è‡´æ•ˆç‡å¾ˆä½ã€‚<br>Lockç”¨çš„æ˜¯ä¹è§‚é”æ–¹å¼ã€‚æ‰€è°“ä¹è§‚é”å°±æ˜¯ï¼Œæ¯æ¬¡ä¸åŠ é”è€Œæ˜¯å‡è®¾æ²¡æœ‰å†²çªè€Œå»å®ŒæˆæŸé¡¹æ“ä½œï¼Œå¦‚æœå› ä¸ºå†²çªå¤±è´¥å°±é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚ä¹è§‚é”å®ç°çš„æœºåˆ¶å°±æ˜¯CASæ“ä½œï¼ˆCompare and Swapï¼‰ã€‚</p>
<blockquote>
<p>  <a href="https://blog.csdn.net/tanmomo/article/details/99671622">https://blog.csdn.net/tanmomo/article/details/99671622</a><br>    <a href="https://blog.csdn.net/fuyuwei2015/article/details/83719444">https://blog.csdn.net/fuyuwei2015/article/details/83719444</a><br>    <a href="https://zhuanlan.zhihu.com/p/108224026?from_voters_page=true">https://zhuanlan.zhihu.com/p/108224026?from_voters_page=true</a><br>    <a href="https://blog.csdn.net/natian306/article/details/18504111">https://blog.csdn.net/natian306/article/details/18504111</a></p>
</blockquote>
<h1 id="TCP-amp-UDP"><a href="#TCP-amp-UDP" class="headerlink" title="TCP &amp; UDP"></a>TCP &amp; UDP</h1><h2 id="TCPå’ŒUDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#TCPå’ŒUDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="TCPå’ŒUDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>TCPå’ŒUDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><ol>
<li>TCPé¢å‘è¿æ¥ï¼ˆå¦‚æ‰“ç”µè¯è¦å…ˆæ‹¨å·å»ºç«‹è¿æ¥ï¼‰;UDPæ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥</li>
<li>TCPæä¾›å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡TCPè¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾;UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜</li>
<li>TCPé¢å‘å­—èŠ‚æµï¼Œå®é™…ä¸Šæ˜¯TCPæŠŠæ•°æ®çœ‹æˆä¸€è¿ä¸²æ— ç»“æ„çš„å­—èŠ‚æµ;UDPæ˜¯é¢å‘æŠ¥æ–‡çš„ã€‚UDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå› æ­¤ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿æºä¸»æœºçš„å‘é€é€Ÿç‡é™ä½ï¼ˆå¯¹å®æ—¶åº”ç”¨å¾ˆæœ‰ç”¨ï¼Œå¦‚IPç”µè¯ï¼Œå®æ—¶è§†é¢‘ä¼šè®®ç­‰ï¼‰</li>
<li>æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ç‚¹åˆ°ç‚¹çš„;UDPæ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡</li>
<li>TCPé¦–éƒ¨å¼€é”€20å­—èŠ‚;UDPçš„é¦–éƒ¨å¼€é”€å°ï¼Œåªæœ‰8ä¸ªå­—èŠ‚</li>
<li>TCPçš„é€»è¾‘é€šä¿¡ä¿¡é“æ˜¯å…¨åŒå·¥çš„å¯é ä¿¡é“ï¼ŒUDPåˆ™æ˜¯ä¸å¯é ä¿¡é“</li>
</ol>
<p>å…·ä½“ç¼–ç¨‹æ—¶çš„åŒºåˆ«</p>
<ol>
<li>socket()çš„å‚æ•°ä¸åŒ   </li>
<li>UDP Serverä¸éœ€è¦è°ƒç”¨listenå’Œaccept </li>
<li>UDPæ”¶å‘æ•°æ®ç”¨sendto/recvfromå‡½æ•° </li>
<li>TCPï¼šåœ°å€ä¿¡æ¯åœ¨connect/acceptæ—¶ç¡®å®š  </li>
<li>UDPï¼šåœ¨sendto/recvfromå‡½æ•°ä¸­æ¯æ¬¡å‡ éœ€æŒ‡å®šåœ°å€ä¿¡æ¯ </li>
<li>UDPï¼šshutdownå‡½æ•°æ— æ•ˆ</li>
</ol>
<h2 id="TCPå¯é æ€§æœºåˆ¶"><a href="#TCPå¯é æ€§æœºåˆ¶" class="headerlink" title="TCPå¯é æ€§æœºåˆ¶"></a><strong>TCPå¯é æ€§æœºåˆ¶</strong></h2><h3 id="æ£€éªŒå’Œ"><a href="#æ£€éªŒå’Œ" class="headerlink" title="æ£€éªŒå’Œ"></a>æ£€éªŒå’Œ</h3><p>TCPæ£€éªŒå’Œçš„è®¡ç®—ä¸UDPä¸€æ ·ï¼Œåœ¨è®¡ç®—æ—¶è¦åŠ ä¸Š12byteçš„ä¼ªé¦–éƒ¨ï¼Œæ£€éªŒèŒƒå›´åŒ…æ‹¬TCPé¦–éƒ¨åŠæ•°æ®éƒ¨åˆ†ï¼Œä½†æ˜¯UDPçš„æ£€éªŒå’Œå­—æ®µä¸ºå¯é€‰çš„ï¼Œè€ŒTCPä¸­æ˜¯å¿…é¡»æœ‰çš„ã€‚è®¡ç®—æ–¹æ³•ä¸ºï¼šåœ¨å‘é€æ–¹å°†æ•´ä¸ªæŠ¥æ–‡æ®µåˆ†ä¸ºå¤šä¸ª16ä½çš„æ®µï¼Œç„¶åå°†æ‰€æœ‰æ®µè¿›è¡Œåç ç›¸åŠ ï¼Œå°†ç»“æœå­˜æ”¾åœ¨æ£€éªŒå’Œå­—æ®µä¸­ï¼Œæ¥æ”¶æ–¹ç”¨ç›¸åŒçš„æ–¹æ³•è¿›è¡Œè®¡ç®—ï¼Œå¦‚æœ€ç»ˆç»“æœä¸ºæ£€éªŒå­—æ®µæ‰€æœ‰ä½æ˜¯å…¨1åˆ™æ­£ç¡®ï¼ˆUDPä¸­ä¸º0æ˜¯æ­£ç¡®ï¼‰ï¼Œå¦åˆ™å­˜åœ¨é”™è¯¯ã€‚ </p>
<h3 id="åºåˆ—å·"><a href="#åºåˆ—å·" class="headerlink" title="åºåˆ—å·"></a>åºåˆ—å·</h3><p>TCPå°†æ¯ä¸ªå­—èŠ‚çš„æ•°æ®éƒ½è¿›è¡Œäº†ç¼–å·ï¼Œè¿™å°±æ˜¯åºåˆ—å·ã€‚<br>åºåˆ—å·çš„ä½œç”¨ï¼š<br>a. ä¿è¯å¯é æ€§ï¼ˆå½“æ¥æ”¶åˆ°çš„æ•°æ®æ€»å°‘äº†æŸä¸ªåºå·çš„æ•°æ®æ—¶ï¼Œèƒ½é©¬ä¸ŠçŸ¥é“ï¼‰<br>b. ä¿è¯æ•°æ®çš„æŒ‰åºåˆ°è¾¾<br>c. æé«˜æ•ˆç‡ï¼Œå¯å®ç°å¤šæ¬¡å‘é€ï¼Œä¸€æ¬¡ç¡®è®¤<br>d. å»é™¤é‡å¤æ•°æ®<br>æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­çš„ç¡®è®¤åº”ç­”å¤„ç†ã€é‡å‘æ§åˆ¶ä»¥åŠé‡å¤æ§åˆ¶ç­‰åŠŸèƒ½éƒ½å¯ä»¥é€šè¿‡åºåˆ—å·æ¥å®ç° </p>
<h3 id="ç¡®è®¤åº”ç­”æœºåˆ¶ï¼ˆACKï¼‰"><a href="#ç¡®è®¤åº”ç­”æœºåˆ¶ï¼ˆACKï¼‰" class="headerlink" title="ç¡®è®¤åº”ç­”æœºåˆ¶ï¼ˆACKï¼‰"></a>ç¡®è®¤åº”ç­”æœºåˆ¶ï¼ˆACKï¼‰</h3><p>TCPé€šè¿‡ç¡®è®¤åº”ç­”æœºåˆ¶å®ç°å¯é çš„æ•°æ®ä¼ è¾“ã€‚åœ¨TCPçš„é¦–éƒ¨ä¸­æœ‰ä¸€ä¸ªæ ‡å¿—ä½â€”â€”<strong>ACKï¼Œæ­¤æ ‡å¿—ä½è¡¨ç¤ºç¡®è®¤å·æ˜¯å¦æœ‰æ•ˆ</strong>ã€‚æ¥æ”¶æ–¹å¯¹äºæŒ‰åºåˆ°è¾¾çš„æ•°æ®ä¼šè¿›è¡Œç¡®è®¤ï¼Œå½“æ ‡å¿—ä½ACK=1æ—¶ç¡®è®¤é¦–éƒ¨çš„ç¡®è®¤å­—æ®µæœ‰æ•ˆã€‚è¿›è¡Œç¡®è®¤æ—¶ï¼Œç¡®è®¤å­—æ®µå€¼è¡¨ç¤ºè¿™ä¸ªå€¼ä¹‹å‰çš„æ•°æ®éƒ½å·²ç»æŒ‰åºåˆ°è¾¾äº†ã€‚è€Œå‘é€æ–¹å¦‚æœæ”¶åˆ°äº†å·²å‘é€çš„æ•°æ®çš„ç¡®è®¤æŠ¥æ–‡ï¼Œåˆ™ç»§ç»­ä¼ è¾“ä¸‹ä¸€éƒ¨åˆ†æ•°æ®ï¼›è€Œå¦‚æœç­‰å¾…äº†ä¸€å®šæ—¶é—´è¿˜æ²¡æœ‰æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡å°±ä¼šå¯åŠ¨é‡ä¼ æœºåˆ¶ã€‚ </p>
<h3 id="è¶…æ—¶é‡ä¼ æœºåˆ¶"><a href="#è¶…æ—¶é‡ä¼ æœºåˆ¶" class="headerlink" title="è¶…æ—¶é‡ä¼ æœºåˆ¶"></a>è¶…æ—¶é‡ä¼ æœºåˆ¶</h3><p>å½“æŠ¥æ–‡å‘å‡ºååœ¨ä¸€å®šçš„æ—¶é—´å†…æœªæ”¶åˆ°æ¥æ”¶æ–¹çš„ç¡®è®¤ï¼Œå‘é€æ–¹å°±ä¼šè¿›è¡Œé‡ä¼ ï¼ˆé€šå¸¸æ˜¯åœ¨å‘å‡ºæŠ¥æ–‡æ®µåè®¾å®šä¸€ä¸ªé—¹é’Ÿï¼Œåˆ°ç‚¹äº†è¿˜æ²¡æœ‰æ”¶åˆ°åº”ç­”åˆ™è¿›è¡Œé‡ä¼ ï¼‰<br>å½“æ¥æ”¶æ–¹æ¥æ”¶åˆ°é‡å¤çš„æ•°æ®æ—¶å°±å°†å…¶ä¸¢æ‰ï¼Œé‡æ–°å‘é€ACKã€‚è€Œè¦è¯†åˆ«å‡ºé‡å¤çš„æ•°æ®ï¼Œå°±è¦ç”¨åˆ°å‰é¢æåˆ°çš„åºåˆ—å·äº†ï¼Œåˆ©ç”¨åºåˆ—å·å¾ˆå®¹æ˜“å°±å¯ä»¥åšåˆ°å»é‡çš„æ•ˆæœã€‚ </p>
<h3 id="è¿æ¥ç®¡ç†æœºåˆ¶"><a href="#è¿æ¥ç®¡ç†æœºåˆ¶" class="headerlink" title="è¿æ¥ç®¡ç†æœºåˆ¶"></a>è¿æ¥ç®¡ç†æœºåˆ¶</h3><p>è¿æ¥ç®¡ç†æœºåˆ¶å³TCPå»ºç«‹è¿æ¥æ—¶çš„ä¸‰æ¬¡æ¡æ‰‹å’Œæ–­å¼€è¿æ¥æ—¶çš„å››æ¬¡æŒ¥æ‰‹ã€‚ </p>
<h4 id="ä¸‰æ¬¡æ¡æ‰‹ï¼š"><a href="#ä¸‰æ¬¡æ¡æ‰‹ï¼š" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹ï¼š"></a>ä¸‰æ¬¡æ¡æ‰‹ï¼š</h4><ul>
<li>å®¢æˆ·ç«¯å‘å‡ºï¼šsynåŒ…ï¼ˆseq=jï¼‰ï¼Œå¹¶è¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ã€‚</li>
<li>æœåŠ¡ç«¯å‘å‡ºï¼šack=j+1ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ªSYNåŒ…ï¼ˆseq=kï¼‰ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ã€‚</li>
<li>å®¢æˆ·ç«¯å‘å‡ºï¼šç¡®è®¤åŒ…ACK(ack=k+1ï¼‰ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDï¼ˆTCPè¿æ¥æˆåŠŸï¼‰çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚</li>
</ul>
<h4 id="å››æ¬¡æŒ¥æ‰‹ï¼š"><a href="#å››æ¬¡æŒ¥æ‰‹ï¼š" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹ï¼š"></a>å››æ¬¡æŒ¥æ‰‹ï¼š</h4><ul>
<li>ä¸»æœº1å‘å‡ºï¼šä¸»æœº1ï¼ˆå¯ä»¥ä½¿å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯ï¼‰ï¼Œè®¾ç½®åºåˆ—å·Seqå’Œç¡®è®¤å·ACKï¼Œå‘ä¸»æœº2å‘é€ä¸€ä¸ªFINæŠ¥æ–‡æ®µï¼›æ­¤æ—¶ï¼Œä¸»æœº1è¿›å…¥FIN_WAIT_1çŠ¶æ€ï¼›è¿™è¡¨ç¤ºä¸»æœº1æ²¡æœ‰æ•°æ®è¦å‘é€ç»™ä¸»æœº2äº†ï¼› </li>
<li>ä¸»æœº2å‘å‡ºï¼šä¸»æœº2æ”¶åˆ°äº†ä¸»æœº1å‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘ä¸»æœº1å›ä¸€ä¸ªACKæŠ¥æ–‡æ®µï¼ŒACK = Seq + 1ï¼›ä¸»æœº1è¿›å…¥FIN_WAIT_2çŠ¶æ€ï¼›ä¸»æœº2å‘Šè¯‰ä¸»æœº1ï¼Œæˆ‘â€œåŒæ„â€ä½ çš„å…³é—­è¯·æ±‚ï¼›</li>
<li>ä¸»æœº2å‘å‡ºï¼šFINæŠ¥æ–‡æ®µï¼Œè¯·æ±‚å…³é—­è¿æ¥ï¼ŒåŒæ—¶ä¸»æœº2è¿›å…¥LAST_ACKçŠ¶æ€ï¼›</li>
<li>ä¸»æœº1å‘å‡ºï¼šä¸»æœº1æ”¶åˆ°ä¸»æœº2å‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘ä¸»æœº2å‘é€ACKæŠ¥æ–‡æ®µï¼Œç„¶åä¸»æœº1è¿›å…¥TIME_WAITçŠ¶æ€ï¼›ä¸»æœº2æ”¶åˆ°ä¸»æœº1çš„ACKæŠ¥æ–‡æ®µä»¥åï¼Œå°±å…³é—­è¿æ¥ï¼›æ­¤æ—¶ï¼Œä¸»æœº1ç­‰å¾…2MSLåä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™è¯æ˜Serverç«¯å·²æ­£å¸¸å…³é—­ï¼Œé‚£å¥½ï¼Œä¸»æœº1ä¹Ÿå¯ä»¥å…³é—­è¿æ¥äº†ã€‚</li>
</ul>
<p>FIN_WAIT_1: å…¶å®FIN_WAIT_1å’ŒFIN_WAIT_2çŠ¶æ€çš„çœŸæ­£å«ä¹‰éƒ½æ˜¯è¡¨ç¤ºç­‰å¾…å¯¹æ–¹çš„FINæŠ¥æ–‡ã€‚è€Œè¿™ä¸¤ç§çŠ¶æ€çš„åŒºåˆ«æ˜¯ï¼šFIN_WAIT_1çŠ¶æ€å®é™…ä¸Šæ˜¯å½“SOCKETåœ¨ESTABLISHEDçŠ¶æ€æ—¶ï¼Œå®ƒæƒ³ä¸»åŠ¨å…³é—­è¿æ¥ï¼Œå‘å¯¹æ–¹å‘é€äº†FINæŠ¥æ–‡ï¼Œæ­¤æ—¶è¯¥SOCKETå³è¿›å…¥åˆ°FIN_WAIT_1çŠ¶æ€ã€‚è€Œå½“å¯¹æ–¹å›åº”ACKæŠ¥æ–‡åï¼Œåˆ™è¿›å…¥åˆ°FIN_WAIT_2çŠ¶æ€ï¼Œå½“ç„¶åœ¨å®é™…çš„æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ— è®ºå¯¹æ–¹ä½•ç§æƒ…å†µä¸‹ï¼Œéƒ½åº”è¯¥é©¬ä¸Šå›åº”ACKæŠ¥æ–‡ï¼Œæ‰€ä»¥FIN_WAIT_1çŠ¶æ€ä¸€èˆ¬æ˜¯æ¯”è¾ƒéš¾è§åˆ°çš„ï¼Œè€ŒFIN_WAIT_2çŠ¶æ€è¿˜æœ‰æ—¶å¸¸å¸¸å¯ä»¥ç”¨netstatçœ‹åˆ°ã€‚ï¼ˆä¸»åŠ¨æ–¹ï¼‰<br>FIN_WAIT_2ï¼šå®é™…ä¸ŠFIN_WAIT_2çŠ¶æ€ä¸‹çš„SOCKETï¼Œè¡¨ç¤ºåŠè¿æ¥ï¼Œä¹Ÿå³æœ‰ä¸€æ–¹è¦æ±‚closeè¿æ¥ï¼Œä½†å¦å¤–è¿˜å‘Šè¯‰å¯¹æ–¹ï¼Œæˆ‘æš‚æ—¶è¿˜æœ‰ç‚¹æ•°æ®éœ€è¦ä¼ é€ç»™ä½ (ACKä¿¡æ¯)ï¼Œç¨åå†å…³é—­è¿æ¥ã€‚ï¼ˆä¸»åŠ¨æ–¹ï¼‰<br><strong>CLOSE_WAITï¼šè¡¨ç¤ºåœ¨ç­‰å¾…å…³é—­ã€‚å½“å¯¹æ–¹closeä¸€ä¸ªSOCKETåå‘é€FINæŠ¥æ–‡ç»™è‡ªå·±ï¼Œä½ ç³»ç»Ÿæ¯«æ— ç–‘é—®åœ°ä¼šå›åº”ä¸€ä¸ªACKæŠ¥æ–‡ç»™å¯¹æ–¹ï¼Œæ­¤æ—¶åˆ™è¿›å…¥åˆ°CLOSE_WAITçŠ¶æ€ã€‚</strong>æ¥ä¸‹æ¥å‘¢ï¼Œå®é™…ä¸Šä½ çœŸæ­£éœ€è¦è€ƒè™‘çš„äº‹æƒ…æ˜¯å¯Ÿçœ‹ä½ æ˜¯å¦è¿˜æœ‰æ•°æ®å‘é€ç»™å¯¹æ–¹ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œé‚£ä¹ˆä½ ä¹Ÿå°±å¯ä»¥ closeè¿™ä¸ªSOCKETï¼Œå‘é€FINæŠ¥æ–‡ç»™å¯¹æ–¹ï¼Œä¹Ÿå³å…³é—­è¿æ¥ã€‚æ‰€ä»¥ä½ åœ¨CLOSE_WAITçŠ¶æ€ä¸‹ï¼Œéœ€è¦å®Œæˆçš„äº‹æƒ…æ˜¯ç­‰å¾…ä½ å»å…³é—­è¿æ¥ã€‚ï¼ˆè¢«åŠ¨æ–¹ï¼‰<br>LAST_ACK: è¢«åŠ¨å…³é—­ä¸€æ–¹åœ¨å‘é€FINæŠ¥æ–‡åï¼Œæœ€åç­‰å¾…å¯¹æ–¹çš„ACKæŠ¥æ–‡ã€‚å½“æ”¶åˆ°ACKæŠ¥æ–‡åï¼Œä¹Ÿå³å¯ä»¥è¿›å…¥åˆ°CLOSEDå¯ç”¨çŠ¶æ€äº†ã€‚ï¼ˆè¢«åŠ¨æ–¹ï¼‰<br><strong>TIME_WAIT: è¡¨ç¤ºæ”¶åˆ°äº†å¯¹æ–¹çš„FINæŠ¥æ–‡ï¼Œå¹¶å‘é€å‡ºäº†ACKæŠ¥æ–‡ï¼Œå°±ç­‰2MSLåå³å¯å›åˆ°CLOSEDå¯ç”¨çŠ¶æ€äº†ã€‚</strong>å¦‚æœFIN WAIT1çŠ¶æ€ä¸‹ï¼Œæ”¶åˆ°äº†å¯¹æ–¹åŒæ—¶å¸¦FINæ ‡å¿—å’ŒACKæ ‡å¿—çš„æŠ¥æ–‡æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿›å…¥åˆ°TIME_WAITçŠ¶æ€ï¼Œè€Œæ— é¡»ç»è¿‡FIN_WAIT_2çŠ¶æ€ã€‚ï¼ˆä¸»åŠ¨æ–¹ï¼‰<br>CLOSED: è¡¨ç¤ºè¿æ¥ä¸­æ–­ã€‚</p>
<h3 id="åœæ­¢ç­‰å¾…åè®®"><a href="#åœæ­¢ç­‰å¾…åè®®" class="headerlink" title="åœæ­¢ç­‰å¾…åè®®"></a>åœæ­¢ç­‰å¾…åè®®</h3><p>åœæ­¢ç­‰å¾…åè®®æ˜¯ä¸€ç§ARQåè®®ã€‚(Automatic Repeat reQuestè‡ªåŠ¨é‡ä¼ è¯·æ±‚)<br>Aå‘Bæ¯å‘é€ä¸€ä¸ªåˆ†ç»„ï¼Œéƒ½è¦åœæ­¢å‘é€ï¼Œç­‰å¾…Bçš„ç¡®è®¤åº”ç­”ï¼›<strong>Aåªæœ‰æ”¶åˆ°äº†Bçš„ç¡®è®¤åº”ç­”åæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªåˆ†ç»„</strong>ã€‚å½“åˆ†ç»„ä¸¢å¤±æˆ–å‡ºç°å·®é”™ çš„æƒ…å†µä¸‹ï¼ŒAéƒ½ä¼šè¶…æ—¶é‡ä¼ åˆ†ç»„ã€‚TCPä¼šç»™æ¯ä¸ªå­—èŠ‚éƒ½æ‰“ä¸Šåºå·ï¼Œç”¨äºåˆ¤æ–­è¯¥åˆ†ç»„æ˜¯å¦å·²ç»æ¥æ”¶ã€‚ </p>
<ul>
<li>å¿…é¡»è®¾ç½®è¶…æ—¶è®¡æ—¶å™¨ã€‚æ¯å‘é€ä¸€ä¸ªåˆ†ç»„å°±è¦å¯åŠ¨è®¡æ—¶å™¨ï¼Œè¶…æ—¶å°±è¦é‡å‘åˆ†ç»„ã€‚è®¡æ—¶å™¨çš„è¶…æ—¶æ—¶é—´è¦å¤§äºåº”ç­”çš„å¹³å‡è¿”å›æ—¶é—´ï¼Œå¦åˆ™ä¼šå‡ºç°å¾ˆå¤šä¸å¿…è¦çš„é‡ä¼ ï¼Œé™ä½ä¼ è¾“æ•ˆç‡ã€‚ä½†è¶…æ—¶æ—¶é—´ä¹Ÿä¸èƒ½å¤ªé•¿ã€‚</li>
</ul>
<h3 id="æµé‡æ§åˆ¶-æ»‘åŠ¨çª—å£ï¼ˆå‘é€çª—å£å’Œæ¥æ”¶çª—å£ï¼‰"><a href="#æµé‡æ§åˆ¶-æ»‘åŠ¨çª—å£ï¼ˆå‘é€çª—å£å’Œæ¥æ”¶çª—å£ï¼‰" class="headerlink" title="æµé‡æ§åˆ¶  æ»‘åŠ¨çª—å£ï¼ˆå‘é€çª—å£å’Œæ¥æ”¶çª—å£ï¼‰"></a>æµé‡æ§åˆ¶  æ»‘åŠ¨çª—å£ï¼ˆå‘é€çª—å£å’Œæ¥æ”¶çª—å£ï¼‰</h3><p>åœ¨ARQåè®®å‘é€è€…æ¯æ¬¡åªèƒ½å‘é€ä¸€ä¸ªåˆ†ç»„ï¼Œåœ¨åº”ç­”åˆ°æ¥å‰å¿…é¡»ç­‰å¾…ã€‚è€Œè¿ç»­ARQåè®®çš„å‘é€è€…æ‹¥æœ‰ä¸€ä¸ªå‘é€çª—å£ï¼Œå‘é€è€…å¯ä»¥åœ¨æ²¡æœ‰å¾—åˆ°åº”ç­”çš„æƒ…å†µä¸‹è¿ç»­å‘é€çª—å£ä¸­çš„åˆ†ç»„ã€‚è¿™æ ·é™ä½äº†ç­‰å¾…æ—¶é—´ï¼Œæé«˜äº†ä¼ è¾“æ•ˆç‡ã€‚<br>æ¥æ”¶ç«¯å¤„ç†æ•°æ®çš„é€Ÿåº¦æ˜¯æœ‰é™çš„ï¼Œå¦‚æœå‘é€æ–¹å‘é€æ•°æ®çš„é€Ÿåº¦è¿‡å¿«ï¼Œå¯¼è‡´æ¥æ”¶ç«¯çš„ç¼“å†²åŒºæ»¡ï¼Œè€Œå‘é€æ–¹ç»§ç»­å‘é€ï¼Œå°±ä¼šé€ æˆä¸¢åŒ…ï¼Œç»§è€Œå¼•èµ·ä¸¢åŒ…é‡ä¼ ç­‰ä¸€ç³»åˆ—è¿é”ååº”ã€‚<br><strong>TCPæ”¯æŒæ ¹æ®æ¥æ”¶ç«¯çš„å¤„ç†èƒ½åŠ›ï¼Œæ¥å†³å®šå‘é€ç«¯çš„å‘é€é€Ÿåº¦ï¼Œè¿™ä¸ªæœºåˆ¶å«åšæµé‡æ§åˆ¶ã€‚</strong><br>åœ¨TCPæŠ¥æ–‡æ®µé¦–éƒ¨ä¸­æœ‰ä¸€ä¸ª16ä½çª—å£é•¿åº¦ï¼Œå½“æ¥æ”¶ç«¯æ¥æ”¶åˆ°å‘é€æ–¹çš„æ•°æ®åï¼Œåœ¨åº”ç­”æŠ¥æ–‡ACKä¸­å°±å°†è‡ªèº«ç¼“å†²åŒºçš„å‰©ä½™å¤§å°ï¼Œæ”¾å…¥16çª—å£å¤§å°ä¸­ã€‚è¿™ä¸ªå¤§å°éšæ•°æ®ä¼ è¾“æƒ…å†µè€Œå˜ï¼Œçª—å£è¶Šå¤§ï¼Œç½‘ç»œååé‡è¶Šé«˜ï¼Œè€Œä¸€æ—¦æ¥æ”¶æ–¹å‘ç°è‡ªèº«çš„ç¼“å†²åŒºå¿«æ»¡äº†ï¼Œå°±å°†çª—å£è®¾ç½®ä¸ºæ›´å°çš„å€¼é€šçŸ¥å‘é€æ–¹ã€‚å¦‚æœç¼“å†²åŒºæ»¡ï¼Œå°±å°†çª—å£ç½®ä¸º0ï¼Œå‘é€æ–¹æ”¶åˆ°åå°±ä¸å†å‘é€æ•°æ®ï¼Œä½†æ˜¯éœ€è¦å®šæœŸå‘é€ä¸€ä¸ªçª—å£æ¢æµ‹æ•°æ®æ®µï¼Œä½¿æ¥æ”¶ç«¯æŠŠçª—å£å¤§å°å‘Šè¯‰å‘é€ç«¯ã€‚ </p>
<ul>
<li>å·²ç»å‘é€å¹¶ä¸”å¯¹ç«¯ç¡®è®¤ï¼ˆSent/ACKedï¼‰â€”â€”â€”â€”â€”â€”â€”-å‘é€çª—å¤– ç¼“å†²åŒºå¤–<br>å·²ç»å‘é€ä½†æœªæ”¶åˆ°ç¡®è®¤æ•°æ®ï¼ˆSent/UnACKedï¼‰ â€”â€”â€”â€”-å‘é€çª—å†… ç¼“å†²åŒºå†…<br>å…è®¸å‘é€ä½†å°šæœªé˜²çš„æ•°æ®ï¼ˆUnsent/Insideï¼‰â€”â€”â€”â€”â€”å‘é€çª—å†… ç¼“å†²åŒºå†…<br>æœªå‘é€æš‚ä¸å…è®¸ï¼ˆUnsent/Outsideï¼‰â€”â€”â€”â€”â€”â€”â€”â€”-å‘é€çª—å¤– ç¼“å†²åŒºå†…<br>ç¬¬äºŒã€ä¸‰ä¸º<strong>å‘é€çª—å£ï¼Œå­˜æ”¾åœ¨TCP headerä¸­æœ‰ä¸€ä¸ªWindow Sizeå­—æ®µï¼Œç”¨æ¥å‘ŠçŸ¥å‘é€ç«¯è‡ªå·±æ‰€èƒ½æ¥æ”¶çš„æ•°æ®é‡ï¼Œä»è€Œè¾¾åˆ°ä¸€éƒ¨åˆ†æµæ§çš„ç›®çš„ã€‚</strong></li>
<li>å¯¹äºTCPçš„æ¥æ”¶æ–¹ï¼Œåœ¨æŸä¸€æ—¶åˆ»åœ¨å®ƒçš„æ¥æ”¶ç¼“å­˜å†…å­˜åœ¨3ç§ã€‚<br>â€œå·²æ¥æ”¶â€ï¼Œâ€œæœªæ¥æ”¶å‡†å¤‡æ¥æ”¶â€ï¼Œâ€œæœªæ¥æ”¶å¹¶æœªå‡†å¤‡æ¥æ”¶â€ï¼ˆç”±äºACKç›´æ¥ç”±TCPåè®®æ ˆå›å¤ï¼Œé»˜è®¤æ— åº”ç”¨å»¶è¿Ÿï¼Œä¸å­˜åœ¨â€œå·²æ¥æ”¶æœªå›å¤ACKâ€ï¼‰ã€‚<br><strong>å…¶ä¸­â€œæœªæ¥æ”¶å‡†å¤‡æ¥æ”¶â€ç§°ä¹‹ä¸ºæ¥æ”¶çª—å£ã€‚</strong></li>
<li>TCPæ˜¯<strong>åŒå·¥</strong>çš„åè®®ï¼Œä¼šè¯çš„åŒæ–¹éƒ½å¯ä»¥åŒæ—¶æ¥æ”¶ã€å‘é€æ•°æ®ã€‚<strong>TCPä¼šè¯çš„åŒæ–¹éƒ½å„è‡ªç»´æŠ¤ä¸€ä¸ªâ€œå‘é€çª—å£â€å’Œä¸€ä¸ªâ€œæ¥æ”¶çª—å£â€ã€‚</strong>å…¶ä¸­å„è‡ªçš„â€œæ¥æ”¶çª—å£â€å¤§å°å–å†³äºåº”ç”¨ã€ç³»ç»Ÿã€ç¡¬ä»¶çš„é™åˆ¶ï¼ˆTCPä¼ è¾“é€Ÿç‡ä¸èƒ½å¤§äºåº”ç”¨çš„æ•°æ®å¤„ç†é€Ÿç‡ï¼‰ã€‚å„è‡ªçš„â€œå‘é€çª—å£â€åˆ™è¦æ±‚å–å†³äºå¯¹ç«¯é€šå‘Šçš„â€œæ¥æ”¶çª—å£â€ï¼Œè¦æ±‚ç›¸åŒã€‚</li>
</ul>
<h3 id="æ‹¥å¡æ§åˆ¶"><a href="#æ‹¥å¡æ§åˆ¶" class="headerlink" title="æ‹¥å¡æ§åˆ¶"></a>æ‹¥å¡æ§åˆ¶</h3><p>æµé‡æ§åˆ¶è§£å†³äº†ä¸¤å°ä¸»æœºä¹‹é—´å› ä¼ é€é€Ÿç‡è€Œå¯èƒ½å¼•èµ·çš„ä¸¢åŒ…é—®é¢˜ï¼Œåœ¨ä¸€æ–¹é¢ä¿è¯äº†TCPæ•°æ®ä¼ é€çš„å¯é æ€§ã€‚ç„¶è€Œå¦‚æœç½‘ç»œéå¸¸æ‹¥å µï¼Œæ­¤æ—¶å†å‘é€æ•°æ®å°±ä¼šåŠ é‡ç½‘ç»œè´Ÿæ‹…ï¼Œé‚£ä¹ˆå‘é€çš„æ•°æ®æ®µå¾ˆå¯èƒ½è¶…è¿‡äº†æœ€å¤§ç”Ÿå­˜æ—¶é—´ä¹Ÿæ²¡æœ‰åˆ°è¾¾æ¥æ”¶æ–¹ï¼Œå°±ä¼šäº§ç”Ÿä¸¢åŒ…é—®é¢˜ã€‚<br>ä¸ºæ­¤TCPå¼•å…¥æ…¢å¯åŠ¨æœºåˆ¶ï¼Œå…ˆå‘å‡ºå°‘é‡æ•°æ®ï¼Œå°±åƒæ¢è·¯ä¸€æ ·ï¼Œå…ˆæ‘¸æ¸…å½“å‰çš„ç½‘ç»œæ‹¥å µçŠ¶æ€åï¼Œå†å†³å®šæŒ‰ç…§å¤šå¤§çš„é€Ÿåº¦ä¼ é€æ•°æ®ã€‚<br>æ­¤å¤„å¼•å…¥ä¸€ä¸ª<strong>æ‹¥å¡çª—å£</strong>ï¼š<br>å‘é€å¼€å§‹æ—¶å®šä¹‰æ‹¥å¡çª—å£å¤§å°ä¸º1ï¼›æ¯æ¬¡æ”¶åˆ°ä¸€ä¸ªACKåº”ç­”ï¼Œæ‹¥å¡çª—å£åŠ 1ï¼›è€Œåœ¨æ¯æ¬¡å‘é€æ•°æ®æ—¶ï¼Œå‘é€çª—å£å–æ‹¥å¡çª—å£ä¸æ¥é€æ®µæ¥æ”¶çª—å£æœ€å°è€…ã€‚<br>æ…¢å¯åŠ¨ï¼šåœ¨å¯åŠ¨åˆæœŸä»¥æŒ‡æ•°å¢é•¿æ–¹å¼å¢é•¿ï¼›è®¾ç½®ä¸€ä¸ªæ…¢å¯åŠ¨çš„é˜ˆå€¼ï¼Œå½“ä»¥æŒ‡æ•°å¢é•¿è¾¾åˆ°é˜ˆå€¼æ—¶å°±åœæ­¢æŒ‡æ•°å¢é•¿ï¼ŒæŒ‰ç…§çº¿æ€§å¢é•¿æ–¹å¼å¢åŠ ï¼›çº¿æ€§å¢é•¿è¾¾åˆ°ç½‘ç»œæ‹¥å¡æ—¶ç«‹å³â€œä¹˜æ³•å‡å°â€ï¼Œæ‹¥å¡çª—å£ç½®å›1ï¼Œè¿›è¡Œæ–°ä¸€è½®çš„â€œæ…¢å¯åŠ¨â€ï¼ŒåŒæ—¶æ–°ä¸€è½®çš„é˜ˆå€¼å˜ä¸ºåŸæ¥çš„ä¸€åŠã€‚ </p>
<h2 id="TCPé•¿è¿æ¥-amp-çŸ­è¿æ¥"><a href="#TCPé•¿è¿æ¥-amp-çŸ­è¿æ¥" class="headerlink" title="TCPé•¿è¿æ¥ &amp; çŸ­è¿æ¥"></a>TCPé•¿è¿æ¥ &amp; çŸ­è¿æ¥</h2><ul>
<li><p>é•¿è¿æ¥ï¼Œä¹Ÿå«æŒä¹…è¿æ¥ï¼Œåœ¨TCPå±‚æ¡æ‰‹æˆåŠŸåï¼Œä¸ç«‹å³æ–­å¼€è¿æ¥ï¼Œå¹¶åœ¨æ­¤è¿æ¥çš„åŸºç¡€ä¸Šè¿›è¡Œå¤šæ¬¡æ¶ˆæ¯ï¼ˆåŒ…æ‹¬å¿ƒè·³ï¼‰äº¤äº’ï¼Œç›´è‡³è¿æ¥çš„ä»»æ„ä¸€æ–¹ï¼ˆå®¢æˆ·ç«¯ORæœåŠ¡ç«¯ï¼‰ä¸»åŠ¨æ–­å¼€è¿æ¥ï¼Œæ­¤è¿‡ç¨‹ç§°ä¸ºä¸€æ¬¡å®Œæ•´çš„é•¿è¿æ¥ã€‚<strong>HTTP 1.1ç›¸å¯¹äº1.0æœ€é‡è¦çš„æ–°ç‰¹æ€§å°±æ˜¯å¼•å…¥äº†é•¿è¿æ¥ã€‚</strong><br>çŸ­è¿æ¥</p>
</li>
<li><p>çŸ­è¿æ¥ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„å“åº”åï¼Œç«‹åˆ»å‘é€FINæ¶ˆæ¯ï¼Œä¸»åŠ¨é‡Šæ”¾è¿æ¥ã€‚ä¹Ÿæœ‰æœåŠ¡ç«¯ä¸»åŠ¨æ–­è¿çš„æƒ…å†µï¼Œå‡¡æ˜¯åœ¨ä¸€æ¬¡æ¶ˆæ¯äº¤äº’ï¼ˆå‘è¯·æ±‚-æ”¶å“åº”ï¼‰ä¹‹åç«‹åˆ»æ–­å¼€è¿æ¥çš„æƒ…å†µéƒ½ç§°ä¸ºçŸ­è¿æ¥ã€‚<strong>çŸ­è¿æ¥æ˜¯å»ºç«‹åœ¨TCPåè®®ä¸Šçš„ï¼Œæœ‰å®Œæ•´çš„æ¡æ‰‹æŒ¥æ‰‹æµç¨‹ï¼ŒåŒºåˆ«äºUDPåè®®ã€‚</strong></p>
</li>
</ul>
<h2 id="UDPæœ‰æ‹¥å¡æ§åˆ¶å—ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ"><a href="#UDPæœ‰æ‹¥å¡æ§åˆ¶å—ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="UDPæœ‰æ‹¥å¡æ§åˆ¶å—ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ"></a>UDPæœ‰æ‹¥å¡æ§åˆ¶å—ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</h2><p>UDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå¯ä»¥æ ¹æ®ä¸¢åŒ…ç‡æ¥åˆ¤æ–­ç½‘ç»œçš„æ‹¥å¡æƒ…å†µ,å¦‚æœç½‘ç»œæ‹¥å¡,æ¥æ”¶æ–¹é€šçŸ¥å‘é€æ–¹è°ƒæ•´å‘é€é€Ÿç‡ä»è€Œæœ‰æ•ˆè§£å†³å…¬å¹³æ€§é—®é¢˜ä»¥åŠUDPçš„æ‹¥å¡æ§åˆ¶é—®é¢˜ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦æœ‰-time-wait"><a href="#ä¸ºä»€ä¹ˆè¦æœ‰-time-wait" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æœ‰ time_wait"></a>ä¸ºä»€ä¹ˆè¦æœ‰ time_wait</h2><p>å‡è®¾æœ€ç»ˆçš„ACKä¸¢å¤±ï¼Œä¸»æœº2å°†é‡å‘FINï¼Œä¸»æœº1å¿…é¡»ç»´æŠ¤TCPçŠ¶æ€ä¿¡æ¯ä»¥ä¾¿å¯ä»¥é‡å‘æœ€ç»ˆçš„ACKï¼Œå¦åˆ™ä¼šå‘é€RSTï¼Œç»“æœä¸»æœº2è®¤ä¸ºå‘ç”Ÿé”™è¯¯ã€‚TCPå®ç°å¿…é¡»å¯é åœ°ç»ˆæ­¢è¿æ¥çš„ä¸¤ä¸ªæ–¹å‘(å…¨åŒå·¥å…³é—­)ï¼Œä¸»æœº1å¿…é¡»è¿›å…¥ TIME_WAIT çŠ¶æ€ï¼Œå› ä¸ºä¸»æœº1å¯èƒ½é¢ä¸´é‡å‘æœ€ç»ˆACKçš„æƒ…å½¢ã€‚</p>
<blockquote>
<p>  <a href="https://www.zhihu.com/question/47378601/answer/276353285">https://www.zhihu.com/question/47378601/answer/276353285</a><br>    <a href="https://blog.csdn.net/xuzhangze/article/details/80490362">https://blog.csdn.net/xuzhangze/article/details/80490362</a><br>    <a href="https://www.cnblogs.com/xdyixia/p/9294885.html">https://www.cnblogs.com/xdyixia/p/9294885.html</a><br>    <a href="https://www.cnblogs.com/hongdada/p/11171068.html">https://www.cnblogs.com/hongdada/p/11171068.html</a><br>    <a href="https://www.cnblogs.com/Paul-watermelon/p/11141422.html">https://www.cnblogs.com/Paul-watermelon/p/11141422.html</a><br>    <a href="https://xueshu.baidu.com/usercenter/paper/show?paperid=6576ba05a97ec447bcf1111cbd0485e9&amp;site=xueshu_se">https://xueshu.baidu.com/usercenter/paper/show?paperid=6576ba05a97ec447bcf1111cbd0485e9&amp;site=xueshu_se</a><br>    <a href="https://blog.51cto.com/11859650/1917938">https://blog.51cto.com/11859650/1917938</a></p>
</blockquote>
<h1 id="http-amp-https"><a href="#http-amp-https" class="headerlink" title="http &amp; https"></a>http &amp; https</h1><h2 id="httpä¸httpsçš„åŒºåˆ«"><a href="#httpä¸httpsçš„åŒºåˆ«" class="headerlink" title="httpä¸httpsçš„åŒºåˆ«"></a>httpä¸httpsçš„åŒºåˆ«</h2><p>HTTPSæ˜¯åœ¨HTTPä¸Šå»ºç«‹SSLåŠ å¯†å±‚ï¼Œå¹¶å¯¹ä¼ è¾“æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œæ˜¯HTTPåè®®çš„å®‰å…¨ç‰ˆã€‚HTTPSåè®®ï¼Œå®ƒæ¯”HTTPåè®®ç›¸æ¯”å¤šäº†ä»¥ä¸‹ä¼˜åŠ¿:<br>æ•°æ®éšç§æ€§ï¼šå†…å®¹ç»è¿‡å¯¹ç§°åŠ å¯†ï¼Œæ¯ä¸ªè¿æ¥ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„åŠ å¯†å¯†é’¥<br>æ•°æ®å®Œæ•´æ€§ï¼šå†…å®¹ä¼ è¾“ç»è¿‡å®Œæ•´æ€§æ ¡éªŒ<br>èº«ä»½è®¤è¯ï¼šç¬¬ä¸‰æ–¹æ— æ³•ä¼ªé€ æœåŠ¡ç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰èº«ä»½ï¼ˆæ•°å­—ç­¾åï¼‰<br>å‘é€å¯†æ–‡çš„ä¸€æ–¹ä½¿ç”¨å¯¹æ–¹çš„å…¬é’¥è¿›è¡ŒåŠ å¯†å¤„ç†â€œå¯¹ç§°çš„å¯†é’¥â€ï¼Œç„¶åå¯¹æ–¹ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†æ‹¿åˆ°â€œå¯¹ç§°çš„å¯†é’¥â€ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿äº¤æ¢çš„å¯†é’¥æ˜¯å®‰å…¨çš„å‰æä¸‹ï¼Œä½¿ç”¨å¯¹ç§°åŠ å¯†æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚æ‰€ä»¥ï¼Œ<strong>HTTPSé‡‡ç”¨å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ä¸¤è€…å¹¶ç”¨çš„æ··åˆåŠ å¯†æœºåˆ¶ã€‚</strong></p>
<ul>
<li>HTTPSæ¯”HTTPæ›´åŠ å®‰å…¨ï¼Œå¯¹æœç´¢å¼•æ“æ›´å‹å¥½ï¼Œåˆ©äºSEOï¼Œè°·æ­Œã€ç™¾åº¦ä¼˜å…ˆç´¢å¼•HTTPSç½‘é¡µ;</li>
<li>HTTPSéœ€è¦ç”¨åˆ°SSLè¯ä¹¦ï¼Œè€ŒHTTPä¸ç”¨;</li>
<li>HTTPSæ ‡å‡†ç«¯å£443ï¼ŒHTTPæ ‡å‡†ç«¯å£80;</li>
<li>HTTPSåŸºäºä¼ è¾“å±‚ï¼ŒHTTPåŸºäºåº”ç”¨å±‚;</li>
<li>HTTPSåœ¨æµè§ˆå™¨æ˜¾ç¤ºç»¿è‰²å®‰å…¨é”ï¼ŒHTTPæ²¡æœ‰æ˜¾ç¤º;s</li>
<li>HTTPSéœ€è¦ä½¿ç”¨è¯ä¹¦ï¼Œå¿…é¡»å‘è®¤è¯æœºæ„ï¼ˆCAï¼‰è´­ä¹°ã€‚</li>
<li>HTTPSåŠ å¯†é€šä¿¡ä¼šæ¶ˆè€—æ›´å¤šçš„CPUåŠå†…å­˜èµ„æº</li>
</ul>
<h2 id="æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€åˆ°è·å¾—é¡µé¢çš„å…¨è¿‡ç¨‹"><a href="#æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€åˆ°è·å¾—é¡µé¢çš„å…¨è¿‡ç¨‹" class="headerlink" title="æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€åˆ°è·å¾—é¡µé¢çš„å…¨è¿‡ç¨‹"></a>æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€åˆ°è·å¾—é¡µé¢çš„å…¨è¿‡ç¨‹</h2><ol>
<li>æµè§ˆå™¨ä¸­è¾“å…¥åŸŸåwww.baidu.com</li>
<li>åŸŸåè§£æDNSå¾—åˆ°å¯¹åº”çš„ip<br>æ‰¾æµè§ˆå™¨ç¼“å­˜-&gt;æŸ¥çœ‹æœ¬æœºçš„hostæ–‡ä»¶-&gt;è·¯ç”±å™¨ç¼“å­˜-&gt;å¯¹æœ¬åœ°DNSæœåŠ¡å™¨è¿›è¡Œé€’å½’æŸ¥è¯¢-&gt;æœ¬åœ°åŸŸåæœåŠ¡å™¨é‡‡ç”¨è¿­ä»£æŸ¥è¯¢-&gt;æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆå‘Šè¯‰æœ¬åœ°é¡¶çº§ipï¼‰-&gt;é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼ˆå‘Šè¯‰æœ¬åœ°æƒå¨ipï¼‰-&gt;æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆå‘Šè¯‰æœ¬åœ°æŸ¥æ‰¾ç»“æœï¼‰-&gt;æœ¬åœ°åŸŸåæœåŠ¡å™¨æŠŠæŸ¥è¯¢ç»“æœå‘Šè¯‰æœ¬æœºã€‚</li>
<li>æµè§ˆå™¨ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ï¼š3æ¬¡æ¡æ‰‹è¿æ¥</li>
<li>æµè§ˆå™¨é€šè¿‡httpåè®®å‘ç›®æ ‡æœåŠ¡å™¨å‘é€è¯·æ±‚<br>æµè§ˆå™¨å‘ä¸»æœºå‘èµ·ä¸€ä¸ªHTTP-GETæ–¹æ³•æŠ¥æ–‡è¯·æ±‚ã€‚è¯·æ±‚ä¸­åŒ…å«è®¿é—®çš„URLï¼Œä¹Ÿå°±æ˜¯<a href="http://www.baidu.com/ç­‰ä¿¡æ¯ã€‚Cookieså¦‚æœæ˜¯é¦–æ¬¡è®¿é—®ï¼Œä¼šæç¤ºæœåŠ¡å™¨å»ºç«‹ç”¨æˆ·ç¼“å­˜ä¿¡æ¯ã€‚">http://www.baidu.com/ç­‰ä¿¡æ¯ã€‚Cookieså¦‚æœæ˜¯é¦–æ¬¡è®¿é—®ï¼Œä¼šæç¤ºæœåŠ¡å™¨å»ºç«‹ç”¨æˆ·ç¼“å­˜ä¿¡æ¯ã€‚</a></li>
<li>æœåŠ¡å™¨ç»™å‡ºå“åº”ï¼Œå°†æŒ‡å®šæ–‡ä»¶å‘é€ç»™æµè§ˆå™¨<br>çŠ¶æ€è¡Œï¼Œå“åº”å¤´ï¼Œå“åº”å®ä½“å†…å®¹ï¼Œè¿”å›çŠ¶æ€ç 200 OKï¼Œè¡¨ç¤ºæœåŠ¡å™¨å¯ä»¥å“åº”è¯·æ±‚ï¼Œè¿”å›æŠ¥æ–‡ï¼Œç”±äºåœ¨æŠ¥å¤´ä¸­Content-typeä¸ºâ€œtext/htmlâ€ï¼Œæµè§ˆå™¨ä»¥HTMLå½¢å¼å‘ˆç°ï¼Œè€Œä¸æ˜¯ä¸‹è½½æ–‡ä»¶ã€‚</li>
<li>TCPé‡Šæ”¾é“¾æ¥<br>æµè§ˆå™¨æ‰€åœ¨ä¸»æœºå‘æœåŠ¡å™¨å‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œç„¶ååœæ­¢å‘é€æ•°æ®ï¼›<br><strong>æœåŠ¡å™¨æ¥æ”¶åˆ°é‡Šæ”¾æŠ¥æ–‡åå‘å‡ºç¡®è®¤æŠ¥æ–‡ï¼Œç„¶åå°†æœåŠ¡å™¨ä¸Šæœªä¼ é€å®Œçš„æ•°æ®å‘é€å®Œï¼›</strong><br>æœåŠ¡å™¨æ•°æ®ä¼ è¾“å®Œæ¯•åï¼Œå‘å®¢æˆ·æœºå‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼›<br>å®¢æˆ·æœºæ¥æ”¶åˆ°æŠ¥æ–‡åï¼Œå‘å‡ºç¡®è®¤ï¼Œç„¶åç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œé‡Šæ”¾TCPè¿æ¥ï¼›</li>
<li>æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢ä¸­æ‰€æœ‰æ–‡æœ¬ã€‚<br>æµè§ˆå™¨æ¥æ”¶åˆ°è¿”å›çš„æ•°æ®åŒ…ï¼Œæ ¹æ®æµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶å¯¹ç›¸åº”çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ã€‚æ¸²æŸ“åçš„æ•°æ®ï¼Œè¿›è¡Œç›¸åº”çš„é¡µé¢å‘ˆç°å’Œè„šæ­¥çš„äº¤äº’ã€‚</li>
</ol>
<ul>
<li>æ¶‰åŠåˆ°çš„åè®®<br>  åº”ç”¨å±‚ï¼šHTTP(WWWè®¿é—®åè®®)ï¼ŒDNS(åŸŸåè§£ææœåŠ¡)<br>  ä¼ è¾“å±‚ï¼šTCP(ä¸ºHTTPæä¾›å¯é çš„æ•°æ®ä¼ è¾“)ï¼ŒUDP(DNSä½¿ç”¨UDPä¼ è¾“)<br>  ç½‘ç»œå±‚ï¼šIP(IPæ•°æ®æ•°æ®åŒ…ä¼ è¾“å’Œè·¯ç”±é€‰æ‹©)ï¼ŒICMP(æä¾›ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„å·®é”™æ£€æµ‹)ï¼ŒARP(å°†æœ¬æœºçš„é»˜è®¤ç½‘å…³IPåœ°å€æ˜ å°„æˆç‰©ç†MACåœ°å€)</li>
</ul>
<h2 id="è¾“å…¥-www-baidu-comï¼Œæ€ä¹ˆå˜æˆ-https-www-baidu-com-çš„ï¼Œæ€ä¹ˆç¡®å®šç”¨HTTPè¿˜æ˜¯HTTPSï¼Ÿ"><a href="#è¾“å…¥-www-baidu-comï¼Œæ€ä¹ˆå˜æˆ-https-www-baidu-com-çš„ï¼Œæ€ä¹ˆç¡®å®šç”¨HTTPè¿˜æ˜¯HTTPSï¼Ÿ" class="headerlink" title="è¾“å…¥ www.baidu.comï¼Œæ€ä¹ˆå˜æˆ https://www.baidu.com çš„ï¼Œæ€ä¹ˆç¡®å®šç”¨HTTPè¿˜æ˜¯HTTPSï¼Ÿ"></a>è¾“å…¥ www.baidu.comï¼Œæ€ä¹ˆå˜æˆ <a href="https://www.baidu.com">https://www.baidu.com</a> çš„ï¼Œæ€ä¹ˆç¡®å®šç”¨HTTPè¿˜æ˜¯HTTPSï¼Ÿ</h2><p>ä¸€ç§æ˜¯åŸå§‹çš„302è·³è½¬ï¼ŒæœåŠ¡å™¨æŠŠæ‰€æœ‰çš„HTTPæµé‡è·³è½¬åˆ°HTTPSã€‚ä½†è¿™æ ·æœ‰ä¸€ä¸ªæ¼æ´ï¼Œå°±æ˜¯ä¸­é—´äººå¯èƒ½åœ¨ç¬¬ä¸€æ¬¡è®¿é—®ç«™ç‚¹çš„æ—¶å€™å°±åŠ«æŒã€‚<br>è§£å†³æ–¹æ³•æ˜¯å¼•å…¥HSTSæœºåˆ¶ï¼Œç”¨æˆ·æµè§ˆå™¨åœ¨è®¿é—®ç«™ç‚¹çš„æ—¶å€™å¼ºåˆ¶ä½¿ç”¨HTTPSã€‚</p>
<h2 id="HTTPå¯ä»¥ä½¿ç”¨UDPå—"><a href="#HTTPå¯ä»¥ä½¿ç”¨UDPå—" class="headerlink" title="HTTPå¯ä»¥ä½¿ç”¨UDPå—"></a>HTTPå¯ä»¥ä½¿ç”¨UDPå—</h2><p>HTTP3ã€‚å¯¹ä¼ è¾“çš„æŠ¥æ–‡è¿›è¡Œå……åˆ†çš„åŠ å¯†</p>
<h2 id="HTTPåè®®çš„æŠ¥æ–‡æ ¼å¼"><a href="#HTTPåè®®çš„æŠ¥æ–‡æ ¼å¼" class="headerlink" title="HTTPåè®®çš„æŠ¥æ–‡æ ¼å¼"></a>HTTPåè®®çš„æŠ¥æ–‡æ ¼å¼</h2><p>å®¢æˆ·ç«¯è¯·æ±‚requestæŠ¥æ–‡æ ¼å¼ï¼šè¯·æ±‚è¡Œï¼ˆè¯·æ±‚æ–¹æ³•ï¼ŒURLï¼ŒHTTPåè®®ç‰ˆæœ¬ï¼‰ã€è¯·æ±‚å¤´éƒ¨ï¼ˆheaderï¼‰ã€ç©ºè¡Œã€è¯·æ±‚æ•°æ®<br>æœåŠ¡å™¨å“åº”responseæŠ¥æ–‡æ ¼å¼ï¼šçŠ¶æ€è¡Œï¼ˆHTTPåè®®ç‰ˆæœ¬ï¼Œ çŠ¶æ€ç ï¼Œ çŠ¶æ€æ¶ˆæ¯ï¼‰ã€æ¶ˆæ¯æŠ¥å¤´ã€ç©ºè¡Œã€å“åº”æ­£æ–‡</p>
<h2 id="Http1-0-amp-HTTP1-1"><a href="#Http1-0-amp-HTTP1-1" class="headerlink" title="Http1.0 &amp; HTTP1.1"></a>Http1.0 &amp; HTTP1.1</h2><ol>
<li>ç¼“å­˜å¤„ç†ï¼Œåœ¨HTTP1.0ä¸­ä¸»è¦ä½¿ç”¨headeré‡Œçš„If-Modified-Since,Expiresæ¥åšä¸ºç¼“å­˜åˆ¤æ–­çš„æ ‡å‡†ï¼ŒHTTP1.1åˆ™å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æ§åˆ¶ç­–ç•¥ä¾‹å¦‚Entity tagï¼ŒIf-Unmodified-Since, If-Match, If-None-Matchç­‰æ›´å¤šå¯ä¾›é€‰æ‹©çš„ç¼“å­˜å¤´æ¥æ§åˆ¶ç¼“å­˜ç­–ç•¥ã€‚</li>
<li>å¸¦å®½ä¼˜åŒ–åŠç½‘ç»œè¿æ¥çš„ä½¿ç”¨ï¼ŒHTTP1.0ä¸­ï¼Œå­˜åœ¨ä¸€äº›æµªè´¹å¸¦å®½çš„ç°è±¡ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯åªæ˜¯éœ€è¦æŸä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œè€ŒæœåŠ¡å™¨å´å°†æ•´ä¸ªå¯¹è±¡é€è¿‡æ¥äº†ï¼Œå¹¶ä¸”ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼ŒHTTP1.1åˆ™åœ¨è¯·æ±‚å¤´å¼•å…¥äº†rangeå¤´åŸŸï¼Œå®ƒå…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†ï¼Œå³è¿”å›ç æ˜¯206ï¼ˆPartial Contentï¼‰ï¼Œè¿™æ ·å°±æ–¹ä¾¿äº†å¼€å‘è€…è‡ªç”±çš„é€‰æ‹©ä»¥ä¾¿äºå……åˆ†åˆ©ç”¨å¸¦å®½å’Œè¿æ¥ã€‚</li>
<li>é”™è¯¯é€šçŸ¥çš„ç®¡ç†ï¼Œåœ¨HTTP1.1ä¸­æ–°å¢äº†24ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç ï¼Œå¦‚409ï¼ˆConflictï¼‰è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸èµ„æºçš„å½“å‰çŠ¶æ€å‘ç”Ÿå†²çªï¼›410ï¼ˆGoneï¼‰è¡¨ç¤ºæœåŠ¡å™¨ä¸Šçš„æŸä¸ªèµ„æºè¢«æ°¸ä¹…æ€§çš„åˆ é™¤ã€‚</li>
<li>Hostå¤´å¤„ç†ï¼Œåœ¨HTTP1.0ä¸­è®¤ä¸ºæ¯å°æœåŠ¡å™¨éƒ½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ï¼Œå› æ­¤ï¼Œè¯·æ±‚æ¶ˆæ¯ä¸­çš„URLå¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåï¼ˆhostnameï¼‰ã€‚ä½†éšç€è™šæ‹Ÿä¸»æœºæŠ€æœ¯çš„å‘å±•ï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼ˆMulti-homed Web Serversï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬å…±äº«ä¸€ä¸ªIPåœ°å€ã€‚HTTP1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½åº”æ”¯æŒHostå¤´åŸŸï¼Œä¸”è¯·æ±‚æ¶ˆæ¯ä¸­å¦‚æœæ²¡æœ‰Hostå¤´åŸŸä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯ï¼ˆ400 Bad Requestï¼‰ã€‚</li>
<li>é•¿è¿æ¥ï¼ŒHTTP 1.1æ”¯æŒé•¿è¿æ¥ï¼ˆPersistentConnectionï¼‰å’Œè¯·æ±‚çš„æµæ°´çº¿ï¼ˆPipeliningï¼‰å¤„ç†ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿æ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿï¼Œåœ¨HTTP1.1ä¸­é»˜è®¤å¼€å¯Connectionï¼š keep-aliveï¼Œä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†HTTP1.0æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ›å»ºè¿æ¥çš„ç¼ºç‚¹ã€‚</li>
</ol>
<h2 id="HTTP2-0å’ŒHTTP1-Xç›¸æ¯”çš„æ–°ç‰¹æ€§"><a href="#HTTP2-0å’ŒHTTP1-Xç›¸æ¯”çš„æ–°ç‰¹æ€§" class="headerlink" title="HTTP2.0å’ŒHTTP1.Xç›¸æ¯”çš„æ–°ç‰¹æ€§"></a>HTTP2.0å’ŒHTTP1.Xç›¸æ¯”çš„æ–°ç‰¹æ€§</h2><ol>
<li>æ–°çš„äºŒè¿›åˆ¶æ ¼å¼ï¼ˆBinary Formatï¼‰ï¼ŒHTTP1.xçš„è§£ææ˜¯åŸºäºæ–‡æœ¬ã€‚åŸºäºæ–‡æœ¬åè®®çš„æ ¼å¼è§£æå­˜åœ¨å¤©ç„¶ç¼ºé™·ï¼Œæ–‡æœ¬çš„è¡¨ç°å½¢å¼æœ‰å¤šæ ·æ€§ï¼Œè¦åšåˆ°å¥å£®æ€§è€ƒè™‘çš„åœºæ™¯å¿…ç„¶å¾ˆå¤šï¼ŒäºŒè¿›åˆ¶åˆ™ä¸åŒï¼Œåªè®¤0å’Œ1çš„ç»„åˆã€‚åŸºäºè¿™ç§è€ƒè™‘HTTP2.0çš„åè®®è§£æå†³å®šé‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ç°æ–¹ä¾¿ä¸”å¥å£®ã€‚</li>
<li>å¤šè·¯å¤ç”¨ï¼ˆMultiPlexingï¼‰ï¼Œå³è¿æ¥å…±äº«ï¼Œå³æ¯ä¸€ä¸ªrequestéƒ½æ˜¯æ˜¯ç”¨ä½œè¿æ¥å…±äº«æœºåˆ¶çš„ã€‚ä¸€ä¸ªrequestå¯¹åº”ä¸€ä¸ªidï¼Œè¿™æ ·ä¸€ä¸ªè¿æ¥ä¸Šå¯ä»¥æœ‰å¤šä¸ªrequestï¼Œæ¯ä¸ªè¿æ¥çš„requestå¯ä»¥éšæœºçš„æ··æ‚åœ¨ä¸€èµ·ï¼Œæ¥æ”¶æ–¹å¯ä»¥æ ¹æ®requestçš„ idå°†requestå†å½’å±åˆ°å„è‡ªä¸åŒçš„æœåŠ¡ç«¯è¯·æ±‚é‡Œé¢ã€‚</li>
<li>headerå‹ç¼©ï¼Œå¦‚ä¸Šæ–‡ä¸­æ‰€è¨€ï¼Œå¯¹å‰é¢æåˆ°è¿‡HTTP1.xçš„headerå¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡éƒ½è¦é‡å¤å‘é€ï¼ŒHTTP2.0ä½¿ç”¨encoderæ¥å‡å°‘éœ€è¦ä¼ è¾“çš„headerå¤§å°ï¼Œé€šè®¯åŒæ–¹å„è‡ªcacheä¸€ä»½header fieldsè¡¨ï¼Œæ—¢é¿å…äº†é‡å¤headerçš„ä¼ è¾“ï¼Œåˆå‡å°äº†éœ€è¦ä¼ è¾“çš„å¤§å°ã€‚</li>
<li>æœåŠ¡ç«¯æ¨é€ï¼ˆserver pushï¼‰ï¼ŒåŒSPDYä¸€æ ·ï¼ŒHTTP2.0ä¹Ÿå…·æœ‰server pushåŠŸèƒ½ã€‚</li>
</ol>
<h2 id="HTTPè¯·æ±‚æ–¹æ³•"><a href="#HTTPè¯·æ±‚æ–¹æ³•" class="headerlink" title="HTTPè¯·æ±‚æ–¹æ³•"></a>HTTPè¯·æ±‚æ–¹æ³•</h2><ol>
<li><strong>GETæ–¹æ³•æ„æ€æ˜¯è·å–URLæŒ‡å®šçš„èµ„æº</strong>ï¼Œä½¿ç”¨GETæ–¹æ³•æ—¶ï¼Œå¯ä»¥å°†è¯·æ±‚å‚æ•°å’Œå¯¹åº”çš„å€¼é™„åŠ åœ¨ URI åé¢ï¼Œåˆ©ç”¨ä¸€ä¸ªé—®å·(â€œ?â€)å°†èµ„æºçš„URIå’Œè¯·æ±‚å‚æ•°éš”å¼€ï¼Œå‚æ•°ä¹‹é—´ä½¿ç”¨ä¸ç¬¦å·(â€œ&amp;â€)éš”å¼€ï¼Œå› æ­¤ä¼ é€’å‚æ•°é•¿åº¦ä¹Ÿå—åˆ°äº†é™åˆ¶ï¼Œè€Œä¸”ä¸éšç§ç›¸å…³çš„ä¿¡æ¯ä¹Ÿç›´æ¥æš´éœ²åœ¨URIä¸­ã€‚æ¯”å¦‚/index.jsp?username=holmofy&amp;password=123123</li>
<li>HEAD æ–¹æ³•ä¸GETç”¨æ³•ç›¸åŒï¼Œä½†æ²¡æœ‰å“åº”ä½“ï¼Œä½¿ç”¨åœºåˆæ²¡æœ‰GETå¤šã€‚æ¯”å¦‚ä¸‹è½½å‰ä½¿ç”¨HEADå‘é€è¯·æ±‚ï¼Œé€šè¿‡ContentLengthå“åº”å­—æ®µï¼Œæ¥äº†è§£ç½‘ç»œèµ„æºçš„å¤§å°ï¼›æˆ–è€…é€šè¿‡LastModifiedå“åº”å­—æ®µæ¥åˆ¤æ–­æœ¬åœ°ç¼“å­˜èµ„æºæ˜¯å¦è¦æ›´æ–°ã€‚ </li>
<li><strong>POST æ–¹æ³•ä¸€èˆ¬ç”¨æäº¤ä¿¡æ¯æˆ–æ•°æ®ï¼Œè¯·æ±‚æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚</strong>è¡¨å•ä½¿ç”¨POSTç›¸å¯¹GETæ¥è¯´è¿˜æ˜¯æ¯”è¾ƒéšç§˜çš„ï¼Œè€Œä¸”GETçš„URLæœ‰é•¿åº¦é™åˆ¶ï¼Œè€Œä¸Šä¼ å¤§æ–‡ä»¶å°±å¿…é¡»è¦ä½¿ç”¨POSTäº†ã€‚</li>
<li>OPTIONSæ–¹æ³•æ¯”è¾ƒå°‘è§ï¼Œè¯¥æ–¹æ³•ç”¨äºè¯·æ±‚æœåŠ¡å™¨å‘ŠçŸ¥å…¶æ”¯æŒå“ªäº›å…¶ä»–çš„åŠŸèƒ½å’Œæ–¹æ³•ã€‚é€šè¿‡OPTIONS æ–¹æ³•ï¼Œå¯ä»¥è¯¢é—®æœåŠ¡å™¨å…·ä½“æ”¯æŒå“ªäº›æ–¹æ³•ï¼Œæˆ–è€…æœåŠ¡å™¨ä¼šä½¿ç”¨ä»€ä¹ˆæ ·çš„æ–¹æ³•æ¥å¤„ç†ä¸€äº›ç‰¹æ®Šèµ„æºã€‚å¯ä»¥è¯´è¿™æ˜¯ä¸€ä¸ªæ¢æµ‹æ€§çš„æ–¹æ³•ï¼Œå®¢æˆ·ç«¯é€šè¿‡è¯¥æ–¹æ³•å¯ä»¥åœ¨ä¸è®¿é—®æœåŠ¡å™¨ä¸Šå®é™…èµ„æºçš„æƒ…å†µä¸‹å°±çŸ¥é“å¤„ç†è¯¥èµ„æºçš„æœ€ä¼˜æ–¹å¼ã€‚è¿™ä¸ªé€‰é¡¹åœ¨è·¨åŸŸHTTPè¯·æ±‚çš„æƒ…å†µå‡ºç°çš„æ¯”è¾ƒå¤šï¼Œè¿™é‡Œæœ‰ä¸€ç‰‡å…³äºè·¨åŸŸè¯·æ±‚çš„æ–‡ç« ï¼Œå…¶ä¸­æœ‰ä¸€å¼ å›¾å¾ˆå¥½çš„è§£é‡Šäº†ä»€ä¹ˆæ˜¯è·¨åŸŸHTTPè¯·æ±‚ã€‚ </li>
</ol>
<h2 id="GETä¸POSTçš„åŒºåˆ«"><a href="#GETä¸POSTçš„åŒºåˆ«" class="headerlink" title="GETä¸POSTçš„åŒºåˆ«"></a>GETä¸POSTçš„åŒºåˆ«</h2><p>GETæ˜¯å¹‚ç­‰çš„ï¼Œå³è¯»å–åŒä¸€ä¸ªèµ„æºï¼Œæ€»æ˜¯å¾—åˆ°ç›¸åŒçš„æ•°æ®ï¼ŒPOSTä¸æ˜¯å¹‚ç­‰çš„ï¼›<br>GETä¸€èˆ¬ç”¨äºä»æœåŠ¡å™¨è·å–èµ„æºï¼Œè€ŒPOSTæœ‰å¯èƒ½æ”¹å˜æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼›<br>è¯·æ±‚å½¢å¼ä¸Šï¼šGETè¯·æ±‚çš„æ•°æ®é™„åœ¨URLä¹‹åï¼Œåœ¨HTTPè¯·æ±‚å¤´ä¸­ï¼›POSTè¯·æ±‚çš„æ•°æ®åœ¨è¯·æ±‚ä½“ä¸­ï¼›<br>å®‰å…¨æ€§ï¼šGETè¯·æ±‚å¯è¢«ç¼“å­˜ã€æ”¶è—ã€ä¿ç•™åˆ°å†å²è®°å½•ï¼Œä¸”å…¶è¯·æ±‚æ•°æ®æ˜æ–‡å‡ºç°åœ¨URLä¸­ã€‚POSTçš„å‚æ•°ä¸ä¼šè¢«ä¿å­˜ï¼Œå®‰å…¨æ€§ç›¸å¯¹è¾ƒé«˜ï¼›<br>GETåªå…è®¸ASCIIå­—ç¬¦ï¼ŒPOSTå¯¹æ•°æ®ç±»å‹æ²¡æœ‰è¦æ±‚ï¼Œä¹Ÿå…è®¸äºŒè¿›åˆ¶æ•°æ®ï¼›<br>GETçš„é•¿åº¦æœ‰é™åˆ¶ï¼ˆæ“ä½œç³»ç»Ÿæˆ–è€…æµè§ˆå™¨ï¼‰ï¼Œè€ŒPOSTæ•°æ®å¤§å°æ— é™åˆ¶</p>
<h2 id="å¸¸è§çš„çŠ¶æ€ç "><a href="#å¸¸è§çš„çŠ¶æ€ç " class="headerlink" title="å¸¸è§çš„çŠ¶æ€ç "></a>å¸¸è§çš„çŠ¶æ€ç </h2><p>1XXï¼šä¿¡æ¯æç¤ºã€‚è¡¨ç¤ºè¯·æ±‚å·²è¢«æœåŠ¡å™¨æ¥å—ï¼Œä½†éœ€è¦ç»§ç»­å¤„ç†ï¼ŒèŒƒå›´ä¸º100~101ã€‚<br>2XXï¼šè¯·æ±‚æˆåŠŸã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ã€‚èŒƒå›´ä¸º200~206ã€‚<br>3XXï¼šå®¢æˆ·ç«¯é‡å®šå‘ã€‚é‡å®šå‘çŠ¶æ€ç ç”¨äºå‘Šè¯‰å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œå®ƒä»¬è®¿é—®çš„èµ„æºå·²è¢«ç§»åŠ¨ï¼Œå¹¶å‘Šè¯‰å®¢æˆ·ç«¯æ–°çš„èµ„æºä½ç½®ã€‚å®¢æˆ·ç«¯æ”¶åˆ°é‡å®šå‘ä¼šé‡æ–°å¯¹æ–°èµ„æºå‘èµ·è¯·æ±‚ã€‚èŒƒå›´ä¸º300~305ã€‚<br>4XXï¼šå®¢æˆ·ç«¯ä¿¡æ¯é”™è¯¯ã€‚å®¢æˆ·ç«¯å¯èƒ½å‘é€äº†æœåŠ¡å™¨æ— æ³•å¤„ç†çš„ä¸œè¥¿ï¼Œæ¯”å¦‚è¯·æ±‚çš„æ ¼å¼é”™è¯¯ï¼Œæˆ–è€…è¯·æ±‚äº†ä¸€ä¸ªä¸å­˜åœ¨çš„èµ„æºã€‚èŒƒå›´ä¸º400~415ã€‚<br>5XXï¼šæœåŠ¡å™¨å‡ºé”™ã€‚å®¢æˆ·ç«¯å‘é€äº†æœ‰æ•ˆçš„è¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨è‡ªèº«å‡ºç°é”™è¯¯ï¼Œæ¯”å¦‚Webç¨‹åºè¿è¡Œå‡ºé”™ã€‚èŒƒå›´æ˜¯500~505ã€‚<br>200: ok<br>304: not modified<br>400: bad request<br>404: not found</p>
<blockquote>
<p>  <a href="https://blog.csdn.net/Goligory/article/details/104513317">https://blog.csdn.net/Goligory/article/details/104513317</a><br>    <a href="https://blog.csdn.net/qiuchaoxi/article/details/79415400">https://blog.csdn.net/qiuchaoxi/article/details/79415400</a><br>    <a href="https://www.cnblogs.com/jpfss/p/10984966.html">https://www.cnblogs.com/jpfss/p/10984966.html</a><br>    <a href="https://blog.csdn.net/qq_38128179/article/details/85068195">https://blog.csdn.net/qq_38128179/article/details/85068195</a><br>    <a href="https://blog.csdn.net/qq_40638598/article/details/105293250">https://blog.csdn.net/qq_40638598/article/details/105293250</a><br>    <a href="https://www.cnblogs.com/heluan/p/8620312.html">https://www.cnblogs.com/heluan/p/8620312.html</a></p>
</blockquote>
<h1 id="Cookie-amp-Session"><a href="#Cookie-amp-Session" class="headerlink" title="Cookie &amp; Session"></a>Cookie &amp; Session</h1><h2 id="Cookieçš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ"><a href="#Cookieçš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Cookieçš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ"></a>Cookieçš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ</h2><p>setcookie()å‡½æ•°å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª HTTP cookieã€‚<br>cookieçš„åç§°æŒ‡å®šä¸ºç›¸åŒåç§°çš„å˜é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¢«å‘é€çš„ cookie åä¸º â€œnameâ€ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºåä¸º $user çš„å˜é‡ï¼ŒåŒ…å«cookie çš„å€¼ã€‚<br>setcookie(name,value,expire,path,domain,secure)<br>åç§°ã€å€¼ã€æœ‰æ•ˆæœŸã€æœåŠ¡å™¨è·¯å¾„ã€åŸŸåã€æ˜¯å¦ç”¨å®‰å…¨çš„httpsæ¥ä¼ è¾“</p>
<h2 id="Cookieè¢«ä»¿é€ æ€ä¹ˆåŠï¼Ÿ"><a href="#Cookieè¢«ä»¿é€ æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="Cookieè¢«ä»¿é€ æ€ä¹ˆåŠï¼Ÿ"></a>Cookieè¢«ä»¿é€ æ€ä¹ˆåŠï¼Ÿ</h2><p>å»ºè®®å¯¹å®¢æˆ·ç«¯æ ‡è¯†çš„ç”¨æˆ·æ•æ„Ÿä¿¡æ¯æ•°æ®ï¼Œä½¿ç”¨Sessionä¼šè¯è®¤è¯æ–¹å¼ï¼Œé¿å…è¢«ä»–äººä»¿å†’èº«ä»½ã€‚<br>æ•æ„Ÿçš„ä¿¡æ¯å¦‚è´¦å·å¯†ç ç­‰å°½é‡ä¸è¦å†™åˆ°Cookieä¸­ã€‚æœ€å¥½æ˜¯åƒGoogleã€Baidué‚£æ ·å°†Cookieä¿¡æ¯åŠ å¯†ï¼Œæäº¤åˆ°æœåŠ¡å™¨åå†è¿›è¡Œè§£å¯†ï¼Œä¿è¯Cookieä¸­çš„ä¿¡æ¯åªè¦æœ¬äººèƒ½è¯»å¾—æ‡‚ã€‚è€Œå‡å¦‚é€‰æ‹©Sessionå°±çœäº‹å¤šäº†ï¼Œåæ­£æ˜¯æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼ŒSessioné‡Œä»»ä½•éšç§éƒ½èƒ½å¤Ÿæœ‰æ•ˆçš„ä¿æŠ¤ã€‚</p>
<h2 id="Cookieå’ŒSessionçš„åŒºåˆ«"><a href="#Cookieå’ŒSessionçš„åŒºåˆ«" class="headerlink" title="Cookieå’ŒSessionçš„åŒºåˆ«"></a>Cookieå’ŒSessionçš„åŒºåˆ«</h2><ol>
<li>æ•°æ®å­˜æ”¾ä½ç½®ä¸åŒï¼šcookieæ•°æ®å­˜æ”¾åœ¨å®¢æˆ·çš„æµè§ˆå™¨ä¸Šï¼Œsessionæ•°æ®æ”¾åœ¨æœåŠ¡å™¨ä¸Šã€‚</li>
<li>å®‰å…¨ç¨‹åº¦ä¸åŒï¼šcookieä¸æ˜¯å¾ˆå®‰å…¨ï¼Œåˆ«äººå¯ä»¥åˆ†æå­˜æ”¾åœ¨æœ¬åœ°çš„COOKIEå¹¶è¿›è¡ŒCOOKIEæ¬ºéª—ï¼Œè€ƒè™‘åˆ°å®‰å…¨åº”å½“ä½¿ç”¨sessionã€‚</li>
<li>æ€§èƒ½ä½¿ç”¨ç¨‹åº¦ä¸åŒï¼šsessionä¼šåœ¨ä¸€å®šæ—¶é—´å†…ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å½“è®¿é—®å¢å¤šï¼Œä¼šæ¯”è¾ƒå ç”¨ä½ æœåŠ¡å™¨çš„æ€§èƒ½ï¼Œè€ƒè™‘åˆ°å‡è½»æœåŠ¡å™¨æ€§èƒ½æ–¹é¢ï¼Œåº”å½“ä½¿ç”¨cookieï¼›cookieä¼šé™„åŠ åœ¨æ¯ä¸ªhttpè¯·æ±‚ä¸­ï¼Œæ— å½¢å¢åŠ äº†æµé‡ï¼Œå¯¹äºå¤§dataä¸é€‚ç”¨ã€‚</li>
<li>æ•°æ®å­˜å‚¨å¤§å°ä¸åŒï¼šå•ä¸ªcookieä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡4Kï¼Œå¾ˆå¤šæµè§ˆå™¨éƒ½é™åˆ¶ä¸€ä¸ªç«™ç‚¹æœ€å¤šä¿å­˜20ä¸ªcookieï¼Œè€Œsessionåˆ™å­˜å‚¨ä¸æœåŠ¡ç«¯ï¼Œæµè§ˆå™¨å¯¹å…¶æ²¡æœ‰é™åˆ¶ã€‚</li>
<li>æµè§ˆå™¨æ”¯æŒä¸åŒï¼šCookieæ˜¯éœ€è¦å®¢æˆ·ç«¯æµè§ˆå™¨æ”¯æŒçš„ã€‚å‡å¦‚å®¢æˆ·ç«¯ç¦ç”¨äº†Cookieï¼Œæˆ–è€…ä¸æ”¯æŒCookieï¼Œåˆ™ä¼šè¯è·Ÿè¸ªä¼šå¤±æ•ˆã€‚å…³äºWAPä¸Šçš„åº”ç”¨ï¼Œå¸¸è§„çš„Cookieå°±æ´¾ä¸ä¸Šç”¨åœºäº†ã€‚</li>
<li>è·¨åŸŸæ”¯æŒä¸åŒï¼šCookieæ”¯æŒè·¨åŸŸåè®¿é—®ï¼Œä¾‹å¦‚å°†domainå±æ€§è®¾ç½®ä¸ºâ€œ.biaodianfu.comâ€ï¼Œåˆ™ä»¥â€œ.biaodianfu.comâ€ä¸ºåç¼€çš„ä¸€åˆ‡åŸŸåå‡èƒ½å¤Ÿè®¿é—®è¯¥Cookieã€‚è·¨åŸŸåCookieå¦‚ä»Šè¢«æ™®éç”¨åœ¨ç½‘ç»œä¸­ï¼Œä¾‹å¦‚Googleã€Baiduã€Sinaç­‰ã€‚è€ŒSessionåˆ™ä¸ä¼šæ”¯æŒè·¨åŸŸåè®¿é—®ã€‚Sessionä»…åœ¨ä»–æ‰€åœ¨çš„åŸŸåå†…æœ‰æ•ˆã€‚</li>
<li>å­˜æ”¾æ•°æ®ç±»å‹ä¸åŒï¼šcookieå­˜æ”¾çš„æ ‘ASCLLç è¡¨ç¤ºçš„æ•°æ®ï¼Œè€ŒSessionä¸­å¯ä»¥ä¿å­˜ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</li>
</ol>
<h2 id="Sessionæ ¡éªŒæœåŠ¡å™¨è¯¥å¦‚ä½•è®¾è®¡"><a href="#Sessionæ ¡éªŒæœåŠ¡å™¨è¯¥å¦‚ä½•è®¾è®¡" class="headerlink" title="Sessionæ ¡éªŒæœåŠ¡å™¨è¯¥å¦‚ä½•è®¾è®¡"></a>Sessionæ ¡éªŒæœåŠ¡å™¨è¯¥å¦‚ä½•è®¾è®¡</h2><p>sessionæœºåˆ¶æ˜¯ä¸€ç§æœåŠ¡å™¨ç«¯çš„æœºåˆ¶ï¼ŒæœåŠ¡å™¨ä½¿ç”¨ä¸€ç§ç±»ä¼¼äºæ•£åˆ—è¡¨çš„ç»“æ„ï¼ˆä¹Ÿå¯èƒ½å°±æ˜¯ä½¿ç”¨æ•£åˆ—è¡¨ï¼‰æ¥ä¿å­˜ä¿¡æ¯ã€‚ä¸ºæ­¤å®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªsessionå¹¶ä¸”ç”Ÿæˆä¸€ä¸ªä¸æ­¤sessionç›¸å…³è”çš„session idï¼Œsession idçš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªæ—¢ä¸ä¼šé‡å¤ï¼Œåˆä¸å®¹æ˜“è¢«æ‰¾åˆ°è§„å¾‹ä»¥ä»¿é€ çš„å­—ç¬¦ä¸²ã€‚<br>æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚éƒ½ä¼šå’ŒæœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªä¼šè¯ï¼Œä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„SessionId, å®¢æˆ·ç«¯åœ¨æ”¶åˆ°SessionIdä¹‹åå¯ä»¥å°†seesionIdä¿å­˜(æ¯”å¦‚ä¿å­˜åœ¨cookieä¸­)ï¼Œç„¶åæ¯æ¬¡é€šè¿‡cookieçš„sessionIdå»éªŒè¯ã€‚<br>ç¼ºç‚¹ï¼šæ—¶é—´è¾ƒçŸ­ï¼Œéœ€è¦æœåŠ¡å™¨è®¾ç½®ï¼›æœåŠ¡å™¨æŒ‚äº†éœ€è¦é‡æ–°ç™»å½•ã€‚<br>1ã€ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€ç”¨æˆ·åå’Œå¯†ç ã€‚<br>2ã€æœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼Œåœ¨å½“å‰sessioné‡Œé¢ä¿å­˜ç›¸å…³æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·è§’è‰²ã€ç™»å½•æ—¶é—´ç­‰ç­‰ã€‚<br>3ã€æœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›ä¸€ä¸ª session_idï¼Œå†™å…¥ç”¨æˆ·çš„ Cookieã€‚<br>4ã€ç”¨æˆ·éšåçš„æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œéƒ½ä¼šé€šè¿‡ Cookieï¼Œå°† session_id ä¼ å›æœåŠ¡å™¨ã€‚<br>5ã€æœåŠ¡å™¨æ”¶åˆ° session_idï¼Œæ‰¾åˆ°å‰æœŸä¿å­˜çš„æ•°æ®ï¼Œç”±æ­¤å¾—çŸ¥ç”¨æˆ·çš„èº«ä»½ã€‚</p>
<h2 id="SessionåŠ«æŒ"><a href="#SessionåŠ«æŒ" class="headerlink" title="SessionåŠ«æŒ"></a>SessionåŠ«æŒ</h2><p>SessionåŠ«æŒæ”»å‡»é€šè¿‡çªƒå–æˆ–é¢„æµ‹æœ‰æ•ˆçš„Sessionä»¤ç‰Œæ¥è·å¾—æœªç»æˆæƒWebæœåŠ¡å™¨è®¿é—®æƒé™ã€‚<br>Session IDåº”è‡³å°‘ä¸º128ä½é•¿ï¼Œä»¥é˜²æ­¢è›®åŠ›SessionçŒœæµ‹æ”»å‡»ã€‚</p>
<blockquote>
<p>  <a href="https://blog.csdn.net/qq_36031499/article/details/54573461">https://blog.csdn.net/qq_36031499/article/details/54573461</a><br>    <a href="https://zhidao.baidu.com/question/575343552.html">https://zhidao.baidu.com/question/575343552.html</a><br>    <a href="https://www.cnblogs.com/hnzheng/p/12732047.html">https://www.cnblogs.com/hnzheng/p/12732047.html</a></p>
</blockquote>
<h1 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h1><h2 id="è§£é‡Šä¸‹Cacheçš„è¿è¡Œè¿‡ç¨‹ï¼Œæ€ä¹ˆä¿è¯cacheä¸€è‡´æ€§"><a href="#è§£é‡Šä¸‹Cacheçš„è¿è¡Œè¿‡ç¨‹ï¼Œæ€ä¹ˆä¿è¯cacheä¸€è‡´æ€§" class="headerlink" title="è§£é‡Šä¸‹Cacheçš„è¿è¡Œè¿‡ç¨‹ï¼Œæ€ä¹ˆä¿è¯cacheä¸€è‡´æ€§"></a>è§£é‡Šä¸‹Cacheçš„è¿è¡Œè¿‡ç¨‹ï¼Œæ€ä¹ˆä¿è¯cacheä¸€è‡´æ€§</h2><p>ä¸‰çº§ç¼“å­˜ç»“æ„cpu -&gt; cache -&gt; memory<br>ç¼“å­˜ä¸€è‡´æ€§ï¼šç”¨äºä¿è¯å¤šä¸ªCPU cacheä¹‹é—´ç¼“å­˜å…±äº«æ•°æ®çš„ä¸€è‡´ã€‚<br>MESIï¼Œåˆ™æ˜¯ç¼“å­˜ä¸€è‡´æ€§åè®®ä¸­çš„ä¸€ä¸ªï¼Œåˆ°åº•æ€ä¹ˆå®ç°ï¼Œè¿˜æ˜¯å¾—çœ‹å…·ä½“çš„å¤„ç†å™¨æŒ‡ä»¤é›†ã€‚<br><strong>è¯»çš„æ—¶å€™ï¼Œå…ˆè¯»ç¼“å­˜ï¼Œç¼“å­˜æ²¡æœ‰çš„è¯ï¼Œå°±è¯»æ•°æ®åº“ï¼Œç„¶åå–å‡ºæ•°æ®åæ”¾å…¥ç¼“å­˜ï¼ŒåŒæ—¶è¿”å›å“åº”ã€‚è¯»çš„æ—¶å€™ï¼Œå…ˆè¯»ç¼“å­˜ï¼Œç¼“å­˜æ²¡æœ‰çš„è¯ï¼Œå°±è¯»æ•°æ®åº“ï¼Œç„¶åå–å‡ºæ•°æ®åæ”¾å…¥ç¼“å­˜ï¼ŒåŒæ—¶è¿”å›å“åº”ã€‚æ›´æ–°çš„æ—¶å€™ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œç„¶åå†åˆ é™¤ç¼“å­˜ã€‚</strong><br><strong>æ›´æ–°çš„æ—¶å€™ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œç„¶åå†åˆ é™¤ç¼“å­˜ã€‚</strong><br>å¦‚æœä¸åˆ é™¤è€Œæ˜¯ä½¿ç”¨æ›´æ–°ï¼Œåœ¨å¹¶å‘çš„æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<h2 id="Cacheçš„ç®—æ³•"><a href="#Cacheçš„ç®—æ³•" class="headerlink" title="Cacheçš„ç®—æ³•"></a>Cacheçš„ç®—æ³•</h2><h3 id="FIFOç®—æ³•"><a href="#FIFOç®—æ³•" class="headerlink" title="FIFOç®—æ³•"></a>FIFOç®—æ³•</h3><p><strong>FIFOç®—æ³•çš„æ€æƒ³æ˜¯å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼Œé˜Ÿåˆ—ï¼‰</strong>ï¼Œè¿™æ˜¯æœ€ç®€å•ã€æœ€å…¬å¹³çš„ä¸€ç§æ€æƒ³ï¼Œå³å¦‚æœä¸€ä¸ªæ•°æ®æ˜¯æœ€å…ˆè¿›å…¥çš„ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºåœ¨å°†æ¥å®ƒè¢«è®¿é—®çš„å¯èƒ½æ€§å¾ˆå°ã€‚<strong>ç©ºé—´æ»¡çš„æ—¶å€™ï¼Œæœ€å…ˆè¿›å…¥çš„æ•°æ®ä¼šè¢«æœ€æ—©ç½®æ¢ï¼ˆæ·˜æ±°ï¼‰æ‰</strong>ã€‚<br>FIFO ç®—æ³•çš„æè¿°ï¼šè®¾è®¡ä¸€ç§ç¼“å­˜ç»“æ„ï¼Œè¯¥ç»“æ„åœ¨æ„é€ æ—¶ç¡®å®šå¤§å°ï¼Œå‡è®¾å¤§å°ä¸º Kï¼Œå¹¶æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š<br>set(key,value)ï¼šå°†è®°å½•(key,value)æ’å…¥è¯¥ç»“æ„ã€‚å½“ç¼“å­˜æ»¡æ—¶ï¼Œå°†æœ€å…ˆè¿›å…¥ç¼“å­˜çš„æ•°æ®ç½®æ¢æ‰ã€‚<br>get(key)ï¼šè¿”å›keyå¯¹åº”çš„valueå€¼ã€‚<br>å®ç°ï¼šç»´æŠ¤ä¸€ä¸ªFIFOé˜Ÿåˆ—ï¼ŒæŒ‰ç…§æ—¶é—´é¡ºåºå°†å„æ•°æ®ï¼ˆå·²åˆ†é…é¡µé¢ï¼‰é“¾æ¥èµ·æ¥ç»„æˆé˜Ÿåˆ—ï¼Œå¹¶å°†ç½®æ¢æŒ‡é’ˆæŒ‡å‘é˜Ÿåˆ—çš„é˜Ÿé¦–ã€‚å†è¿›è¡Œç½®æ¢æ—¶ï¼Œåªéœ€æŠŠç½®æ¢æŒ‡é’ˆæ‰€æŒ‡çš„æ•°æ®ï¼ˆé¡µé¢ï¼‰é¡ºæ¬¡æ¢å‡ºï¼Œå¹¶æŠŠæ–°åŠ å…¥çš„æ•°æ®æ’åˆ°é˜Ÿå°¾å³å¯ã€‚<br>ç¼ºç‚¹ï¼šåˆ¤æ–­ä¸€ä¸ªé¡µé¢ç½®æ¢ç®—æ³•ä¼˜åŠ£çš„æŒ‡æ ‡å°±æ˜¯ç¼ºé¡µç‡ï¼Œè€ŒFIFOç®—æ³•çš„ä¸€ä¸ªæ˜¾è‘—çš„ç¼ºç‚¹æ˜¯ï¼Œåœ¨æŸäº›ç‰¹å®šçš„æ—¶åˆ»ï¼Œç¼ºé¡µç‡åè€Œä¼šéšç€åˆ†é…é¡µé¢çš„å¢åŠ è€Œå¢åŠ ï¼Œè¿™ç§°ä¸ºBeladyç°è±¡ã€‚äº§ç”ŸBeladyç°è±¡ç°è±¡çš„åŸå› æ˜¯ï¼ŒFIFOç½®æ¢ç®—æ³•ä¸è¿›ç¨‹è®¿é—®å†…å­˜çš„åŠ¨æ€ç‰¹å¾æ˜¯ä¸ç›¸å®¹çš„ï¼Œè¢«ç½®æ¢çš„å†…å­˜é¡µé¢å¾€å¾€æ˜¯è¢«é¢‘ç¹è®¿é—®çš„ï¼Œæˆ–è€…æ²¡æœ‰ç»™è¿›ç¨‹åˆ†é…è¶³å¤Ÿçš„é¡µé¢ï¼Œå› æ­¤FIFOç®—æ³•ä¼šä½¿ä¸€äº›é¡µé¢é¢‘ç¹åœ°è¢«æ›¿æ¢å’Œé‡æ–°ç”³è¯·å†…å­˜ï¼Œä»è€Œå¯¼è‡´ç¼ºé¡µç‡å¢åŠ ã€‚å› æ­¤ï¼Œç°åœ¨ä¸å†ä½¿ç”¨FIFOç®—æ³•ã€‚</p>
<h3 id="LRUç®—æ³•"><a href="#LRUç®—æ³•" class="headerlink" title="LRUç®—æ³•"></a>LRUç®—æ³•</h3><p><strong>LRUï¼ˆThe Least Recently Usedï¼Œæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•ï¼‰</strong>çš„æ€æƒ³æ˜¯ï¼šå¦‚æœä¸€ä¸ªæ•°æ®åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´æ²¡æœ‰è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºåœ¨å°†æ¥å®ƒè¢«è®¿é—®çš„å¯èƒ½æ€§ä¹Ÿå¾ˆå°ã€‚å› æ­¤ï¼Œ<strong>å½“ç©ºé—´æ»¡æ—¶ï¼Œæœ€ä¹…æ²¡æœ‰è®¿é—®çš„æ•°æ®æœ€å…ˆè¢«ç½®æ¢ï¼ˆæ·˜æ±°ï¼‰ã€‚</strong><br>LRUç®—æ³•çš„æè¿°ï¼š è®¾è®¡ä¸€ç§ç¼“å­˜ç»“æ„ï¼Œè¯¥ç»“æ„åœ¨æ„é€ æ—¶ç¡®å®šå¤§å°ï¼Œå‡è®¾å¤§å°ä¸º Kï¼Œå¹¶æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š<br>set(key,value)ï¼šå°†è®°å½•(key,value)æ’å…¥è¯¥ç»“æ„ã€‚å½“ç¼“å­˜æ»¡æ—¶ï¼Œå°†æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ç½®æ¢æ‰ã€‚<br>get(key)ï¼šè¿”å›keyå¯¹åº”çš„valueå€¼ã€‚<br>å®ç°ï¼šæœ€æœ´ç´ çš„æ€æƒ³å°±æ˜¯ç”¨æ•°ç»„+æ—¶é—´æˆ³çš„æ–¹å¼ï¼Œä¸è¿‡è¿™æ ·åšæ•ˆç‡è¾ƒä½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åŒå‘é“¾è¡¨ï¼ˆLinkedListï¼‰+å“ˆå¸Œè¡¨ï¼ˆHashMapï¼‰å®ç°ï¼ˆé“¾è¡¨ç”¨æ¥è¡¨ç¤ºä½ç½®ï¼Œå“ˆå¸Œè¡¨ç”¨æ¥å­˜å‚¨å’ŒæŸ¥æ‰¾ï¼‰ï¼Œåœ¨Javaé‡Œæœ‰å¯¹åº”çš„æ•°æ®ç»“æ„LinkedHashMapã€‚</p>
<h3 id="LFUç®—æ³•"><a href="#LFUç®—æ³•" class="headerlink" title="LFUç®—æ³•"></a>LFUç®—æ³•</h3><p><strong>LFUï¼ˆLeast Frequently Used ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼‰</strong>çš„æ€æƒ³æ˜¯ï¼šå¦‚æœä¸€ä¸ªæ•°æ®åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å¾ˆå°‘è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºåœ¨å°†æ¥å®ƒè¢«è®¿é—®çš„å¯èƒ½æ€§ä¹Ÿå¾ˆå°ã€‚å› æ­¤ï¼Œå½“ç©ºé—´æ»¡æ—¶ï¼Œ<strong>æœ€å°é¢‘ç‡è®¿é—®çš„æ•°æ®æœ€å…ˆè¢«æ·˜æ±°</strong>ã€‚<br>LFU ç®—æ³•çš„æè¿°ï¼š<br>è®¾è®¡ä¸€ç§ç¼“å­˜ç»“æ„ï¼Œè¯¥ç»“æ„åœ¨æ„é€ æ—¶ç¡®å®šå¤§å°ï¼Œå‡è®¾å¤§å°ä¸º Kï¼Œå¹¶æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š<br>set(key,value)ï¼šå°†è®°å½•(key,value)æ’å…¥è¯¥ç»“æ„ã€‚å½“ç¼“å­˜æ»¡æ—¶ï¼Œå°†è®¿é—®é¢‘ç‡æœ€ä½çš„æ•°æ®ç½®æ¢æ‰ã€‚<br>get(key)ï¼šè¿”å›keyå¯¹åº”çš„valueå€¼ã€‚<br>ç®—æ³•å®ç°ç­–ç•¥ï¼šè€ƒè™‘åˆ° LFU ä¼šæ·˜æ±°è®¿é—®é¢‘ç‡æœ€å°çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§åˆé€‚çš„æ–¹æ³•æŒ‰å¤§å°é¡ºåºç»´æŠ¤æ•°æ®è®¿é—®çš„é¢‘ç‡ã€‚LFU ç®—æ³•æœ¬è´¨ä¸Šå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ª top K é—®é¢˜(K = 1)ï¼Œå³é€‰å‡ºé¢‘ç‡æœ€å°çš„å…ƒç´ ï¼Œå› æ­¤æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°å¯ä»¥ç”¨äºŒé¡¹å †æ¥é€‰æ‹©é¢‘ç‡æœ€å°çš„å…ƒç´ ï¼Œè¿™æ ·çš„å®ç°æ¯”è¾ƒé«˜æ•ˆã€‚æœ€ç»ˆå®ç°ç­–ç•¥ä¸ºå°é¡¶å †+å“ˆå¸Œè¡¨ã€‚</p>
<blockquote>
<p>  <a href="https://www.cnblogs.com/snow826520/p/8574824.html">https://www.cnblogs.com/snow826520/p/8574824.html</a><br>    <a href="https://www.cnblogs.com/hongdada/p/10406902.html">https://www.cnblogs.com/hongdada/p/10406902.html</a></p>
</blockquote>
<h1 id="è®¡ç®—æœºç³»ç»Ÿæ¶æ„"><a href="#è®¡ç®—æœºç³»ç»Ÿæ¶æ„" class="headerlink" title="è®¡ç®—æœºç³»ç»Ÿæ¶æ„"></a>è®¡ç®—æœºç³»ç»Ÿæ¶æ„</h1><h2 id="7å±‚æ¨¡å‹ï¼ˆOSIæ¨¡å‹ï¼‰å’Œ4å±‚æ¨¡å‹ï¼ˆTCP-IP-æ¨¡å‹ï¼‰ï¼Œæ¯ä¸€å±‚æœ‰å“ªäº›å¸¸è§åè®®ï¼Ÿ"><a href="#7å±‚æ¨¡å‹ï¼ˆOSIæ¨¡å‹ï¼‰å’Œ4å±‚æ¨¡å‹ï¼ˆTCP-IP-æ¨¡å‹ï¼‰ï¼Œæ¯ä¸€å±‚æœ‰å“ªäº›å¸¸è§åè®®ï¼Ÿ" class="headerlink" title="7å±‚æ¨¡å‹ï¼ˆOSIæ¨¡å‹ï¼‰å’Œ4å±‚æ¨¡å‹ï¼ˆTCP/IP æ¨¡å‹ï¼‰ï¼Œæ¯ä¸€å±‚æœ‰å“ªäº›å¸¸è§åè®®ï¼Ÿ"></a>7å±‚æ¨¡å‹ï¼ˆOSIæ¨¡å‹ï¼‰å’Œ4å±‚æ¨¡å‹ï¼ˆTCP/IP æ¨¡å‹ï¼‰ï¼Œæ¯ä¸€å±‚æœ‰å“ªäº›å¸¸è§åè®®ï¼Ÿ</h2><p>åº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚å¸¸è§åè®®ï¼šDNS ã€ HTTP ã€FTPã€ STMP ã€SSLã€ TCPã€ UDPã€ ARPã€ IP  </p>
<h2 id="è·¯ç”±å™¨-äº¤æ¢æœºæ˜¯å“ªä¸€å±‚"><a href="#è·¯ç”±å™¨-äº¤æ¢æœºæ˜¯å“ªä¸€å±‚" class="headerlink" title="è·¯ç”±å™¨/äº¤æ¢æœºæ˜¯å“ªä¸€å±‚"></a>è·¯ç”±å™¨/äº¤æ¢æœºæ˜¯å“ªä¸€å±‚</h2><p>ç½‘ç»œå±‚</p>
<h2 id="ç½‘ç»œå±‚ç”¨æ¥å¹²å˜›ï¼Ÿä¼ è¾“å±‚ç”¨æ¥å¹²å˜›ï¼Ÿ"><a href="#ç½‘ç»œå±‚ç”¨æ¥å¹²å˜›ï¼Ÿä¼ è¾“å±‚ç”¨æ¥å¹²å˜›ï¼Ÿ" class="headerlink" title="ç½‘ç»œå±‚ç”¨æ¥å¹²å˜›ï¼Ÿä¼ è¾“å±‚ç”¨æ¥å¹²å˜›ï¼Ÿ"></a>ç½‘ç»œå±‚ç”¨æ¥å¹²å˜›ï¼Ÿä¼ è¾“å±‚ç”¨æ¥å¹²å˜›ï¼Ÿ</h2><p>ç½‘ç»œå±‚åªæ˜¯è´Ÿè´£ä¼ è¾“ï¼ŒæŠŠæ•°æ®äº¤ç»™æŒ‡å®šçš„ç›®æ ‡ï¼Œ<br>ä¼ è¾“å±‚ç”¨æ¥æŠŠæ”¶åˆ°çš„æ•°æ®ï¼Œæ ¹æ®åè®®åˆ†å‘ç»™å„ä¸ªåº”ç”¨</p>
<h2 id="æ€ä¹ˆç»™å¤§é‡urlå’Œipå»é‡"><a href="#æ€ä¹ˆç»™å¤§é‡urlå’Œipå»é‡" class="headerlink" title="æ€ä¹ˆç»™å¤§é‡urlå’Œipå»é‡"></a>æ€ä¹ˆç»™å¤§é‡urlå’Œipå»é‡</h2><ol>
<li>å†…å­˜å¤Ÿç”¨ï¼Œå°†URLå­˜å…¥hashé“¾è¡¨ï¼Œæ¯ä¸ªURLè¯»å…¥åˆ°hashé“¾è¡¨ä¸­ï¼Œé‡åˆ°é‡å¤çš„å°±èˆå¼ƒï¼Œå¦åˆ™åŠ å…¥åˆ°é“¾è¡¨é‡Œé¢ï¼Œæœ€åéå†å¾—åˆ°æ‰€æœ‰ä¸é‡å¤çš„URLã€‚ç©ºé—´å¤æ‚åº¦Mï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N+N/M)ï¼ŒMä¸ºä¸é‡å¤çš„URLï¼ŒNä¸ºæ€»URLæ•°ï¼Œä½†æ˜¯Mæ— æ³•é¢„æµ‹ï¼Œæ‰€ä»¥å­˜åœ¨é£é™©ï¼Œå¯èƒ½å†…å­˜ä¸è¶³ä»¥å­˜å‚¨æ‰€æœ‰çš„ä¸é‡å¤URLã€‚ </li>
<li>ä¸ºäº†è§£å†³å†…å­˜å¯èƒ½ä¸è¶³çš„é—®é¢˜ï¼Œéœ€è¦æŠŠhashé“¾è¡¨å˜åŒ–æˆæ™®é€šçš„hashè¡¨ï¼Œæ¯ä¸ªhashè¡¨å…ƒç´ æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶è®°å½•äº†æ‰€æœ‰è¯¥hashå€¼å¯¹åº”çš„æ— é‡å¤çš„URLï¼Œé‚£ä¹ˆåœ¨åŠ å…¥URLçš„æ—¶å€™å°±éå†å¯¹åº”æ–‡ä»¶ä¸­çš„URLï¼Œæ²¡æœ‰é‡å¤åˆ™åŠ å…¥åˆ°æ–‡ä»¶ä¸­ã€‚è¿™æ ·åšæ—¶é—´å¤æ‚åº¦æ²¡æœ‰æå‡ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦è¯»å†™æ–‡ä»¶ï¼Œæ¶ˆè€—çš„æ—¶é—´åº”è¯¥æ˜¯ä¸Šä¸€ç§æ–¹å¼çš„ä¸‰å€ï¼ˆä¾èµ–äºioé€Ÿåº¦ï¼‰ï¼Œè€Œå¯¹å†…å­˜çš„è¦æ±‚æ¯”è¾ƒå°ã€‚ä¸€ä¸ªæ”¹è¿›æ˜¯åŠ å…¥URLçš„æ—¶å€™è¿›è¡Œæ’åºï¼Œè¿™æ ·èƒ½å‡å°‘æ¯”å¯¹çš„æ¬¡æ•°ã€‚ </li>
</ol>
<h2 id="å½“åœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨ping-www-xxx-comæ—¶ï¼Œç”¨åˆ°äº†å“ªäº›åè®®ï¼Ÿ"><a href="#å½“åœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨ping-www-xxx-comæ—¶ï¼Œç”¨åˆ°äº†å“ªäº›åè®®ï¼Ÿ" class="headerlink" title="å½“åœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨ping www.xxx.comæ—¶ï¼Œç”¨åˆ°äº†å“ªäº›åè®®ï¼Ÿ"></a>å½“åœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨ping www.xxx.comæ—¶ï¼Œç”¨åˆ°äº†å“ªäº›åè®®ï¼Ÿ</h2><ol>
<li>å› ä¸ºpingçš„è¯ åé¢è·Ÿçš„æ˜¯åœ°å€ï¼Œæ‰€ä»¥è¦å…ˆ<strong>å°†åŸŸåè½¬æ¢ä¸ºipåœ°å€ï¼Œå³ç”¨åˆ°äº†DNS</strong> </li>
<li>è·å–åˆ°ipåœ°å€åï¼Œ<strong>åœ¨æ•°æ®é“¾è·¯å±‚æ˜¯æ ¹æ®MACåœ°å€ä¼ è¾“çš„ï¼Œæ‰€ä»¥è¦ç”¨åˆ°ARPè§£ææœåŠ¡ï¼Œè·å–åˆ°MACåœ°å€</strong></li>
<li>pingåŠŸèƒ½æ˜¯æµ‹è¯•å¦ä¸€å°ä¸»æœºæ˜¯å¦å¯è¾¾ï¼Œ<strong>ç¨‹åºå‘é€ä¸€ä»½ICMPå›æ˜¾è¯·æ±‚ç»™ç›®æ ‡ä¸»æœºï¼Œå¹¶ç­‰å¾…è¿”å›ICMPå›æ˜¾åº”ç­”,</strong>ï¼ˆICMPä¸»è¦æ˜¯ç”¨äºipä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶ä¿¡æ¯ï¼Œæ§åˆ¶ä¿¡æ¯æ˜¯æŒ‡ç½‘ç»œé€šä¸é€šï¼Œä¸»æœºæ˜¯å¦å¯è¾¾ï¼‰</li>
</ol>
<blockquote>
<p>  <a href="https://blog.csdn.net/weixin_34212762/article/details/85514043">https://blog.csdn.net/weixin_34212762/article/details/85514043</a><br>    <a href="https://www.nowcoder.com/questionTerminal/e515ae7a18924fe3b6952ae7fbb985bc">https://www.nowcoder.com/questionTerminal/e515ae7a18924fe3b6952ae7fbb985bc</a></p>
</blockquote>
<h1 id="å¾…æ•´ç†é—®é¢˜"><a href="#å¾…æ•´ç†é—®é¢˜" class="headerlink" title="å¾…æ•´ç†é—®é¢˜"></a>å¾…æ•´ç†é—®é¢˜</h1><h3 id="ä¸ºä»€ä¹ˆè¦å¹¶å‘æ§åˆ¶ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å¹¶å‘æ§åˆ¶ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¹¶å‘æ§åˆ¶ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å¹¶å‘æ§åˆ¶ï¼Ÿ</h3><h3 id="äº†è§£ç´¢å¼•å—ï¼ŸçŸ¥é“å®ç°åŸç†å—ï¼Ÿï¼ˆB-æ ‘ï¼‰"><a href="#äº†è§£ç´¢å¼•å—ï¼ŸçŸ¥é“å®ç°åŸç†å—ï¼Ÿï¼ˆB-æ ‘ï¼‰" class="headerlink" title="äº†è§£ç´¢å¼•å—ï¼ŸçŸ¥é“å®ç°åŸç†å—ï¼Ÿï¼ˆB+æ ‘ï¼‰"></a>äº†è§£ç´¢å¼•å—ï¼ŸçŸ¥é“å®ç°åŸç†å—ï¼Ÿï¼ˆB+æ ‘ï¼‰</h3><h3 id="DNSæ˜¯ä»€ä¹ˆï¼Ÿå†…éƒ¨å¦‚ä½•å®ç°ï¼Ÿ"><a href="#DNSæ˜¯ä»€ä¹ˆï¼Ÿå†…éƒ¨å¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="DNSæ˜¯ä»€ä¹ˆï¼Ÿå†…éƒ¨å¦‚ä½•å®ç°ï¼Ÿ"></a>DNSæ˜¯ä»€ä¹ˆï¼Ÿå†…éƒ¨å¦‚ä½•å®ç°ï¼Ÿ</h3><h3 id="ARPæ˜¯ä»€ä¹ˆï¼ŸARPå†…éƒ¨å¦‚ä½•å®ç°ï¼Ÿ"><a href="#ARPæ˜¯ä»€ä¹ˆï¼ŸARPå†…éƒ¨å¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="ARPæ˜¯ä»€ä¹ˆï¼ŸARPå†…éƒ¨å¦‚ä½•å®ç°ï¼Ÿ"></a>ARPæ˜¯ä»€ä¹ˆï¼ŸARPå†…éƒ¨å¦‚ä½•å®ç°ï¼Ÿ</h3><h3 id="Linux-ioæ¨¡å‹-select-poll-epollçš„åŒºåˆ«ï¼Œæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘çš„åŒºåˆ«"><a href="#Linux-ioæ¨¡å‹-select-poll-epollçš„åŒºåˆ«ï¼Œæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘çš„åŒºåˆ«" class="headerlink" title="Linux ioæ¨¡å‹(select, poll, epollçš„åŒºåˆ«ï¼Œæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘çš„åŒºåˆ«)"></a>Linux ioæ¨¡å‹(select, poll, epollçš„åŒºåˆ«ï¼Œæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘çš„åŒºåˆ«)</h3><h3 id="GDBæœ‰ç”¨è¿‡å“ªäº›"><a href="#GDBæœ‰ç”¨è¿‡å“ªäº›" class="headerlink" title="GDBæœ‰ç”¨è¿‡å“ªäº›"></a>GDBæœ‰ç”¨è¿‡å“ªäº›</h3><h3 id="è°ˆè°ˆä½ å¯¹å‰åç«¯äº¤äº’ä¸­ä½¿ç”¨çš„JSONçš„ç†è§£"><a href="#è°ˆè°ˆä½ å¯¹å‰åç«¯äº¤äº’ä¸­ä½¿ç”¨çš„JSONçš„ç†è§£" class="headerlink" title="è°ˆè°ˆä½ å¯¹å‰åç«¯äº¤äº’ä¸­ä½¿ç”¨çš„JSONçš„ç†è§£"></a>è°ˆè°ˆä½ å¯¹å‰åç«¯äº¤äº’ä¸­ä½¿ç”¨çš„JSONçš„ç†è§£</h3><h3 id="æ“ä½œç³»ç»Ÿä¸ºä»€ä¹ˆæœ‰ç”¨æˆ·æ€å’Œå†…æ ¸æ€ï¼Œç”¨æˆ·çº§çº¿ç¨‹ä¸å†…æ ¸çº§çº¿ç¨‹å¦‚ä½•è½¬æ¢"><a href="#æ“ä½œç³»ç»Ÿä¸ºä»€ä¹ˆæœ‰ç”¨æˆ·æ€å’Œå†…æ ¸æ€ï¼Œç”¨æˆ·çº§çº¿ç¨‹ä¸å†…æ ¸çº§çº¿ç¨‹å¦‚ä½•è½¬æ¢" class="headerlink" title="æ“ä½œç³»ç»Ÿä¸ºä»€ä¹ˆæœ‰ç”¨æˆ·æ€å’Œå†…æ ¸æ€ï¼Œç”¨æˆ·çº§çº¿ç¨‹ä¸å†…æ ¸çº§çº¿ç¨‹å¦‚ä½•è½¬æ¢"></a>æ“ä½œç³»ç»Ÿä¸ºä»€ä¹ˆæœ‰ç”¨æˆ·æ€å’Œå†…æ ¸æ€ï¼Œç”¨æˆ·çº§çº¿ç¨‹ä¸å†…æ ¸çº§çº¿ç¨‹å¦‚ä½•è½¬æ¢</h3><h3 id="å‡½æ•°è°ƒç”¨æ±‡ç¼–-æ€ä¹ˆä¼ å‚æ•°-å‡½æ•°a-call-bï¼Œå‚æ•°æ”¾åœ¨å“ªä¸ªæ ˆå¸§"><a href="#å‡½æ•°è°ƒç”¨æ±‡ç¼–-æ€ä¹ˆä¼ å‚æ•°-å‡½æ•°a-call-bï¼Œå‚æ•°æ”¾åœ¨å“ªä¸ªæ ˆå¸§" class="headerlink" title="å‡½æ•°è°ƒç”¨æ±‡ç¼– æ€ä¹ˆä¼ å‚æ•° å‡½æ•°a call bï¼Œå‚æ•°æ”¾åœ¨å“ªä¸ªæ ˆå¸§"></a>å‡½æ•°è°ƒç”¨æ±‡ç¼– æ€ä¹ˆä¼ å‚æ•° å‡½æ•°a call bï¼Œå‚æ•°æ”¾åœ¨å“ªä¸ªæ ˆå¸§</h3><h3 id="è™šæ‹Ÿå†…å­˜ä½œç”¨ï¼Ÿ-å†…å­˜åˆ†é¡µçš„ä½œç”¨ï¼Ÿ"><a href="#è™šæ‹Ÿå†…å­˜ä½œç”¨ï¼Ÿ-å†…å­˜åˆ†é¡µçš„ä½œç”¨ï¼Ÿ" class="headerlink" title="è™šæ‹Ÿå†…å­˜ä½œç”¨ï¼Ÿ å†…å­˜åˆ†é¡µçš„ä½œç”¨ï¼Ÿ"></a>è™šæ‹Ÿå†…å­˜ä½œç”¨ï¼Ÿ å†…å­˜åˆ†é¡µçš„ä½œç”¨ï¼Ÿ</h3><h3 id="ç¼ºé¡µå¼‚å¸¸çš„ä»‹ç»"><a href="#ç¼ºé¡µå¼‚å¸¸çš„ä»‹ç»" class="headerlink" title="ç¼ºé¡µå¼‚å¸¸çš„ä»‹ç»"></a>ç¼ºé¡µå¼‚å¸¸çš„ä»‹ç»</h3><h3 id="OOMé—®é¢˜å’Œ-StackOverFlowçš„åŒºåˆ«"><a href="#OOMé—®é¢˜å’Œ-StackOverFlowçš„åŒºåˆ«" class="headerlink" title="OOMé—®é¢˜å’Œ StackOverFlowçš„åŒºåˆ«"></a>OOMé—®é¢˜å’Œ StackOverFlowçš„åŒºåˆ«</h3><h3 id="æ•°ç»„æ€ä¹ˆæ‰©å®¹ï¼Ÿ"><a href="#æ•°ç»„æ€ä¹ˆæ‰©å®¹ï¼Ÿ" class="headerlink" title="æ•°ç»„æ€ä¹ˆæ‰©å®¹ï¼Ÿ"></a>æ•°ç»„æ€ä¹ˆæ‰©å®¹ï¼Ÿ</h3><p>æ–°å»ºä¸€ä¸ªæ›´å¤§æ–°æ•°ç»„ï¼Œç„¶åå¤åˆ¶è¿‡å»â€¦â€¦</p>
<h3 id="å¤åˆ¶çš„æ—¶å€™é”ä½æ•°ç»„ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½é˜»å¡ï¼Ÿ"><a href="#å¤åˆ¶çš„æ—¶å€™é”ä½æ•°ç»„ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½é˜»å¡ï¼Ÿ" class="headerlink" title="å¤åˆ¶çš„æ—¶å€™é”ä½æ•°ç»„ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½é˜»å¡ï¼Ÿ"></a>å¤åˆ¶çš„æ—¶å€™é”ä½æ•°ç»„ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½é˜»å¡ï¼Ÿ</h3><p>ï¼ˆé¢è¯•ä¹‹åå»çœ‹äº†çº¿ç¨‹æ± é‡Œçš„é˜»å¡é˜Ÿåˆ—ï¼Œä¼¼ä¹éƒ½æ˜¯ç”¨é“¾è¡¨å®ç°çš„ï¼Œæ²¡æœ‰ç”¨æ•°ç»„ã€‚ç”¨åˆ°çš„é˜Ÿåˆ—ä¼¼ä¹é»˜è®¤éƒ½æ˜¯åŠ¨æ€æ‰©å®¹çš„ï¼Œæœ€å¤§ä¸ºæ•´æ•°æœ€å¤§å€¼ã€‚å¦‚æœé˜Ÿåˆ—æ»¡äº†åˆä¸æ”¯æŒåŠ¨æ€æ‰©å®¹ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®é¥±å’Œç­–ç•¥æ¥å¤„ç†ï¼Œé»˜è®¤æ˜¯ä¸­æ­¢ï¼Œä¹Ÿå°±æ˜¯æŠ›å‡º RejectedExecutionExceptionã€‚ï¼‰</p>
<h3 id="è¯»å†™åˆ†ç¦»æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#è¯»å†™åˆ†ç¦»æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="è¯»å†™åˆ†ç¦»æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>è¯»å†™åˆ†ç¦»æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>å†™æ“ä½œéƒ½åœ¨ä¸»åº“ï¼Œè¯»æ“ä½œéƒ½åœ¨åˆ†åº“ï¼Œè®©è¯»æ“ä½œèƒ½å¹¶å‘ï¼Œæé«˜æ•ˆç‡ã€‚</p>
]]></content>
      <categories>
        <category>é¢è¯•å‡†å¤‡</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿›ç¨‹ çº¿ç¨‹ åç¨‹</title>
    <url>/2020/12/12/%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E5%8D%8F%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="è¿›ç¨‹å’Œçº¿ç¨‹"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹"></a>è¿›ç¨‹å’Œçº¿ç¨‹</h1><h2 id="è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«"></a>è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«</h2><p>è¿›ç¨‹æ˜¯èµ„æºï¼ˆCPUã€å†…å­˜ç­‰ï¼‰åˆ†é…çš„åŸºæœ¬å•ä½ï¼Œå®ƒæ˜¯ç¨‹åºæ‰§è¡Œæ—¶çš„ä¸€ä¸ªå®ä¾‹ã€‚ç¨‹åºè¿è¡Œæ—¶ç³»ç»Ÿå°±ä¼šåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸ºå®ƒåˆ†é…èµ„æºï¼Œç„¶åæŠŠè¯¥è¿›ç¨‹æ”¾å…¥è¿›ç¨‹å°±ç»ªé˜Ÿåˆ—ï¼Œè¿›ç¨‹è°ƒåº¦å™¨é€‰ä¸­å®ƒçš„æ—¶å€™å°±ä¼šä¸ºå®ƒåˆ†é…CPUæ—¶é—´ï¼Œç¨‹åºå¼€å§‹çœŸæ­£è¿è¡Œã€‚<br>çº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œæ—¶çš„æœ€å°å•ä½ï¼Œå®ƒæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œæµï¼Œæ˜¯CPUè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥ç”±å¾ˆå¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œçº¿ç¨‹é—´å…±äº«è¿›ç¨‹çš„æ‰€æœ‰èµ„æºï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„å †æ ˆå’Œå±€éƒ¨å˜é‡ã€‚çº¿ç¨‹ç”±CPUç‹¬ç«‹è°ƒåº¦æ‰§è¡Œï¼Œåœ¨å¤šCPUç¯å¢ƒä¸‹å°±å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œã€‚åŒæ ·å¤šçº¿ç¨‹ä¹Ÿå¯ä»¥å®ç°å¹¶å‘æ“ä½œï¼Œæ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†ã€‚<br><a id="more"></a></p>
<ol>
<li>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ã€‚</li>
<li>è¿›ç¨‹æœ‰è‡ªå·±çš„ç‹¬ç«‹åœ°å€ç©ºé—´ï¼Œæ¯å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œç³»ç»Ÿå°±ä¼šä¸ºå®ƒåˆ†é…åœ°å€ç©ºé—´ï¼Œå»ºç«‹æ•°æ®è¡¨æ¥ç»´æŠ¤ä»£ç æ®µã€å †æ ˆæ®µå’Œæ•°æ®æ®µï¼Œè¿™ç§æ“ä½œéå¸¸æ˜‚è´µã€‚è€Œçº¿ç¨‹æ˜¯å…±äº«è¿›ç¨‹ä¸­çš„æ•°æ®çš„ï¼Œä½¿ç”¨ç›¸åŒçš„åœ°å€ç©ºé—´ï¼Œå› æ­¤CPUåˆ‡æ¢ä¸€ä¸ªçº¿ç¨‹çš„èŠ±è´¹è¿œæ¯”è¿›ç¨‹è¦å°å¾ˆå¤šï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„å¼€é”€ä¹Ÿæ¯”è¿›ç¨‹è¦å°å¾ˆå¤šã€‚</li>
<li>çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ›´æ–¹ä¾¿ï¼ŒåŒä¸€è¿›ç¨‹ä¸‹çš„çº¿ç¨‹å…±äº«å…¨å±€å˜é‡ã€é™æ€å˜é‡ç­‰æ•°æ®ï¼Œè€Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡éœ€è¦ä»¥é€šä¿¡çš„æ–¹å¼ï¼ˆIPC)è¿›è¡Œã€‚ä¸è¿‡å¦‚ä½•å¤„ç†å¥½åŒæ­¥ä¸äº’æ–¥æ˜¯ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºçš„éš¾ç‚¹ã€‚</li>
<li>å¤šè¿›ç¨‹ç¨‹åºæ›´å¥å£®ï¼Œå¤šçº¿ç¨‹ç¨‹åºåªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹æ­»æ‰ï¼Œæ•´ä¸ªè¿›ç¨‹ä¹Ÿæ­»æ‰äº†ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹æ­»æ‰å¹¶ä¸ä¼šå¯¹å¦å¤–ä¸€ä¸ªè¿›ç¨‹é€ æˆå½±å“ï¼Œå› ä¸ºè¿›ç¨‹æœ‰è‡ªå·±ç‹¬ç«‹çš„åœ°å€ç©ºé—´ã€‚</li>
</ol>
<h2 id="åŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹"><a href="#åŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹" class="headerlink" title="åŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹"></a>åŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹</h2><p>çº¿ç¨‹å…±äº«çš„ç¯å¢ƒåŒ…æ‹¬ï¼šè¿›ç¨‹ä»£ç æ®µã€è¿›ç¨‹çš„å…¬æœ‰æ•°æ®(åˆ©ç”¨è¿™äº›å…±äº«çš„æ•°æ®ï¼Œçº¿ç¨‹å¾ˆå®¹æ˜“çš„å®ç°ç›¸äº’ä¹‹é—´çš„é€šè®¯)ã€è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ã€ä¿¡å·çš„å¤„ç†å™¨ã€è¿›ç¨‹çš„å½“å‰ç›®å½•å’Œè¿›ç¨‹ç”¨æˆ·IDä¸è¿›ç¨‹ç»„IDã€‚<br><strong>åœ¨ä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹å…±äº«å †åŒºï¼Œè€Œè¿›ç¨‹ä¸­çš„çº¿ç¨‹å„è‡ªç»´æŒè‡ªå·±å †æ ˆã€‚</strong><br>å †ï¼šæ˜¯å¤§å®¶å…±æœ‰çš„ç©ºé—´ï¼Œåˆ†å…¨å±€å †å’Œå±€éƒ¨å †ã€‚å…¨å±€å †å°±æ˜¯æ‰€æœ‰æ²¡æœ‰åˆ†é…çš„ç©ºé—´ï¼Œå±€éƒ¨å †å°±æ˜¯ç”¨æˆ·åˆ†é…çš„ç©ºé—´ã€‚å †åœ¨æ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹åˆå§‹åŒ–çš„æ—¶å€™åˆ†é…ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­ä¹Ÿå¯ä»¥å‘ç³»ç»Ÿè¦é¢å¤–çš„å †ï¼Œä½†æ˜¯è®°å¾—ç”¨å®Œäº†è¦è¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œè¦ä¸ç„¶å°±æ˜¯å†…å­˜æ³„æ¼ã€‚<br>æ ˆï¼šæ˜¯ä¸ªçº¿ç¨‹ç‹¬æœ‰çš„ï¼Œä¿å­˜å…¶è¿è¡ŒçŠ¶æ€å’Œå±€éƒ¨è‡ªåŠ¨å˜é‡çš„ã€‚æ ˆåœ¨çº¿ç¨‹å¼€å§‹çš„æ—¶å€™åˆå§‹åŒ–ï¼Œæ¯ä¸ªçº¿ç¨‹çš„æ ˆäº’ç›¸ç‹¬ç«‹ï¼Œå› æ­¤ï¼Œæ ˆæ˜¯ã€€thread safeçš„ã€‚æ“ä½œç³»ç»Ÿåœ¨åˆ‡æ¢çº¿ç¨‹çš„æ—¶å€™ä¼šè‡ªåŠ¨çš„åˆ‡æ¢æ ˆï¼Œå°±æ˜¯åˆ‡æ¢ã€€ï¼³ï¼³ï¼ï¼¥ï¼³ï¼°å¯„å­˜å™¨ã€‚æ ˆç©ºé—´ä¸éœ€è¦åœ¨é«˜çº§è¯­è¨€é‡Œé¢æ˜¾å¼çš„åˆ†é…å’Œé‡Šæ”¾ã€‚</p>
<h2 id="å¤šè¿›ç¨‹"><a href="#å¤šè¿›ç¨‹" class="headerlink" title="å¤šè¿›ç¨‹"></a>å¤šè¿›ç¨‹</h2><h3 id="æ€ä¹ˆåˆ›å»ºæ–°è¿›ç¨‹ï¼Œå†…æ ¸åšäº†å•¥ï¼Ÿ"><a href="#æ€ä¹ˆåˆ›å»ºæ–°è¿›ç¨‹ï¼Œå†…æ ¸åšäº†å•¥ï¼Ÿ" class="headerlink" title="æ€ä¹ˆåˆ›å»ºæ–°è¿›ç¨‹ï¼Œå†…æ ¸åšäº†å•¥ï¼Ÿ"></a>æ€ä¹ˆåˆ›å»ºæ–°è¿›ç¨‹ï¼Œå†…æ ¸åšäº†å•¥ï¼Ÿ</h3><p>fork, vforkï¼Œç„¶åå…·ä½“do_forkè¿‡ç¨‹ï¼Œcopy on writeç­‰<br>è¿›ç¨‹ : ä»£ç  + æ•°æ® + å †æ ˆ + PCB<br>PCB ï¼ˆè¿›ç¨‹æ§åˆ¶å—ï¼‰ï¼špid è¿›ç¨‹æ ‡è¯†ç¬¦ + pwd è¿›ç¨‹æ ‡è¯† + ppid çˆ¶è¿›ç¨‹è¿›ç¨‹å·</p>
<ol>
<li>åˆ†é…ä¸€ä¸ª PID ä»å°åˆ°å¤§æ‰¾ä¸€ä¸ªæœªè¢«ä½¿ç”¨çš„è¿›ç¨‹å·<br>0å·è¿›ç¨‹æ˜¯å†…æ ¸è¿›ç¨‹ï¼Œå®ƒåˆ›å»º1å·è¿›ç¨‹ã€è¿˜å°†ç‰©ç†å†…å­˜æ¬åˆ°ç£ç›˜å’Œç£ç›˜æ¬åˆ°ç‰©ç†å†…å­˜</li>
<li>åˆ†é…PCBï¼Œæ‹·è´çˆ¶è¿›ç¨‹çš„ PCBçš„ç»å¤§éƒ¨åˆ†æ•°æ®</li>
<li>ç»™å­è¿›ç¨‹åˆ†é…èµ„æº</li>
<li>å¤åˆ¶çˆ¶è¿›ç¨‹åœ°å€ç©ºé—´ </li>
<li>å°†å­è¿›ç¨‹ç½®æˆå°±ç»ªçŠ¶æ€ï¼Œæ”¾å…¥å°±ç»ªé˜Ÿåˆ—</li>
</ol>
<p>åœ¨unixä¸­ç³»ç»Ÿè°ƒç”¨çš„æ˜¯ï¼šforkï¼Œforkä¼šåˆ›å»ºä¸€ä¸ªä¸çˆ¶è¿›ç¨‹ä¸€æ‘¸ä¸€æ ·çš„å‰¯æœ¬<br>åœ¨windowsä¸­è¯¥ç³»ç»Ÿè°ƒç”¨æ˜¯ï¼šcresteprocessï¼Œæ—¢è´Ÿè´£å¤„ç†è¿›ç¨‹çš„åˆ›å»ºï¼Œä¹Ÿè´Ÿè´£æŠŠæ­£ç¡®çš„ç¨‹åºè£…å…¥æ–°è¿›ç¨‹<br>æ— è®ºæ˜¯unixè¿˜æ˜¯windowsï¼Œè¿›ç¨‹åªæœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹ï¼Œä¸åŒçš„æ˜¯ï¼š<br>åœ¨unixä¸­æ‰€æœ‰çš„è¿›ç¨‹ï¼Œéƒ½æ˜¯ä»¥initè¿›ç¨‹ä¸ºæ ¹ï¼Œç»„æˆæ ‘å½¢ç»“æ„ã€‚çˆ¶å­è¿›ç¨‹å…±åŒç»„æˆä¸€ä¸ªè¿›ç¨‹ç»„<br>åœ¨windowsä¸­ï¼Œæ²¡æœ‰è¿›ç¨‹å±‚æ¬¡çš„æ¦‚å¿µï¼Œæ‰€æœ‰çš„è¿›ç¨‹åœ°ä½éƒ½ç›¸åŒ</p>
<h3 id="fork-ä½œç”¨"><a href="#fork-ä½œç”¨" class="headerlink" title="fork()ä½œç”¨"></a>fork()ä½œç”¨</h3><p>Linuxç³»ç»Ÿå‡½æ•°fork()å¯ä»¥<strong>åœ¨çˆ¶è¿›ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹</strong>ï¼Œè¿™æ ·çš„è¯ï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹æ¥åˆ°æ¥è‡ªå®¢æˆ·ç«¯æ–°çš„è¯·æ±‚æ—¶å°±å¯ä»¥å¤åˆ¶å‡ºä¸€ä¸ªå­è¿›ç¨‹è®©å…¶æ¥å¤„ç†ï¼Œçˆ¶è¿›ç¨‹åªéœ€è´Ÿè´£ç›‘æ§è¯·æ±‚çš„åˆ°æ¥ï¼Œç„¶ååˆ›å»ºå­è¿›ç¨‹è®©å…¶å»å¤„ç†ï¼Œè¿™æ ·å°±èƒ½åšåˆ°å¹¶å‘å¤„ç†ã€‚<strong>forkå‡½æ•°ä¼šè¿”å›ä¸¤æ¬¡ç»“æœ</strong>ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿä¼šæŠŠå½“å‰è¿›ç¨‹çš„æ•°æ®å¤åˆ¶ä¸€éï¼Œç„¶åç¨‹åºå°±åˆ†ä¸¤ä¸ªè¿›ç¨‹ç»§ç»­è¿è¡Œåé¢çš„ä»£ç ï¼Œforkåˆ†åˆ«åœ¨çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¸­è¿”å›ï¼Œåœ¨å­è¿›ç¨‹è¿”å›çš„å€¼pidæ°¸è¿œæ˜¯0ï¼Œåœ¨çˆ¶è¿›ç¨‹è¿”å›çš„æ˜¯å­è¿›ç¨‹çš„è¿›ç¨‹idã€‚æ‰“å°çš„é¡ºåºä¸ç³»ç»Ÿçš„è¿›ç¨‹è°ƒåº¦æœ‰å…³ã€‚</p>
<ul>
<li>çˆ¶å­è¿›ç¨‹äº¤æ›¿è¿›è¡Œ</li>
<li>çˆ¶è¿›ç¨‹æ­»äº¡ï¼Œå­è¿›ç¨‹å°†å˜æˆå­¤å„¿è¿›ç¨‹ï¼Œç”± 1å· è¿›ç¨‹é¢†å…»</li>
<li>å­è¿›ç¨‹æ­»äº¡ï¼Œæˆä¸ºåƒµå°¸è¿›ç¨‹</li>
</ul>
<h3 id="å¤šè¿›ç¨‹ç›¸å…³å‡½æ•°"><a href="#å¤šè¿›ç¨‹ç›¸å…³å‡½æ•°" class="headerlink" title="å¤šè¿›ç¨‹ç›¸å…³å‡½æ•°"></a>å¤šè¿›ç¨‹ç›¸å…³å‡½æ•°</h3><p>multiprocessingæ¨¡å—å°±æ˜¯è·¨å¹³å°ç‰ˆæœ¬çš„å¤šè¿›ç¨‹æ¨¡å—ã€‚åˆ›å»ºå­è¿›ç¨‹æ—¶ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªæ‰§è¡Œå‡½æ•°å’Œå‡½æ•°çš„å‚æ•°ï¼Œåˆ›å»ºä¸€ä¸ªProcesså®ä¾‹ï¼Œç”¨start()æ–¹æ³•å¯åŠ¨ï¼Œè¿™æ ·åˆ›å»ºè¿›ç¨‹æ¯”fork()è¿˜è¦ç®€å•ã€‚<br>join()æ–¹æ³•å¯ä»¥ç­‰å¾…å­è¿›ç¨‹ç»“æŸåå†ç»§ç»­å¾€ä¸‹è¿è¡Œï¼Œé€šå¸¸ç”¨äºè¿›ç¨‹é—´çš„åŒæ­¥ã€‚<br>å¦‚æœè¦å¯åŠ¨å¤§é‡çš„å­è¿›ç¨‹ï¼Œå¯ä»¥ç”¨è¿›ç¨‹æ± çš„æ–¹å¼æ‰¹é‡åˆ›å»ºå­è¿›ç¨‹ï¼šå¯¹Poolå¯¹è±¡è°ƒç”¨join()æ–¹æ³•ä¼šç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œè°ƒç”¨join()ä¹‹å‰å¿…é¡»å…ˆè°ƒç”¨close()ï¼Œè°ƒç”¨close()ä¹‹åå°±ä¸èƒ½ç»§ç»­æ·»åŠ æ–°çš„Processäº†ã€‚<br>subprocessæ¨¡å—å¯ä»¥è®©æˆ‘ä»¬éå¸¸æ–¹ä¾¿åœ°å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹ï¼Œç„¶åæ§åˆ¶å…¶è¾“å…¥å’Œè¾“å‡ºã€‚<br>å°ç»“ï¼š</p>
<ul>
<li>åœ¨Unix/Linuxä¸‹ï¼Œå¯ä»¥ä½¿ç”¨fork()è°ƒç”¨å®ç°å¤šè¿›ç¨‹ã€‚</li>
<li>è¦å®ç°è·¨å¹³å°çš„å¤šè¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨multiprocessingæ¨¡å—ã€‚</li>
<li>è¿›ç¨‹é—´é€šä¿¡æ˜¯é€šè¿‡Queueã€Pipesç­‰å®ç°çš„ã€‚</li>
</ul>
<h3 id="è¿›ç¨‹é—´é€šä¿¡æ–¹å¼"><a href="#è¿›ç¨‹é—´é€šä¿¡æ–¹å¼" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡æ–¹å¼"></a>è¿›ç¨‹é—´é€šä¿¡æ–¹å¼</h3><ol>
<li>ç®¡é“pipeï¼šç®¡é“æ˜¯ä¸€ç§åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œæ•°æ®åªèƒ½å•å‘æµåŠ¨ï¼Œè€Œä¸”åªèƒ½åœ¨å…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´ä½¿ç”¨ã€‚è¿›ç¨‹çš„äº²ç¼˜å…³ç³»é€šå¸¸æ˜¯æŒ‡çˆ¶å­è¿›ç¨‹å…³ç³»ã€‚</li>
<li>å‘½åç®¡é“FIFOï¼šæœ‰åç®¡é“ä¹Ÿæ˜¯åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œä½†æ˜¯å®ƒå…è®¸æ— äº²ç¼˜å…³ç³»è¿›ç¨‹é—´çš„é€šä¿¡ã€‚<br>æ¶ˆæ¯é˜Ÿåˆ—MessageQueueï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯ç”±æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå­˜æ”¾åœ¨å†…æ ¸ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ã€‚æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·ä¼ é€’ä¿¡æ¯å°‘ã€ç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹ã€‚</li>
<li>å…±äº«å­˜å‚¨SharedMemoryï¼šå…±äº«å†…å­˜å°±æ˜¯æ˜ å°„ä¸€æ®µèƒ½è¢«å…¶ä»–è¿›ç¨‹æ‰€è®¿é—®çš„å†…å­˜ï¼Œè¿™æ®µå…±äº«å†…å­˜ç”±ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºï¼Œä½†å¤šä¸ªè¿›ç¨‹éƒ½å¯ä»¥è®¿é—®ã€‚å…±äº«å†…å­˜æ˜¯æœ€å¿«çš„ IPC æ–¹å¼ï¼Œå®ƒæ˜¯é’ˆå¯¹å…¶ä»–è¿›ç¨‹é—´é€šä¿¡æ–¹å¼è¿è¡Œæ•ˆç‡ä½è€Œä¸“é—¨è®¾è®¡çš„ã€‚å®ƒå¾€å¾€ä¸å…¶ä»–é€šä¿¡æœºåˆ¶ï¼Œå¦‚ä¿¡å·é‡ï¼Œé…åˆä½¿ç”¨ï¼Œæ¥å®ç°è¿›ç¨‹é—´çš„åŒæ­¥å’Œé€šä¿¡ã€‚</li>
<li>ä¿¡å·é‡Semaphoreï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶å¤šä¸ªè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®ã€‚å®ƒå¸¸ä½œä¸ºä¸€ç§é”æœºåˆ¶ï¼Œé˜²æ­¢æŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æºã€‚å› æ­¤ï¼Œ<strong>ä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µ</strong>ã€‚</li>
<li><strong>å¥—æ¥å­—Socket</strong>ï¼šå¥—è§£å£ä¹Ÿæ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼Œä¸å…¶ä»–é€šä¿¡æœºåˆ¶ä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ç”¨äºä¸åŒåŠå…¶é—´çš„è¿›ç¨‹é€šä¿¡ã€‚</li>
<li>ä¿¡å·signalï¼š ä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿã€‚</li>
</ol>
<h2 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h2><h3 id="å¤šçº¿ç¨‹çš„å®ç°"><a href="#å¤šçº¿ç¨‹çš„å®ç°" class="headerlink" title="å¤šçº¿ç¨‹çš„å®ç°"></a>å¤šçº¿ç¨‹çš„å®ç°</h3><ol>
<li>ç»§æ‰¿Threadç±»ï¼Œé‡å†™runæ–¹æ³•</li>
<li>åˆ›å»ºMyRunnableç±»å®ç°runnableæ¥å£ï¼Œé‡å†™runæ–¹æ³•ï¼Œåˆ›å»ºMyRunnableç±»çš„å¯¹è±¡ï¼Œåˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼Œå¹¶æŠŠMyRunnableç±»å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’</li>
<li>ä½¿ç”¨ExecutorServiceã€Callableã€Futureå®ç°æœ‰è¿”å›ç»“æœçš„å¤šçº¿ç¨‹</li>
<li>é€šè¿‡çº¿ç¨‹æ± åˆ›å»º</li>
</ol>
<h3 id="ä¼˜åŠ£åˆ†æ"><a href="#ä¼˜åŠ£åˆ†æ" class="headerlink" title="ä¼˜åŠ£åˆ†æ"></a>ä¼˜åŠ£åˆ†æ</h3><ul>
<li>ç»§æ‰¿Thread<br>ä¼˜åŠ¿ï¼šç¼–å†™ç®€å•ï¼Œå¦‚æœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— éœ€ä½¿ç”¨Thread.currentThread()æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨thiså³å¯è·å¾—å½“å‰çº¿ç¨‹ã€‚<br>åŠ£åŠ¿æ˜¯ï¼šçº¿ç¨‹ç±»å·²ç»ç»§æ‰¿äº†Threadç±»ï¼Œæ‰€ä»¥ä¸èƒ½å†ç»§æ‰¿å…¶ä»–çˆ¶ç±»ã€‚</li>
<li>ä½¿ç”¨runnableæˆ–è€…callable<br>ä¼˜åŠ¿æ˜¯ï¼šçº¿ç¨‹ç±»åªæ˜¯å®ç°äº†Runnableæ¥å£æˆ–Callableæ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ã€‚<br>åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªtargetå¯¹è±¡ï¼Œæ‰€ä»¥éå¸¸é€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹æ¥å¤„ç†åŒä¸€ä»½èµ„æºçš„æƒ…å†µï¼Œä»è€Œå¯ä»¥å°†CPUã€ä»£ç å’Œæ•°æ®åˆ†å¼€ï¼Œå½¢æˆæ¸…æ™°çš„æ¨¡å‹ï¼Œè¾ƒå¥½åœ°ä½“ç°äº†é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚<br>åŠ£åŠ¿æ˜¯ï¼šç¼–ç¨‹ç¨å¾®å¤æ‚ï¼Œå¦‚æœè¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨Thread.currentThread()æ–¹æ³•ã€‚</li>
<li>runnableå’ŒcallableåŒºåˆ«<br>Callableè§„å®šï¼ˆé‡å†™ï¼‰çš„æ–¹æ³•æ˜¯call()ï¼ŒRunnableè§„å®šï¼ˆé‡å†™ï¼‰çš„æ–¹æ³•æ˜¯run()ã€‚<br>Callableçš„ä»»åŠ¡æ‰§è¡Œåå¯è¿”å›å€¼ï¼Œè€ŒRunnableçš„ä»»åŠ¡æ˜¯ä¸èƒ½è¿”å›å€¼çš„ã€‚<br>Callæ–¹æ³•å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œrunæ–¹æ³•ä¸å¯ä»¥ã€‚<br>è¿è¡ŒCallableä»»åŠ¡å¯ä»¥æ‹¿åˆ°ä¸€ä¸ªFutureå¯¹è±¡ï¼Œè¡¨ç¤ºå¼‚æ­¥è®¡ç®—çš„ç»“æœã€‚å®ƒæä¾›äº†æ£€æŸ¥è®¡ç®—æ˜¯å¦å®Œæˆçš„æ–¹æ³•ï¼Œä»¥ç­‰å¾…è®¡ç®—çš„å®Œæˆï¼Œå¹¶æ£€ç´¢è®¡ç®—çš„ç»“æœã€‚é€šè¿‡Futureå¯¹è±¡å¯ä»¥äº†è§£ä»»åŠ¡æ‰§è¡Œæƒ…å†µï¼Œå¯å–æ¶ˆä»»åŠ¡çš„æ‰§è¡Œï¼Œè¿˜å¯è·å–æ‰§è¡Œç»“æœã€‚</li>
</ul>
<h3 id="å¤šçº¿ç¨‹ä¼˜ç‚¹"><a href="#å¤šçº¿ç¨‹ä¼˜ç‚¹" class="headerlink" title="å¤šçº¿ç¨‹ä¼˜ç‚¹"></a>å¤šçº¿ç¨‹ä¼˜ç‚¹</h3><ul>
<li>åœ¨ä¸€ä¸ªç¨‹åºä¸­ï¼Œæœ‰å¾ˆå¤šçš„æ“ä½œæ˜¯éå¸¸è€—æ—¶çš„ï¼Œå¦‚æ•°æ®åº“è¯»å†™æ“ä½œï¼ŒIOæ“ä½œç­‰ï¼Œå¦‚æœä½¿ç”¨å•çº¿ç¨‹ï¼Œé‚£ä¹ˆç¨‹åºå°±å¿…é¡»ç­‰å¾…è¿™äº›æ“ä½œæ‰§è¡Œå®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œå…¶ä»–æ“ä½œã€‚ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œå¯ä»¥åœ¨å°†è€—æ—¶ä»»åŠ¡æ”¾åœ¨åå°ç»§ç»­æ‰§è¡Œçš„åŒæ—¶ï¼ŒåŒæ—¶æ‰§è¡Œå…¶ä»–æ“ä½œã€‚</li>
<li>å¯ä»¥æé«˜ç¨‹åºçš„æ•ˆç‡ã€‚</li>
<li>åœ¨ä¸€äº›ç­‰å¾…çš„ä»»åŠ¡ä¸Šï¼Œå¦‚ç”¨æˆ·è¾“å…¥ï¼Œæ–‡ä»¶è¯»å–ç­‰ï¼Œå¤šçº¿ç¨‹å°±éå¸¸æœ‰ç”¨äº†ã€‚</li>
</ul>
<h3 id="å¤šçº¿ç¨‹ç¼ºç‚¹"><a href="#å¤šçº¿ç¨‹ç¼ºç‚¹" class="headerlink" title="å¤šçº¿ç¨‹ç¼ºç‚¹"></a>å¤šçº¿ç¨‹ç¼ºç‚¹</h3><ul>
<li>ä½¿ç”¨å¤ªå¤šçº¿ç¨‹ï¼Œæ˜¯å¾ˆè€—ç³»ç»Ÿèµ„æºï¼Œå› ä¸ºçº¿ç¨‹éœ€è¦å¼€è¾Ÿå†…å­˜ã€‚æ›´å¤šçº¿ç¨‹éœ€è¦æ›´å¤šå†…å­˜ã€‚</li>
<li>å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿéœ€è¦åœ¨çº¿ç¨‹ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚</li>
<li>éœ€è¦è€ƒè™‘çº¿ç¨‹æ“ä½œå¯¹ç¨‹åºçš„å½±å“ï¼Œå¦‚çº¿ç¨‹æŒ‚èµ·ï¼Œä¸­æ­¢ç­‰æ“ä½œå¯¹ç¨‹åºçš„å½±å“ã€‚</li>
<li>çº¿ç¨‹ä½¿ç”¨ä¸å½“ä¼šå‘ç”Ÿå¾ˆå¤šé—®é¢˜ã€‚</li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹è°ƒåº¦å™¨-Thread-Scheduler-å’Œæ—¶é—´åˆ†ç‰‡-Time-Slicing-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹è°ƒåº¦å™¨-Thread-Scheduler-å’Œæ—¶é—´åˆ†ç‰‡-Time-Slicing-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹è°ƒåº¦å™¨(Thread Scheduler)å’Œæ—¶é—´åˆ†ç‰‡(Time Slicing)ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹è°ƒåº¦å™¨(Thread Scheduler)å’Œæ—¶é—´åˆ†ç‰‡(Time Slicing)ï¼Ÿ</h3><p>çº¿ç¨‹è°ƒåº¦å™¨æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»ŸæœåŠ¡ï¼Œå®ƒè´Ÿè´£ä¸ºRunnableçŠ¶æ€çš„çº¿ç¨‹åˆ†é…CPUæ—¶é—´ã€‚ä¸€æ—¦æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¹¶å¯åŠ¨å®ƒï¼Œå®ƒçš„æ‰§è¡Œä¾¿ä¾èµ–äºçº¿ç¨‹è°ƒåº¦å™¨çš„å®ç°ã€‚æ—¶é—´åˆ†ç‰‡æ˜¯æŒ‡å°†å¯ç”¨çš„CPUæ—¶é—´åˆ†é…ç»™å¯ç”¨çš„Runnableçº¿ç¨‹çš„è¿‡ç¨‹ã€‚åˆ†é…CPUæ—¶é—´å¯ä»¥åŸºäºçº¿ç¨‹ä¼˜å…ˆçº§æˆ–è€…çº¿ç¨‹ç­‰å¾…çš„æ—¶é—´ã€‚çº¿ç¨‹è°ƒåº¦å¹¶ä¸å—åˆ°Javaè™šæ‹Ÿæœºæ§åˆ¶ï¼Œæ‰€ä»¥ç”±åº”ç”¨ç¨‹åºæ¥æ§åˆ¶å®ƒæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸è¦è®©ä½ çš„ç¨‹åºä¾èµ–äºçº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼‰ã€‚</p>
<h3 id="çº¿ç¨‹çš„è°ƒåº¦ç­–ç•¥"><a href="#çº¿ç¨‹çš„è°ƒåº¦ç­–ç•¥" class="headerlink" title="çº¿ç¨‹çš„è°ƒåº¦ç­–ç•¥"></a>çº¿ç¨‹çš„è°ƒåº¦ç­–ç•¥</h3><p>çº¿ç¨‹è°ƒåº¦å™¨é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„çº¿ç¨‹è¿è¡Œï¼Œä½†æ˜¯ï¼Œå¦‚æœå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼Œå°±ä¼šç»ˆæ­¢çº¿ç¨‹çš„è¿è¡Œï¼š</p>
<ul>
<li>çº¿ç¨‹ä½“ä¸­è°ƒç”¨äº†yieldæ–¹æ³•è®©å‡ºäº†å¯¹cpuçš„å ç”¨æƒåˆ©</li>
<li>çº¿ç¨‹ä½“ä¸­è°ƒç”¨äº†sleepæ–¹æ³•ä½¿çº¿ç¨‹è¿›å…¥ç¡çœ çŠ¶æ€</li>
<li>çº¿ç¨‹ç”±äºIOæ“ä½œå—åˆ°é˜»å¡</li>
<li>å¦å¤–ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çº¿ç¨‹å‡ºç°</li>
<li>åœ¨æ”¯æŒæ—¶é—´ç‰‡çš„ç³»ç»Ÿä¸­ï¼Œè¯¥çº¿ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œ</li>
</ul>
<h3 id="çº¿ç¨‹çš„çŠ¶æ€"><a href="#çº¿ç¨‹çš„çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çš„çŠ¶æ€"></a>çº¿ç¨‹çš„çŠ¶æ€</h3><ol>
<li>æ–°å»ºçŠ¶æ€ï¼ˆNewï¼‰ï¼šæ–°å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ã€‚</li>
<li>å°±ç»ª/å¯è¿è¡ŒçŠ¶æ€ï¼ˆRunnableï¼‰ï¼šçº¿ç¨‹å¯¹è±¡åˆ›å»ºåï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥å¯¹è±¡çš„startæ–¹æ³•ã€‚è¯¥çŠ¶æ€çš„çº¿ç¨‹ä½äºå¯è¿è¡Œçº¿ç¨‹æ± ä¸­ï¼Œå˜å¾—å¯è¿è¡Œï¼Œç­‰å¾…è·å–CPUçš„ä½¿ç”¨æƒã€‚</li>
<li>è¿è¡ŒçŠ¶æ€ï¼ˆRunningï¼‰ï¼šå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹è·å¾—CPUå¹¶æ‰§è¡Œç¨‹åºä»£ç ã€‚</li>
<li>é˜»å¡çŠ¶æ€ï¼ˆBlockedï¼‰ï¼šé˜»å¡çŠ¶æ€æ˜¯çº¿ç¨‹å› ä¸ºæŸç§åŸå› æ”¾å¼ƒCPUä½¿ç”¨æƒï¼Œæš‚æ—¶åœæ­¢è¿è¡Œã€‚ç›´åˆ°çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œæ‰æœ‰æœºä¼šè½¬åˆ°è¿è¡ŒçŠ¶æ€ã€‚é˜»å¡çš„æƒ…å†µåˆ†ä¸‰ç§ï¼š<br> <strong>ç­‰å¾…é˜»å¡</strong>ï¼šè¿è¡Œçš„çº¿ç¨‹æ‰§è¡Œwaitæ–¹æ³•ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥ç­‰å¾…æ± ä¸­ã€‚(waitä¼šé‡Šæ”¾æŒæœ‰çš„é”)<br> <strong>åŒæ­¥é˜»å¡</strong>ï¼šè¿è¡Œçš„çº¿ç¨‹åœ¨è·å–å¯¹è±¡çš„åŒæ­¥é”æ—¶ï¼Œè‹¥è¯¥åŒæ­¥é”è¢«åˆ«çš„çº¿ç¨‹å ç”¨ï¼Œåˆ™JVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥é”æ± ä¸­ã€‚<br> <strong>å…¶ä»–é˜»å¡</strong>ï¼šè¿è¡Œçš„çº¿ç¨‹æ‰§è¡Œsleepæˆ–joinæ–¹æ³•ï¼Œæˆ–è€…å‘å‡ºäº†I/Oè¯·æ±‚æ—¶ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹ç½®ä¸ºé˜»å¡çŠ¶æ€ã€‚å½“sleepçš„çŠ¶æ€è¶…æ—¶ã€joinç­‰å¾…çº¿ç¨‹ç»ˆæ­¢æˆ–è€…è¶…æ—¶ã€ä»¥åŠI/Oå¤„ç†å®Œæ¯•æ—¶ï¼Œçº¿ç¨‹é‡æ–°è½¬å…¥å°±ç»ªçŠ¶æ€ã€‚</li>
<li>æ­»äº¡çŠ¶æ€ï¼ˆDeadï¼‰ï¼šçº¿ç¨‹æ‰§è¡Œå®Œæˆæˆ–è€…å› å¼‚å¸¸é€€å‡ºrunæ–¹æ³•ï¼Œè¯¥çº¿ç¨‹ç»“æŸç”Ÿå‘½å‘¨æœŸã€‚</li>
</ol>
<h2 id="çº¿ç¨‹çš„ç›¸å…³é—®é¢˜"><a href="#çº¿ç¨‹çš„ç›¸å…³é—®é¢˜" class="headerlink" title="çº¿ç¨‹çš„ç›¸å…³é—®é¢˜"></a>çº¿ç¨‹çš„ç›¸å…³é—®é¢˜</h2><h3 id="ThreadLocalæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#ThreadLocalæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="ThreadLocalæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>ThreadLocalæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>ThreadLocalæ˜¯ä¸€ä¸ªæœ¬åœ°çº¿ç¨‹å‰¯æœ¬å˜é‡å·¥å…·ç±»ã€‚ä¸»è¦ç”¨äºå°†ç§æœ‰çº¿ç¨‹å’Œè¯¥çº¿ç¨‹å­˜æ”¾çš„å‰¯æœ¬å¯¹è±¡åšä¸€ä¸ªæ˜ å°„ï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´çš„å˜é‡äº’ä¸å¹²æ‰°ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¯ä»¥å®ç°æ— çŠ¶æ€çš„è°ƒç”¨ï¼Œç‰¹åˆ«é€‚ç”¨äºå„ä¸ªçº¿ç¨‹ä¾èµ–ä¸é€šçš„å˜é‡å€¼å®Œæˆæ“ä½œçš„åœºæ™¯ã€‚<br>ç®€å•è¯´ThreadLocalå°±æ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ï¼Œåœ¨æ¯ä¸ªThreadé‡Œé¢ç»´æŠ¤äº†ä¸€ä¸ªä»¥å¼€åœ°å€æ³•å®ç°çš„ThreadLocal.ThreadLocalMapï¼ŒæŠŠæ•°æ®è¿›è¡Œéš”ç¦»ï¼Œæ•°æ®ä¸å…±äº«ï¼Œè‡ªç„¶å°±æ²¡æœ‰çº¿ç¨‹å®‰å…¨æ–¹é¢çš„é—®é¢˜äº†ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆsleepæ˜¯Threadçš„æ–¹æ³•è€Œä¸æ˜¯Objectçš„"><a href="#ä¸ºä»€ä¹ˆsleepæ˜¯Threadçš„æ–¹æ³•è€Œä¸æ˜¯Objectçš„" class="headerlink" title="ä¸ºä»€ä¹ˆsleepæ˜¯Threadçš„æ–¹æ³•è€Œä¸æ˜¯Objectçš„"></a>ä¸ºä»€ä¹ˆsleepæ˜¯Threadçš„æ–¹æ³•è€Œä¸æ˜¯Objectçš„</h3><ul>
<li>åœ¨javaçš„å†…ç½®é”æœºåˆ¶ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥æˆä¸ºé”ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥å»è°ƒç”¨waitï¼Œnotifyæ–¹æ³•ï¼Œè€ŒObjectç±»æ˜¯æ‰€æœ‰ç±»çš„ä¸€ä¸ªçˆ¶ç±»ï¼ŒæŠŠè¿™äº›æ–¹æ³•æ”¾åœ¨Objectä¸­ï¼Œåˆ™javaä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥å»è°ƒç”¨è¿™äº›æ–¹æ³•äº†ã€‚</li>
<li>ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªå¯¹è±¡é”ï¼Œwaitï¼Œnotifyï¼ŒnotifyAllè·Ÿå¯¹è±¡é”ä¹‹é—´æ˜¯æœ‰ä¸€ä¸ªç»‘å®šå…³ç³»çš„ï¼Œæ¯”å¦‚ä½ ç”¨å¯¹è±¡é”aObjectè°ƒç”¨çš„wait()æ–¹æ³•ï¼Œé‚£ä¹ˆä½ åªèƒ½é€šè¿‡aObject.notify()æˆ–è€…aObject.notifyAll()æ¥å”¤é†’è¿™ä¸ªçº¿ç¨‹ï¼Œè¿™æ ·jvmå¾ˆå®¹æ˜“å°±çŸ¥é“åº”è¯¥ä»å“ªä¸ªå¯¹è±¡é”çš„ç­‰å¾…æ± ä¸­å»å”¤é†’çº¿ç¨‹ï¼Œå‡å¦‚ç”¨Thread.wait()ï¼ŒThread.notify()ï¼ŒThread.notifyAll()æ¥è°ƒç”¨ï¼Œè™šæ‹Ÿæœºæ ¹æœ¬å°±ä¸çŸ¥é“éœ€è¦æ“ä½œçš„å¯¹è±¡é”æ˜¯å“ªä¸€ä¸ªã€‚</li>
<li>sleep()æ˜¯è®©æŸä¸ªçº¿ç¨‹æš‚åœè¿è¡Œä¸€æ®µæ—¶é—´,å…¶æ§åˆ¶èŒƒå›´æ˜¯ç”±å½“å‰çº¿ç¨‹å†³å®š,ä¹Ÿå°±æ˜¯è¯´,åœ¨çº¿ç¨‹é‡Œé¢å†³å®š.sleep()å¯ä»¥å°†ä¸€ä¸ªçº¿ç¨‹ç¡çœ ï¼Œå‚æ•°å¯ä»¥æŒ‡å®šä¸€ä¸ªæ—¶é—´ã€‚</li>
<li>wait(),æ˜¯ç”±æŸä¸ªç¡®å®šçš„å¯¹è±¡æ¥è°ƒç”¨çš„ï¼Œwait()å¯ä»¥å°†ä¸€ä¸ªçº¿ç¨‹æŒ‚èµ·ï¼Œç›´åˆ°è¶…æ—¶æˆ–è€…è¯¥çº¿ç¨‹è¢«å”¤ã€‚</li>
<li>waitï¼Œnotifyå’ŒnotifyAllåªèƒ½åœ¨åŒæ­¥æ§åˆ¶æ–¹æ³•æˆ–è€…åŒæ­¥æ§åˆ¶å—é‡Œé¢ä½¿ç”¨ï¼Œè€Œsleepå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚</li>
</ul>
<h3 id="çº¿ç¨‹Bæ€ä¹ˆçŸ¥é“çº¿ç¨‹Aä¿®æ”¹äº†å˜é‡"><a href="#çº¿ç¨‹Bæ€ä¹ˆçŸ¥é“çº¿ç¨‹Aä¿®æ”¹äº†å˜é‡" class="headerlink" title="çº¿ç¨‹Bæ€ä¹ˆçŸ¥é“çº¿ç¨‹Aä¿®æ”¹äº†å˜é‡"></a>çº¿ç¨‹Bæ€ä¹ˆçŸ¥é“çº¿ç¨‹Aä¿®æ”¹äº†å˜é‡</h3><ul>
<li>volatileä¿®é¥°å˜é‡<br>Volatileå®ç°å†…å­˜å¯è§æ€§æ˜¯é€šè¿‡storeå’ŒloadæŒ‡ä»¤å®Œæˆçš„ï¼›ä¹Ÿå°±æ˜¯å¯¹volatileå˜é‡æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œä¼šåœ¨å†™æ“ä½œååŠ å…¥ä¸€æ¡storeæŒ‡ä»¤ï¼Œå³å¼ºè¿«çº¿ç¨‹/è¿›ç¨‹å°†æœ€æ–°çš„å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼›è€Œåœ¨è¯»æ“ä½œæ—¶ï¼Œä¼šåŠ å…¥ä¸€æ¡loadæŒ‡ä»¤ï¼Œå³å¼ºè¿«ä»ä¸»å†…å­˜ä¸­è¯»å…¥å˜é‡çš„å€¼ã€‚æ¯æ¬¡è¯»å–volatileçš„å˜é‡æ—¶ï¼Œéƒ½è¦ä»å®ƒçš„å†…å­˜åœ°å€ä¸­è¯»å–ï¼Œå¹¶æ²¡æœ‰è¯´æ¯æ¬¡ä¿®æ”¹å®Œvolatileçš„å˜é‡åï¼Œéƒ½è¦ç«‹åˆ»å°†å®ƒçš„å€¼å†™å›å†…å­˜ã€‚volatileåªæä¾›äº†å†…å­˜å¯è§æ€§ï¼Œè€Œæ²¡æœ‰æä¾›åŸå­æ€§ã€‚<br><em>å¯è§æ€§ï¼šå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹å¾—åˆ°ä¿®æ”¹çš„å€¼ã€‚</em><br><em>åŸå­æ€§ï¼šä¸€ä¸ªæ“ä½œæˆ–å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå®Œæˆä¸”æ‰§è¡Œè¿‡ç¨‹ä¸è¢«ä¸­æ–­ï¼Œè¦ä¹ˆå°±ä¸æ‰§è¡Œã€‚</em><br><em>æœ‰åºæ€§ï¼šç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚</em></li>
<li>synchronizedä¿®é¥°ä¿®æ”¹å˜é‡çš„æ–¹æ³•</li>
<li>wait/notify<br>wait()ï¼šä½¿è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹é‡Šæ”¾å…±äº«èµ„æºé”ï¼Œç„¶åä»è¿è¡ŒçŠ¶æ€é€€å‡ºï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œç›´åˆ°è¢«å†æ¬¡å”¤é†’ã€‚<br>wait(long)ï¼šè¶…æ—¶ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè¿™é‡Œçš„å‚æ•°æ—¶é—´æ˜¯æ¯«ç§’ï¼Œä¹Ÿå°±æ˜¯ç­‰å¾…é•¿è¾¾næ¯«ç§’ï¼Œå¦‚æœæ²¡æœ‰é€šçŸ¥å°±è¶…æ—¶è¿”å›ã€‚<br>wait(longï¼Œint)ï¼šå¯¹äºè¶…æ—¶æ—¶é—´æ›´ç»†åŠ›åº¦çš„æ§åˆ¶ï¼Œå•ä½ä¸ºçº³ç§’ã€‚<br>notify()ï¼šéšæœºå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä½¿è¯¥çº¿ç¨‹é€€å‡ºç­‰å¾…é˜Ÿåˆ—ï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯notify()æ–¹æ³•ä»…é€šçŸ¥ä¸€ä¸ªçº¿ç¨‹ã€‚<br>notifyAll()ï¼šä½¿æ‰€æœ‰æ­£åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„å…¨éƒ¨çº¿ç¨‹é€€å‡ºç­‰å¾…é˜Ÿåˆ—ï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚æ­¤æ—¶ï¼Œä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªçº¿ç¨‹æœ€å…ˆæ‰§è¡Œï¼Œä½†ä¹Ÿæœ‰å¯èƒ½æ˜¯éšæœºæ‰§è¡Œï¼Œè¿™å–å†³äºJVMè™šæ‹Ÿæœºçš„å®ç°ã€‚</li>
<li>whileè½®è¯¢</li>
</ul>
<h3 id="ä¿è¯çº¿ç¨‹å®‰å…¨æ€ä¹ˆåšï¼Ÿ"><a href="#ä¿è¯çº¿ç¨‹å®‰å…¨æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="ä¿è¯çº¿ç¨‹å®‰å…¨æ€ä¹ˆåšï¼Ÿ"></a>ä¿è¯çº¿ç¨‹å®‰å…¨æ€ä¹ˆåšï¼Ÿ</h3><p>å½“å¤šä¸ªçº¿ç¨‹è®¿é—®æŸä¸ªæ–¹æ³•æ—¶ï¼Œä¸ç®¡ä½ é€šè¿‡æ€æ ·çš„è°ƒç”¨æ–¹å¼ã€æˆ–è€…è¯´è¿™äº›çº¿ç¨‹å¦‚ä½•äº¤æ›¿åœ°æ‰§è¡Œï¼Œæˆ‘ä»¬åœ¨ä¸»ç¨‹åºä¸­ä¸éœ€è¦å»åšä»»ä½•çš„åŒæ­¥ï¼Œè¿™ä¸ªç±»çš„ç»“æœè¡Œä¸ºéƒ½æ˜¯æˆ‘ä»¬è®¾æƒ³çš„æ­£ç¡®è¡Œä¸ºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è¯´è¿™ä¸ªç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚<br>æœ€å¸¸è§çš„ä¸€ç§ä¸å®‰å…¨çš„æƒ…å†µï¼Œå°±æ˜¯æˆ‘ä»¬Açº¿ç¨‹åœ¨è¿›å…¥æ–¹æ³•åï¼Œæ‹¿åˆ°äº†countçš„å€¼ï¼ŒåˆšæŠŠè¿™ä¸ªå€¼è¯»å–å‡ºæ¥ï¼Œè¿˜æ²¡æœ‰æ”¹å˜countçš„å€¼çš„æ—¶å€™ï¼Œç»“æœçº¿ç¨‹Bä¹Ÿè¿›æ¥çš„ï¼Œé‚£ä¹ˆå¯¼è‡´çº¿ç¨‹Aå’Œçº¿ç¨‹Bæ‹¿åˆ°çš„countå€¼æ˜¯ä¸€æ ·çš„ã€‚</p>
<ol>
<li>synchronizedå…³é”®å­—<br>ç”¨æ¥æ§åˆ¶çº¿ç¨‹åŒæ­¥çš„ï¼Œä¿è¯æˆ‘ä»¬çš„çº¿ç¨‹åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œç¡®ä¿æˆ‘ä»¬æ•°æ®çš„å®Œæ•´æ€§ï¼Œä½¿ç”¨æ–¹æ³•ä¸€èˆ¬æ˜¯åŠ åœ¨æ–¹æ³•ä¸Šã€‚å½“synchronizedé”ä½ä¸€ä¸ªå¯¹è±¡ä¹‹åï¼Œåˆ«çš„çº¿ç¨‹å¦‚æœæƒ³è¦è·å–é”å¯¹è±¡ï¼Œé‚£ä¹ˆå°±å¿…é¡»ç­‰è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œé‡Šæ”¾é”å¯¹è±¡ä¹‹åæ‰å¯ä»¥ï¼Œå¦åˆ™ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ã€‚</li>
<li>Lock<br>Lockæ˜¯åœ¨Java1.6è¢«å¼•å…¥è¿›æ¥çš„ï¼ŒLockçš„å¼•å…¥è®©é”æœ‰äº†å¯æ“ä½œæ€§ã€‚ä»ä½¿ç”¨ä¸Šè¯´Lockæ˜æ˜¾æ²¡æœ‰synchronizedä½¿ç”¨èµ·æ¥æ–¹ä¾¿å¿«æ·ã€‚è¿›å…¥æ–¹æ³•æˆ‘ä»¬é¦–å…ˆè¦è·å–åˆ°é”ï¼Œç„¶åå»æ‰§è¡Œæˆ‘ä»¬ä¸šåŠ¡ä»£ç ï¼Œè¿™é‡Œè·Ÿsynchronizedä¸åŒçš„æ˜¯ï¼ŒLockè·å–çš„æ‰€å¯¹è±¡éœ€è¦æˆ‘ä»¬äº²è‡ªå»è¿›è¡Œé‡Šæ”¾ï¼Œä¸ºäº†é˜²æ­¢æˆ‘ä»¬ä»£ç å‡ºç°å¼‚å¸¸ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„é‡Šæ”¾é”æ“ä½œæ”¾åœ¨finallyä¸­ï¼Œå› ä¸ºfinallyä¸­çš„ä»£ç æ— è®ºå¦‚ä½•éƒ½æ˜¯ä¼šæ‰§è¡Œçš„ã€‚<br>Lockåœ¨è·å–é”çš„æ—¶å€™ï¼Œå¦‚æœæ‹¿ä¸åˆ°é”ï¼Œå°±ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°æ‹¿åˆ°é”ã€‚<br>tryLockæœ‰ä¸€ä¸ªBooleançš„è¿”å›å€¼ï¼Œå¦‚æœæ²¡æœ‰æ‹¿åˆ°é”ï¼Œç›´æ¥è¿”å›falseï¼Œåœæ­¢ç­‰å¾…ã€‚</li>
</ol>
<h3 id="æ€ä¹ˆç­‰ä¸€ä¸ªçº¿ç¨‹åšå®Œ"><a href="#æ€ä¹ˆç­‰ä¸€ä¸ªçº¿ç¨‹åšå®Œ" class="headerlink" title="æ€ä¹ˆç­‰ä¸€ä¸ªçº¿ç¨‹åšå®Œ"></a>æ€ä¹ˆç­‰ä¸€ä¸ªçº¿ç¨‹åšå®Œ</h3><p>join ï¼šä¸»çº¿ç¨‹ç­‰å¾…pç»ˆæ­¢ï¼ˆå¼ºè°ƒï¼šæ˜¯ä¸»çº¿ç¨‹å¤„äºç­‰çš„çŠ¶æ€ï¼Œè€Œpæ˜¯å¤„äºè¿è¡Œçš„çŠ¶æ€ï¼‰<br>p.joinåªèƒ½joinä½startå¼€å¯çš„è¿›ç¨‹ï¼Œè€Œä¸èƒ½joinä½runå¼€å¯çš„è¿›ç¨‹ ï¼ˆå³taskï¼‰</p>
<h2 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h2><h3 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± "><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± " class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± "></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± </h3><p>çº¿ç¨‹æ± å°±æ˜¯æå‰åˆ›å»ºè‹¥å¹²ä¸ªçº¿ç¨‹ï¼Œå¦‚æœæœ‰ä»»åŠ¡éœ€è¦å¤„ç†ï¼Œçº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹å°±ä¼šå¤„ç†ä»»åŠ¡ï¼Œå¤„ç†å®Œä¹‹åçº¿ç¨‹å¹¶ä¸ä¼šè¢«é”€æ¯ï¼Œè€Œæ˜¯ç­‰å¾…ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆè¦çº¿ç¨‹æ± "><a href="#ä¸ºä»€ä¹ˆè¦çº¿ç¨‹æ± " class="headerlink" title="ä¸ºä»€ä¹ˆè¦çº¿ç¨‹æ± "></a>ä¸ºä»€ä¹ˆè¦çº¿ç¨‹æ± </h3><p>ç”±äºåˆ›å»ºå’Œé”€æ¯çº¿ç¨‹éƒ½æ˜¯æ¶ˆè€—ç³»ç»Ÿèµ„æºçš„ï¼Œæ‰€ä»¥å½“éœ€è¦é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„æ—¶å€™å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨çº¿ç¨‹æ± æ¥æå‡ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p>
<h3 id="å››ç§çº¿ç¨‹æ± çš„åˆ›å»ºï¼š"><a href="#å››ç§çº¿ç¨‹æ± çš„åˆ›å»ºï¼š" class="headerlink" title="å››ç§çº¿ç¨‹æ± çš„åˆ›å»ºï¼š"></a>å››ç§çº¿ç¨‹æ± çš„åˆ›å»ºï¼š</h3><ol>
<li>newCachedThreadPoolåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± </li>
<li>newFixedThreadPool åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ã€‚</li>
<li>newScheduledThreadPool åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œã€‚</li>
<li>newSingleThreadExecutor åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚</li>
</ol>
<h3 id="çº¿ç¨‹æ± çš„ä¼˜ç‚¹ï¼Ÿ"><a href="#çº¿ç¨‹æ± çš„ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="çº¿ç¨‹æ± çš„ä¼˜ç‚¹ï¼Ÿ"></a>çº¿ç¨‹æ± çš„ä¼˜ç‚¹ï¼Ÿ</h3><ol>
<li>é‡ç”¨å­˜åœ¨çš„çº¿ç¨‹ï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºé”€æ¯çš„å¼€é”€ã€‚</li>
<li>å¯æœ‰æ•ˆçš„æ§åˆ¶æœ€å¤§å¹¶å‘çº¿ç¨‹æ•°ï¼Œæé«˜ç³»ç»Ÿèµ„æºçš„ä½¿ç”¨ç‡ï¼ŒåŒæ—¶é¿å…è¿‡å¤šèµ„æºç«äº‰ï¼Œé¿å…å µå¡ã€‚</li>
<li>æä¾›å®šæ—¶æ‰§è¡Œã€å®šæœŸæ‰§è¡Œã€å•çº¿ç¨‹ã€å¹¶å‘æ•°æ§åˆ¶ç­‰åŠŸèƒ½ã€‚</li>
</ol>
<h3 id="çº¿ç¨‹æ± çš„ä¸­çš„çº¿ç¨‹æ•°é‡èƒ½ä¸èƒ½æ— é™å¢åŠ ï¼Œä¸ºä»€ä¹ˆ"><a href="#çº¿ç¨‹æ± çš„ä¸­çš„çº¿ç¨‹æ•°é‡èƒ½ä¸èƒ½æ— é™å¢åŠ ï¼Œä¸ºä»€ä¹ˆ" class="headerlink" title="çº¿ç¨‹æ± çš„ä¸­çš„çº¿ç¨‹æ•°é‡èƒ½ä¸èƒ½æ— é™å¢åŠ ï¼Œä¸ºä»€ä¹ˆ?"></a>çº¿ç¨‹æ± çš„ä¸­çš„çº¿ç¨‹æ•°é‡èƒ½ä¸èƒ½æ— é™å¢åŠ ï¼Œä¸ºä»€ä¹ˆ?</h3><p>ä¸èƒ½ï¼Œçº¿ç¨‹éœ€è¦ä¸€å®šå¼€é”€ï¼Œå¤ªå¤šçº¿ç¨‹ä¼šè€—å°½è®¡ç®—æœºèµ„æºï¼Œï¼ˆè€Œä¸”è¿‡å¤šçº¿ç¨‹ä¹Ÿæ— æ³•å‘æŒ¥å¤šçº¿ç¨‹çš„ä¼˜åŠ¿ï¼Œæ¯•ç«Ÿcpuæ ¸å°±é‚£ä¹ˆå¤šï¼‰</p>
<h3 id="java-é‡Œä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± åï¼Œé‚£äº›ä»»åŠ¡æ˜¯å­˜å‚¨åœ¨å“ªçš„"><a href="#java-é‡Œä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± åï¼Œé‚£äº›ä»»åŠ¡æ˜¯å­˜å‚¨åœ¨å“ªçš„" class="headerlink" title="java é‡Œä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± åï¼Œé‚£äº›ä»»åŠ¡æ˜¯å­˜å‚¨åœ¨å“ªçš„?"></a>java é‡Œä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± åï¼Œé‚£äº›ä»»åŠ¡æ˜¯å­˜å‚¨åœ¨å“ªçš„?</h3><p>æŠŠä»»åŠ¡ç”¨ Runableï¼ˆå…¶å®ä¹Ÿå¯ä»¥æ˜¯Callableï¼‰ è¡¨ç¤ºï¼Œæ”¾åœ¨ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—é‡Œã€‚</p>
<h3 id="é˜»å¡é˜Ÿåˆ—æ€ä¹ˆå®ç°ï¼Ÿ"><a href="#é˜»å¡é˜Ÿåˆ—æ€ä¹ˆå®ç°ï¼Ÿ" class="headerlink" title="é˜»å¡é˜Ÿåˆ—æ€ä¹ˆå®ç°ï¼Ÿ"></a>é˜»å¡é˜Ÿåˆ—æ€ä¹ˆå®ç°ï¼Ÿ</h3><p>åˆ›å»ºä¸€ä¸ªæ•°ç»„æˆ–è€…é“¾è¡¨ï¼Œæ¯æ¬¡å–å…ƒç´ æˆ–è€…æ”¾å…ƒç´ å°±å¯¹æ•°ç»„æ“ä½œã€‚æ²¡æœ‰å…ƒç´ è€Œè¦å–å…ƒç´ æ—¶ï¼Œé˜»å¡ï¼Œæ»¡äº†è€Œè¦æ”¾å…ƒç´ æ—¶ï¼Œé˜»å¡ã€‚</p>
<h3 id="é˜Ÿåˆ—æ»¡äº†ï¼Œé‚£ä¸ªçº¿ç¨‹æ± çš„-submit-æ–¹æ³•ä¼šé˜»å¡åœ¨é‚£é‡Œï¼Ÿ"><a href="#é˜Ÿåˆ—æ»¡äº†ï¼Œé‚£ä¸ªçº¿ç¨‹æ± çš„-submit-æ–¹æ³•ä¼šé˜»å¡åœ¨é‚£é‡Œï¼Ÿ" class="headerlink" title="é˜Ÿåˆ—æ»¡äº†ï¼Œé‚£ä¸ªçº¿ç¨‹æ± çš„ submit æ–¹æ³•ä¼šé˜»å¡åœ¨é‚£é‡Œï¼Ÿ"></a>é˜Ÿåˆ—æ»¡äº†ï¼Œé‚£ä¸ªçº¿ç¨‹æ± çš„ submit æ–¹æ³•ä¼šé˜»å¡åœ¨é‚£é‡Œï¼Ÿ</h3><ol>
<li>å¦‚æœä½¿ç”¨çš„æ˜¯æ— ç•Œé˜Ÿåˆ— LinkedBlockingQueueï¼Œä¹Ÿå°±æ˜¯æ— ç•Œé˜Ÿåˆ—çš„è¯ï¼Œå¯ä»¥ç»§ç»­æ·»åŠ ä»»åŠ¡åˆ°é˜»å¡é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œï¼Œå› ä¸º LinkedBlockingQueue å¯ä»¥è¿‘ä¹è®¤ä¸ºæ˜¯ä¸€ä¸ªæ— ç©·å¤§çš„é˜Ÿåˆ—ï¼Œå¯ä»¥æ— é™å­˜æ”¾ä»»åŠ¡</li>
<li>å¦‚æœä½¿ç”¨çš„æ˜¯æœ‰ç•Œé˜Ÿåˆ—æ¯”å¦‚ ArrayBlockingQueueï¼Œä»»åŠ¡é¦–å…ˆä¼šè¢«æ·»åŠ åˆ°ArrayBlockingQueue ä¸­ï¼ŒArrayBlockingQueueæ»¡äº†ï¼Œä¼šæ ¹æ®maximumPoolSize çš„å€¼å¢åŠ çº¿ç¨‹æ•°é‡ï¼Œå¦‚æœå¢åŠ äº†çº¿ç¨‹æ•°é‡è¿˜æ˜¯å¤„ç†ä¸è¿‡æ¥ï¼ŒArrayBlockingQueue ç»§ç»­æ»¡ï¼Œé‚£ä¹ˆåˆ™ä¼šä½¿ç”¨æ‹’ç»ç­–ç•¥RejectedExecutionHandlerå¤„ç†æ»¡äº†çš„ä»»åŠ¡ï¼Œé»˜è®¤æ˜¯AbortPolicyã€‚</li>
</ol>
<h2 id="åç¨‹"><a href="#åç¨‹" class="headerlink" title="åç¨‹"></a>åç¨‹</h2><h3 id="çº¿ç¨‹å’Œåç¨‹åŒºåˆ«"><a href="#çº¿ç¨‹å’Œåç¨‹åŒºåˆ«" class="headerlink" title="çº¿ç¨‹å’Œåç¨‹åŒºåˆ«"></a>çº¿ç¨‹å’Œåç¨‹åŒºåˆ«</h3><p>åç¨‹ï¼ˆCoroutinesï¼‰æ˜¯ä¸€ç§æ¯”çº¿ç¨‹æ›´åŠ è½»é‡çº§çš„å­˜åœ¨ï¼Œ<strong>ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªåç¨‹ã€‚åç¨‹ä¸æ˜¯è¢«æ“ä½œç³»ç»Ÿå†…æ ¸æ‰€ç®¡ç†çš„ï¼Œè€Œæ˜¯å®Œå…¨ç”±ç¨‹åºæ‰€æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯åœ¨ç”¨æˆ·æ€æ‰§è¡Œã€‚</strong>è¿™æ ·å¸¦æ¥çš„å¥½å¤„æ˜¯æ€§èƒ½å¤§å¹…åº¦çš„æå‡ï¼Œå› ä¸ºä¸ä¼šåƒçº¿ç¨‹åˆ‡æ¢é‚£æ ·æ¶ˆè€—èµ„æºã€‚<br>åç¨‹ä¸æ˜¯è¿›ç¨‹ä¹Ÿä¸æ˜¯çº¿ç¨‹ï¼Œè€Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥åœ¨æŸä¸ªåœ°æ–¹æŒ‚èµ·ï¼Œå¹¶ä¸”å¯ä»¥é‡æ–°åœ¨æŒ‚èµ·å¤„å¤–ç»§ç»­è¿è¡Œã€‚æ‰€ä»¥è¯´ï¼Œåç¨‹ä¸è¿›ç¨‹ã€çº¿ç¨‹ç›¸æ¯”å¹¶ä¸æ˜¯ä¸€ä¸ªç»´åº¦çš„æ¦‚å¿µã€‚</p>
<ul>
<li>è¿›ç¨‹çš„åˆ‡æ¢è€…æ˜¯æ“ä½œç³»ç»Ÿï¼Œåˆ‡æ¢æ—¶æœºæ˜¯æ ¹æ®æ“ä½œç³»ç»Ÿè‡ªå·±çš„åˆ‡æ¢ç­–ç•¥ï¼Œç”¨æˆ·æ˜¯æ— æ„ŸçŸ¥çš„ã€‚è¿›ç¨‹çš„åˆ‡æ¢å†…å®¹åŒ…æ‹¬é¡µå…¨å±€ç›®å½•ã€å†…æ ¸æ ˆã€ç¡¬ä»¶ä¸Šä¸‹æ–‡ï¼Œåˆ‡æ¢å†…å®¹ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚è¿›ç¨‹åˆ‡æ¢è¿‡ç¨‹æ˜¯ç”±â€œç”¨æˆ·æ€åˆ°å†…æ ¸æ€åˆ°ç”¨æˆ·æ€â€çš„æ–¹å¼ï¼Œåˆ‡æ¢æ•ˆç‡ä½ã€‚</li>
<li>çº¿ç¨‹çš„åˆ‡æ¢è€…æ˜¯æ“ä½œç³»ç»Ÿï¼Œåˆ‡æ¢æ—¶æœºæ˜¯æ ¹æ®æ“ä½œç³»ç»Ÿè‡ªå·±çš„åˆ‡æ¢ç­–ç•¥ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥ã€‚çº¿ç¨‹çš„åˆ‡æ¢å†…å®¹åŒ…æ‹¬å†…æ ¸æ ˆå’Œç¡¬ä»¶ä¸Šä¸‹æ–‡ã€‚çº¿ç¨‹åˆ‡æ¢å†…å®¹ä¿å­˜åœ¨å†…æ ¸æ ˆä¸­ã€‚çº¿ç¨‹åˆ‡æ¢è¿‡ç¨‹æ˜¯ç”±â€œç”¨æˆ·æ€åˆ°å†…æ ¸æ€åˆ°ç”¨æˆ·æ€â€ï¼Œ åˆ‡æ¢æ•ˆç‡ä¸­ç­‰ã€‚</li>
<li>åç¨‹çš„åˆ‡æ¢è€…æ˜¯ç”¨æˆ·ï¼ˆç¼–ç¨‹è€…æˆ–åº”ç”¨ç¨‹åºï¼‰ï¼Œåˆ‡æ¢æ—¶æœºæ˜¯ç”¨æˆ·è‡ªå·±çš„ç¨‹åºæ‰€å†³å®šçš„ã€‚åç¨‹çš„åˆ‡æ¢å†…å®¹æ˜¯ç¡¬ä»¶ä¸Šä¸‹æ–‡ï¼Œåˆ‡æ¢å†…å­˜ä¿å­˜åœ¨ç”¨æˆ·è‡ªå·±çš„å˜é‡ï¼ˆç”¨æˆ·æ ˆæˆ–å †ï¼‰ä¸­ã€‚åç¨‹çš„åˆ‡æ¢è¿‡ç¨‹åªæœ‰ç”¨æˆ·æ€ï¼Œå³æ²¡æœ‰é™·å…¥å†…æ ¸æ€ï¼Œå› æ­¤åˆ‡æ¢æ•ˆç‡é«˜ã€‚</li>
</ul>
<h3 id="åç¨‹Coroutineç”¨æ³•"><a href="#åç¨‹Coroutineç”¨æ³•" class="headerlink" title="åç¨‹Coroutineç”¨æ³•"></a>åç¨‹Coroutineç”¨æ³•</h3><ul>
<li>å°†å¤æ‚æ“ä½œåˆ†å¸§è®¡ç®—ã€‚</li>
<li>å¼‚æ­¥ä¸‹è½½ã€‚</li>
<li>ä½¿ç”¨yield return coroutineç­‰å¾…åç¨‹ï¼Œå°†å¤šä¸ªå¼‚æ­¥é€»è¾‘ä¸²è”ã€‚å¦‚å…ˆè¿›è¡Œå¼‚æ­¥ä¸‹è½½ï¼Œå®Œæˆä¸‹è½½ä»»åŠ¡åå†æ¥ç€è¿ç®—ã€‚</li>
<li>åˆ›å»ºäº’æ–¥åŒºã€‚å¦‚æŸä¸ªä¸‹è½½å‡½æ•°åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªåç¨‹è¿›å…¥ã€‚</li>
</ul>
<h3 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h3><p>åç¨‹çš„å®Œæˆä¸»è¦é yieldå…³é”®å­—ï¼Œå¸¦æœ‰yieldå…³é”®å­—çš„å‡½æ•°è‡ªåŠ¨å˜æˆç”Ÿæˆå™¨ï¼Œæ ¹æ®yieldå‡½æ•°çš„è®°å½•æ ‡ç­¾ä½ç½®ç»§ç»­æ‰§è¡Œåç¨‹å‡½æ•°çš„åé¢éƒ¨åˆ†ä»£ç ã€‚</p>
<ul>
<li>yield return new WaitForSeconds(3.0f); // ç­‰å¾…3ç§’ï¼Œç„¶åç»§ç»­ä»æ­¤å¤„å¼€å§‹ï¼Œå¸¸ç”¨äºåšå®šæ—¶å™¨</li>
<li>yield return null; // è¿™ä¸€å¸§åˆ°æ­¤æš‚åœï¼Œä¸‹ä¸€å¸§å†ä»æš‚åœå¤„ç»§ç»­ï¼Œå¸¸ç”¨äºå¾ªç¯ä¸­</li>
<li>yield return new WaitForEndOfFrame(); // ç­‰åˆ°è¿™ä¸€å¸§çš„cameraså’ŒGUIæ¸²æŸ“ç»“æŸåå†ä»æ­¤å¤„ç»§ç»­ï¼Œå³ç­‰åˆ°è¿™å¸§çš„æœ«å°¾å†å¾€ä¸‹è¿è¡Œã€‚è¿™è¡Œä¹‹åçš„ä»£ç è¿˜æ˜¯åœ¨å½“å‰å¸§è¿è¡Œï¼Œæ˜¯åœ¨ä¸‹ä¸€å¸§å¼€å§‹å‰æ‰§è¡Œï¼Œè·Ÿreturn nullå¾ˆç›¸ä¼¼</li>
<li>yield return new WaitForFixedUpdate(); // åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡ŒFixedUpdateçš„æ—¶å€™ç»§ç»­æ‰§è¡Œè¿™æ®µä»£ç ï¼Œå³ç­‰ä¸€æ¬¡ç‰©ç†å¼•æ“çš„æ›´æ–°</li>
<li>yield return www; // ç­‰å¾…ç›´è‡³å¼‚æ­¥ä¸‹è½½å®Œæˆ</li>
<li>yield break; // ç›´æ¥è·³å‡ºåç¨‹ï¼Œå¯¹æŸäº›åˆ¤å®šå¤±è´¥å¿…é¡»è·³å‡ºçš„æ—¶å€™ï¼Œæ¯”å¦‚åŠ è½½AssetBundleçš„æ—¶å€™ï¼ŒWWWå¤±è´¥äº†ï¼Œåè¾¹åŠ è½½bundleæ²¡æœ‰å¿…è¦äº†ï¼Œè¿™æ—¶å€™å¯ä»¥yield breakè·³å‡ºã€‚</li>
<li>yield return StartCoroutine(methodName); // ç­‰å¾…å¦ä¸€ä¸ªåç¨‹æ‰§è¡Œå®Œã€‚è¿™æ˜¯æŠŠåç¨‹ä¸²è”èµ·æ¥çš„å…³é”®ï¼Œå¸¸ç”¨äºè®©å¤šä¸ªåç¨‹æŒ‰é¡ºåºé€ä¸ªè¿è¡Œ</li>
</ul>
<blockquote>
<p>  <a href="https://www.cnblogs.com/zhehan54/p/6130030.html">https://www.cnblogs.com/zhehan54/p/6130030.html</a><br>    <a href="https://blog.csdn.net/zhaohong_bo/java/article/details/89552188">https://blog.csdn.net/zhaohong_bo/java/article/details/89552188</a><br>    <a href="https://blog.csdn.net/shuilan0066/article/details/7683315">https://blog.csdn.net/shuilan0066/article/details/7683315</a><br>    <a href="https://www.cnblogs.com/YeLing0119/p/9754090.html">https://www.cnblogs.com/YeLing0119/p/9754090.html</a><br>    <a href="https://blog.csdn.net/boteman123/article/details/81000631">https://blog.csdn.net/boteman123/article/details/81000631</a><br>    <a href="https://blog.csdn.net/beidaol/article/details/89135277">https://blog.csdn.net/beidaol/article/details/89135277</a><br>    <a href="https://blog.csdn.net/tanmomo/article/details/99671622">https://blog.csdn.net/tanmomo/article/details/99671622</a><br>    <a href="https://www.jianshu.com/p/bb07a4d047eb">https://www.jianshu.com/p/bb07a4d047eb</a><br>    <a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017628290184064">https://www.liaoxuefeng.com/wiki/1016959663602400/1017628290184064</a><br>    <a href="https://www.cnblogs.com/linuxAndMcu/p/11064916.html">https://www.cnblogs.com/linuxAndMcu/p/11064916.html</a><br>    <a href="https://www.cnblogs.com/CharlesGrant/p/8125841.html">https://www.cnblogs.com/CharlesGrant/p/8125841.html</a><br>    <a href="https://blog.csdn.net/y277an/java/article/details/98697454">https://blog.csdn.net/y277an/java/article/details/98697454</a><br>    <a href="https://www.jianshu.com/p/6dde7f92951e">https://www.jianshu.com/p/6dde7f92951e</a><br>    <a href="https://blog.csdn.net/qq_18995513/article/details/51944602?utm_source=itdadao&amp;utm_medium=referral">https://blog.csdn.net/qq_18995513/article/details/51944602?utm_source=itdadao&amp;utm_medium=referral</a></p>
</blockquote>
]]></content>
      <categories>
        <category>é¢è¯•å‡†å¤‡</category>
      </categories>
      <tags>
        <tag>programming language</tag>
      </tags>
  </entry>
  <entry>
    <title>HashMap</title>
    <url>/2020/12/23/HashMap/</url>
    <content><![CDATA[<h2 id="javaé‡Œhashmapæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"><a href="#javaé‡Œhashmapæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ" class="headerlink" title="javaé‡Œhashmapæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"></a>javaé‡Œhashmapæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h2><p>JDK1.7ï¼šæ•°ç»„+é“¾è¡¨<br>JDK1.8ï¼šæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘</p>
<h2 id="HashMap-ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆConcurrHashMapçº¿ç¨‹å®‰å…¨ï¼Ÿ"><a href="#HashMap-ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆConcurrHashMapçº¿ç¨‹å®‰å…¨ï¼Ÿ" class="headerlink" title="HashMap ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆConcurrHashMapçº¿ç¨‹å®‰å…¨ï¼Ÿ"></a>HashMap ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿä¸ºä»€ä¹ˆConcurrHashMapçº¿ç¨‹å®‰å…¨ï¼Ÿ</h2><p>jdk 1.7ä½¿ç”¨çš„æ˜¯å¤´æ’æ³•ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨HashMapçš„putæ“ä½œä¼šå¼•èµ·æ­»å¾ªç¯ï¼ŒåŸå› æ˜¯å¤šçº¿ç¨‹ä¼šå¯¼è‡´HashMapçš„Entryé“¾è¡¨å½¢æˆç¯å½¢æ•°æ®ç»“æ„ï¼Œå¯¼è‡´Entryçš„nextèŠ‚ç‚¹æ°¸è¿œä¸ä¸ºç©ºï¼Œå°±ä¼šäº§ç”Ÿæ­»å¾ªç¯è·å–Entryã€‚<br>ConcurrentHashMap é‡‡ç”¨åˆ†æ®µé”çš„æ–¹å¼ï¼Œå³æ¯ä¸€æ®µæ•°æ®é…ä¸€æŠŠé”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å ç”¨å…¶ä¸­ä¸€æ®µæ—¶ï¼Œå…¶å®ƒæ®µçš„æ•°æ®ä»ç„¶å¯ä»¥putæˆ–getã€‚<br><a id="more"></a></p>
<h2 id="ConcurrentHashMapçš„å…·ä½“å®ç°"><a href="#ConcurrentHashMapçš„å…·ä½“å®ç°" class="headerlink" title="ConcurrentHashMapçš„å…·ä½“å®ç°"></a>ConcurrentHashMapçš„å…·ä½“å®ç°</h2><p>åº•å±‚åˆ†æ®µæ•°ç»„+é“¾è¡¨ï¼Œçº¿ç¨‹å®‰å…¨ã€‚æŠŠMapåˆ†ä¸ºNä¸ªSegmentï¼Œæä¾›ç›¸åŒçš„çº¿ç¨‹å®‰å…¨ï¼Œå…è®¸å¤šä¸ªä¿®æ”¹å¹¶å‘ï¼Œå¯ä»¥æ®µå†…æ‰©å®¹ã€‚<br>ConcurrentHashMapç”±Segmentæ•°ç»„ç»“æ„å’ŒHashEntryæ•°ç»„ç»“æ„ç»„æˆï¼›<br>Segmentæ˜¯ä¸€ç§å¯é‡å…¥é”ï¼ˆReentrantLockï¼‰ï¼ŒHashEntryç”¨äºå­˜å‚¨é”®å€¼å¯¹æ•°æ®ï¼›<br>ä¸€ä¸ªConcurrentHashMapåŒ…å«ä¸€ä¸ªç”±è‹¥å¹²ä¸ªSegmentå¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œæ¯ä¸ªSegmentå¯¹è±¡å®ˆæŠ¤æ•´ä¸ªæ•£åˆ—æ˜ å°„è¡¨çš„è‹¥å¹²ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶æ˜¯ç”±è‹¥å¹²ä¸ªHashEntryå¯¹è±¡é“¾æ¥èµ·æ¥çš„é“¾è¡¨ï¼Œtableæ˜¯ä¸€ä¸ªç”±HashEntryå¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œtableæ•°ç»„çš„æ¯ä¸€ä¸ªæ•°ç»„æˆå‘˜å°±æ˜¯æ•£åˆ—æ˜ å°„è¡¨çš„ä¸€ä¸ªæ¡¶ã€‚<br>æŠŠâ€œç¢°æ’â€çš„HashEntryå¯¹è±¡é“¾æ¥æˆä¸€ä¸ªé“¾è¡¨ã€‚ç”±äºHashEntryçš„nextåŸŸä¸ºfinalå‹ï¼Œæ‰€ä»¥æ–°èŠ‚ç‚¹åªèƒ½åœ¨é“¾è¡¨çš„è¡¨å¤´å¤„æ’å…¥ã€‚ï¼ˆå¤´æ’æ³•ï¼‰</p>
<h2 id="hashArrayå’Œlistæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#hashArrayå’Œlistæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="hashArrayå’Œlistæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>hashArrayå’Œlistæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><h2 id="ConcurrentHashMapçš„æ‰©å®¹è¿‡ç¨‹"><a href="#ConcurrentHashMapçš„æ‰©å®¹è¿‡ç¨‹" class="headerlink" title="ConcurrentHashMapçš„æ‰©å®¹è¿‡ç¨‹"></a>ConcurrentHashMapçš„æ‰©å®¹è¿‡ç¨‹</h2><h2 id="ConcurrentHashMapå¤šçº¿ç¨‹rehashçš„æ•´ä½“æµç¨‹"><a href="#ConcurrentHashMapå¤šçº¿ç¨‹rehashçš„æ•´ä½“æµç¨‹" class="headerlink" title="ConcurrentHashMapå¤šçº¿ç¨‹rehashçš„æ•´ä½“æµç¨‹"></a>ConcurrentHashMapå¤šçº¿ç¨‹rehashçš„æ•´ä½“æµç¨‹</h2><h2 id="ConcurrentHashMapæŸä¸ªæ¡¶å†…è¶…è¿‡å…«ä¸ªç»“ç‚¹ä¼šæ ‘åŒ–ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è¶…è¿‡å…«ä¸ªç»“ç‚¹ä¸ä¼šæ ‘åŒ–"><a href="#ConcurrentHashMapæŸä¸ªæ¡¶å†…è¶…è¿‡å…«ä¸ªç»“ç‚¹ä¼šæ ‘åŒ–ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è¶…è¿‡å…«ä¸ªç»“ç‚¹ä¸ä¼šæ ‘åŒ–" class="headerlink" title="ConcurrentHashMapæŸä¸ªæ¡¶å†…è¶…è¿‡å…«ä¸ªç»“ç‚¹ä¼šæ ‘åŒ–ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è¶…è¿‡å…«ä¸ªç»“ç‚¹ä¸ä¼šæ ‘åŒ–"></a>ConcurrentHashMapæŸä¸ªæ¡¶å†…è¶…è¿‡å…«ä¸ªç»“ç‚¹ä¼šæ ‘åŒ–ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è¶…è¿‡å…«ä¸ªç»“ç‚¹ä¸ä¼šæ ‘åŒ–</h2><p>é“¾è¡¨è¶…è¿‡äº†å…«ä¸ªç»“ç‚¹ä½†æ˜¯æ•°ç»„å¤§å°æ²¡æœ‰è¶…è¿‡64æ—¶ä¼šè¿›è¡Œæ‰©å®¹è€Œä¸æ˜¯æ ‘åŒ–</p>
<h2 id="HashMap-1-7-1-8-çš„åŒºåˆ«ï¼Œåœ¨JDK1-8ä¸­æœ‰å“ªäº›æ”¹è¿›ï¼Ÿ"><a href="#HashMap-1-7-1-8-çš„åŒºåˆ«ï¼Œåœ¨JDK1-8ä¸­æœ‰å“ªäº›æ”¹è¿›ï¼Ÿ" class="headerlink" title="HashMap 1.7 / 1.8 çš„åŒºåˆ«ï¼Œåœ¨JDK1.8ä¸­æœ‰å“ªäº›æ”¹è¿›ï¼Ÿ"></a>HashMap 1.7 / 1.8 çš„åŒºåˆ«ï¼Œåœ¨JDK1.8ä¸­æœ‰å“ªäº›æ”¹è¿›ï¼Ÿ</h2><p>1.8åŠ å…¥äº†çº¢é»‘æ ‘ã€‚åªè¦ç”¨çš„è¿˜æ˜¯é“¾è¡¨ï¼Œå°±ä¸€ç›´æœ‰å¯èƒ½å‡ºç°é“¾è¡¨é•¿åº¦è¿‡äºé•¿çš„é—®é¢˜ã€‚é“¾è¡¨æ’å…¥æ•ˆç‡é«˜æŸ¥è¯¢æ•ˆç‡ä½ï¼Œçº¢é»‘æ ‘çš„æ’å…¥å’ŒæŸ¥è¯¢æ•ˆç‡éƒ½ä¸é”™ã€‚ä¸ºä»€ä¹ˆä¸ç”¨åˆ«çš„æ ‘ï¼Œæ˜¯åŸºäºç»¼åˆè€ƒè™‘ï¼šä¸ä»…è¦ä¿è¯putçš„æ•ˆç‡ä¹Ÿè¦ä¿è¯getçš„æ•ˆç‡ï¼Œçº¢é»‘æ ‘çš„æ’å…¥å’ŒæŸ¥è¯¢æ•ˆç‡ç›¸åŒï¼Œæ˜¯ä¸€ä¸ªæŠ˜è¡·çš„è€ƒè™‘ã€‚<br>1.8åŠ å…¥äº†treeifyæ ‘åŒ–çš„é˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰ï¼Œå«ä¹‰æ˜¯æŸä¸ªindexä¸Šé“¾è¡¨å…ƒç´ å¤§äºç­‰äº8æ—¶éœ€è¦å°†é“¾è¡¨æ”¹æˆçº¢é»‘æ ‘ï¼Œ8ä¸ªå…ƒç´ äº†æ­¤æ—¶æŸ¥è¯¢æ•ˆç‡è¾ƒä½ã€‚å½“ä¸€ä¸ªçº¢é»‘æ ‘ç»“ç‚¹ä¸è¶³6ä¸ªå°±untreeifyæ”¹æˆé“¾è¡¨ã€‚è¿™ä¸¤ä¸ªé˜ˆå€¼ä¸ç­‰çš„åŸå› æ˜¯ä¸ºäº†é˜²æ­¢åœ¨ä¸´ç•Œå€¼è¿›è¡Œæ’å…¥oråˆ é™¤å¯¼è‡´çš„é¢‘ç¹çš„æ•°æ®ç»“æ„è½¬å˜ã€‚<br>1.8ä¸­åˆå§‹åŒ–å’Œæ‰©å®¹éƒ½åœ¨resize()å‡½æ•°ä¸­ã€‚<br>1.7ä¸­å…ƒç´ ç›´æ¥æ˜¯Entryï¼Œ1.8çš„å…ƒç´ ç§°ä¸ºNodeï¼Œå…¶ä¸­çš„å±æ€§éƒ½æ˜¯ä¸€æ ·çš„ï¼Œçº¢é»‘æ ‘ä¸­ç»“ç‚¹æ˜¯TreeNodeï¼ŒTreeNodeæ—¢æ˜¯ä¸€ä¸ªæ ‘èŠ‚ç‚¹åˆæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ç»“ç‚¹ï¼ˆåŒ…å«å±æ€§prevå’Œnextï¼‰<br>1.8ä¸­å¦‚æœåˆ°è¾¾äº†æ ‘åŒ–é˜ˆå€¼ä¹Ÿä¸ä¸€å®šä¼šæ ‘åŒ–ï¼Œå¦‚æœæ•°ç»„é•¿åº¦å°äºæœ€å°æ ‘åŒ–å®¹é‡(MIN_TREEIFY_CAPACITYé»˜è®¤ä¸º64)ï¼Œåˆ™ä¼šè¿›è¡Œæ‰©å®¹è€Œä¸æ˜¯ç»§ç»­æ ‘åŒ–ã€‚å› ä¸ºè¿™ç§æƒ…å†µä¸‹é€šè¿‡æ‰©å®¹ï¼Œå¤§æ¦‚ç‡ä¹Ÿå¯ä»¥ç¼©çŸ­è¿™ä¸ªé“¾è¡¨è€Œä¸éœ€è¦æ ‘åŒ–ã€‚å¦‚æœæ•°ç»„å¤§å°å·²ç»è¶…è¿‡64äº†ï¼Œé‚£ä¹ˆå¤„äºèŠ‚çœå†…å­˜ç©ºé—´çš„è€ƒè™‘ï¼Œä¼šé€‰æ‹©æ ‘åŒ–è€Œä¸æ˜¯æ‰©å®¹ã€‚<br><strong>å› æ­¤åœ¨1.8ä¸­åªæœ‰å½“æ’å…¥ä¹‹å‰é“¾è¡¨å…ƒç´ å¤§äºç­‰äº8ä¸”æ•°ç»„å¤§å°è¶…è¿‡64çš„æƒ…å†µä¸‹ä¼šè½¬æ¢æˆçº¢é»‘æ ‘</strong><br>1.8åœ¨æ‰©å®¹æ—¶åº”ç”¨äº†æ‰©å®¹çš„è§„å¾‹ï¼Œå³å¦‚æœæ–°çš„æœ‰æ•ˆæœ€é«˜ä½æ˜¯1åˆ™indexæ˜¯åŸindex+åŸæ•°ç»„å¤§å°ã€‚<br>1.8ä¸­æ²¡æœ‰rehashï¼Œå³1ï¼Œ8åœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ä¸ä¼šé‡æ–°è®¡ç®—hashcode<br>1.8ä¸­é“¾è¡¨è½¬çº¢é»‘æ ‘é¦–å…ˆæŠŠé“¾è¡¨ä¸Šæ¯ä¸ªç»“ç‚¹æ”¹ä¸ºTreeNodeï¼Œåœ¨å¤´ç»“ç‚¹ä¸Šå¼€å§‹éå†ï¼Œæ›´æ”¹æ¯ä¸ªç»“ç‚¹å…³äºçº¢é»‘æ ‘çš„å±æ€§å³å¯ï¼ˆçº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ä¸€å®šæ˜¯é»‘è‰²çš„ï¼‰ã€‚æ¯”è¾ƒè¿‡ç¨‹å…ˆæ¯”è¾ƒhashå€¼å†æ¯”è¾ƒkeyçš„å¤§å°ï¼Œè‹¥ä»ç„¶ç›¸åŒåˆ™æ¯”è¾ƒkeyçš„classå†æ¯”è¾ƒå†…éƒ¨hashå€¼ï¼ˆidentityHashCodeå³jdkè‡ªå¸¦çš„hashå€¼ï¼‰</p>
<h2 id="ConcurrentHashMap-1-7-1-8-çš„åŒºåˆ«ï¼Œåœ¨JDK1-8ä¸­æœ‰å“ªäº›æ”¹è¿›ï¼Ÿ"><a href="#ConcurrentHashMap-1-7-1-8-çš„åŒºåˆ«ï¼Œåœ¨JDK1-8ä¸­æœ‰å“ªäº›æ”¹è¿›ï¼Ÿ" class="headerlink" title="ConcurrentHashMap 1.7 / 1.8 çš„åŒºåˆ«ï¼Œåœ¨JDK1.8ä¸­æœ‰å“ªäº›æ”¹è¿›ï¼Ÿ"></a>ConcurrentHashMap 1.7 / 1.8 çš„åŒºåˆ«ï¼Œåœ¨JDK1.8ä¸­æœ‰å“ªäº›æ”¹è¿›ï¼Ÿ</h2><h2 id="ä¸ºä»€ä¹ˆ-HashMapçš„sizeä¸º2çš„å¹‚æ¬¡æ–¹-ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-HashMapçš„sizeä¸º2çš„å¹‚æ¬¡æ–¹-ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ HashMapçš„sizeä¸º2çš„å¹‚æ¬¡æ–¹ ï¼Ÿ"></a>ä¸ºä»€ä¹ˆ HashMapçš„sizeä¸º2çš„å¹‚æ¬¡æ–¹ ï¼Ÿ</h2><p>æ–¹ä¾¿å‡ä¸€åšä¸è¿ç®—è®¡ç®—indexã€‚</p>
<h2 id="HashMap-resize-è¿‡ç¨‹èƒ½å¦ä»‹ç»-ï¼Ÿ"><a href="#HashMap-resize-è¿‡ç¨‹èƒ½å¦ä»‹ç»-ï¼Ÿ" class="headerlink" title="HashMap resize()è¿‡ç¨‹èƒ½å¦ä»‹ç» ï¼Ÿ"></a>HashMap resize()è¿‡ç¨‹èƒ½å¦ä»‹ç» ï¼Ÿ</h2><p>resize()å³æ‰©å®¹è¿‡ç¨‹ã€‚å¦‚æœæ²¡æœ‰æ‰©å®¹æœºåˆ¶ï¼Œå³æ•°ç»„å¤§å°å›ºå®šï¼Œé‚£ä¹ˆå¦‚æœå…ƒç´ å¾ˆå¤šï¼Œä¸€å®šä¼šå‡ºç°é“¾è¡¨å¤ªé•¿çš„æƒ…å†µï¼Œget()æ–¹æ³•æ•ˆç‡é™ä½ã€‚æ‰©å®¹ä¼šæ–°å»ºä¸€ä¸ªå¤§å°ç¿»å€çš„Entryæ•°ç»„ï¼Œå†ä½¿ç”¨transfer()æ–¹æ³•å°†å·²æœ‰å…ƒç´ è½¬ç§»åˆ°æ–°çš„æ•°ç»„ä¸Šï¼šæ ¹æ®å…ƒç´ å·²åŒ…å«çš„hashå€¼(hashcode)æ¥è®¡ç®—åœ¨æ–°æ•°ç»„ä¸­çš„indexã€‚åŸæœ¬indexç›¸åŒçš„ä¸¤ä¸ªå…ƒç´ å¯èƒ½ä½ç½®ä»ç„¶ç›¸åŒä¹Ÿå¯èƒ½ç›¸å·®åŸå§‹æ•°ç»„çš„å¤§å°ï¼Œå› ä¸ºåªå¯èƒ½æ˜¯æ–°çš„æœ€é«˜æœ‰æ•ˆä½æœ‰åŒºåˆ«ï¼Œä½kä½ä¸€å®šç›¸åŒ(å› ä¸ºåŸæ¥åœ¨åŒä¸€ä½ç½®)ã€‚<br>JDK 7ä¸­å¾ªç¯æ•°ç»„éå†é“¾è¡¨ï¼Œå¦‚æœkeyä¸ºnullåˆ™hashå€¼ä¸º0ï¼Œå¦åˆ™å°±æ˜¯è¿™ä¸ªkeyçš„hashå€¼ã€‚åœ¨æ–°çš„æ•°ç»„å®¹é‡ä¸‹é‡æ–°è®¡ç®—indexï¼Œç”¨å¤´æ’æ³•æ’å…¥è¿™ä¸ªå…ƒç´ ã€‚<strong>keyä¸ºnullæ˜¯ä¸€å®šå­˜æ”¾åœ¨index = 0çš„ä½ç½®ã€‚</strong>transferè¿‡ç¨‹ä¸­ä¼šåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®—hashcodeï¼Œé»˜è®¤ä¸ä¼šé‡æ–°è®¡ç®—(rehash = false)ã€‚<br>JDK 8ä¸­è®¡ç®—e.hash &amp; oldCapacityï¼Œå‡è®¾oldCapacityæ˜¯2çš„kæ¬¡å¹‚åˆ™å®ƒçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­åªæœ‰k+1ä½æ˜¯1ï¼Œè¿™ä¸ªä¸è¿ç®—æ˜¯åœ¨åˆ¤æ–­e.hashçš„ç¬¬k+1ä½æ˜¯å¦ä¸º0ï¼Œå¦‚æœæ˜¯0ï¼Œåˆ™indexä¸å˜ï¼ˆä½ä½loï¼‰ï¼Œå¦‚æœæ˜¯1ï¼Œåˆ™index += oldCapacityï¼ˆé«˜ä½hiï¼‰ã€‚å¯¹åŸå§‹æ•°ç»„æŸä¸€ä½ç½®ä¸Šçš„é“¾è¡¨ï¼Œé€ä¸ªåšä¸è¿ç®—ï¼Œæ ¹æ®ç»“æœåˆ†æˆä¸¤æ¡é“¾ï¼ˆå°¾æ’æ³•å½¢æˆé“¾ï¼‰ï¼Œç›´æ¥æ”¾åˆ°æ–°æ•°ç»„çš„loå’Œhiä½ã€‚å¯¹äºåŸå§‹æ•°ç»„æŸä¸€ä½ç½®ä¸Šçš„çº¢é»‘æ ‘ï¼Œåˆ†æˆä¸¤æ£µæ ‘ï¼Œå¦‚æœå­æ ‘çš„å…ƒç´ æ€»æ•°å°äºuntreeifyçš„é˜ˆå€¼ï¼ˆ6ï¼‰åˆ™è½¬æ¢æˆé“¾è¡¨ï¼Œå¦åˆ™è½¬æ¢æˆçº¢é»‘æ ‘ï¼ˆå¦‚æœæ²¡æœ‰åˆ†è£‚ï¼Œåˆ™ç­‰ä»·äºå°†åŸå§‹çº¢é»‘æ ‘è½¬ç§»ï¼‰ï¼Œåˆ†è£‚å‡ºæ–°çš„æ ‘çš„æ—¶å€™éœ€è¦å¯¹æ ‘è¿›è¡Œè°ƒæ•´å¹¶å°†æ–°çš„rootæŒªåˆ°é“¾è¡¨çš„èµ·ç‚¹ã€‚</p>
<h2 id="HashMapæ•ˆç‡å—ä»€ä¹ˆå½±å“ï¼Ÿ"><a href="#HashMapæ•ˆç‡å—ä»€ä¹ˆå½±å“ï¼Ÿ" class="headerlink" title="HashMapæ•ˆç‡å—ä»€ä¹ˆå½±å“ï¼Ÿ"></a>HashMapæ•ˆç‡å—ä»€ä¹ˆå½±å“ï¼Ÿ</h2><p> (è´Ÿè½½å› å­ã€hashæ•°ç»„size)</p>
<h2 id="HashMapä¸­æ‰°åŠ¨å‡½æ•°çš„ä½œç”¨-ï¼Ÿ"><a href="#HashMapä¸­æ‰°åŠ¨å‡½æ•°çš„ä½œç”¨-ï¼Ÿ" class="headerlink" title="HashMapä¸­æ‰°åŠ¨å‡½æ•°çš„ä½œç”¨ ï¼Ÿ"></a>HashMapä¸­æ‰°åŠ¨å‡½æ•°çš„ä½œç”¨ ï¼Ÿ</h2><h2 id="HashMapä¸­putå¦‚ä½•å®ç°ï¼ˆå‘hashmapæ’å…¥-key-value-ï¼‰"><a href="#HashMapä¸­putå¦‚ä½•å®ç°ï¼ˆå‘hashmapæ’å…¥-key-value-ï¼‰" class="headerlink" title="HashMapä¸­putå¦‚ä½•å®ç°ï¼ˆå‘hashmapæ’å…¥(key, value)ï¼‰"></a>HashMapä¸­putå¦‚ä½•å®ç°ï¼ˆå‘hashmapæ’å…¥(key, value)ï¼‰</h2><p>åŸç†ï¼š</p>
<ol>
<li><p>ï¼ˆJDK1.7å®ç°ï¼‰åˆ¤æ–­æ˜¯å¦ä¸ºç©ºtableï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ã€‚è¦ä¹ˆä½¿ç”¨é»˜è®¤å®¹é‡16ï¼Œè¦ä¹ˆä½¿ç”¨ä¼ å…¥çš„å®¹é‡ã€‚åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­æ‰¾åˆ°ä¸å°äºè¿™ä¸ªå®¹é‡çš„æœ€å°çš„2çš„å¹‚(roundUpToPowerOf2(tosize))ã€‚æ¯”å¦‚ä¼ å…¥initialCapacityä¸º10ï¼Œåˆ™åˆå§‹åŒ–æ•°ç»„å¤§å°ä¸º16ã€‚æœ€å¤§å®¹é‡æ˜¯2^30(1&lt;<30)ã€‚é‡ç®—æ‰©å®¹çš„é˜ˆå€¼ï¼ˆmin(capacity * loadfactor, max_capacity + 1)ï¼‰ã€‚hashmapçš„å‚æ•°ï¼šinitialcapacity, loadfactor ï¼ˆåˆå§‹å®¹é‡é»˜è®¤16å’ŒåŠ è½½å› å­é»˜è®¤0.75ï¼‰entry<k, v>åŒ…å«å››ä¸ªå±æ€§ï¼škeyï¼Œvalueï¼Œnext(Entry)ï¼Œhashå€¼(int)ã€‚hashå€¼ç”¨äºä¸¤ä¸ªEntryå¯¹è±¡çš„æ¯”è¾ƒã€‚</30)ã€‚é‡ç®—æ‰©å®¹çš„é˜ˆå€¼ï¼ˆmin(capacity></p>
</li>
<li><p>è®¡ç®—hashcode<br>è°ƒç”¨hashæ–¹æ³•ï¼šè°ƒç”¨key.hashCode()æ–¹æ³•å¹¶ä¸hash seedåšå¼‚æˆ–è¿ç®—ï¼Œå†å¯¹è¿™ä¸ªå€¼è¿›è¡Œå³ç§»æˆ–è€…å¼‚æˆ–è¿ç®—ã€‚å³ç§»ç›¸å½“äºé«˜ä½ç§»åŠ¨åˆ°äº†ä½ä½ï¼Œä½ä½çœç•¥äº†ï¼Œå¼‚æˆ–ä»è€Œä½¿å¾—é«˜ä½ä¹Ÿå¯ä»¥å‚ä¸indexçš„è®¡ç®—ï¼Œä½¿indexæ›´å¹³å‡ï¼ˆå¼‚æˆ–^ï¼šç›¸åŒä¸º0ï¼Œä¸åŒä¸º1ï¼‰ã€‚hashCodeæ–¹æ³•å¯ä»¥é‡å†™ã€‚å°†è®¡ç®—å¥½çš„hashCodeå­˜å…¥Entryçš„hashå±æ€§ã€‚<br>1.8ä¸­ä»ç„¶æ—¶å³ç§»å’Œå¼‚æˆ–ï¼Œåªæ˜¯æ²¡æœ‰1.7é‚£ä¹ˆå¤æ‚ï¼Œkeyä¸ºnullæ—¶hashcodeä¸º0ã€‚</p>
</li>
<li><p>è®¡ç®—index<br>å³ï¼šæ ¹æ®hashCodeå€¼è®¡ç®—æ•°ç»„ä¸‹æ ‡ã€‚<br>è®¡ç®—key.hashCode() &amp; (table.length - 1) ï¼ˆäºŒè¿›åˆ¶ä½è¿ç®—é€Ÿåº¦å¿«ã€‚table.lengthæ˜¯2çš„kæ¬¡å¹‚ï¼Œtable.length - 1çš„ä½kä½å…¨1é«˜ä½å…¨0ï¼Œè¯¥ä¸æ“ä½œç›¸å½“äºåªä¿ç•™äº†keyçš„hashcodeçš„åkä½ä½œä¸ºindexï¼Œindexçš„å–å€¼èŒƒå›´æ­£å¥½æ˜¯0åˆ°table.length - 1ï¼‰ä½œä¸ºè¯¥entryå­˜æ”¾åœ¨æ•°ç»„ä¸­çš„indexã€‚hashmapæ”¾å…¥ä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œå°†è¯¥é”®å€¼å¯¹è§†ä½œä¸€ä¸ªentryï¼ŒæŠŠè¿™ä¸ªentryçš„å¼•ç”¨æ”¾å…¥æ•°ç»„çš„æŸä¸ªä½ç½®orè¿™ä¸ªä½ç½®è¿æ¥çš„é“¾è¡¨ä¸Šï¼Œè¿™ä¸ªä½ç½®å³indexï¼Œéœ€è¦é€šè¿‡keyçš„å€¼æ¥è®¡ç®—ã€‚å¦‚æœå–ä½™ï¼Œå¾ˆå®¹æ˜“å†²çªï¼ˆä¸åŒkeyæ”¾åœ¨æ•°ç»„çš„åŒä¸€ä½ç½®ï¼‰ï¼Œä¸”å–ä½™æ“ä½œæ¯”ä½æ“ä½œæ…¢ã€‚</p>
</li>
<li><p>(JDK1.7ä¸­å…ˆæ‰©å®¹å†æ·»åŠ ï¼ŒJDK1.8æ˜¯å…ˆæ·»åŠ å†æ‰©å®¹)æ‰©å®¹ï¼š1.7ä¸­ï¼Œå¦‚æœå…ƒç´ ä¸ªæ•°è¶…è¿‡é˜ˆå€¼ä¸”å½“å‰è¦æ”¾å…¥çš„indexå¤„ä¸ä¸ºnullåˆ™å¼€å§‹æ‰©å®¹ã€‚1.8ä¸­åªåˆ¤æ–­äº†å…ƒç´ ä¸ªæ•°è¶…è¿‡é˜ˆå€¼å°±æ‰©å®¹ã€‚æ‰©å®¹æ–¹æ³•ï¼šresize()<br>1.7åœ¨æ•°ç»„çš„æ¯æ¬¡æ‰©å®¹æ—¶ä¼šåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œéœ€è¦æ‰©å®¹æ—¶ä¼šæ”¹å˜hashseedï¼Œä½¿å¾—è®¡ç®—å‡ºçš„hashcodeæ›´åŠ åˆ†æ•£ã€‚</p>
</li>
<li><p>å¦‚æœå½“å‰æ•°ç»„çš„å½“å‰indexå¤„ä¸ºç©ºï¼Œåˆ™æ–°å»ºä¸€ä¸ªEntryå¯¹è±¡ï¼ŒåŒ…å«keyï¼Œvalueï¼Œhashå’Œnullï¼ˆnextä¸ºç©ºï¼‰ç›´æ¥æ”¾å…¥indexå¤„ã€‚å¦åˆ™åœ¨JDK 1.7ä¸­ä½¿ç”¨å¤´æ’æ³•ï¼š(key, value, hash, header)ï¼Œå…¶ä¸­headeræ˜¯é“¾è¡¨å¤´éƒ¨ï¼Œå³table[index]ï¼Œå†æŠŠè¿™ä¸ªEntryæ”¾å…¥table[index]ï¼Œæ·»åŠ ä¹‹åsize++ï¼›è€Œåœ¨1.8ä¸­ä½¿ç”¨å°¾æ’æ³•ï¼Œå› ä¸ºæœ¬æ¥å°±éœ€è¦éå†æ•´ä¸ªé“¾è¡¨æ¥åˆ¤æ–­å…ƒç´ ä¸ªæ•°æ˜¯å¦è¾¾åˆ°treeifyçš„é˜ˆå€¼ï¼ŒåŒæ—¶åœ¨éå†é“¾è¡¨æ—¶å¯ä»¥åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨æ•´ä¸ªkeyï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥è¦†ç›–ï¼Œå¦‚æœå½“å‰å…ƒç´ çš„keyä¸ç›¸ç­‰ï¼Œåˆ™åˆ¤æ–­å½“å‰å…ƒç´ çš„ç»“ç‚¹æ˜¯å¦instanceof TreeNodeï¼Œå¦‚æœå·²ç»æ˜¯ä¸€ä¸ªæ ‘çš„åˆ™ç›´æ¥è¿›è¡Œçº¢é»‘æ ‘TreeNodeç»“ç‚¹çš„æ’å…¥ï¼Œå¦åˆ™å½“å‰indexä¸€å®šæ˜¯é“¾è¡¨ï¼Œå¾ªç¯å¹¶ç´¯è®¡é“¾è¡¨ä¸Šç»“ç‚¹ä¸ªæ•°ï¼Œå¯¹æ¯ä¸ªç»“ç‚¹åˆ¤æ–­æ˜¯éƒ½éœ€è¦è¦†ç›–ï¼Œå¦‚æœä¸‹ä¸€ä¸ªæ˜¯ç©ºåˆ™è¯´æ˜å·²ç»åˆ°äº†å°¾éƒ¨ï¼Œæ’å…¥è¿™ä¸ªç»“ç‚¹ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ ‘åŒ–ã€‚</p>
</li>
</ol>
<p>å¦‚æœæ˜¯è¦†ç›–å·²æœ‰çš„keyï¼Œåˆ™ä¼šç”¨æ–°çš„valueè¦†ç›–æ—§çš„valueå¹¶è¿”å›æ—§çš„valueã€‚åœ¨éå†å¯»æ‰¾æ˜¯å¦å­˜åœ¨è¿™ä¸ªkeyçš„è¿‡ç¨‹ä¸­å…ˆåˆ¤æ–­hashå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œå†è¿›ä¸€æ­¥æ¯”è¾ƒkeyæ˜¯å¦equalsï¼Œè¿™é‡Œçš„equalsæ–¹æ³•å¯èƒ½è¢«é‡å†™å¾—è¾ƒä¸ºå¤æ‚ï¼Œå› æ­¤å…ˆå¯¹hashè¿›è¡Œåˆ¤æ–­å¯ä»¥å‡å°‘equalsçš„æ‰§è¡Œä»è€Œæé«˜ä»£ç è¿è¡Œæ•ˆç‡ã€‚å…ˆå¯»æ‰¾æœ‰æ— ç›¸åŒkeyï¼Œè‹¥æ— å†æ·»åŠ è¿™ä¸ªEntryå¹¶è¿”å›nullã€‚</p>
<blockquote>
<p>hashmap.put(â€œ1â€, â€œ2â€)<br>String value = hashmap.put(â€œ1â€, â€œ3â€) // value = 2<br>String value = hashmap.put(â€œ2â€, â€œ3â€) // value = null, no overlap</p>
</blockquote>
<h2 id="ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨keyåšhashå€¼è€Œæ˜¯ä¸é«˜16ä½åšå¼‚æˆ–è¿ç®—"><a href="#ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨keyåšhashå€¼è€Œæ˜¯ä¸é«˜16ä½åšå¼‚æˆ–è¿ç®—" class="headerlink" title="ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨keyåšhashå€¼è€Œæ˜¯ä¸é«˜16ä½åšå¼‚æˆ–è¿ç®—"></a>ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨keyåšhashå€¼è€Œæ˜¯ä¸é«˜16ä½åšå¼‚æˆ–è¿ç®—</h2><p>å¼‚æˆ–å¯ä»¥ä½¿å¾—é«˜ä½ä¹Ÿå¯ä»¥å‚ä¸indexçš„è®¡ç®—ï¼Œä½¿indexæ›´å¹³å‡ã€‚</p>
<h2 id="Hashtable-å’Œ-HashMapçš„åŒºåˆ«"><a href="#Hashtable-å’Œ-HashMapçš„åŒºåˆ«" class="headerlink" title="Hashtable å’Œ HashMapçš„åŒºåˆ«"></a>Hashtable å’Œ HashMapçš„åŒºåˆ«</h2><p>åº•å±‚æ•°æ®ç»“æ„ (JDK1.8åä¸åŒ)ã€çˆ¶ç±»ä¸åŒ  ã€æ‰©å®¹æ–¹æ³•ä¸åŒ ã€ çº¿ç¨‹ä¸Šé”èŒƒå›´ä¸åŒï¼ˆé‡ç‚¹ï¼‰<br>hashtableï¼šåº•å±‚æ•°ç»„+é“¾è¡¨å®ç°ï¼Œæ— è®ºæ˜¯keyè¿˜æ˜¯valueéƒ½ä¸èƒ½ä¸ºnullã€‚çº¿ç¨‹å®‰å…¨ï¼Œåœ¨ä¿®æ”¹æ—¶synchronizeé”ä½äº†æ•´ä¸ªhashTableï¼Œæ•ˆç‡ä½ã€‚<br>HashMapï¼šåº•å±‚æ•°ç»„+é“¾è¡¨å®ç°ï¼Œå¯ä»¥å­˜å‚¨nullä½œä¸ºkeyæˆ–valueï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚åŠ è½½å› å­ï¼šä¸ºäº†é™ä½å“ˆå¸Œå†²çªï¼Œé”®å€¼å¯¹è¾¾åˆ°æ•°ç»„å†…å­˜75%çš„æ—¶å€™è¿›è¡Œæ‰©å®¹ï¼Œç›´æ¥*2ã€‚<br>ConcurrentHashMapä¸æ”¯æŒkeyä¸ºnull<br>HashTableå®¹å™¨ä½¿ç”¨sychronizedæ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œé‡‡å–é”ä½æ•´ä¸ªè¡¨ç»“æ„æ¥è¾¾åˆ°åŒæ­¥ç›®çš„ï¼Œåœ¨çº¿ç¨‹ç«äº‰æ¿€çƒˆçš„æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®HashTableçš„åŒæ­¥æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿè®¿é—®åŒæ­¥æ–¹æ³•æ—¶ï¼Œä¼šè¿›å…¥é˜»å¡æˆ–è½®è¯¢çŠ¶æ€ï¼›å¦‚çº¿ç¨‹1ä½¿ç”¨putæ–¹æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ—¢ä¸èƒ½ä½¿ç”¨putæ–¹æ³•ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨getæ–¹æ³•ï¼Œæ•ˆç‡éå¸¸ä½ä¸‹ã€‚</p>
<h2 id="hashtableçš„ç†æƒ³çš„æŸ¥æ‰¾æ•ˆç‡æ˜¯å¤šå°‘ï¼Ÿ"><a href="#hashtableçš„ç†æƒ³çš„æŸ¥æ‰¾æ•ˆç‡æ˜¯å¤šå°‘ï¼Ÿ" class="headerlink" title="hashtableçš„ç†æƒ³çš„æŸ¥æ‰¾æ•ˆç‡æ˜¯å¤šå°‘ï¼Ÿ"></a>hashtableçš„ç†æƒ³çš„æŸ¥æ‰¾æ•ˆç‡æ˜¯å¤šå°‘ï¼Ÿ</h2><h2 id="å“ˆå¸Œç¢°æ’ï¼ˆåœ¨åŒä¸€ä½ç½®å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼‰æ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#å“ˆå¸Œç¢°æ’ï¼ˆåœ¨åŒä¸€ä½ç½®å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼‰æ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="å“ˆå¸Œç¢°æ’ï¼ˆåœ¨åŒä¸€ä½ç½®å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼‰æ€ä¹ˆè§£å†³ï¼Ÿ"></a>å“ˆå¸Œç¢°æ’ï¼ˆåœ¨åŒä¸€ä½ç½®å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼‰æ€ä¹ˆè§£å†³ï¼Ÿ</h2><p>é“¾è¡¨æ³•ï¼šåœ¨æ•°ç»„ä¸­çš„entryçš„å¼•ç”¨ä¸ŠåŠ ä¸Šä¸€ä¸ªnextæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å¯¹äºå•é“¾è¡¨æ¥è¯´ï¼Œæ’å…¥å¤´éƒ¨çš„é€Ÿåº¦æ—¶æœ€å¿«çš„ã€‚ä½†æ˜¯åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œå•é“¾è¡¨ä»æ•°ç»„ä¸­å­˜æ”¾çš„entryå¼€å§‹åªèƒ½å‘ä¸‹æŸ¥æ‰¾ï¼Œæ— æ³•å‘ä¸Šå›æº¯ï¼Œå› æ­¤å¯èƒ½æ— æ³•æœ‰æ•ˆè·å–å¤´æ’æ³•æ’å…¥çš„å…ƒç´ ã€‚è§£å†³æ–¹æ³•ï¼šå¤´æ’ä¹‹åå°†é“¾è¡¨å‘ä¸‹ç§»åŠ¨ï¼Œå°†æ’å…¥çš„å¤´å…ƒç´ ä½œä¸ºé“¾è¡¨æ”¾åœ¨æ•°ç»„ä¸­çš„é‚£ä¸ªå…ƒç´ ã€‚ç”±äºç§»åŠ¨å¤´èŠ‚ç‚¹ç›¸å½“äºç§»åŠ¨æ•´ä¸ªé“¾è¡¨ï¼Œåªéœ€å°†å¤´èŠ‚ç‚¹æ”¾å…¥æ•°ç»„ï¼štable[index] = new Entry(key, value, table[index])<br>æ¢æŸ¥æ³•ï¼ŒåŒé‡æ•£åˆ—ï¼ˆå‘ç”Ÿå†²çªä¹‹åä»¥å½“å‰åœ°å€ä¸ºåŸºç¡€æ‰¾ä¸‹ä¸€ä¸ªåœ°å€ç›´åˆ°æ²¡æœ‰å†²çªï¼‰ï¼ŒåŒé‡å“ˆå¸Œ</p>
<blockquote>
<p>å‚è€ƒï¼š<a href="https://juejin.cn/post/6844904057128091655">https://juejin.cn/post/6844904057128091655</a><br>     <a href="https://www.cnblogs.com/sulishihupan/p/13418915.html">https://www.cnblogs.com/sulishihupan/p/13418915.html</a></p>
</blockquote>
]]></content>
      <categories>
        <category>é¢è¯•å‡†å¤‡</category>
      </categories>
      <tags>
        <tag>hash</tag>
      </tags>
  </entry>
  <entry>
    <title>Adversarial Machine Learning</title>
    <url>/2021/01/12/DL_Adversarial%20Machine%20Learning/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Regular ML: build a model based on sample data $x$ in order to make prediction<br>Attack: add invisible noise $\eta$ to clean sample data and fool the model(make the wrong prediction)<br><strong>Adversarial Machine Learning: attempts to fool models by supplying deceptive input</strong><br><em>The malfunction of a ML model may cause damage in many aspects.</em><br><a id="more"></a></p>
<ul>
<li>Why ML models can be fooled?<br>The precision $\epsilon$ of an individual input feature is limited so that adding noise beyond that limitation($||\eta||&lt;\epsilon$) is <strong>both invisible to human and cannot be distinguished by hardware</strong>.<br>During the training period, the original data is processed by activation where slight perturbation may be magnified and thus leads to malfunction of the model.<br>the adversarial perturbation causes the activation to grow by $w^T\eta$:<script type="math/tex; mode=display">w^T\tilde{x}=w^Tx-w^T\eta</script><strong>We want to get the max $w^T\eta$ to fool the model.</strong><br><strong>And we need to get the min $\eta$ so that the slight change is hard to be detected.</strong><br>so we assign:<script type="math/tex; mode=display">\eta = \epsilon sign(w)</script>The activation will grow by <strong>$\epsilon mn$</strong> where $m$ is the average magnitude of each element of n-dimensional vector $w$.<br>A simple linear model can have adversarial examples if its input has sufficient dimensionality.</li>
</ul>
<h1 id="How-to-attack-a-ML-model"><a href="#How-to-attack-a-ML-model" class="headerlink" title="How to attack a ML model"></a>How to attack a ML model</h1><h2 id="White-box-Attack"><a href="#White-box-Attack" class="headerlink" title="White-box Attack"></a>White-box Attack</h2><p>An attacker has complete access to the ML model.<br>The main idea od white box attack is to generate adversarial examples.</p>
<h3 id="Fast-Gradient-Sign-Method-FGSM"><a href="#Fast-Gradient-Sign-Method-FGSM" class="headerlink" title="Fast Gradient Sign Method(FGSM)"></a>Fast Gradient Sign Method(FGSM)</h3><p>$\textit{J}(w,x,y^{true})$: loss function<br>SGD: update weights to <strong>decrease</strong> the loss: </p>
<script type="math/tex; mode=display">w = w - \nabla \textit{J}_w(w,x,y)</script><p>Attack: update samples to <strong>increase</strong> the loss: </p>
<script type="math/tex; mode=display">x = x + \nabla \textit{J}_x(w,x,y)</script><p>Perturbation:</p>
<script type="math/tex; mode=display">\eta = \epsilon sign(\nabla \textit{J}_x(w,x,y))\quad x = x + \eta</script><p>THis algorithm is cheap because we donâ€™t update weights or parameters $w$.</p>
<h3 id="One-step-target-class-method"><a href="#One-step-target-class-method" class="headerlink" title="One-step target class method"></a>One-step target class method</h3><p>In FGSM:</p>
<script type="math/tex; mode=display">\tilde{x} = x + \epsilon sign(\nabla \textit{J}_x(w,x,y^{true}))</script><p>Using $y^{target}$ which are unlikely to be the correct class of $x$:</p>
<script type="math/tex; mode=display">\tilde{x} = x - \epsilon sign(\nabla \textit{J}_x(w,x,y^{target}))</script><h2 id="Black-box-Attack"><a href="#Black-box-Attack" class="headerlink" title="Black-box Attack"></a>Black-box Attack</h2><p>Attacker has no access to parameters but only has some idea of the domain of interests (eg. image classification). The number of queries to the system is limited.</p>
<h1 id="How-to-defend"><a href="#How-to-defend" class="headerlink" title="How to defend?"></a>How to defend?</h1><h1 id="How-to-effectively-defend"><a href="#How-to-effectively-defend" class="headerlink" title="How to effectively defend?"></a>How to effectively defend?</h1><h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1>]]></content>
      <categories>
        <category>Neural Network and Deep Learning 2</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>Reinforcement Learning</title>
    <url>/2021/01/19/DL_Reinforcement_Learning/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Alpha Go: beat the best human Go player<br>AlphaFold: a solution to the protein folding</p>
<p>Reinforcement Learning is a <strong>feedback-based</strong> machine learning technique: an agent learns to behave in an environment by performing the actions and getting the feedback.<br>Sequential decision making + long-term goal(getting the maximum positive rewards)<br>No pre-program and only learns from its own experience<br><a id="more"></a></p>
<p>During the period of exploring the environment, agentâ€™s state gets changed, and agent receives a reward or penalty after each action as a feedback. The goal of RL is to learn which actions lead to maximum point.</p>
<h1 id="Terms-used-in-RL"><a href="#Terms-used-in-RL" class="headerlink" title="Terms used in RL"></a>Terms used in RL</h1><h2 id="Agent"><a href="#Agent" class="headerlink" title="Agent"></a>Agent</h2><p>An entity that can perceive/explore the environment and act upon it.<br>based on hit and trail process;<br>may get a delayed reward;<br>get the maximum positive rewards.</p>
<h2 id="Discount-factor"><a href="#Discount-factor" class="headerlink" title="Discount factor"></a>Discount factor</h2><p>Determines the importance of future rewards. A factor of 0 makes the agent â€œopportunisticâ€ by only considering current rewards, while a factor approaching 1 will make it strive for a long-term high reward. If the discount factor meets or exceeds 1, Q-values may diverge.</p>
<h2 id="Approaches-to-implement-RL"><a href="#Approaches-to-implement-RL" class="headerlink" title="Approaches to implement RL"></a>Approaches to implement RL</h2><ul>
<li><p>Value-based<br>The optimal value function, which is the maximum value at a state under any policy.</p>
</li>
<li><p>Policy-based<br>Find the optimal policy for the maximum future rewards without using the value function. (Deterministic VS Stochastic policy)</p>
</li>
<li><p>Model-based<br>The agent explores a virtual model before exploring the environment.</p>
</li>
</ul>
<h2 id="4-key-elements-of-RL"><a href="#4-key-elements-of-RL" class="headerlink" title="4 key elements of RL"></a>4 key elements of RL</h2><ul>
<li><p>Policy: how agent behave at a given time.<br>It can be a look-up table or computation as a search process.<br>Deterministic: $a = \pi (s)$<br>Stochastic: $\pi (a|s) = P[A_t=a|S_t=s]$</p>
</li>
<li><p>Reward Signal: at each state, environment sends a real-time reward signal.<br>Reward can change the policy to maximize the sum of rewards of actions.</p>
</li>
<li><p>Value Function: how much reward an agent can expect in the current state.<br>Depends on the reward, the goal of estimating values is to achieve more rewards.</p>
</li>
<li><p>Model of the environment: mimics the behavior of the environment for planning.<br>One can take actions by considering all future situations before actually experiencing them. (Model-based approach VS Model-free approach)</p>
</li>
</ul>
<h2 id="Types-of-Reinforcement-learning"><a href="#Types-of-Reinforcement-learning" class="headerlink" title="Types of Reinforcement learning"></a>Types of Reinforcement learning</h2><ul>
<li><p>Positive Reinforcement<br>Increase the strength of behavior<br>Sustain the changes for a long time: an overload of states that can reduce the consequences</p>
</li>
<li><p>Negative Reinforcement<br>Avoid negative conditions<br>More effective<br>Provides reinforcement only to meet minimum behavior</p>
</li>
</ul>
<h1 id="How-does-Reinforcement-Learning-work"><a href="#How-does-Reinforcement-Learning-work" class="headerlink" title="How does Reinforcement Learning work?"></a>How does Reinforcement Learning work?</h1><p>First we have an agent and an environment.<br>We assign an intial value to each state and update it according to the rewards.</p>
<p><strong>Bellman equation</strong><br>It is used to calculate the values of a decision in dynamic programming at a certain point by including the values of previous states.<br>key elements used in bellman equation:<br>$a$: action performed by the agent<br>$s$: state occurred by performing the action<br>$R$: reward or feedback obtained at a state by performing an action<br>$\gamma$: a discount factor</p>
<script type="math/tex; mode=display">V(s)=max_a[R(s,a)+\gamma V(s')]</script><p>$V(s)$: value at state s<br>$V(sâ€™)$: value at the next state of s<br>We start the calculation from the block that is next to the target block.<br>Represent the agent state as the <strong>Markov Decision Process</strong>.<br>If the environment is <strong>completely observable</strong>, then its dynamic can be modeled as a Markov Process.<br>At each action, the environment responds and generates a new state.<br><strong>Current state transition doesnâ€™t depend on past actions/states</strong><br><img src="/images/nndl2/RL_0.png" alt="RL_environment"><br>four elements contained in MDP:<br>$S$: a set of finite states<br>$A$: a set of finite actions<br>$R_a$: rewards received after transitioning from $S$ to $Sâ€™$ due to action a<br>$P_a$: probability of taking action a<br><strong>In RL, we only consider finite MDP.</strong><br>State $S$ and transition function $P$ can define the dynamics of the system.</p>
<h1 id="The-RL-Algorithms"><a href="#The-RL-Algorithms" class="headerlink" title="The RL Algorithms"></a>The RL Algorithms</h1><p>On-policy vs Off-policy<br>On-policy: learn policy $\pi$ from experience sampled from $\pi$, i.e, evaluate the policy that is used to generate data.<br>Off-policy: learn policy $\pi$ from experience sampled from $\mu$, i.e, improve a policy different from that used to generate data.</p>
<p><strong>Temporal Difference Learning</strong><br>learn how to predict a quantity that depends on future values of a given signal, comparing temporally successive predictions.</p>
<h2 id="Q-Learning-off-policy"><a href="#Q-Learning-off-policy" class="headerlink" title="Q-Learning (off-policy)"></a>Q-Learning (off-policy)</h2><p>It learns the value function $Q(S,a)$ which maps the state and action to rewards.<br><img src="/images/nndl2/RL_1.png" alt="RL_Q_Learning"><br>A model-free RL based on Bellman equation:</p>
<script type="math/tex; mode=display">V(s)=max_a[R(s,a)+\gamma \Sigma_{s'}P(s,a,s')V(s')]</script><p>$P$ is the probability of turning to state $sâ€™$ when taking action $a$ on state $s$.<br>Value of a state $s$ depends on the action that has the max Q-value on this state:</p>
<script type="math/tex; mode=display">V(s) = max_a[Q(s, a)],</script><p>So we have:</p>
<script type="math/tex; mode=display">Q(s,a)=R(s,a)+\gamma \Sigma_{s'}P(s,a,s')max_{a'}Q(s',a')]</script><p>After each action, the table is updated, and the Q-values are stored within the table.</p>
<h2 id="State-Action-Reward-State-Action-SARSA-on-policy"><a href="#State-Action-Reward-State-Action-SARSA-on-policy" class="headerlink" title="State Action Reward State Action (SARSA, on-policy)"></a>State Action Reward State Action (SARSA, on-policy)</h2><p>SARSA is an on-policy temporal difference learning method, selects the action for each state while learning using a specific policy.<br>The goal of SARSA is to calculate the $Q_{\pi}(s, a)$ for the selected current policy $\pi$ and all pairs of $(s, a)$. SARSA uses the quintuple $Q(s, a, r,sâ€™,aâ€™)$:<br>$s$ and $a$: original state and action,<br>$r$: reward observed while following the states,<br>$sâ€™$ and $aâ€™$: new state, action pair.</p>
<h2 id="Deep-Q-Neural-Network-off-policy"><a href="#Deep-Q-Neural-Network-off-policy" class="headerlink" title="Deep Q Neural Network (off-policy)"></a>Deep Q Neural Network (off-policy)</h2><p>In a complex environment where exploring all possible states and actions costs too much, we can use neural network to replace the Q table and make approximation of sequential actions.<br><img src="/images/nndl2/RL_2.png" alt="Deep_Q_NN"></p>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning 2</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>Generative Adversarial Networks</title>
    <url>/2021/01/26/DL_GAN/</url>
    <content><![CDATA[<h1 id="Introduction-to-GANs"><a href="#Introduction-to-GANs" class="headerlink" title="Introduction to GANs"></a>Introduction to GANs</h1><p>Discriminator learns from real dataset and make judgement of input data.<br>Generator uses noise vestor to generate fake data and feed into discriminator, based on the feedback it can generate better samples.<br><a id="more"></a></p>
<ul>
<li>Deep Convolutional GAN can train stable GANs at scale.</li>
<li>BigGan can generate synthetic photos that are practically indistinguishable.</li>
<li>Generate faces of anime characters.</li>
<li>Image-to-Image Translation: transfer from daytime to nighttime; sketcher to color.</li>
<li>Text-to-Image: generate plausible photos from textual descriptions of simple objects.</li>
<li>Semantic-Image-to-Photo: given a semantic image or sketch as input.</li>
<li>Face Frontal View Generation: given photos taken at an angle.</li>
<li>Photos to Emojis: translate images from one domain to another.</li>
<li>Photograph Editing: reconstruct photos of faces with specific specified features.</li>
<li>Face Aging: generate photos of faces with different apparent ages.</li>
<li>Photo Blending: blend elements from different photos.</li>
<li>Super Resolution: generate pictures with higher pixel resolution.</li>
<li>Photo Inpainting: filling in an area of a photo that was removed.</li>
<li>Clothing Translation: input someone with a cloth on and output the cloth in catalog</li>
<li>Video Preodiction: predict videos given a single static image (ambiguous task)</li>
</ul>
<h1 id="Training-of-GANs"><a href="#Training-of-GANs" class="headerlink" title="Training of GANs"></a>Training of GANs</h1><p>Two neural networks contest with each other in a zero-sum game.<br>The goal of generator is to <strong>fool the discriminator</strong> but not to imitate a specific image.<br>This enables the model to learn in an unsupervised manner(no specific target).<br>Unsupervised: learn the <strong>distribution function</strong> $p(x,y)$ to generate synthetic $xâ€™$ and $yâ€™$.<br>Supervised: model the <strong>conditional probability distriburion function(p.d.f)</strong> $p(y|x)$.</p>
<p>Other generative models:</p>
<ul>
<li>Variational Autoencoders(VAEs)</li>
<li>pixelCNN / pixelRNN</li>
<li>real NVP</li>
</ul>
<p>GANs are popular because it can <strong>generate high dimensional data</strong>.<br>Generative models can be viewed as <strong>containing more information</strong> than discriminative models and they are also used for discriminative tasks like classification.</p>
<p>Generative Adversarial Networks are composed of two models:</p>
<ul>
<li><strong>Generator</strong> $G(z,\theta_1)$: aims to generate new data similar to the expected one, maps input noise variables $z$ to the desired data space $x$.<br>Goal: <strong>Maximize $D(G(z))$</strong></li>
<li><strong>Discriminator</strong> $D(x,\theta_2)$: recognizes if an input data is <em>real</em> by outputing the probability that the data comes from the real dataset.<br>Goal: <strong>Maximize $D(x)$ and minimize $D(G(z))$</strong></li>
</ul>
<p>The competition between these two models is what improves their knowledge until Generator succeeds in creating realistic data.<br>In practice we use a log loss instead of the raw probability.</p>
<p>Discriminator and Generator are trying to optimize the opposite loss function: two agents playing a <em>minimax game</em> with value function $V(G,D)$:</p>
<script type="math/tex; mode=display">\min_G \max_D V(D,G) = \mathbb{E}_{x\sim p_{data} (x)}[logD(x)]+\mathbb{E}_{z\sim p_z(z)}[log(1-D(G(z)))]</script><p><img src="/images/nndl2/GAN_0.png" alt="GAN"><br><img src="/images/nndl2/GAN_1.png" alt="GAN"><br>The fundamental steps to train a GAN:</p>
<ol>
<li>Sample a noise set and a real-data set, each with size m</li>
<li>Train the Discriminator on this data batch <em>for several steps</em></li>
<li>Sample a different noise subset with size m</li>
<li>Train the Generator on this data batch</li>
<li>Repeat from Step 1</li>
</ol>
<h1 id="DC-GAN-Conditional-GAN-and-W-GAN"><a href="#DC-GAN-Conditional-GAN-and-W-GAN" class="headerlink" title="DC-GAN, Conditional GAN, and W-GAN"></a>DC-GAN, Conditional GAN, and W-GAN</h1><h2 id="Deep-Convolutional-Generative-Adversarial-Networks"><a href="#Deep-Convolutional-Generative-Adversarial-Networks" class="headerlink" title="Deep Convolutional Generative Adversarial Networks"></a>Deep Convolutional Generative Adversarial Networks</h2><ol>
<li>Use <strong>strided convolutions</strong> instead of deterministic spatial pooling functions(eg. max pooling), so the Discriminator can learn its own spatial downsampling and Generator can learn its own spatial upsampling.</li>
<li><strong>Eliminate fully connected layers</strong> on top of convolutional features.</li>
<li><strong>Batch Normalization</strong> helps gradients flow in deeper models, not applied to Generatorâ€™s output layer and Discriminatorâ€™s input layer to avoid sample oscillation and model instability.</li>
<li>Generator uses <strong>ReLU</strong> for all layers except for output which uses <strong>Tanh</strong>,<br>Discriminator uses <strong>LeakyReLU</strong> for all layers.</li>
</ol>
<p>Generator: <strong>No fully connected or pooling layers are used.</strong><br><img src="/images/nndl2/GAN_2.png" alt="DC-GAN"></p>
<p>Discriminator is like an inverse of Generator.<br><img src="/images/nndl2/GAN_3.png" alt="DC-GAN"></p>
<h2 id="Conditional-GANs"><a href="#Conditional-GANs" class="headerlink" title="Conditional GANs"></a>Conditional GANs</h2><p>Generators is trained to generate examples <strong>from the input domain(conditions)</strong>, so its input is combined with some additional input(eg. a class value).<br>Discriminator is also conditioned and its input image is combined with an additional input.<br><img src="/images/nndl2/GAN_4.png" alt="Conditional GANs"><br>The conditional domain allows for applications such as text-to-image or image-to-image.<br>We can perform conditioning by feeding the extra information $y$ into both the discriminator and generator as additional input layer:</p>
<script type="math/tex; mode=display">\min_G \max_D V(D,G) = \mathbb{E}_{x\sim p_{data} (x)}[logD(x|y)]+\mathbb{E}_{z\sim p_z(z)}[log(1-D(G(z|y)))]</script><p>If the generator ignores the input conditions, the discriminator will give them a low score even though the input image is realistic.<br><img src="/images/nndl2/GAN_5.png" alt="Conditional GANs"></p>
<h2 id="Wasserstein-GAN-WGAN"><a href="#Wasserstein-GAN-WGAN" class="headerlink" title="Wasserstein GAN (WGAN)"></a>Wasserstein GAN (WGAN)</h2><p>WGAN uses a critic that <strong>scores the realness or fakeness</strong> of a given image to replace the discriminator who predicts the probability as being real or fake.</p>
<p>The benefit is that the training process is more stable and less sensitive to model architecture and choice of hyperparameter and the loss of the discriminator appears to relate to the quality of images created by the generator.</p>
<p><strong>The Wasserstein Distance</strong> is the minimum cost of transporting mass in converting the real data distribution $r$ to generated data distribution $g$ , which is defined as the <strong>greatest lower bound(infimum) for any transport plan</strong>(i.e. the cost of the cheapest plan):</p>
<script type="math/tex; mode=display">W(\mathbb{P}_r,\mathbb{P}_g)=\inf_{\gamma\in\prod(\mathbb{P}_r,\mathbb{P}_g)}\mathbb{E}_{(x,y)}[||x-y||]</script><p>Using Kantorovich-Rubinstein duality, we can simplify it to:</p>
<script type="math/tex; mode=display">W(\mathbb{P}_r,\mathbb{P}_\theta)=\sup_{||f||_L\leq 1} \mathbb{E}_{x\sim \mathbb{P}_r}[f(x)] - \mathbb{E}_{x\sim \mathbb{P}_\theta}[f(x)]</script><p>$sup$ is the least upper bound and $f$ is a 1-Lipschitz function which means:</p>
<script type="math/tex; mode=display">|f(x_1)-f(x_2)|\leq |x_1-x_2|</script><p>so that the minimum $|f(x_1)-f(x_2)|$ correspond to the minimum $|x_1-x_2|$ .<br>We can build a deep network to learn the 1-Lipschitz function. The network is similar to discriminator, just without the sigmoid function and output a score to show how real the input images are rather than a probability.<br><img src="/images/nndl2/GAN_6.png" alt="WGANs"><br>$f$ has to be a 1-Lipschitz function. To enforce the constraint, WGAN applies a very simple clipping to restrict the maximum weight value in $f$ , i.e. the weights of the discriminator must be within a certain range controlled by the hyperparameters $c$.<br><img src="/images/nndl2/GAN_7.png" alt="WGANs"><br>GANâ€™s loss measures how well it fools the discriminator, while WGANâ€™s loss function reflects the <strong>image quality</strong> which is more desirable.<br><img src="/images/nndl2/GAN_8.png" alt="WGANs"><br><strong>WGAN is more stable as it can perform without batch normalization but GANs without BN collapse.</strong></p>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning 2</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>Classical Planning 1 -- Agents, Environment &amp; Domain</title>
    <url>/2021/01/14/AI_Classical_Planning_1/</url>
    <content><![CDATA[<h1 id="Agents"><a href="#Agents" class="headerlink" title="Agents"></a>Agents</h1><p>Perceives its environment through sensors and acts upon the environment through actuators<br><strong>Rational agent</strong>: Acts to achieve the best (expected) outcome<br>For each possible percept sequence, a rational agent should <strong>select an action</strong> that is expected to <strong>maximize its performance measure</strong>, given the evidence provided by the <strong>percept sequence</strong> and whatever <strong>built-in knowledge</strong> the agent has.<br><a id="more"></a></p>
<h1 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h1><p><img src="/images/CS5446/Environment.png" alt="Environment"></p>
<h1 id="Classical-Planning"><a href="#Classical-Planning" class="headerlink" title="Classical Planning"></a>Classical Planning</h1><p>Planning: make a sequence of decisions. (choose actions and organize them)<br>Classical planning deals with <em>Fully observable, Deterministic, Finite, Discrete</em> environments.</p>
<h1 id="Domain-independent-heuristics"><a href="#Domain-independent-heuristics" class="headerlink" title="Domain independent heuristics"></a>Domain independent heuristics</h1><p>Without good heuristics, planning can become difficult very quickly as the problem size grows.<br>Problem solving with search takes a lot of time and memory.<br>Deriving heuristics for individual problems is time consuming.<br><strong>Domain independent heuristics tend to work well in planning.</strong><br>Need specific representations:</p>
<ul>
<li>Strips</li>
<li>Satisfiability</li>
<li>Planning graph </li>
</ul>
]]></content>
      <categories>
        <category>AI Planning and Decision Making</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI Planning</tag>
        <tag>RL</tag>
      </tags>
  </entry>
  <entry>
    <title>Classical Planning 2 -- STRIPS VS PDDL</title>
    <url>/2021/01/21/AI_Classical_Planning_2/</url>
    <content><![CDATA[<h1 id="Planning"><a href="#Planning" class="headerlink" title="Planning"></a>Planning</h1><p>Planning means identifying appropriate actions and their sequence, itâ€™s the basis of rational behavior.<br>We need to design intelligent machines because:</p>
<ol>
<li>the machine may be out of reach, eg. satellites</li>
<li>experts are not always available.</li>
</ol>
<p>So the machine should learn how to work rationally by itself.<br><a id="more"></a></p>
<h2 id="Types-of-planning"><a href="#Types-of-planning" class="headerlink" title="Types of planning"></a>Types of planning</h2><ul>
<li>Path and motion planning<br>Generate a path from start to end and a control trajectory along the path.</li>
<li>Perception planning<br>Sensing actions to gather information and model the environment.</li>
<li>Navigation planning<br>Motion + perception planning to generate a policy based on localization/sensor-based primitives to explore an area.</li>
<li>Manipulation planning<br>Concerned with handling objects (think automobile assembly line).</li>
</ul>
<h2 id="Solving-planning-problems"><a href="#Solving-planning-problems" class="headerlink" title="Solving planning problems"></a>Solving planning problems</h2><p><strong>Need domain independent representation and efficient solution mechanism.</strong></p>
<h1 id="STRIPS"><a href="#STRIPS" class="headerlink" title="STRIPS"></a>STRIPS</h1><p>STRIPS and PDDL both are languages to specify the problem.<br>STRIPS is one of the first representation languages for planning by Stanford.</p>
<h2 id="Factored-representation"><a href="#Factored-representation" class="headerlink" title="Factored representation"></a>Factored representation</h2><p><strong>A atomic representation</strong> is one in which each state is treated as a black box, having no internal structure: the state either does or does not match the goal.</p>
<p><strong>A factored representation</strong> is one in which the states are defined by set of features, having more internal structure. State is represented as <strong>a set of attribute/value pairs</strong>, e.g. in Strips and Pddl, we use <strong>binary variables</strong> which menas the state is either true or false.</p>
<p>In planning problems, <strong>state variables are often referred to as fluents</strong>.</p>
<h2 id="Logic-notation"><a href="#Logic-notation" class="headerlink" title="Logic notation"></a>Logic notation</h2><p><strong>Term</strong>: an object in the world. Can be a variable, constant or function<br><strong>Atomic sentence or Atom</strong>: a predicate(<em>relations</em>) symbol, optionally followed by a parenthesized list of terms, it can be true or false<br><strong>Literal</strong>: atom or its negation<br><strong>Ground literal</strong>: A literal with no variable<br><strong>Sentence or Formula</strong>: Formed from atoms together with quantifiers ($\forall$, $\exists$), logical connectives ($\wedge$, $\vee$, $\neg$), equality symbol ($=$), Sentence can take values ğ‘‡ğ‘Ÿğ‘¢ğ‘’ or ğ¹ğ‘ğ‘™ğ‘ ğ‘’<br><strong>Substitution</strong>: replaces variables by terms<br><strong>Unifier</strong>: takes 2 sentences and returns a substitution that makes the sentence look identical, if such a substitution exists</p>
<p>For every pair of unifiable sentences, there is a <strong>most general unifier (MGU)</strong>, which is unique up to renaming and substitution of variables<br>Let $\sigma$ be a most general unifier and $\theta$ be a unifier. After applying $\sigma$, we can find another unifier $w$ such that applying $w$ to the output of $\sigma$ gives the same effect as applying $\theta$.</p>
<h2 id="STRIPS-1"><a href="#STRIPS-1" class="headerlink" title="STRIPS"></a>STRIPS</h2><p>To specify a problem, we need 5 components:</p>
<ul>
<li>Initial state</li>
<li>Goal test</li>
<li>Set of actions</li>
<li>Transition model</li>
<li>Path cost</li>
</ul>
<p>With STRIPS, we can specify 4 of them:</p>
<ul>
<li>Initial state</li>
<li>Actions available</li>
<li>Result of applying an action in a  (Effect)</li>
<li>Goal state<br><strong>Thereâ€™s no cost function in STRIPS</strong></li>
</ul>
<p><strong>State</strong> is represented by a <strong>conjunction of positive</strong> literals that are <strong>grounded and function-free</strong>. Literals not mentioned are false due to <strong>closed-world assumption</strong>. (unique name assumption)<br>Eg. ğ´ğ‘¡(ğ¹ğ‘ğ‘¡â„ğ‘’ğ‘Ÿ(ğ¹ğ‘Ÿğ‘’ğ‘‘), ğ‘†ğ‘¦ğ‘‘ğ‘›ğ‘’ğ‘¦) is not allowed because STRIPS doesnâ€™t allow functions.</p>
<p><strong>Goal</strong> is a partially specified state, represented as a conjunction of <strong>positive ground literals</strong>.<br>A state ğ‘  satisfies a goal ğ‘” if ğ‘  contains all the literals in ğ‘”.</p>
<p><strong>Action Schema</strong> consists ofï¼š</p>
<ul>
<li>the action name, </li>
<li>list of variables used, </li>
<li><strong>precondition</strong>(conjunction of <strong>function-free positive literals</strong>),</li>
<li><strong>effect</strong>(conjunction of <strong>function-free (positive/negative) literals</strong>).</li>
</ul>
<p>Action ğ‘ is <strong>applicable</strong> in state ğ‘  if all precondition of ğ‘ is satisfied in ğ‘ .</p>
<p>Ground actions: obtained by instantiating the variables in the schema.</p>
<p>For an action ğ‘ with ğ‘£ variables in a domain with ğ‘˜ objects, there are $O(k^v)$ distinct ground actions in the worst case. So thereâ€™s a blow up in the number of ground actions which are difficult to evaluate.</p>
<p>Result of executing ğ‘ in state ğ‘  is a state ğ‘ â€² which is a set of fluents formed as follows:</p>
<ul>
<li>Start from ğ‘ </li>
<li>Remove fluents that appear as negative literals in the effect (delete list: ğ·ğ¸ğ¿(ğ‘))</li>
<li>Add fluents that appear as positive literals in the effect (add list: ğ´ğ·ğ·(ğ‘))</li>
</ul>
<script type="math/tex; mode=display">ğ‘…ğ¸ğ‘†ğ‘ˆğ¿ğ‘‡(ğ‘ , ğ‘)=(ğ‘  âˆ’ğ·ğ¸ğ¿(ğ‘))\cup ğ´ğ·ğ·(ğ‘)</script><h2 id="STRIPS-summary"><a href="#STRIPS-summary" class="headerlink" title="STRIPS summary"></a>STRIPS summary</h2><p><strong>State</strong>: conjunction of ground positive function-free literals (Closed world assumption)<br><strong>Goal</strong>: conjunction of ground positive function-free literals (Satisfied by states that contain all literals)<br><strong>Action precondition</strong>: conjunction of positive function-free literals<br><strong>Action effects</strong>: conjunction of function-free literals<br>Positive literals for add list<br>Negative literals for delete list</p>
<h1 id="Planning-domain"><a href="#Planning-domain" class="headerlink" title="Planning domain"></a>Planning domain</h1><p><strong>A set of action schemas define planning domain</strong><br>Planning problem: <strong>action schema + initial state + goal</strong></p>
<h1 id="PDDL"><a href="#PDDL" class="headerlink" title="PDDL"></a>PDDL</h1><p>Strips â€“ restrictive<br>$\surd$ Efficient to solve (âˆµ of restrictions)<br>$\Large\times$ Hard to describe the problem</p>
<p>So we need more expressive power.</p>
<p><strong>Action Description Language (ADL)</strong></p>
<ul>
<li>positive and negative literals in states, <em>open world assumption</em></li>
<li>quantified variables at goal, conjunctions and disjunctions at goal</li>
<li>conditional effects</li>
<li>equality predicate, typed variables</li>
</ul>
<p><strong>PDDL : ADL + extensions</strong><br><strong>Inequality predicate â€“ not in STRIPS but available in PDDL</strong>   eg. $a\neq b$</p>
<h1 id="Solving-the-planning-problem"><a href="#Solving-the-planning-problem" class="headerlink" title="Solving the planning problem"></a>Solving the planning problem</h1><ul>
<li>Forward Search (heuristics)<br><strong>Very large state space</strong> â€“ exponential with the number of state variables<br><strong>Action space can be very large</strong><br>Forward search is hopeless without <strong>good heuristics</strong></li>
<li>Backward Search (Research / relevant-state search)</li>
<li>or combined</li>
</ul>
]]></content>
      <categories>
        <category>AI Planning and Decision Making</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI Planning</tag>
        <tag>RL</tag>
      </tags>
  </entry>
  <entry>
    <title>Classical Planning 3 -- Solving the planning problem</title>
    <url>/2021/01/28/AI_Classical_Planning_3/</url>
    <content><![CDATA[<h1 id="Forward-search-Progression-search"><a href="#Forward-search-Progression-search" class="headerlink" title="Forward search (Progression search)"></a>Forward search (Progression search)</h1><p>Forward search is not useful without heuristic.<br>From the current state, we try to apply actions and see what states we can get in this domain until we reach the goal.<br><a id="more"></a></p>
<h1 id="Backward-search-Regression-Relevant-state-search"><a href="#Backward-search-Regression-Relevant-state-search" class="headerlink" title="Backward search (Regression / Relevant-state search)"></a>Backward search (Regression / Relevant-state search)</h1><p><strong>state</strong>: conjunction of ground literals<br><strong>description</strong>: conjunction of relevant ground literals + any other fluent</p>
<ul>
<li>Subset of first-order logic</li>
<li>Easy for us to understand and specify</li>
<li>Hard to deal with</li>
<li>Hard to develop good heuristics</li>
<li>Allows formula to represent a set of propositional variables</li>
</ul>
<p><em>Description represents a set of states.</em><br>For $n$ ground fluents, there is $2^n$ ground states(true or false) and $3^n$ descriptions(true, false and NA).</p>
<p>Backward search starts from the goal states and go back.<br>It needs inverse transitions and relevant actions.</p>
<p>Forward:</p>
<script type="math/tex; mode=display">ğ‘”=(ğ‘  âˆ’ğ·ğ¸ğ¿(ğ‘))\cup ğ´ğ·ğ·(ğ‘)</script><p>Backward:</p>
<script type="math/tex; mode=display">ğ‘”â€²=(ğ‘” âˆ’ğ´ğ·ğ·(ğ‘))\cup ğ‘ƒğ‘Ÿğ‘’ğ‘ğ‘œğ‘›ğ‘‘(ğ‘)</script><p>Preconditions must have been true â‡’ add $ğ‘ƒğ‘Ÿğ‘’ğ‘ğ‘œğ‘›ğ‘‘(ğ‘)$ to $ğ‘”â€²$<br>Add-list (or effects) need not be true before the action â‡’ remove $ğ´ğ·ğ·(ğ‘)$<br>$ğ·ğ¸ğ¿(ğ‘)$ disappears: it doesnâ€™t matter if they were true or not before the action.</p>
<p><strong>Relevant actions</strong>:<br>At least one of the actionâ€™s effect must unify with an element of the current goal;<br>Must not contain effects that negate an element of the current goal.</p>
<p>Backward search can improve efficiency, has lower branching factor as compared to forward search (mostly) and does not rule out any solution.</p>
<h1 id="Heuristics-for-Planning-Relax-the-problem"><a href="#Heuristics-for-Planning-Relax-the-problem" class="headerlink" title="Heuristics for Planning (Relax the problem)"></a>Heuristics for Planning (Relax the problem)</h1><h2 id="Ignore-preconditions-heuristics"><a href="#Ignore-preconditions-heuristics" class="headerlink" title="Ignore preconditions heuristics"></a>Ignore preconditions heuristics</h2><p>Drop all the preconditions<br>Relaxation: actions applicable everywhere<br>Number of steps to solve the problem â‰ˆ number of unsatisfied goals</p>
<ul>
<li>Further relax: remove all remove effects except goal literals<br>Need minimum number of actions such that their union satisfies the goal<br>Becomes a set-cover problem (NP-Hard)<br>Greedy algorithm â€“ within a factor of logâ¡(ğ‘›) factor of the optimal</li>
</ul>
<h2 id="Ignore-delete-list-heuristic"><a href="#Ignore-delete-list-heuristic" class="headerlink" title="Ignore delete list heuristic"></a>Ignore delete list heuristic</h2><p>Monotonically move towards the goal<br>Relaxation : no action will undo progress made by another action<br>Optimal length of the solution can be used as heuristic<br>Still NP-hard (searching is still exponential)<br>Hill-climbing gives approximate solution in polynomial time(not exact solution)</p>
<h2 id="Problem-decomposition"><a href="#Problem-decomposition" class="headerlink" title="Problem decomposition"></a>Problem decomposition</h2><p>If each subplan uses an admissible heuristic, take maximum of them for the plan<br>Assume subgoal independence: decompose to disjoint subsets<br>Sum of cost of each plan, if admissible, is better than max of the heuristics</p>
<p>These are heuristics because:</p>
<ol>
<li>There are factor representation</li>
<li>Use STRIPS to represent the problem</li>
</ol>
<h1 id="SATPLAN"><a href="#SATPLAN" class="headerlink" title="SATPLAN"></a>SATPLAN</h1><p>Transfer planning(search) problem to boolean satisfiability problem.<br>SAT is NP-hard, but is still effective in practice with millions of variables and constraints so it can be solved in a good(polynominal) time.</p>
<p>SAT: Finding an assignment to variables such that: boolean formula becomes TRUE<br>Input to SAT solvers: Conjunctive Normal Form (CNF) formulas</p>
<ul>
<li>CNF â€“ conjunction of clauses</li>
<li>Clause â€“ disjunction of literals</li>
<li>Literal â€“ variable or its negation</li>
<li>$\neg$ should appear only on literals</li>
</ul>
<h2 id="Any-Boolean-formula-can-be-converted-to-CNF"><a href="#Any-Boolean-formula-can-be-converted-to-CNF" class="headerlink" title="Any Boolean formula can be converted to CNF"></a>Any Boolean formula can be converted to CNF</h2><p>Step1: Eliminate $\Leftrightarrow$; replace $\alpha\Leftrightarrow\beta$ with $\alpha\Rightarrow\beta\wedge\beta\Rightarrow\alpha$<br>Step2: Eliminate $\Rightarrow$; replace $\alpha\Rightarrow\beta$ with $\neg\alpha\vee\beta$<br>Step3: Move $\neg$ inwards by repeatedly applying:<br>$\qquad\neg(\neg\alpha)\equiv\alpha\quad$    Double negation elimination<br>$\qquad\neg(\alpha\wedge\beta)\equiv\neg\alpha\vee\neg\beta\quad$DeMorgan<br>$\qquad\neg(\alpha\vee\beta)\equiv\neg\alpha\wedge\neg\beta\quad$DeMorgan<br>Step4: Apply distributive law<br>Distribute $\vee$ over $\wedge$ when possible.</p>
<h2 id="Transfrom-STRIPS-to-SAT"><a href="#Transfrom-STRIPS-to-SAT" class="headerlink" title="Transfrom STRIPS to SAT"></a>Transfrom STRIPS to SAT</h2><ol>
<li>Propositionize actions<br>replace each action scheme with all ground actions.</li>
<li>Define initial state<br>Assert $F^0$ for every fluent $F$ in initial state and $\neg F^0$ for every fluent not in the initial state.</li>
<li>Propositionalize the goal<br>Construct a disjunction over <em>all possible ground conjunctions</em> obtained by replacing the variables with constants.</li>
<li>Add <strong>successor-state axiom</strong> (defining the transition)<br>Stating what is and what is not affected by the action<br>For each fluent $F$ add axiom of the form:<script type="math/tex; mode=display">F^{t+1}\Leftrightarrow ActionCausesF^t\vee(F^t\wedge \neg ActionCausesNotF^t)</script>which means F is true i.i.f. some action caused it or it was already true and no action changed it.<br>$ActionCausesF^t$ is a disjunction of all ground actions that have $F$ in their add list.<br>$ActionCausesNotF^t$ is a disjunction of all ground actions that have $F$ in their delete list.<br><strong>Frame problem</strong><br>Most actions leave most fluents unchanged.<br>Solution: write frame axioms to show nothing else changed on taking an action.<br>For $m$ actions and $n$ fluents, need $O(mn)$ axioms<br>Improvement: successor-state axiom only need $O(n)$<br>Each axiom is longer, but only involves actions that has an affect on the fluent.</li>
<li>Add <strong>precondition axioms</strong><br>If an action is taken at time $t$, its preconditions must have been true.<br>For each ground action $A$, add axiom $A^t\Rightarrow PRE(A)^t$</li>
<li>Add <strong>action exclusion axiom</strong><br>Every action is distinct from every other action (only one action is allowed at each time step, two actions cannot happen at the same time)<br>Specify mutual exclusion $\neg (A_i^t\wedge A_j^t)\Leftrightarrow\neg A_i^t\vee\neg A_j^t$</li>
<li>Create a conjunction of all the axioms (This is the problem definition)</li>
<li>Convert this conjunction to CNF</li>
</ol>
<h2 id="SATPLAN-1"><a href="#SATPLAN-1" class="headerlink" title="SATPLAN"></a>SATPLAN</h2><p>Problem: do not know how many steps<br>Solution: try values $T$ up to $T_{max}$<br>If you get a solution within $T_{max}$ then stop and output it, otherwise we do not know if there exists valid solutions.<br>After finding a solution, we extract the actions and trace back what actions have been done.<br><img src="/images/CS5446/satplan.png" alt="satplan"></p>
<h2 id="Complexity-of-planning"><a href="#Complexity-of-planning" class="headerlink" title="Complexity of planning"></a>Complexity of planning</h2><p>Worst case: intractable<br>PlanSat: answers the question is there any plan that solves a planning problem.<br>Bounded PlanSat: answers the question if there is a solution of length $k$ or less.<br><strong>Decidable for classical planning as the number of states is finite.</strong><br>PlanSat and BoundedPlanSat are <strong>PSPACE</strong> (solvable with polynomial space)</p>
]]></content>
      <categories>
        <category>AI Planning and Decision Making</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI Planning</tag>
        <tag>RL</tag>
      </tags>
  </entry>
  <entry>
    <title>Planning Graph</title>
    <url>/2021/02/03/AI_Planning_Graph/</url>
    <content><![CDATA[<h1 id="Planning-Graphs"><a href="#Planning-Graphs" class="headerlink" title="Planning Graphs"></a>Planning Graphs</h1><p>Search trees grow <strong>exponentially</strong> large very fast. Depth at which the goal first appears means <strong>the minimum number of steps</strong> required to achieve the goal.<br><a id="more"></a></p>
<p>Planning graph is a <strong>polynomial</strong> sized approximation to the search tree.<br><img src="/images/CS5446/plan_graph.png" alt="Planning_graph"><br>$S_i$ contains all literals that could hold at time $i$ and $A_i$ contains all actions that could have their preconditions satisfied at time $i$.<br>The level at which a literal first appears is <strong>a good estimate of how difficult</strong> it is to achieve the literal. The graph can also estimates which set of propositions are <strong>reachable</strong> from $S_0$ with which actions.</p>
<p>Planning graphs work only on <strong>propositional planning problems</strong> â€“ need to propositionalize PDDL action schemas.<br><strong>Propositionalize the actions</strong>: replace each action schema with a set of <strong>ground actions</strong> formed by substituting constants for each of the variables. These ground actions are not part of the translation, but will be used in subsequent steps.</p>
<h2 id="Construct-a-planning-graph"><a href="#Construct-a-planning-graph" class="headerlink" title="Construct a planning graph"></a>Construct a planning graph</h2><p><strong>Level off</strong> â€“ the graph is constructed until two consecutive levels are identical - <strong>constructed level by level</strong></p>
<p>Search tree:</p>
<ul>
<li>one action at each level; branch on each action</li>
<li>gives true depth when goal is achieved</li>
</ul>
<p>Planning graph:</p>
<ul>
<li>all actions that have preconditions satisfied appear in parallel and produce all possible effects<br>No need to choose among actions<br>Records if some choices are impossible</li>
<li>optimistic estimate of goal depth</li>
</ul>
<p>Goal: Construct a plan where at each time step, have such a set of actions<br>Planning graph â€“ search for plan with parallel actions OR usual plan search</p>
<p><img src="/images/CS5446/mutex_link.png" alt="mutex_link"></p>
<h2 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h2><p>For a planning graph with $l$ literals and $a$ actions,<br>Each $S_i$ has at most $l$ nodes and $O(l^2)$ mutex links</p>
<p>Each $A_i$ has at most $a+l$ nodes (including no-op), $(a+l)^2$ mutex links, and $2(al+l)$ precondition and effect links</p>
<p>Entire graph with $n$ levels has size $ğ‘‚(n(a+l)^2)$<br>Same complexity for time to build the graph</p>
<p><img src="/images/CS5446/Heuristic.png" alt="Heuristic"></p>
<h1 id="GraphPlan-algorithm"><a href="#GraphPlan-algorithm" class="headerlink" title="GraphPlan algorithm"></a>GraphPlan algorithm</h1><p>A planning graph is a polynominal approximation of the search tree, which means it is much smaller than a search tree for the same planning problem.<br>Constructed level by level.<br>Constrained by mutex links.</p>
<p>Two-stage: limit the search space + search for solution<br>Expand the graph, if the goal is satisfied, extract the solution(similar to backward search)<br><img src="/images/CS5446/graph_plan.png" alt="graph_plan"></p>
]]></content>
      <categories>
        <category>AI Planning and Decision Making</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI Planning</tag>
      </tags>
  </entry>
  <entry>
    <title>Neural Architecture Search (NAS)</title>
    <url>/2021/02/03/DL_NAS/</url>
    <content><![CDATA[<h1 id="Why-do-we-need-neural-architecture-search"><a href="#Why-do-we-need-neural-architecture-search" class="headerlink" title="Why do we need neural architecture search?"></a>Why do we need neural architecture search?</h1><p>To get higher accuracy, the neural nets are getting deeper and more complicated.<br>It requires a lot of expert knowledge and takes lots of time and eventually will go beyond human capacity.</p>
<p>Neural Architecture Search (NAS) is a kind of Automated Machine Learning (AutoML). Basic idea is to <strong>generate some candidate children networks</strong>, train them, optimize their accuracy until successfully select the best architecture for a given task.<br><a id="more"></a><br>Different optimization methods for NAS:</p>
<ul>
<li><strong>Reinforcement Learning</strong> (Zoph &amp; Le 2017; Pham et al. 2018)</li>
<li>Sequential model-based method (Liu et al. 2018)</li>
<li>Evolutionary method (Liu et al. 2018)</li>
<li>Bayesian optimization (Jin et al. 2018)</li>
<li>Gradient-based model (Liu et al. 2019)</li>
</ul>
<h1 id="Vanilla-NAS-â€”-using-RL-and-RNN-to-search-an-architecture"><a href="#Vanilla-NAS-â€”-using-RL-and-RNN-to-search-an-architecture" class="headerlink" title="Vanilla NAS â€” using RL and RNN to search an architecture"></a>Vanilla NAS â€” using RL and RNN to search an architecture</h1><h2 id="Generate-CNN-using-RNN"><a href="#Generate-CNN-using-RNN" class="headerlink" title="Generate CNN using RNN"></a>Generate CNN using RNN</h2><h3 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h3><p>The structure and connectivity of a neural network can be specified by a<br>variable-length string which can be generated by a RNN(the controller).<br>Training the network specified by the string â€“ the â€œchild networkâ€ â€“<br>on the real data will result in an accuracy on a validation set.<br>Using this accuracy as the reward signal, we can <strong>compute the policy gradient to update the controller</strong>.<br>In the next iteration, the controller will give higher probabilities to architectures that receive high valid accuracies.<br><img src="/images/nndl2/NAS.png" alt="NAS"></p>
<h3 id="Controller-â€”-RNN"><a href="#Controller-â€”-RNN" class="headerlink" title="Controller â€” RNN"></a>Controller â€” RNN</h3><p>Use the controller(RNN) to generate their hyper-parameters as a sequence of tokens. It predicts filter height, filter width, stride height, stride width, and number of filters for one layer and repeats. Every prediction is carried out by a softmax classifier and then fed into the next time-step as input.<br>The process of generating an architecture stops if the number of layers is larger than a certain value which is increased in the training process.<br><strong>The parameters of the controller RNN, $\theta_c$, are optimized to maximize the expected validation accuracy of the proposed architectures</strong><br><img src="/images/nndl2/NAS_RNN.png" alt="NAS_RNN"><br>This process can be viewed as reinforcement learning:<br>The list of tokens that the controller predicts can be viewed as a list of actions $a_{1âˆ¶T}$ to design an architecture for a child network and the valid accuracy of a given dataset is the feedback $R$.<br>The goal of the controller is to maximize its expected reward $J(\theta_c)$.<br><img src="/images/nndl2/NAS_reward.png" alt="NAS_reward"><br><img src="/images/nndl2/NAS_R.png" alt="NAS_R"><br>The baseline b is an exponential moving average of the previous architecture accuracies and does not depend on the current action. (Similar to Adam)</p>
<h3 id="Generate-architecture-with-Skip-Connections"><a href="#Generate-architecture-with-Skip-Connections" class="headerlink" title="Generate architecture with Skip Connections"></a>Generate architecture with Skip Connections</h3><p><strong>Set-selection type attention</strong><br>At layer N, we add an anchor point which has <strong>N âˆ’ 1 content-based sigmoids to indicate the previous layers that need to be connected</strong>.<br>Each sigmoid is a function of current hidden-state of the controller and previous hidden-states of the previous N âˆ’ 1 anchor points.<br><img src="/images/nndl2/attention.png" alt="attention"><br><img src="/images/nndl2/attention_1.png" alt="attention"></p>
<p>Failures:</p>
<ul>
<li>One layer is not compatible with another layer</li>
<li>One layer may not have any input or output</li>
</ul>
<p>Solutions:</p>
<ul>
<li>Pad the smaller layer with zeros.</li>
<li>If no input layer, take the original data as input.</li>
<li>Concat all the layers where output is not connected and send this hidden state to the classifier.</li>
</ul>
<h2 id="Generate-RNN-using-RNN"><a href="#Generate-RNN-using-RNN" class="headerlink" title="Generate RNN using RNN"></a>Generate RNN using RNN</h2><p><img src="/images/nndl2/RNN_1.png" alt="RNN_1"><br><img src="/images/nndl2/RNN_2.png" alt="RNN_2"></p>
<h2 id="Experiment"><a href="#Experiment" class="headerlink" title="Experiment"></a>Experiment</h2><p>In experiments of autoML, we still need human knowledge such as the filter height, number of filters and initialazition of parameters to design the model.<br>Reward for updating the contoller is the maximum validation accuracy of the last 5 epochs(total 50) of one generated model.</p>
<h3 id="CNN-for-Cifar10"><a href="#CNN-for-Cifar10" class="headerlink" title="CNN for Cifar10"></a>CNN for Cifar10</h3><p>Accuracy by human of denseNet is a little higher than NAS. We wish to minimize the parameters to make the model cheap enough to set into a mobile device. NAS can generate small models with reasonable accuracy.</p>
<h3 id="RNN-for-Penn-Tree-Bank-dataset"><a href="#RNN-for-Penn-Tree-Bank-dataset" class="headerlink" title="RNN for Penn Tree-Bank dataset"></a>RNN for Penn Tree-Bank dataset</h3><p>LR for controller is 0.0005.<br>The number of input pairs to the RNN cell is called the â€œ<strong>base number</strong>â€œ and set to 8 in our experiments(much more complex than 2 in the above example).<br>Every child model is constructed and trained for 35 epochs.<br>Every child model has two layers, with the number of hidden units adjusted so that total number of learnable parameters roughly match the â€œmediumâ€ baselines.<br>The reward function is $\frac{c}{(validation\quad perplexity)^2}$.<br>When the base number is 8, the search space has approximately $6Ã—10^{16}$ architectures, it is too expensive to search them all.</p>
<p>Goal: keep a medium size model<br>NAS works well in this task to have both less parameters and lower test perplexity.</p>
<h3 id="Policy-Gradient-vs-Random-Search"><a href="#Policy-Gradient-vs-Random-Search" class="headerlink" title="Policy Gradient vs Random Search"></a>Policy Gradient vs Random Search</h3><p><img src="/images/nndl2/vs_random.png" alt="vs_random"></p>
<h1 id="NASNet-searching-a-cell-rather-than-an-architecture"><a href="#NASNet-searching-a-cell-rather-than-an-architecture" class="headerlink" title="NASNet: searching a cell rather than an architecture"></a>NASNet: searching a cell rather than an architecture</h1><p>Limitations of vanilla NAS:</p>
<ul>
<li>Computationally expensive even for small datasets (e.g. Cifar-10)</li>
<li>No transferable between datasets (from small to large?)</li>
</ul>
<p>People observe that successful models are repeating special patterns. So instead of searching the whole architecture, we can search for efficient patterns.</p>
<h2 id="Concepts-and-Method"><a href="#Concepts-and-Method" class="headerlink" title="Concepts and Method"></a>Concepts and Method</h2><p>It may be possible for the controller to predict a general convolutional cell expressed in terms of motifs. The cell can then be stacked in series to handle inputs of arbitrary spatial dimensions and filter depth.<br>The overall architectures of the convolutional nets are manually predetermined.</p>
<ul>
<li>They are composed of convolutional cells repeated many times</li>
<li>Each cell has the same architecture, but different weights</li>
</ul>
<p>Two type of cells to easily build scalable architectures for images of any size:<br><strong>Normal Cell</strong>: returning a feature map of the same dimension.<br><strong>Reduction Cell</strong>: returning a feature map where the feature mapâ€™s<br>height and width is reduced by a factor of two.<br>Researchers empirically found it beneficial to learn two separate architectures for normal cell and reduction cell.<br><img src="/images/nndl2/NASNet.png" alt="NASNet"><br>We use a common heuristic to <strong>double the number of filters in the output</strong> whenever the spatial activation size is reduced in order to maintain roughly constant hidden state dimension.<br>We consider the number of motif repeating times N and the number of initial convolutional filters as free parameters.</p>
<p>Now the question is: how to use a controller to generate a block of a cell.<br>So we first build a block, and combine several blocks as a cell, then use the cell to build the architecture.<br><img src="/images/nndl2/NASNet_block.png" alt="NASNet_block"><br>To allow the controller to predict both Normal Cell and Reduction Cell, we simply make the controller have 2 Ã— 5B predictions in total.<br>The first 5B predictions are for the Normal Cell and the second 5B predictions are for the Reduction Cell.<br><img src="/images/nndl2/NAS34.png" alt="NAS34"><br><img src="/images/nndl2/NAS5.png" alt="NAS5"><br><img src="/images/nndl2/NASNetA.png" alt="NASNetA"></p>
<h2 id="Experimental-Results"><a href="#Experimental-Results" class="headerlink" title="Experimental Results"></a>Experimental Results</h2><p><img src="/images/nndl2/NASNet_random.png" alt="NASNet_random"></p>
]]></content>
      <categories>
        <category>Neural Network and Deep Learning 2</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
        <tag>RL</tag>
      </tags>
  </entry>
  <entry>
    <title>Decision Theory 1</title>
    <url>/2021/02/03/AI_Decision_Theory_1/</url>
    <content><![CDATA[<h1 id="Uncertainty"><a href="#Uncertainty" class="headerlink" title="Uncertainty"></a>Uncertainty</h1><p>The real environment is full of uncertainty.<br>Partial observability(traffic) + non-determinism(car break down)</p>
<h1 id="Utility-theory"><a href="#Utility-theory" class="headerlink" title="Utility theory"></a>Utility theory</h1><p>â€œHow agent can make a rational decision in a random environment?â€<br>Question for machine is what a rational decision is and how to make rational decisions.<br><a id="more"></a></p>
<p><strong>Axiomatic approach</strong><br>We say something about the environment and assert they are always true.<br>To define the axioms: start with <strong>preferences</strong> between outcomes $A$ and $B$. Based on the preferences, agents can make a choice.<br>$A&gt;B$: agent prefers $A$ over $B$ (Partial order)<br>$A\sim B$: agent is indifferent between $A$ and $B$<br>$A\ge B$: agent prefers $A$ over $B$ or is indifferent</p>
<p><strong>Utility â€“ consequence of the preference</strong><br>A function $U$, for any $A,B\in S$ (outcomes in one domain):</p>
<script type="math/tex; mode=display">U(A)>U(B)\Leftrightarrow A>B</script><script type="math/tex; mode=display">U(A)=U(B)\Leftrightarrow A\sim B</script><p>Function $U$ is not unique, any monotonically increasing transformation will <strong>preserve the preference relation</strong>. </p>
<p><strong>Lottery</strong> is to model the state of <em>chance</em>.<br>A lottery $L$ with outcomes $S_1,S_2,â€¦,S_n$ that occur with probabilities $p_1,p_2,â€¦,p_n$ is denoted as:</p>
<script type="math/tex; mode=display">L=[p_1,S_1;p_2,S_2;...p_n,S_n]</script><p>Each of the outcome $S_i$ can be an atomic state or another lottery(another probability).</p>
<h1 id="Axioms-of-Utility-theory"><a href="#Axioms-of-Utility-theory" class="headerlink" title="Axioms of Utility theory"></a>Axioms of Utility theory</h1><h2 id="Axiom-1-Orderability-or-Completeness"><a href="#Axiom-1-Orderability-or-Completeness" class="headerlink" title="Axiom 1: Orderability or Completeness"></a>Axiom 1: Orderability or Completeness</h2><p>Given any 2 outcomes $A,B\in S$, exactly one of the following holds:<br>$ğ´&gt;B$, $B&gt;A$ and $A\sim B$. </p>
<h2 id="Axiom-2-Transitivity"><a href="#Axiom-2-Transitivity" class="headerlink" title="Axiom 2: Transitivity"></a>Axiom 2: Transitivity</h2><p>If the agent prefers $A$ to $B$ and $B$ to $C$, then the agent must prefer $A$ to $C$(Similarly for $\sim$):</p>
<script type="math/tex; mode=display">(A>B)\wedge (B>C)\Rightarrow A>C</script><script type="math/tex; mode=display">(A\sim B)\wedge (B\sim C)\Rightarrow A\sim C</script><p><em>If the order is circle, the transitivity is broken, and the agent is behaving irrationally.</em><br><em>Group preference may be non-transitive, studied in social choice theory</em></p>
<h2 id="Axiom-3-Continuity"><a href="#Axiom-3-Continuity" class="headerlink" title="Axiom 3: Continuity"></a>Axiom 3: Continuity</h2><p>If $B$ is in between $A$ and $C$ in preference, there must be a probability $p$, such that the agent is indifferent to:</p>
<script type="math/tex; mode=display">A>B>C\Rightarrow\exists p [p,A;(1-p),C]\sim B</script><h2 id="Axiom-4-Substitutability"><a href="#Axiom-4-Substitutability" class="headerlink" title="Axiom 4: Substitutability"></a>Axiom 4: Substitutability</h2><p>If an agent is indifferent between two lotteries $A$ and $B$, the agent is indifferent to two complex lotteries that are the same, except $B$ is substituted for $A$ in one of the (Similarly for preference):</p>
<script type="math/tex; mode=display">A\sim B\Rightarrow [p,A;(1-p),C]\sim [p,B;(1-p),C]</script><h2 id="Axiom-5-Monotonicity"><a href="#Axiom-5-Monotonicity" class="headerlink" title="Axiom 5: Monotonicity"></a>Axiom 5: Monotonicity</h2><p>Prefer higher probability of getting prefered outcome:</p>
<script type="math/tex; mode=display">A>B\Rightarrow ((p>q)\Leftrightarrow [p,A;(1-p),B]>[q,A;(1-q),B])</script><h2 id="Axiom-6-Decomposability"><a href="#Axiom-6-Decomposability" class="headerlink" title="Axiom 6: Decomposability"></a>Axiom 6: Decomposability</h2><p>Compound lotteries can be reduced to simpler ones using laws of probability:</p>
<script type="math/tex; mode=display">[p,A;(1-p),[q,B;(1-q),C]]\sim [p,A;(1-p)q,B;(1-p)(1-q)C]</script><p><img src="/images/CS5446/Decomposability.png" alt="Decomposability"></p>
<h1 id="Axioms-to-consequence"><a href="#Axioms-to-consequence" class="headerlink" title="Axioms to consequence"></a>Axioms to consequence</h1><ol>
<li><p>Existence of Utility function<br>If agentâ€™s preferences obey the axioms of utility, then there exists a function ğ‘ˆ such that, for any two lotteries ğ´ and ğµ:</p>
<script type="math/tex; mode=display">U(A)>U(B)\Leftrightarrow A>B</script><script type="math/tex; mode=display">U(A)\sim U(B)\Leftrightarrow A\sim B</script></li>
<li><p>Expected Utility of a lottery<br>The utility of a lottery is the expected value of the utilities of the outcomes:</p>
<script type="math/tex; mode=display">U([p_1,S_1;...;p_n,S_n])=\sum_ip_iU(S_i)</script></li>
<li><p>Acting Rationally<br>The agent acts rationally, i.f.f. it chooses the action that <strong>maximizes the expected utility</strong>.<br>Agentâ€™s behavior doesnâ€™t change if $U$ is subjected to an <em>affine transformation</em>: $Uâ€™(s)=aU(s)+b$ with $a&gt;0$.</p>
</li>
</ol>
<p><em>An affine transformation is any transformation that preserves collinearity (i.e., all points lying on a line initially still lie on a line after transformation) and ratios of distances (e.g., the midpoint of a line segment remains the midpoint after transformation).</em></p>
<h1 id="Rational-agent"><a href="#Rational-agent" class="headerlink" title="Rational agent"></a>Rational agent</h1><p><strong>Maximum Expected Utility</strong>: Rational agent should choose the action that maximized its expected utility:</p>
<script type="math/tex; mode=display">\arg\max_a EU(a|e)=\arg\max_a \sum_{s'}P(Result(a)=s'|a,e)U(s')</script><p>Human Irrationality:<br>Decision theory is normative â€“ describe how ration agent should act.<br>Descriptive theory â€“ describe how humans actually act.</p>
]]></content>
      <categories>
        <category>AI Planning and Decision Making</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI Planning</tag>
      </tags>
  </entry>
  <entry>
    <title>Decision Theory 2</title>
    <url>/2021/02/10/AI_Decision_Theory_2/</url>
    <content><![CDATA[<h1 id="Decision-Networks"><a href="#Decision-Networks" class="headerlink" title="Decision Networks"></a>Decision Networks</h1><p>Essentially, decision networks are extensions of Bayesian networks.<br>Bayesian networks decrease the number of variables leading to the result.<br>Decision Networks (aka. influence diagrams) is to combine BN with <strong>action and utility nodes</strong> to figure out how to get a specific result.<br><a id="more"></a><br><img src="/images/CS5446/DecisionNetwork.png" alt="Decision Network"><br>A simplified form is to eliminate chance nodes that represent outcome state, which means that action node and current state are directly connected to the utility node.<br>Utility node represents the expected utility associated with each action and is then associated with the action-utility function or ğ‘„-function(Q: quality of action)<br>In this lecture we view Probability Inference(refer to Uncertainty in AI) as a black box and use tool to solve it.</p>
<h1 id="Value-of-information"><a href="#Value-of-information" class="headerlink" title="Value of information"></a>Value of information</h1><p>Assume exact evidence can be obtained about variable $E_j$;<br>To compute <strong>value of perfect information (VPI)</strong>:</p>
<ol>
<li>Given current evidence $e$, expected utility with current best action $a$:<script type="math/tex; mode=display">EU(a|e)=\max_a\sum_{s'}P(Result(a)=s'|a,e)U(s')</script></li>
<li>Value of the best new action after $E_j=e_j$ is obtained:<script type="math/tex; mode=display">EU(a_{e_j}|e,e_j)=\max_a\sum_{s'}P(Result(a)=s'|a,e,e_j)U(s')</script></li>
<li>Variable $E_j$ can take multiple values $e_{jk}$, so on averaging:<script type="math/tex; mode=display">VPI_e(E_j)=\sum_k P(E_j=e_{jk}|e)EU(a_{e_{jk}}|e,e_{jk})-EU(a|e)</script></li>
</ol>
<p>Proporties:</p>
<ul>
<li><p>Expected value of information is always non-negative:</p>
<script type="math/tex; mode=display">\forall e,e_j\quad VPI_e(E_j)\geq 0</script></li>
<li><p>VPI is not additive:</p>
<script type="math/tex; mode=display">VPI_e(E_j,E_k)\neq VPI_e(E_j) + VPI_e(E_k)</script></li>
<li><p>VPI is order independent:</p>
<script type="math/tex; mode=display">VPI_e(E_j,E_k)= VPI_e(E_j) + VPI_{e,e_j}(E_k)= VPI_e(E_k) + VPI_{e,e_k}(E_j)</script></li>
</ul>
<h1 id="Design-a-new-agent"><a href="#Design-a-new-agent" class="headerlink" title="Design a new agent"></a>Design a new agent</h1><p>Agent should gather information before taking actions, if possible.<br><img src="/images/CS5446/ChooseInfo.png" alt="Choose Infomation"></p>
]]></content>
      <categories>
        <category>AI Planning and Decision Making</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI Planning</tag>
      </tags>
  </entry>
  <entry>
    <title>Markov Decision Process</title>
    <url>/2021/02/17/AI_Markov_Decision_Processes/</url>
    <content><![CDATA[<h1 id="Sequential-decision-problems"><a href="#Sequential-decision-problems" class="headerlink" title="Sequential decision problems"></a>Sequential decision problems</h1><p>Deals with fully observable and partially observable cases.<br>Markovian assumption: Probability depends only on current state $s$ not the history of earlier states.<br>Markov decision process (MDP): A sequential decision problem for a fully observable stochastic environment with Markovian transition and additive rewards.</p>
<a id="more"></a>
<p>MDP: $(S, A, T, R)$<br>A set of states, $S$, with initial state $s_0$<br>A set of actions, $A$<br>A transition model, $T$, defined by $P(sâ€™|s,a)$, outcomes of actions are stochastic.<br>A reward function, $R(s)$ (sometimes, more generally: $R(s,a,aâ€™)$, Utility function depends on sequence of states while each state has a corresponding reward ğ‘…(ğ‘ )</p>
<p>Policy($\pi (s)$) is a solution to MDP(<em>a function from state to action</em>) and <strong>is not unique</strong>. It is a mapping given whatever state in a system and output appropriate actions.<br>The difference is how good these policies are(quality of the policy): measured by the <strong>expected return</strong>(Expected utility of possible state sequence generated by the policy).<br>Optimal policy $\pi^{*}$: policy that generates highest expected utility.</p>
<h1 id="Ways-to-evaluate"><a href="#Ways-to-evaluate" class="headerlink" title="Ways to evaluate"></a>Ways to evaluate</h1><p><strong>Finite horizon</strong>: </p>
<ul>
<li>fixed time $N$ and terminate,</li>
<li>return is usually the addition of rewards over the sequence:<script type="math/tex; mode=display">U_h([s_0,s_1,...,s_N])=R(s_0)+R(s_1)+...+R(s_N)</script></li>
<li>optimal action at a state can change depending on how many steps remain,</li>
<li>optimal policy is <strong>non-stationary</strong>.</li>
</ul>
<p><strong>Infinite horizon</strong>:</p>
<ul>
<li>no fixed time limit,</li>
<li>optimal action depends only current state: <strong>stationary</strong>.</li>
<li>comparing utilities are difficult: utilities can be infinite.</li>
<li><strong>discounted rewards</strong>: (bounded by $\pm R_{max}$)<script type="math/tex; mode=display">U_h([s_0,s_1,...,s_N])=R(s_0)+\gamma R(s_1)+\gamma^2R(s_2)+...</script><script type="math/tex; mode=display">U_h([s_0,s_1,...,s_N])=\sum_{t=1}^{\infty}\gamma^tR(s_t)\leq\sum_{t=1}^{\infty}\gamma^tR_{max}=\frac{R_{max}}{1-\gamma}</script></li>
<li><strong>Expected utility</strong> of executing $\pi$ starting from $s$:<script type="math/tex; mode=display">U^{\pi}(s)=E[\sum_{t=1}^{\infty}\gamma^tR_{t}]</script>Optimal policy:<script type="math/tex; mode=display">\pi_s^{*}=\arg\max_{\pi}U^{\pi}(s)</script>Number of policies $\pi$ is finite if the number of states is finite.<br>$n$ states and $a$ actions lead to $a^n$ policies.</li>
</ul>
<h1 id="Value-function"><a href="#Value-function" class="headerlink" title="Value function"></a>Value function</h1><p><strong>Value of optimal policy is called value function $U^{\pi^{*}}(s)$</strong><br>Given the value function, we can compute an optimal policy as:</p>
<script type="math/tex; mode=display">\pi^{*}(s)=\arg\max_{a\in A(s)}\sum_{s'}P(s'|s,a)U(s')</script><h1 id="Value-iteration"><a href="#Value-iteration" class="headerlink" title="Value iteration"></a>Value iteration</h1><p>What if the agent performs suboptimally on purpose? Is the agent still rational? (eg. taking longer route to reduce the probability of utility loss)<br><strong>State variables</strong>: factorced representation, each variable can have various values;<br><strong>State</strong>: atomic representation, each variable is set to be a specific value. A state is an assignment of state variable.</p>
<p>Fixed point algorithm: run the algorithms many times and it will finally converge to a fixed result.</p>
<p>If apply an operator to a function, it will be updated to another function.</p>
<p>The algorithm comes to an end when the utility function no longer update.</p>
<p>All MDP can be solved by value iteration in theory, but in practice if there are too many states it cannot be solved.</p>
<h1 id="Policy-iteration"><a href="#Policy-iteration" class="headerlink" title="Policy iteration"></a>Policy iteration</h1><p>Compared to Bellman: no $max$ â€” linear equations</p>
<p>â€œone-step look aheadâ€ to update the policyâ€™s action</p>
<h1 id="Improving-policy-iteration"><a href="#Improving-policy-iteration" class="headerlink" title="Improving policy iteration"></a>Improving policy iteration</h1><h2 id="Modified-policy-iteration"><a href="#Modified-policy-iteration" class="headerlink" title="Modified policy iteration"></a>Modified policy iteration</h2><p>Do only $k$ iterations instead of going to convergence.<br>Evaluate approximately.</p>
<h2 id="Asynchronous-policy-iteration"><a href="#Asynchronous-policy-iteration" class="headerlink" title="Asynchronous policy iteration"></a>Asynchronous policy iteration</h2><p>Pick only a subset of states for either policy improvement or for updating in policy evaluation.<br>Converges as long as we continuously update all states.</p>
<h2 id="Generalized-policy-iteration-a-general-scheme-of-solution"><a href="#Generalized-policy-iteration-a-general-scheme-of-solution" class="headerlink" title="Generalized policy iteration (a general scheme of solution)"></a>Generalized policy iteration (a general scheme of solution)</h2><p>Update value according to policy, and improve policy WRT the value function.<br>VI, PI, Async-PI are all special cases of GPI.</p>
<h1 id="Online-search"><a href="#Online-search" class="headerlink" title="Online search"></a>Online search</h1>]]></content>
      <categories>
        <category>AI Planning and Decision Making</category>
      </categories>
      <tags>
        <tag>NUS note</tag>
        <tag>AI Planning</tag>
      </tags>
  </entry>
  <entry>
    <title>Student Performance Analysis</title>
    <url>/2021/02/12/Info_Vis_A0/</url>
    <content><![CDATA[<p>This Student Performance dataset includes scores from three exams and a variety of personal, social, and economic factors that have interaction effects upon them.<br>Data source: <a href="http://roycekimmons.com/tools/generated_data/exams">http://roycekimmons.com/tools/generated_data/exams</a><br><a id="more"></a><br>Data samples:<br><img src="/images/CS5346/StudentPerformance/table_sample.png" alt="table_sample.png"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> Bar</span><br><span class="line"></span><br><span class="line">color = sns.color_palette()</span><br><span class="line">SP = pd.read_csv(<span class="string">"StudentsPerformance.csv"</span>)</span><br></pre></td></tr></table></figure>
<p>Purpose of visualization:</p>
<h1 id="How-effective-is-the-test-preparation-course"><a href="#How-effective-is-the-test-preparation-course" class="headerlink" title="How effective is the test preparation course?"></a>How effective is the test preparation course?</h1><p>(x, y) represents the proportion(y) of the number of people with this score(x) to the total number of people with/without test preparation.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">prep_none = SP.loc[SP[<span class="string">'test preparation course'</span>] == <span class="string">'none'</span>]</span><br><span class="line">prep = SP.loc[SP[<span class="string">'test preparation course'</span>] == <span class="string">'completed'</span>]</span><br><span class="line"></span><br><span class="line">bar0 = Bar(<span class="string">"Test Preparation Efficiency"</span>, <span class="string">"Math"</span>)</span><br><span class="line">bar0.add(<span class="string">"none"</span>, prep_none[<span class="string">'math score'</span>].value_counts().sort_index().index,</span><br><span class="line">         prep_none[<span class="string">'math score'</span>].value_counts().sort_index().values / len(prep_none[<span class="string">'math score'</span>]))</span><br><span class="line">bar0.add(<span class="string">"completed"</span>, prep[<span class="string">'math score'</span>].value_counts().sort_index().index,</span><br><span class="line">         prep[<span class="string">'math score'</span>].value_counts().sort_index().values / len(prep[<span class="string">'math score'</span>]))</span><br><span class="line">bar0.render(<span class="string">"1-prep2math.html"</span>)</span><br></pre></td></tr></table></figure><br><img src="/images/CS5346/StudentPerformance/1_Test_math.png" alt="1_Test_math.png"><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">bar1 = Bar(<span class="string">"Test Preparation Efficiency"</span>, <span class="string">"Reading"</span>)</span><br><span class="line">bar1.add(<span class="string">"none"</span>, prep_none[<span class="string">'reading score'</span>].value_counts().sort_index().index,</span><br><span class="line">         prep_none[<span class="string">'reading score'</span>].value_counts().sort_index().values / len(prep_none[<span class="string">'reading score'</span>]))</span><br><span class="line">bar1.add(<span class="string">"completed"</span>, prep[<span class="string">'reading score'</span>].value_counts().sort_index().index,</span><br><span class="line">         prep[<span class="string">'reading score'</span>].value_counts().sort_index().values / len(prep[<span class="string">'reading score'</span>]))</span><br><span class="line">bar1.render(<span class="string">"1-prep2reading.html"</span>)</span><br></pre></td></tr></table></figure><br><img src="/images/CS5346/StudentPerformance/1_Test_reading.png" alt="1_Test_reading.png"><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">bar2 = Bar(<span class="string">"Test Preparation Efficiency"</span>, <span class="string">"Writing"</span>)</span><br><span class="line">bar2.add(<span class="string">"none"</span>, prep_none[<span class="string">'writing score'</span>].value_counts().sort_index().index,</span><br><span class="line">         prep_none[<span class="string">'writing score'</span>].value_counts().sort_index().values / len(prep_none[<span class="string">'writing score'</span>]))</span><br><span class="line">bar2.add(<span class="string">"completed"</span>, prep[<span class="string">'writing score'</span>].value_counts().sort_index().index,</span><br><span class="line">         prep[<span class="string">'writing score'</span>].value_counts().sort_index().values / len(prep[<span class="string">'writing score'</span>]))</span><br><span class="line">bar2.render(<span class="string">"1-prep2writing.html"</span>)</span><br></pre></td></tr></table></figure><br><img src="/images/CS5346/StudentPerformance/1_Test_writing.png" alt="1_Test_writing.png"></p>
<p>These histograms show that test preparation courses do not play a big role in overall scores, but they do help people to get high scores(100) in reading and writing. </p>
<h1 id="What-is-the-distribution-of-parent-level-of-education-and-how-they-contribute-to-studentsâ€™-scores"><a href="#What-is-the-distribution-of-parent-level-of-education-and-how-they-contribute-to-studentsâ€™-scores" class="headerlink" title="What is the distribution of parent level of education and how they contribute to studentsâ€™ scores?"></a>What is the distribution of parent level of education and how they contribute to studentsâ€™ scores?</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.rcParams[<span class="string">'figure.figsize'</span>] = (<span class="number">15</span>, <span class="number">9</span>)</span><br><span class="line">sns.countplot(SP[<span class="string">'parental level of education'</span>], palette=<span class="string">'RdPu'</span>)</span><br><span class="line">plt.title(<span class="string">'Comparison of Parental Education'</span>, fontweight=<span class="number">30</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Degree'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'count'</span>)</span><br><span class="line">plt.savefig(<span class="string">"2-EducationLevel.png"</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.clf()</span><br></pre></td></tr></table></figure>
<p><img src="/images/CS5346/StudentPerformance/2-EducationLevel.png" alt="EducationLevel.png"><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getgrade</span><span class="params">(score)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> score &gt;= <span class="number">90</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&gt;=90'</span></span><br><span class="line">    <span class="keyword">if</span> score &gt;= <span class="number">80</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'80~90'</span></span><br><span class="line">    <span class="keyword">if</span> score &gt;= <span class="number">70</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'70~80'</span></span><br><span class="line">    <span class="keyword">if</span> score &gt;= <span class="number">60</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'60~70'</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Fail'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sns.countplot(x=SP[<span class="string">'parental level of education'</span>], data=SP, hue=SP.apply(<span class="keyword">lambda</span> x: getgrade(x[<span class="string">'math score'</span>]), axis=<span class="number">1</span>),</span><br><span class="line">              palette=<span class="string">'Reds'</span>)</span><br><span class="line">plt.title(<span class="string">'Parent Education vs Math Scores'</span>, fontsize=<span class="number">20</span>, fontweight=<span class="number">30</span>)</span><br><span class="line">plt.savefig(<span class="string">"2-Education2Math.png"</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.clf()</span><br><span class="line"></span><br><span class="line">sns.countplot(x=SP[<span class="string">'parental level of education'</span>], data=SP,</span><br><span class="line">              hue=SP.apply(<span class="keyword">lambda</span> x: getgrade(x[<span class="string">'reading score'</span>]), axis=<span class="number">1</span>), palette=<span class="string">'Blues'</span>)</span><br><span class="line">plt.title(<span class="string">'Parent Education vs Reading Scores'</span>, fontsize=<span class="number">20</span>, fontweight=<span class="number">30</span>)</span><br><span class="line">plt.savefig(<span class="string">"2-Education2Reading.png"</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.clf()</span><br><span class="line"></span><br><span class="line">sns.countplot(x=SP[<span class="string">'parental level of education'</span>], data=SP,</span><br><span class="line">              hue=SP.apply(<span class="keyword">lambda</span> x: getgrade(x[<span class="string">'writing score'</span>]), axis=<span class="number">1</span>), palette=<span class="string">'Set2'</span>)</span><br><span class="line">plt.title(<span class="string">'Parent Education vs Writing Scores'</span>, fontsize=<span class="number">20</span>, fontweight=<span class="number">30</span>)</span><br><span class="line">plt.savefig(<span class="string">"2-Education2Writing.png"</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.clf()</span><br></pre></td></tr></table></figure><br><img src="/images/CS5346/StudentPerformance/2-Education2Math.png" alt="Education2Math.png"><br><img src="/images/CS5346/StudentPerformance/2-Education2Reading.png" alt="Education2Reading.png"><br><img src="/images/CS5346/StudentPerformance/2-Education2Writing.png" alt="Education2Writing.png"><br>Most of parents have degree from college or high school, only a few parents have bachelorâ€™s or masterâ€™s degrees. Students whose parents have bachelorâ€™s or masterâ€™s degrees are less likely to fail the class.</p>
<h1 id="What-are-the-statistical-characteristics-of-each-subjectâ€™s-scores-and-the-distribution-of-total-score"><a href="#What-are-the-statistical-characteristics-of-each-subjectâ€™s-scores-and-the-distribution-of-total-score" class="headerlink" title="What are the statistical characteristics of each subjectâ€™s scores and the distribution of total score?"></a>What are the statistical characteristics of each subjectâ€™s scores and the distribution of total score?</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.rcParams[<span class="string">'figure.figsize'</span>] = (<span class="number">15</span>, <span class="number">9</span>)</span><br><span class="line">colorDic = dict(boxes=<span class="string">'DarkGreen'</span>, whiskers=<span class="string">'DarkOrange'</span>, medians=<span class="string">'DarkBlue'</span>, caps=<span class="string">'Gray'</span>)</span><br><span class="line">SP.plot(kind=<span class="string">'box'</span>, color=colorDic, sym=<span class="string">'r+'</span>, vert=<span class="literal">False</span>)</span><br><span class="line">plt.title(<span class="string">'Comparison of Scores'</span>, fontweight=<span class="number">30</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.savefig(<span class="string">"3-Scores_box.png"</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.clf()</span><br></pre></td></tr></table></figure>
<p><img src="/images/CS5346/StudentPerformance/3-Scores_box.png" alt="Education2Writing.png"><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.rcParams[<span class="string">'figure.figsize'</span>] = (<span class="number">15</span>, <span class="number">9</span>)</span><br><span class="line">SP.hist([<span class="string">'math score'</span>, <span class="string">'reading score'</span>, <span class="string">'writing score'</span>], ec=<span class="string">'black'</span>, grid=<span class="literal">False</span>, color=<span class="string">'slategrey'</span>)</span><br><span class="line">plt.savefig(<span class="string">"3-Scores_hist.png"</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.clf()</span><br></pre></td></tr></table></figure><br><img src="/images/CS5346/StudentPerformance/3-Scores_hist.png" alt="Education2Writing.png"><br>The highest scores in three subjects are 100. Median of writing and reading is around 72 while median of math score is around 66. 25% - 75% scores are in range of 56/58 to 78/80.<br>The distribution of each subject scores can be approximated to the normal distribution.</p>
<h1 id="What-is-the-hidden-relationship-among-studentsâ€™-performance-in-various-subjects"><a href="#What-is-the-hidden-relationship-among-studentsâ€™-performance-in-various-subjects" class="headerlink" title="What is the hidden relationship among studentsâ€™ performance in various subjects?"></a>What is the hidden relationship among studentsâ€™ performance in various subjects?</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.rcParams[<span class="string">'figure.figsize'</span>] = (<span class="number">15</span>, <span class="number">9</span>)</span><br><span class="line">SP.plot.scatter(x=<span class="string">'math score'</span>, y=<span class="string">'reading score'</span>, c=<span class="string">'writing score'</span>, colormap=<span class="string">'viridis'</span>)</span><br><span class="line">plt.savefig(<span class="string">"4-Relationship.png"</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.clf()</span><br></pre></td></tr></table></figure>
<p><img src="/images/CS5346/StudentPerformance/4-Relationship.png" alt="Relation.png"><br>We can see from the scatter plot combined with heat map that the performance of each student in the three courses is very similar, and there is no obvious biased student. Most students pass all three courses. Students with high reading scores also have high writing scores, but their math scores are not necessarily as high. There are more people with a score of 80 or higher in reading and writing than in math.  </p>
<h1 id="How-does-gender-and-race-influence-to-each-subject"><a href="#How-does-gender-and-race-influence-to-each-subject" class="headerlink" title="How does gender and race influence to each subject?"></a>How does gender and race influence to each subject?</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sns.countplot(x=SP[<span class="string">'gender'</span>], data=SP,</span><br><span class="line">              hue=SP.apply(<span class="keyword">lambda</span> x: getgrade((x[<span class="string">'math score'</span>] + x[<span class="string">'reading score'</span>] + x[<span class="string">'writing score'</span>]) / <span class="number">3</span>), axis=<span class="number">1</span>),</span><br><span class="line">              palette=<span class="string">'pastel'</span>)</span><br><span class="line">plt.title(<span class="string">'Gender vs Average Scores'</span>, fontsize=<span class="number">20</span>, fontweight=<span class="number">30</span>)</span><br><span class="line">plt.savefig(<span class="string">"5-Gender2Ave.png"</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.clf()</span><br></pre></td></tr></table></figure>
<p><img src="/images/CS5346/StudentPerformance/5-Gender2Ave.png" alt="Gender2Ave.png"><br>This histogram shows that the average score of female is higher than that of male, and the proportion of male who drop out of courses is greater than female.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sns.countplot(x=SP[<span class="string">'race/ethnicity'</span>], data=SP,</span><br><span class="line">              hue=SP.apply(<span class="keyword">lambda</span> x: getgrade((x[<span class="string">'math score'</span>] + x[<span class="string">'reading score'</span>] + x[<span class="string">'writing score'</span>]) / <span class="number">3</span>), axis=<span class="number">1</span>),</span><br><span class="line">              palette=<span class="string">'husl'</span>)</span><br><span class="line">plt.title(<span class="string">'Race/Ethnicity vs Average Scores'</span>, fontsize=<span class="number">20</span>, fontweight=<span class="number">30</span>)</span><br><span class="line">plt.savefig(<span class="string">"5-Race2Ave.png"</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.clf()</span><br></pre></td></tr></table></figure><br><img src="/images/CS5346/StudentPerformance/5-Race2Ave.png" alt="Race2Ave.png"><br>Group C has a higher proportion of failing the sources in average while group E are more likely to get a nice score (&gt;=90).</p>
]]></content>
      <categories>
        <category>Information Visualization</category>
      </categories>
      <tags>
        <tag>Information Visualization</tag>
      </tags>
  </entry>
  <entry>
    <title>Mixture of Experts (MoE)</title>
    <url>/2021/02/18/DL_Mixture%20_of_Experts/</url>
    <content><![CDATA[<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Simply increasing the number of parameters may have a negative impact on the performance.<br>Question is: how to scale the model effectively?<br>eg. Switch-Transformer(1.6T parameters)<br>The core framework is <strong>Mixture of Experts</strong>.<br><a id="more"></a></p>
<p>Conditional computation: word embedding(transfer a high-dimensional vector to a low-dimensional vector)<br>The goal is to increase model capacity without a proportional increase in conputational costs.</p>
<h1 id="Sparsely-Gated-MoE-for-LSTM"><a href="#Sparsely-Gated-MoE-for-LSTM" class="headerlink" title="Sparsely-Gated MoE for LSTM"></a>Sparsely-Gated MoE for LSTM</h1><p>MoE layer has n expert networks $E_1,â€¦,E_n$, each has its own parameters.<br>$G(x)$: output of the gating network, a sparse n-dimensional vector.<br>$E_i(x)$: output of the $i^{th}$ expert network.<br>Wherever $G(x)_i$ = 0, we donâ€™t need to compute $E_i(x)$.</p>
<ul>
<li>Idea of conditional computation.</li>
<li>We can have up to thousands of experts, but only need to evaluate a few of them for every example.<br><img src="/images/nndl2/moe.png" alt="MixtureOfExperts"><br>Gating networks:</li>
</ul>
<ol>
<li>Softmax Gating: a simple choice of non-sparse function</li>
<li>Noisy Top-K Gating: sparsity(save computation) and noise(helps with load balancing)<br><img src="/images/nndl2/TopKgating.png" alt="Top-K Gating"><br><strong>Load-Unbalanced Issue</strong><br>Some experts have too many tasks, other experts are idle.</li>
</ol>
<ul>
<li>The systemâ€™s speed will be limited by the slowest expert(the busiest expert), which is a very serious issue on distributed systems.</li>
<li>The gating network tends to converge to a state where it always produces large weights for the same few experts.</li>
<li>The load-imbalance is <em>self-reinforcing</em>: the favored experts are trained more rapidly and thus are selected even more by the gating network.</li>
</ul>
<p><img src="/images/nndl2/moe_loss.png" alt="moe_loss"></p>
<h1 id="Why-Transformers"><a href="#Why-Transformers" class="headerlink" title="Why Transformers?"></a>Why Transformers?</h1><p>Many researchers are using transformer to replace LSTM.<br>Transformer: Encoder &amp; Decoder</p>
<h1 id="Sparsely-Gated-MoE-for-Transformers"><a href="#Sparsely-Gated-MoE-for-Transformers" class="headerlink" title="Sparsely-Gated MoE for Transformers"></a>Sparsely-Gated MoE for Transformers</h1>]]></content>
      <categories>
        <category>Neural Network and Deep Learning 2</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>NUS note</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>Object_detection</title>
    <url>/2021/02/18/Object_detection/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>é¢è¯•å‡†å¤‡</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>ML</tag>
      </tags>
  </entry>
  <entry>
    <title>LSTM VS Transformer</title>
    <url>/2021/02/18/LSTM%20VS%20Transformer/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>é¢è¯•å‡†å¤‡</category>
      </categories>
      <tags>
        <tag>NN</tag>
        <tag>ML</tag>
      </tags>
  </entry>
</search>
